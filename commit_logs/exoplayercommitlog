commit 1b66908f7d79b6891d8d99705470797640457e72
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Nov 27 01:50:47 2017 -0800

    Update version strings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176989632

commit e7c60a2a234ab11bc75335453a7836fef9509610
Merge: ab6f9ae 3562fe1
Author: ojw28 <olly@google.com>
Date:   Thu Nov 23 17:22:35 2017 +0000

    Merge pull request #3493 from google/dev-v2-r2.6.0
    
    r2.6.0

commit 3562fe1c69c8a085ff5c92449a6d4b2ff95a133e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 22 20:38:53 2017 +0000

    SampleStream fixes

commit 75b90625839a548124d2f90788b790b3bcd21579
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 22 18:06:14 2017 +0000

    Send discontinuity at adjustments after shuffle/repeat mode changes.

commit 56c1c3f6a724b62ccb624148e2c892a4ef9519bf
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 22 17:59:36 2017 +0000

    Revert "Make ExtractorMediaSource timeline dynamic until duration is set"
    
    This reverts commit b688a562508e74721841aaaa770e9dc47bd378dd.

commit 74569bba450cc91b21771361f5e323b12ed1227b
Author: olly <olly@google.com>
Date:   Mon Nov 20 09:35:01 2017 -0800

    Don't do work after track selection when in ended state
    
    This causes the player to report that it's started loading
    when in the ended state.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176371892

commit fa3052d36b78455c80ce7b23e6526edc092b0561
Author: olly <olly@google.com>
Date:   Mon Nov 20 08:56:23 2017 -0800

    Report additional position discontinuities
    
    - Properly report internal discontinuities
    - Add DISCONTINUITY_REASON_SEEK_ADJUSTMENT to distinguish
      seek adjustments from other internal discontinuity events
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176367365

commit b688a562508e74721841aaaa770e9dc47bd378dd
Author: olly <olly@google.com>
Date:   Tue Nov 21 04:46:52 2017 -0800

    Make ExtractorMediaSource timeline dynamic until duration is set
    
    We (eventually - albeit possibly infinitely far in the future)
    expect a timeline update with a window of known duration. This
    also stops live radio stream playbacks transitioning to ended
    state when their tracks are disabled.
    
    As part of this fix, I found an issue where getPeriodPosition
    could return null even when defaultPositionProjectionUs is 0,
    which is not as documented.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176492024

commit d51944f4b3fe9586c542e4aec4d3d5c7d81d83a2
Author: olly <olly@google.com>
Date:   Tue Nov 21 03:44:06 2017 -0800

    Remove unnecessary dependency
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176487991

commit 60555e2c4b6d74f1276ae30b6524174ac8ee2365
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Nov 20 08:42:34 2017 -0800

    Improve robustness of ImaAdsLoader
    
    Remove an assertion that there was a call to pause content between two
    content -> ad transitions.
    
    Also, only use the player position for resuming an ad on reattaching if the
    player is currently playing an ad, in case IMA pauses content before the player
    actually transitions to an ad.
    
    Issue: #3430
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176365842

commit 1439b4a3ef5a31f15553db30071177c115ea12f5
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 21 13:42:12 2017 +0000

    Mini cleanup

commit 494237548ada77c3dc56e98fc25dd2c479c7f7d5
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Tue Nov 21 10:59:04 2017 +0000

    Fix initializationData check for SSA subtitles

commit e469269f3c45e6c11737512447ccea6d95f505be
Author: olly <olly@google.com>
Date:   Mon Nov 20 03:36:50 2017 -0800

    Fix some lint issues.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176337058

commit 8940e7b32a188be36f68e244dddbe66456884e66
Author: eguven <eguven@google.com>
Date:   Fri Nov 17 06:33:32 2017 -0800

    Replace hard coded UUID in OfflineLicenseHelper with a parameter
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=176102179

commit 0a8d2423851a8b96f6d4c19005b01aec21d5bd2b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 17 19:34:27 2017 +0000

    Amend release notes for 2.6.0 release

commit be0648541fe4d7cd2c8b44d57822a379c381a7db
Author: tonihei <tonihei@google.com>
Date:   Tue Nov 14 03:01:58 2017 -0800

    Forward ad group and ad index when creating period from concatanted media sources.
    
    Also added tests which verify the intended behaviour.
    
    GitHub:#3452
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175656478

commit a361f9043c9c758da6089871e67a007817765b8f
Author: olly <olly@google.com>
Date:   Mon Nov 13 09:31:52 2017 -0800

    Remove stray TV directory from 2.6.0 release

commit 47a9609d3f449a94d761492600bd575de217ebb3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 17 19:26:55 2017 +0000

    Remove cast extension from 2.6.0 release

commit 444358521c9532f5e98f492f3cd5200d4bffd920
Author: Oliver Woodman <olly@google.com>
Date:   Mon Nov 13 17:28:25 2017 +0000

    Only set shutter color if attr is declared

commit 427fe668552c2659d94c2e99a766dd7d7349090b
Author: nvalletta <nora.valletta@gmail.com>
Date:   Sun Nov 12 14:23:22 2017 -0700

    Add an easy way to set the shutter view background color

commit a573099f93a4a77c7c08f4cb2ee2345446e59b47
Author: yqritc <yqritc@gmail.com>
Date:   Thu Nov 9 10:56:47 2017 +0900

    update bravia workaround more precisely

commit 2c495502e020041cb999c41e92e375d2a2be808d
Author: yqritc <yqritc@gmail.com>
Date:   Wed Nov 8 13:41:04 2017 +0900

    add issue link

commit 2c8c14d647025817db2a70c3b08763f348907dfd
Author: yqritc <yqritc@gmail.com>
Date:   Wed Nov 8 11:01:47 2017 +0900

    add bravia workaround to skip using setOutputSurface in MediaCodec

commit 4ac8680b947f6a2d826d916bc49d4a808ce0ea0f
Author: olly <olly@google.com>
Date:   Mon Nov 13 10:01:30 2017 -0800

    Update 2.6.0 release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175546817

commit 812ecc3c2dc0d451571c91bc589cca2b4b5b25c6
Author: olly <olly@google.com>
Date:   Mon Nov 13 09:35:49 2017 -0800

    Drop the 'r' from release version.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175543465

commit 6e15d5cab7f3de87ca0ef73b5a9974badcdb1711
Author: olly <olly@google.com>
Date:   Mon Nov 13 09:31:52 2017 -0800

    Update moe equivalence
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175542973

commit fbfbe7d6c9313b7a9b8fc26e8483989351336320
Author: eguven <eguven@google.com>
Date:   Thu Nov 9 07:14:21 2017 -0800

    Re-enable index file store at the end of the SimpleCache.initialize()
    
    In the case converting cache files from an earlier version of
    SimpleCache, there is no previous version of the index file. If the app
    doesn't call any SimpleCache methods which would make the index file
    stored before it exists whole data gets lost.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175153650

commit 1331f7adde9b140215ec92b90bea0abcadf94915
Author: tonihei <tonihei@google.com>
Date:   Thu Nov 9 03:14:22 2017 -0800

    Add custom callbacks to allows seeks after dynamic playlist modifications.
    
    These callbacks are executed on the app thread after the corresponding
    timeline update was triggered. This ensures that seek operations see the
    updated timelines and are therefore valid, even if the seek is performed into a
    window which didn't exist before.
    
    GitHub:#3407
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175136187

commit 86c0198c8103aab59a563fcea36ec63468e3d450
Author: olly <olly@google.com>
Date:   Wed Nov 8 08:45:17 2017 -0800

    Don't allow cancelation of non-cancelable loads
    
    Issue: #3441
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175011804

commit e1b3fed5e9a8743e2510c2f9d96af1cbbdece7c6
Author: olly <olly@google.com>
Date:   Wed Nov 8 08:34:20 2017 -0800

    Add default implementations for ExoMediaDrm.* interfaces
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175010595

commit 681a05d004cee9b66b58d0575f8a3d0e241995ba
Author: olly <olly@google.com>
Date:   Wed Nov 8 07:56:16 2017 -0800

    Work around incorrect ClearKey encoding prior to O-MR1
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=175006223

commit 52224944ae90b07c04e44cf18b0e0f05ac8744d8
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Nov 7 07:50:35 2017 -0800

    Fix DefaultHlsExtractorFactory javadoc
    
    Issue:#2748
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174854541

commit 336c697b9de0851f93a5bff07e2f1d67e4be43b1
Author: olly <olly@google.com>
Date:   Tue Nov 7 07:36:45 2017 -0800

    Update 2.6.0 release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174853112

commit 26366f6c8004377d1fff50bafd9af73c3a9b028e
Author: hoangtc <hoangtc@google.com>
Date:   Tue Nov 7 05:22:48 2017 -0800

    Fix an issue with seeking that can lead to STATE_END not delivered.
    
    GitHub: #1897
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174841175

commit 3472eda6dc06841c76c2562fa466782b78f1847e
Author: olly <olly@google.com>
Date:   Tue Nov 7 04:30:48 2017 -0800

    Be more robust against load callback failures
    
    Issue: #2795
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174836960

commit 065091cfe3c73ecb7cbe74a63c19d1216700a35a
Author: tonihei <tonihei@google.com>
Date:   Tue Nov 7 02:51:43 2017 -0800

    Use helper method to disable Renderers.
    
    Removes duplicated code and starts cleaning up handling of media clocks.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174829840

commit 298a66fc0e2fd6c9309b8c526418651673bed5eb
Author: olly <olly@google.com>
Date:   Mon Nov 6 09:21:01 2017 -0800

    Relax parsing of ctts sample deltas
    
    Issue: #3384
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174715851

commit e6e75a536aad6d412dba4d749ea63f91a16726e6
Author: olly <olly@google.com>
Date:   Mon Nov 6 07:03:09 2017 -0800

    Don't use InputStream.available in ContentDataSource
    
    Issue: #3426
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174700804

commit 585e70c139de1f9afa8df5ea6a8be76be7e71dbb
Author: olly <olly@google.com>
Date:   Mon Nov 6 04:02:06 2017 -0800

    Broaden Samsung workaround to API level 25 + J7
    
    Issue: #3257
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174686747

commit b7f13686965fd321699ade8994501103baed1f10
Author: olly <olly@google.com>
Date:   Mon Nov 6 03:37:16 2017 -0800

    Simplify ContentDataSourceTest
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174685374

commit 061bcdd136d5dd7a66f6280a920b9139751ff77c
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 3 10:01:15 2017 -0700

    Allow playback to continue even after SingleSampleMediaPeriod load errors
    
    This prevents users from having to check sideloaded subtitles URLs before
    preparing a SingleSampleMediaSource with it.
    
    Issue:#3140
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174475274

commit c9ede155521ac8da81aa74c2b8ae4c73f27c05b3
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 3 09:36:43 2017 -0700

    Relax string comparison in DASH parseContentProtection
    
    ... by making it case insensitive and null-tolerant for schemeId (as was before
    adding playlist drm data merging).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174472123

commit e4a0e977cd06b945d4faf149908dbeb5aa4e0a55
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 3 16:23:21 2017 +0000

    Remove DownloadManager test

commit 069466988ff0c07e4b698c9fcc04ac14dac3f26d
Author: olly <olly@google.com>
Date:   Fri Nov 3 09:00:45 2017 -0700

    Bump to 2.6.0
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174467964

commit 2c7d14cf0f016b6e957681089180d66fa49c8994
Merge: 872cfc1 ab6f9ae
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 3 15:58:09 2017 +0000

    Merge remote-tracking branch 'origin/release-v2' into dev-v2

commit 872cfc131ad1c1746365e5c358a08f63e6ed33a0
Author: eguven <eguven@google.com>
Date:   Fri Nov 3 05:32:00 2017 -0700

    Fix unnecessary CachedContentIndex store() calls
    
    First fix, prevents forced rewriting when cipher is set but encrypt is
    false.
    
    Second, removes the store() call in SimpleCache.initialize() so
    initialization doesn't fail because of CachedContentIndex write issues.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174450586

commit d90d04190e3643435fd4b4a3515cbd9fbe784cc1
Author: olly <olly@google.com>
Date:   Fri Nov 3 05:09:43 2017 -0700

    Allow chunk cancelation only if nothing has been consumed from it.
    
    The mediaChunks.size() > 1 check was supposed to ensure this, and
    did roughly the right thing when there was only a single stream
    (although it was unnecessarily restrictive in preventing chunk
    cancelation for the first chunk, where bytesLoaded != 0 and none
    of the samples had been consumed).
    
    Now we have multiple streams the check doesn't do the right thing,
    and adding a back-buffer feature will make even more incorrect.
    This change switches to checking the condition we actually want
    to check directly :).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174449398

commit b6b09ad40b2151ab40a63e57bbb3a7add36d3e35
Author: olly <olly@google.com>
Date:   Fri Nov 3 04:03:46 2017 -0700

    Automated g4 rollback of changelist 173379623.
    
    *** Reason for rollback ***
    
    Breaks setting PlaybackParameters before start of playback
    
    *** Original change description ***
    
    Add support for float output in DefaultAudioSink
    
    Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174445506

commit 321bc9c24e847e7368edf836854323e3c6f4ce44
Author: eguven <eguven@google.com>
Date:   Thu Nov 2 09:24:50 2017 -0700

    Simplify DownloadService by removing broadcasting
    
    Client can add this functionality by extending DownloadService.
    
    Also made DownloadManager accept multiple listeners. So instead of
    broadcast event, client can listen to DownloadManager directly.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174335820

commit 4cb2be2a4641890ab862c8a1e29fc90d5290753b
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Nov 2 08:14:29 2017 -0700

    Replace Queue with ArrayDequeue in HlsPlaylistParser
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174327876

commit 9abc1d29741b0d2516c8ce6af058517833b63375
Author: olly <olly@google.com>
Date:   Thu Nov 2 07:31:48 2017 -0700

    Don't call Drawable.setLayoutDirection pre-API-23
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174323423

commit 233a1d165f5c2296e39a9b2fe44fc9f8898a0066
Author: olly <olly@google.com>
Date:   Wed Nov 1 11:57:16 2017 -0700

    Explicitly document internal onXError are for reporting only
    
    Issue: #3366
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174214690

commit 3021897383162f1520d12b399f848bdd1a688924
Author: olly <olly@google.com>
Date:   Wed Nov 1 11:54:34 2017 -0700

    Allow multiple listeners on TimeBar
    
    Issue: #3406
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174214296

commit 8c424798c44cebf1a5feafa95de7d4fd34e7c1aa
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Nov 1 08:49:57 2017 -0700

    Fill manifest drm info with media files' pssh when needed
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174185407

commit 46172ffd0f473e1ba7c80f75436371bfdddad965
Author: falhassen <falhassen@google.com>
Date:   Tue Oct 31 12:30:25 2017 -0700

    Preserve original  on redirect with the set-cookie flow.
    
    We need to make sure the original header is retained when we redirect.
    
    I filed a request on Cronet to allow headers to be provided to the UrlRequest#followRedirect method:
    https://bugs.chromium.org/p/chromium/issues/detail?id=779611
    
    Until that API is changed, i.e., pulled into GMSCore, and most clients are using the version of GMSCore with the API change, we can stick with this approach.
    
    FYI
    
    Cronet generally uses the original headers on redirect:
    
    http://[]
    
    but modifies the headers for these special cases:
    
    hhttp://[]
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174074572

commit 72b679166062019a03694d80d549a5f5bea052ee
Author: olly <olly@google.com>
Date:   Tue Oct 31 08:28:06 2017 -0700

    Use resolved position for masking when seeking to C.TIME_UNSET
    
    Also fire onPositionDiscontinuity in this case
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174039483

commit 37d33f58af2889cc8b33b887b4e0ceb67e94ef1a
Author: eguven <eguven@google.com>
Date:   Tue Oct 31 08:01:57 2017 -0700

    Execute DownloadTask threads manually
    
    Instead of using an Executor to run DownloadTasks creates and manages
    threads internally.
    
    Also added DownloadThread internal class to better separate the code
    that doesn't run on the main thread.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174036872

commit 199b983d42e0cf9c3f3eed68f286cd587cef27ca
Author: olly <olly@google.com>
Date:   Tue Oct 31 06:56:47 2017 -0700

    Split PlaybackInfo into its own file
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=174030901

commit f150856567747be1f6995b36a40ca133e57efff0
Author: olly <olly@google.com>
Date:   Mon Oct 30 10:11:00 2017 -0700

    Fix masking step 1
    
    1. Move Timeline/Manifest into PlaybackInfo
    2. Don't update externally visible Timeline/Manifest during preparation
    3. Ignore MSG_POSITION_DISCONTINUITY during preparation
    4. Correctly set masking variables at start of preparation, and use them
    
    Once this change goes in, PlaybackInfo will contain timeline, manifest
    and position, which should always be self-consistent with one another.
    The next step would then be to move a bunch of logic in ExoPlayerImpl
    that derives state from timeline and position into PlaybackInfo, and
    split that into its own top level class that can be easily tested to make
    sure it never IndexOutOfBounds.
    
    I think we could also replace the masking variables and instead just assign
    a new PlaybackInfo to the playbackInfo variable whenever we're doing
    something that requires masking. This should be possible because we no
    longer update playbackInfo whenever we have pending acks. It would
    require allowing PlaybackInfo to mask the window position internally when
    the timeline is empty, but I think this is ok, and again is something we
    could test pretty easily.
    
    Issue: #3362
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173909791

commit 9b9a294fd883b3c535f087b75836d42638ac63ab
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Oct 30 05:20:51 2017 -0700

    Fix javadoc @see for TrimmingAudioProcessor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173877969

commit 8eee7c0d698f030feb612e62fe0776bd17f35922
Author: olly <olly@google.com>
Date:   Mon Oct 30 03:36:48 2017 -0700

    Remove apparently unused field
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173871144

commit 8c793184d908b387a3f6856cc518a4d0ccbaf3cf
Author: olly <olly@google.com>
Date:   Mon Oct 30 03:04:47 2017 -0700

    Fix crash when bad VTT timestamp encountered
    
    Issue: #3396
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173868849

commit d02e1df4b42edaaaae171c0677730bec677fdc58
Author: Oliver Woodman <olly@google.com>
Date:   Fri Oct 27 19:22:59 2017 +0100

    Clean up VideoFrameReleaseTimeHelper

commit eb54da596dc1321675653e595d0170e44135173a
Merge: dd5905a 2081667
Author: ojw28 <olly@google.com>
Date:   Fri Oct 27 18:54:38 2017 +0100

    Merge pull request #3345 from drhill/dev-v2_framerate_switch
    
    make videoframereleasetimehelper get refresh rate when it's enabled, …

commit dd5905a9fba3e5f0005560581e53c0384e42e192
Author: olly <olly@google.com>
Date:   Fri Oct 27 07:33:34 2017 -0700

    Don't query empty timeline for next/previous windows
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173668909

commit 4cf90e32233e135b550673af3b6f1bc2d5dfbb5b
Author: tonihei <tonihei@google.com>
Date:   Fri Oct 27 03:34:50 2017 -0700

    Fix listener in ImaAdsMediaSource.
    
    As MediaSource listeners now return the MediaSource in on SourceInfoRefreshed,
    we need to make sure that media sources wrapping another source don't just
    forward the listener, but also provide a listener wrapper. This allows to
    inject the wrapper source instance in the callback.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173653307

commit 345084b8feb3a6e49f35593564b3857eb5ae7cab
Author: olly <olly@google.com>
Date:   Fri Oct 27 03:15:44 2017 -0700

    Align naming across demo apps.
    
    - Dropped class name prefixes that correspond to whole app name
    - Anything that wraps the player is called PlayerManager
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173652288

commit 30f95cdcac926313cb6840182d596b86cc7f3a03
Author: hdmoon <hdmoon@google.com>
Date:   Fri Oct 27 01:34:58 2017 -0700

    Remove shuffleMode(boolean) usages in ExoPlayer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173645536

commit cd07ff764e42b8485b76952bd796d17fa72fea29
Author: tonihei <tonihei@google.com>
Date:   Fri Oct 27 01:32:17 2017 -0700

    Update gradle tools to 3.0.0 and support library to 27.0.0.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173645345

commit 46bf2540337c20fc51686399dd9f64e356f41900
Author: falhassen <falhassen@google.com>
Date:   Thu Oct 26 06:54:39 2017 -0700

    Add option for handling "Set-Cookie" requests in CronetDataSource.
    
    This time, we avoid using the problematic CookieManager and HttpCookie framework APIs by just forwarding the cookie request only when the client has enabled the feature and the server responds with a "Set-Cookie" response header.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173532023

commit cf38900d20bddbb2dddc245f95ddc39515bc7685
Author: olly <olly@google.com>
Date:   Thu Oct 26 06:03:25 2017 -0700

    Simplify non-main demo apps to not care about multi-window
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173528055

commit 3602a9a7e41d41f76bfd621b88413873086ec154
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 25 09:59:48 2017 -0700

    Allow specifying a Drawable for the TimeBar scrubber
    
    Issue: #3337
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173411321

commit 69e43b6abce57ee344b4e8c9f170075ef5398f3b
Author: falhassen <falhassen@google.com>
Date:   Wed Oct 25 07:42:44 2017 -0700

    Automated g4 rollback of changelist 171999924.
    
    *** Reason for rollback ***
    
    CookieManager APIs are fundamentally broken (b/67951242)
    
    *** Original change description ***
    
    Cookie-based validation in CronetDataSource
    
    Using cookie validation from streamer, streamer can enforce that only clients who have the cookie are able to stream the video.
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173396251

commit 3285851147aecca9645a3722f1850aba8e8592a1
Author: olly <olly@google.com>
Date:   Wed Oct 25 07:00:30 2017 -0700

    Pass prepareAcks in SourceInfo
    
    This makes it a bit more obvious what's going on during
    preparation. In particular, it makes it clear that
    MSG_SOURCE_INFO_REFRESHED arrives before MSG_TRACKS_CHANGED.
    
    Issue: #3362
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173392080

commit 8b3ec4800cd326a60a4baaad1cebffc99d5111e1
Author: eguven <eguven@google.com>
Date:   Wed Oct 25 06:17:28 2017 -0700

    Set cause of the exceptions in AtomicFile.startWrite()
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173388899

commit 3c201a04919a7f2c9a598a4c56fc595052d517ef
Author: olly <olly@google.com>
Date:   Wed Oct 25 04:47:30 2017 -0700

    Pass MediaSource instance through onSourceInfoRefreshed
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173382423

commit 88b6df1d083eeabd783274b17c706cb09ff027e5
Author: olly <olly@google.com>
Date:   Wed Oct 25 04:32:27 2017 -0700

    Disable secure DummySurface on Samsung devices on API level 25
    
    Issue: #3373
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173381588

commit 7c18baa23f399f800e19317891acd1b208936dc0
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 25 04:01:31 2017 -0700

    Add support for float output in DefaultAudioSink
    
    Also switch from using MIME types to C.ENCODING_* encodings in DefaultAudioSink.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173379623

commit ac9233b7f8a6d9ab9214c8a8b1b4ea7860c1a1b8
Author: aravinds <aravinds@google.com>
Date:   Tue Oct 24 20:57:55 2017 -0700

    Update v27.0.0 from git_oc-mr1-release with build id #4399904 & SL from ub-supportlib-27.0 with build id #4397392 to Android stable channel
    
      Branch: git_oc-mr1-release & ub-supportlib-27.0
      Release: 27.0.0
      Build ID: 4399904 & 4397392
      Channel: stable
      Version: 8.1.0
    
      Global presubmit: []
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173351372

commit 5a91a71cd0e144919a4138ea146fb94f96fb6e84
Author: mishaque <mishaque@google.com>
Date:   Tue Oct 24 08:49:16 2017 -0700

    Make CronetDataSource interruptable.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173262660

commit ea764b1b792fd0b1d087ce963dad2c9d63e606f8
Author: olly <olly@google.com>
Date:   Tue Oct 24 06:13:26 2017 -0700

    Fix retry count for live streams in ExtractorMediaPeriod
    
    Also simplify boolean condition in ExtractorMediaSource
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173247443

commit e5e984f4c693eaeb25faaeffe25f1700e8501bd0
Author: olly <olly@google.com>
Date:   Tue Oct 24 02:27:10 2017 -0700

    Re-order events into more of a natural ordering
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173232494

commit 60a81824f58c9bb19021d34e86cef288bce3c7c2
Author: olly <olly@google.com>
Date:   Mon Oct 23 11:41:11 2017 -0700

    Clean up IMA demo
    
    Also do some minor cleanup in other demo apps.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173146425

commit c4f3cad586bf8fc0ee7260058bf8050fb50d3cbf
Author: olly <olly@google.com>
Date:   Mon Oct 23 09:13:44 2017 -0700

    Better behavior if media doesn't support DRM scheme
    
    We don't expect this case to occur, since track selection is
    normally expected to check canAcquireSession before selecting
    a track. Nevertheless, if an attempt is made to acquire a
    session when the media doesn't support the manager's UUID, we
    should fail in a more graceful way.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173124170

commit 3289e3e9cbcee9c00e6c2bde1b473841655ce1de
Author: olly <olly@google.com>
Date:   Mon Oct 23 08:28:30 2017 -0700

    Be robust against provideProvisionResponse throwing unchecked exceptions
    
    Other catch blocks in this class catch everything. This one should
    too.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173118891

commit 43d70bdde977bf4662bb9bee792e8acae2249074
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 23 07:48:44 2017 -0700

    Ignore seekTo if an ad is playing
    
    Issue: #3309
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173114842

commit 93423aa8d4cdd10d2e90f8e770abbae30f1e1d0b
Author: pavlotsky <pavlotsky@google.com>
Date:   Mon Oct 23 07:23:17 2017 -0700

    Moved Exo IMA Demo to ExoPlayer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173112608

commit 82edf01c22db534aef9a355f8c65115c7734bcb1
Author: olly <olly@google.com>
Date:   Mon Oct 23 04:16:48 2017 -0700

    Re-use single session when multiSession disabled
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173098862

commit 9306b24c6566c9dd5013aba1c310a88d0f3b2114
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 23 01:23:24 2017 -0700

    Fix some Android Studio inspection warnings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=173085316

commit 9568802c6d3c1bbd337eae13aac7326c92fd635c
Author: eguven <eguven@google.com>
Date:   Fri Oct 20 06:12:01 2017 -0700

    Persist DownloadActions in DownloadManager
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172875067

commit 208166759124075727fa5fc319b860f1be4561cd
Author: Drew Hill <drewhill80@gmail.com>
Date:   Tue Oct 24 11:19:26 2017 -0400

    cleanups for videoframereleasetimehelper

commit ab6f9aea5bbdf414993766308dd808ab660d956b
Merge: 1fdc11f 04862bc
Author: ojw28 <olly@google.com>
Date:   Fri Oct 20 18:54:45 2017 +0100

    Merge pull request #3381 from google/dev-v2-r2.5.4
    
    r2.5.4

commit 3830307cd3c012ed4e6e5a764793b640ead00e2b
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Oct 19 20:28:17 2017 -0400

    fix not initialized error

commit 84afad0748125142b3612c5fcd24e31b8d59f2a0
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Oct 19 16:24:07 2017 -0400

    adjustments

commit 04862bccc88d5f1c53fe8394c707fcd1fae488a1
Author: olly <olly@google.com>
Date:   Thu Oct 19 09:52:16 2017 -0700

    Bump to 2.5.4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172758309

commit c2d05f44050c6fb0f068cbfae08667c146f3bcd3
Author: olly <olly@google.com>
Date:   Thu Oct 19 09:52:16 2017 -0700

    Bump to 2.5.4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172758309

commit feff4d3e0272a9c3594fbb3144ed4453202192ac
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Oct 19 12:49:09 2017 -0400

    fix missing cause of display refresh rate changing between videoframereleasetimehelper constructor and enable being called

commit 9a52d63271d5fcd7924a3f503eb19713bda472d2
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Thu Oct 19 17:48:07 2017 +0100

    Fix build

commit 69ec60e0f1406c25705940013c82d80dc4faa158
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 18 05:59:14 2017 -0700

    Fix seeking with repeated periods
    
    newPlayingPeriodHolder could be set then updated if seeking to a repeated period
    that was loaded more than once. This led to MediaPeriodHolders leaking.
    
    Only set newPlayingPeriodHolder once so that any later holders with the same
    period identifier get released.
    
    Also add a regression test. FakeMediaSource checks that all created
    MediaPeriods were released when it is released.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172591937

commit 5357726a8cc4765d3d72da61c6f8d0a864b075bd
Author: olly <olly@google.com>
Date:   Wed Oct 18 04:46:05 2017 -0700

    Add some additional device specific workarounds
    
    Issue: #3355
    Issue: #3257
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172587141

commit e54841436b185007924d5515c00bd2b1ff169bf3
Author: olly <olly@google.com>
Date:   Tue Sep 19 09:57:07 2017 -0700

    Workaround Samsung tablet reboot playing adaptive secure content
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169256059

commit 9ea8a8a7148cdf9adefcbfee109d54e711d1baac
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 19 03:00:44 2017 -0700

    Update HLS sample streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172722536

commit 006263e9836ad929f6cfa169a299407f613fdb1c
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 19 06:34:02 2017 -0700

    Retain playback position on re-preparation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172736350

commit 64b928e77f605e65a1154eec4d683806e08e7272
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 19 17:28:24 2017 +0100

    Stylistic cleanup

commit 28bd4661ed74e0a7d471ce7bbc3c6dca8d40860c
Merge: 24cca80 69e50a4
Author: ojw28 <olly@google.com>
Date:   Thu Oct 19 17:23:50 2017 +0100

    Merge pull request #3371 from andymiao858/dev-v2
    
    Fix FLV AVCVIDEOPACKET  CTS Type Issue

commit 24cca8070e8f96d2de62eaea36d1f4bdf72f1ba7
Merge: 7d0ec68 276087c
Author: ojw28 <olly@google.com>
Date:   Thu Oct 19 17:23:28 2017 +0100

    Merge pull request #3378 from Miha-x64/patch-2
    
    Removed useless parentheses

commit 7d0ec68d86dbb0a64365d3ab12fd497c03ed8b4e
Author: eguven <eguven@google.com>
Date:   Thu Oct 19 07:35:51 2017 -0700

    Put DownloadTasks on hold until preceding conflicting tasks are complete
    
    Tasks conflict if both of them work on the same media and at least one
    of them is remove action.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172741795

commit bb3dea5191088ce13e82f2b614f58f713f38a580
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 19 06:39:00 2017 -0700

    Remove USE_CHORD_PITCH
    
    We have been using USE_CHORD_PITCH == false for a while and the quality of
    pitch changes seems fine. It's now possible to set the sample rate too, but
    this only works if USE_CHORD_PITCH is false, so remove the constant.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172736631

commit 08706f9bfb8d5283d019f55515795677aecb990d
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 19 06:34:02 2017 -0700

    Retain playback position on re-preparation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172736350

commit d09f872179d511fb2c620b085734dd06c1b7964e
Author: olly <olly@google.com>
Date:   Thu Oct 19 06:30:50 2017 -0700

    Fix positions passed to TrackSelection
    
    - When transitioning to a new period, the value of bufferedDurationUs
      passed to TrackSelection.updateSelectedTrack was incorrectly set to
      0. It should have been set to correctly reflect buffered media in
      previous periods still being played out.
    - This change fixes the issue described above, and also propagates the
      playback position through to this method. The position of the next
      load within the period can be calculated by adding the position and
      bufferedDurationUs.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172736101

commit 2cfc478c3ebf3662727cbe38ad5fef7bcddc8a38
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 19 03:57:51 2017 -0700

    Allow extractor injection for HLS
    
    Issue:#2748
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172726367

commit 49aca6e9ce745f36443e1c5388f0572b4ee1fd58
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 19 03:21:09 2017 -0700

    Fix typo in variable name
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172724250

commit daf9c8d19a2b6e1d95425af910641896a944e606
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 19 03:00:44 2017 -0700

    Update HLS sample streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172722536

commit eb08e1a5c3481057c2672446b50b9e0e565b7895
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 18 07:46:54 2017 -0700

    Work around AudioTrack Bluetooth connection issue
    
    If connecting a Bluetooth audio device fails, the AudioTrack may be left in a
    bad state, where it is not actually playing and its position has jumped back to
    zero. Detect and work around this case by resetting the track.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172600912

commit b8ef1dcc78ed240c7f7535fea193e53d1b5a3867
Author: olly <olly@google.com>
Date:   Wed Oct 18 06:08:51 2017 -0700

    Fix MediaPeriod position param Javadoc.
    
    prepare and selectTracks receive the position from which any
    loading should start, where-as continueLoading receives the
    actual playback position. These are different in the case that
    a previous period is still being played out.
    
    Also removed "relative to the start of the period" from prepare
    documentation because it couldn't really be relative to anything
    else.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172592769

commit 1e79d6eb849a7e404e7682f24bbdcbd720ab6eda
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 18 05:59:14 2017 -0700

    Fix seeking with repeated periods
    
    newPlayingPeriodHolder could be set then updated if seeking to a repeated period
    that was loaded more than once. This led to MediaPeriodHolders leaking.
    
    Only set newPlayingPeriodHolder once so that any later holders with the same
    period identifier get released.
    
    Also add a regression test. FakeMediaSource checks that all created
    MediaPeriods were released when it is released.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172591937

commit fc5e8ee5162757d4a52142f59ec5bf771791af34
Author: olly <olly@google.com>
Date:   Wed Oct 18 04:46:05 2017 -0700

    Add some additional device specific workarounds
    
    Issue: #3355
    Issue: #3257
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172587141

commit 69e50a43a8104723fdf2f37d477f27f1f1ee40a5
Author: 苗华栋(Rabbit) <andy.miao858@gmail.com>
Date:   Thu Oct 19 23:18:12 2017 +0800

    add readSignedInt24 in ParsableByteArray

commit 276087c532500a191b1559f424cd400e59667e22
Author: Mike <silizium@ok.de>
Date:   Thu Oct 19 14:23:50 2017 +0300

    Removed useless parentheses

commit 5895884c53a33c8417f231696b27dd9ef30495f7
Author: miaohuadong <andy.miao858@gmail.com>
Date:   Thu Oct 19 14:10:18 2017 +0800

    Fix bug

commit 4f8f87221ead66dab7610c5c2aa2796f33b3b336
Author: 苗华栋(Rabbit) <andy.miao858@gmail.com>
Date:   Wed Oct 18 23:03:26 2017 +0800

    Fix FLV AVCVIDEOPACKET -> compositionTimeMs Type from UI 24 to SI 24

commit ce0a03dbdf8f0d83ac98001805f0c6cea47f6722
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Oct 17 07:33:19 2017 -0700

    Add an extractor flag for ignoring edit lists
    
    Issue: #3358
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172464053

commit aa42d3c910fbee0497d94d1896c0748d57794ab5
Author: olly <olly@google.com>
Date:   Tue Oct 17 03:49:49 2017 -0700

    We're not playing an ad if the timeline is empty.
    
    Issue: #3334
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172447125

commit f6d0dae50e4dd21ad6c10a3774db4da6ba1f5f1e
Author: olly <olly@google.com>
Date:   Fri Oct 13 09:31:00 2017 -0700

    Workaround/Fix #3351
    
    1. Ignore edit list where the sequence doesn't contain a sync
       sample, rather than failing.
    2. Make Mp4Extractor.readAtomPayload so it doesn't try and read
       the same payload twice if a failure occurs parsing it.
    3. Make processAtomEnded so that it doesn't pop the moov if
       parsing it fails.
    
    Issue: #3351
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172106244

commit f9249d23eac4d9143f99f2fe5066b93fc96ceb88
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Oct 17 07:33:19 2017 -0700

    Add an extractor flag for ignoring edit lists
    
    Issue: #3358
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172464053

commit 2c10e6f1c3fd1692d8db3d16355648aab92e66f7
Author: olly <olly@google.com>
Date:   Tue Oct 17 03:49:49 2017 -0700

    We're not playing an ad if the timeline is empty.
    
    Issue: #3334
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172447125

commit f6821c6d9597389e71a61b3722f2b3d6a1d43b3e
Author: tonihei <tonihei@google.com>
Date:   Tue Oct 17 03:48:15 2017 -0700

    Split playbacktests mobile_test into multiple version-dependent test targets.
    
    MobileHarness allocates random devices for each test and repeats tests up to 5 times to
    account for spurious test failures. Some of our tests automatically pass for SDK versions
    below a certain threshold. Thus, even if such a version-guarded test would always fail,
    the MobileHarness test is likely to succeed as it only needs one random allocation to a
    device with a lower SDK version.
    
    To prevent this behaviour and to make sure all tests are actually run, the mobile_test
    target is split into multiple targets one for each minimum SDK version.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172447046

commit ac31dc7c7a83a0cac7314e50369865006ae91359
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Oct 17 01:00:13 2017 -0700

    Allow setting output sample rate in SonicAudioProcessor
    
    This is not really useful with the DefaultAudioSink, but could be used in a
    custom AudioSink when mixing audio from sources that have different sample
    rates.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172434482

commit e46a7600cf593280ca091423fbdfed4488f7ee12
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 16 10:04:52 2017 -0700

    Document DefaultTimeBar attributes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172339124

commit 93563631175d5c2b1856f932b457d94e2ce82c6e
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 16 08:46:54 2017 -0700

    Document load() exceptions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172329677

commit d0758c93938c6b85fac3ef98c634cb6dec90eb48
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Oct 16 08:30:55 2017 -0700

    Fix typo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172328148

commit 51fd3365bb325d9580e7034ede488c80528a56fe
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Tue Oct 17 17:57:27 2017 +0100

    Remove spurious method

commit e7d6f1a2ce9082169ec5580638675fad8628956b
Author: olly <olly@google.com>
Date:   Tue Sep 26 11:09:45 2017 -0700

    Prevent unnecessary consecutive playlist loads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170078933

commit d8ceef1038673ea79195fd18591f0ea55576742e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 26 17:06:36 2017 +0100

    Clean up HlsPlaylistTracker

commit 98f6e89efd368e17f65a19c02491674b5d7d0092
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 16:01:32 2017 +0900

    remove space

commit 3b8fd4985cd879e9734b775739779efec1b73746
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 14:18:59 2017 +0900

    remove keep alive check for updating primary url to avoid redundant playlist loading

commit 758de818db009bf0e21372976cf2ffc172523397
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 12:01:25 2017 +0900

    fix primarySnapshotAccessAgeMs

commit e6bf3736122a4a989e85d90b97b70b0451e6fc8f
Author: olly <olly@google.com>
Date:   Tue Oct 10 12:39:34 2017 -0700

    Allow overriding of DefaultDashChunkSource.getNextChunk
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171718775

commit 04d10ea67db38035d3b7eef9a2111b32c1a88468
Author: olly <olly@google.com>
Date:   Tue Oct 10 12:40:02 2017 -0700

    Expose public constructors for FrameworkMediaCrypto
    
    MediaCodecRenderer implementations require DrmSessionManager<FrameworkMediaCrypto>,
    but it's currently not possible for an app to provide a custom implementation due
    to FrameworkMediaCrypto having a package private constructor. This change exposes
    public FrameworkMediaCrypto constructors, hence removing this restriction.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171718853

commit dbdae4ca25fd023e2d13874ca52236b521c9a8a5
Author: olly <olly@google.com>
Date:   Fri Oct 13 11:38:47 2017 -0700

    Only parse common-encryption sinf boxes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172124807

commit feceabadebb7275cc69f85c2854876f3a2045170
Author: Oliver Woodman <olly@google.com>
Date:   Fri Oct 13 20:40:08 2017 +0100

    Tweak recently merged pull requests

commit 1c594b4cdb6c4fd1362c00a9b523b38ed640531c
Author: Nate Roy <nroy@twitter.com>
Date:   Fri Oct 6 14:35:18 2017 -0400

    remove reordering playlist parser

commit 39cb3f932e984f76494c13ce940a6f8c5b31a57e
Author: Nate Roy <nroy@twitter.com>
Date:   Mon Oct 2 15:43:19 2017 -0400

    Allow passing of HlsPlaylistParser to HlsMediaSource.
    
    Also create helper method in HlsMasterPlaylist to allow the copying of
    the playlist to another, but with the variants reordered based on a
    passed comparator. Also added an implementation of HlsPlaylistParser
    which will reorder the variants returned.

commit a7032ede38a1428eb89fdbb34158b7ef77945c77
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 27 06:20:24 2017 -0700

    Change copyRenditionsList parameters names
    
    Also instantiate the resulting list with a predicted size to minimize
    list resizing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163332285

commit 0a2f485079066e83c9c4b3508da1897eba34f0e9
Author: eguven <eguven@google.com>
Date:   Wed Jul 26 08:58:02 2017 -0700

    Add HlsMasterPlaylist.copy method
    
    Creates a copy of this playlist which includes only the variants identified by the given variantUrls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163212562

commit eb5146c39bb15f396cb5bdaa0e051e1b822032f2
Merge: ebf19c4 1fdc11f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 16 13:48:46 2017 +0100

    Merge branch 'release-v2' into dev-v2

commit ebf19c40287ec638ca2140c6ed25b73fa002fe62
Author: olly <olly@google.com>
Date:   Fri Oct 13 12:51:32 2017 -0700

    Update moe equivalence
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172133622

commit 29ba640351dc7d9dd0c31b3a9403c137c23ffc9a
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Fri Oct 13 23:14:49 2017 +0100

    Delete accidentally added files

commit 12513e9898d99324e45c0a96b0e58df1ece47c7f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Oct 13 20:40:08 2017 +0100

    Tweak recently merged pull requests

commit e6d8e5b096e0b2cc9a8e5d5e587e763488a4ca06
Merge: 40d8b29 9783fc0
Author: ojw28 <olly@google.com>
Date:   Fri Oct 13 20:29:55 2017 +0100

    Merge pull request #3318 from natez0r/pass-playlist-parser
    
    Allow passing of HlsPlaylistParser to HlsMediaSource.

commit 40d8b29c9eab8a63706cb3f68f5a47a761eb66f2
Merge: cad8851 19f53d8
Author: ojw28 <olly@google.com>
Date:   Fri Oct 13 20:29:44 2017 +0100

    Merge pull request #3328 from ValveSoftware/dev-v2-multiversion
    
    Allow multiple PSSH boxes for same system

commit cad88512f5c1aae39d90a8f75cf6e2bbb8faf983
Author: olly <olly@google.com>
Date:   Fri Oct 13 11:38:47 2017 -0700

    Only parse common-encryption sinf boxes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172124807

commit 2fee010938f9a81ab241b1c7200117d018e46357
Author: olly <olly@google.com>
Date:   Fri Oct 13 09:31:00 2017 -0700

    Workaround/Fix #3351
    
    1. Ignore edit list where the sequence doesn't contain a sync
       sample, rather than failing.
    2. Make Mp4Extractor.readAtomPayload so it doesn't try and read
       the same payload twice if a failure occurs parsing it.
    3. Make processAtomEnded so that it doesn't pop the moov if
       parsing it fails.
    
    Issue: #3351
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172106244

commit c9ed9366ceebea9f566d406c873338ef596baaba
Author: tonihei <tonihei@google.com>
Date:   Fri Oct 13 03:30:29 2017 -0700

    Fix Cronet extension build and test.
    
    Recently added Java 8 features in the cronet extension and the linked native libs
    require to enable Java 8 desugaring in gradle. Moreover, junit.assertThrows is not
    available in our version and its usage has been replaced by the manual check.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172077967

commit 7038c8fb7052715aa8252f3a9e2cd6a6d63c1002
Author: tonihei <tonihei@google.com>
Date:   Fri Oct 13 01:15:20 2017 -0700

    Add chunk size variation to fake adaptive data set.
    
    The chunk size of real video data varies around the given average bitrate.
    To account for this fact in the fake adaptive data set, the chunk size varies
    randomly with a given standard deviation. The standard deviation used for the
    BandwidthProfileSimulator is based on the chunk size variation measured on the
    1 hour playlist of real media.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=172068110

commit 3ae4143be30318c90e1856d6387fccff44bcecbf
Author: byungh <byungh@google.com>
Date:   Thu Oct 12 13:03:05 2017 -0700

    Cookie-based validation in CronetDataSource
    
    Using cookie validation from streamer, streamer can enforce that only clients who have the cookie are able to stream the video.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171999924

commit b71effb7b0b2da1f97e62ba8f4e5b659f13f7f85
Author: tonihei <tonihei@google.com>
Date:   Thu Oct 12 10:12:04 2017 -0700

    Fix MobileHarness playback tests.
    
    This change fixes various issues:
     - MobileHarness sometimes allocated devices with SDK < 16. As we have no tests running
       on these SDKs, a new dimension filter for the mobile_test target ensures that only
       devices with SDK >= 16 are selected. A similar filter for SDK version is also added
       to the ABR playback tests to ensure no old devices are selected.
     - DRM specific tests are skipped for Api < 18, but were not able to run because the
       DashTestRunner class tried to link to the MediaDrm constructor. Moved the
       constructor to a seperate Builder class to allow execution on Api levels 16 and 17.
     - DashWidevineOfflineTest also tried to access code for Api >= 18 without checking
       the current level.
     - Action implementations which are waiting for events did not ensure that they have a
       nextAction to wait for. This caused NullPointerExceptions when this next action was
       scheduled.
     - DefaultDrmSession always restored the offline keys when a new license was requested,
       even if the keys were already restored. These repeated slow calls to restoreKeys
       resulted in high numbers of dropped buffers.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171974859

commit 333e745e7bf9d03aa3a4b4fbf83f29dede662c58
Author: bachinger <bachinger@google.com>
Date:   Thu Oct 12 09:10:00 2017 -0700

    show PlaybackControlView when on key event for DPAD center or any direction
    and consume event without moving the focus.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171967057

commit a11c704d27c09ffeb0b50ad51b3911acdd2225fd
Author: olly <olly@google.com>
Date:   Wed Oct 11 07:34:11 2017 -0700

    Upgrade dependency versions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171819854

commit 3a1a032fa81e184c5467ec105838d425a5a7a82e
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Oct 12 14:52:14 2017 -0400

    change to use displaymanager listener for refresh rate updating

commit ac3501dd84394bafe9dc14ec2e0a6c04fbfa04a6
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Oct 12 08:39:06 2017 -0400

    make videoframereleasetimehelper get refresh rate when it's enabled, so we can reuse video renderer for multiple clips with different frame rates

commit 763f663d019823ea00ae659cda839889648d921e
Author: hoangtc <hoangtc@google.com>
Date:   Wed Oct 11 03:54:15 2017 -0700

    Update DefaultTrackSelector to use more conditions when selecting audio track
    
    Update the audio track selection logic in DefaultTrackSelector:
    
    - When forcing lowest bitrate, use bitrate as tie-breaker when track scores are
    the same, prefer the lower bitrate.
    - Otherwise, use one of the following values as tie-breaker in order:
      - ChannelCount
      - SampleRate
      - BitRate
    If the format being checked is within renderer's capabilities, select it if it
    has higher tie-break value, else, select it if it has lower tie-break value.
    
    If all tie-break values are the same, prefer the already selected track.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171803092

commit 5d4fa335f98d11c41b5d1e46a4945225545836ce
Author: olly <olly@google.com>
Date:   Tue Oct 10 12:40:02 2017 -0700

    Expose public constructors for FrameworkMediaCrypto
    
    MediaCodecRenderer implementations require DrmSessionManager<FrameworkMediaCrypto>,
    but it's currently not possible for an app to provide a custom implementation due
    to FrameworkMediaCrypto having a package private constructor. This change exposes
    public FrameworkMediaCrypto constructors, hence removing this restriction.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171718853

commit 9a6d717a7a0389a57fd0c9c62dc3ae2c072fd2f2
Author: olly <olly@google.com>
Date:   Tue Oct 10 12:39:34 2017 -0700

    Allow overriding of DefaultDashChunkSource.getNextChunk
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171718775

commit fc985fe4dabe287d54653aaa3f743607965ac1f8
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 9 07:39:40 2017 -0700

    Update IMA documentation for AdsLoader
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171533782

commit 030f52b41bb5ae2da5d8e1659af50c58435da57b
Author: tonihei <tonihei@google.com>
Date:   Mon Oct 9 05:51:37 2017 -0700

    Wait for HandlerThread to terminate after calling quit.
    
    Calling HandlerThread.quit() or .quitSafely() doesn't immediately terminate
    the thread. It just instructs the Looper not to accept any new messages and
    to terminate at the next opportunity. Added a HandlerThread.join() everywhere
    where the intention is to close and release all resources and to stop all
    threads.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171525241

commit 54d3df4b63a6291d8b98bcee67748e78012d0269
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 9 03:35:45 2017 -0700

    Drop to keyframe in LibvpxVideoRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171517156

commit e88716595539ea5034b8bea460ac5aa1ba87a0d1
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Oct 9 01:49:56 2017 -0700

    Provide a getter for IMA's AdsLoader
    
    Issue: #3322
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171508635

commit 10f8192c48dcacfd8aea90c39bb0a3712307a991
Author: eguven <eguven@google.com>
Date:   Fri Oct 6 03:25:20 2017 -0700

    Add ActionFile which stores and loads DownloadActions to/from a file.
    
    This change also replaces individual DownloadAction versions with a
    single master version.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171273880

commit d5101d8d461f3d6ff2a87ee638400abf953948d9
Author: hoangtc <hoangtc@google.com>
Date:   Fri Oct 6 02:56:52 2017 -0700

    Allow DefaultDRMSession to retry provisioning/key request
    
    For initial DRM provisioning and key request, we allow the requests to be
    retried (with increasing delay for each successive retry) before failing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171271384

commit f73a5bf692a227a4729f4b94f1109e258aaa4399
Author: tonihei <tonihei@google.com>
Date:   Thu Oct 5 03:02:10 2017 -0700

    Update gradle version to 3.0.0-beta5.
    
    Android Studio refuses to build with the current beta4 version.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171129696

commit 20e43ac4f8539229f407700da011d008c253fabd
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 5 01:36:23 2017 -0700

    Allow ads to be paused/resumed
    
    Controls are still hidden while playing ads, but if the app pauses the player,
    controls will be shown. During ads, the player is not seekable.
    
    When the player enters the background then returns to the foreground, the
    content period may not be prepared, so also cache the content window duration.
    This means that if the app reenters the foreground while an ad is paused the
    time bar can be populated.
    
    Issue: #3303
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171123428

commit 09165ab870132e5fe7a68a94e62b6cbff08899e2
Author: andrewlewis <andrewlewis@google.com>
Date:   Sat Jul 15 00:49:09 2017 +0100

    Rename droppedOutputBufferCount
    
    Now this counter includes input buffers too, which are dropped as part of
    skipping to keyframes for catch up.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171119930

commit 331c179a883fe720c394cbb35ca70f5f88151846
Author: tonihei <tonihei@google.com>
Date:   Wed Oct 4 07:59:09 2017 -0700

    Wait until playback started in certain action schedules.
    
    Some action schedules (especially those for real media with potentially
    long initial buffering times) don't wait until the playback started
    before executing the rest of the schedule.
    
    Added waitForPlaybackStateChanged(STATE_READY) to all applicable action schedules.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171009434

commit d7b4f8a645e0751be6c4500ddd185762683be2a1
Author: tonihei <tonihei@google.com>
Date:   Wed Oct 4 07:14:06 2017 -0700

    Amend seek action in ActionSchedule to optionally wait until playback resumes.
    
    This allows more deterministic action schedules, especially for real media
    which may take an arbitrary amount of time to rebuffer after seeking.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=171005231

commit 498ff144395b511dbeb1865cc60027cfd456fb26
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 4 02:04:03 2017 -0700

    Add @IntDef annotations to DefaultEventListener
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170980737

commit b3d462df398578836139f14cd708230fdf8a9b04
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Oct 4 00:59:14 2017 -0700

    Catch up video rendering by dropping to keyframes
    
    If the current output buffer is very late and the playback position is in a
    later group of pictures, drop all buffers to the keyframe preceding the
    playback position.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170975259

commit 45c1f0838394a386d7e1af4b9ea10d2cbe5dbbee
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Oct 3 03:37:26 2017 -0700

    Annotate the content type local
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170831088

commit ad500ca87110d4a43eb1ac56298743f6522278a4
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Oct 3 03:01:33 2017 -0700

    Replace IMA ad state booleans with an @IntDef
    
    imaPausedInAd could only be true when imaPlayingAd was true, so there are only
    three possible states.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170827974

commit 5baddfb56a9db55bd87e2dbc296fd9e28d1c9558
Author: tonihei <tonihei@google.com>
Date:   Tue Oct 3 02:46:04 2017 -0700

    Add onSeekProcessed callback to Player interface.
    
    This is useful to determine when a seek request was processed by the player
    and all playback state changes (mostly to BUFFERING) have been performed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170826793

commit 19f53d8a4445310422f39401f4875490ef71155d
Merge: 1495b9a b8e719b
Author: Justin Yorke <justiny@valvesoftware.com>
Date:   Fri Oct 6 15:00:53 2017 -0700

    Merge branch 'multiversion' into dev-v2-multi-pssh

commit b8e719b101e529922485ff8afc3ad00c1401f7c9
Author: Justin Yorke <justiny@valvesoftware.com>
Date:   Fri Oct 6 14:52:29 2017 -0700

    Allow multiple PSSH boxes for same system.
    
    Updates DefaultDrmSessionManager to use the prefered Widevine version (v1
    on >= 23 and v0 for < 23).
    For other DRM schemes, uses the first scheme found.

commit 9783fc0924334beab16d1350548e5cce73b9b070
Author: Nate Roy <nroy@twitter.com>
Date:   Fri Oct 6 14:35:18 2017 -0400

    remove reordering playlist parser

commit 2f622b8bd8f4d647256613ba012276161a12f1b9
Author: Nate Roy <nroy@twitter.com>
Date:   Mon Oct 2 15:43:19 2017 -0400

    Allow passing of HlsPlaylistParser to HlsMediaSource.
    
    Also create helper method in HlsMasterPlaylist to allow the copying of
    the playlist to another, but with the variants reordered based on a
    passed comparator. Also added an implementation of HlsPlaylistParser
    which will reorder the variants returned.

commit 1495b9a47370b95043eaf31aaef56a1e1e0da0ba
Author: olly <olly@google.com>
Date:   Mon Oct 2 10:16:59 2017 -0700

    Fix stuck playback when media has uneven track end times
    
    * Always assume a renderer is ready if it's read to the end of
      its current stream and there's a subsequent period already
      prepared. This prevents getting stuck when a non-clock renderer
      has a short stream.
    * Switch to the standalone clock if the renderer providing the
      media clock has read to the end of its current stream, is no
      longer ready, and there's a subsequent period already prepared.
      This prevents getting stuck when a clock renderer has a short
      stream.
    * Remove unnecessary clock synchronization logic (since it would
      need to be made more complicated as a result of this change).
    * Don't update the playing period holder when playWhenReady is
      false. This avoids the position jumping to the start of the
      next period when seeking to the very end of the current period
      whilst paused (we still end up showing the first frame of video
      from the next period, but fixing that will have to wait).
    
    Github: #1874
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170717481

commit 7e7fea4068d9b178b463ab74c818d78831c894ca
Author: tonihei <tonihei@google.com>
Date:   Mon Oct 2 04:37:38 2017 -0700

    Add WaitForPlaybackStateChanged action to action schedule.
    
    This works similar to the existing WaitForXXXX actions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170687058

commit fd576d218960d0ee862c9478ea5586a41646a332
Author: olly <olly@google.com>
Date:   Fri Sep 29 18:35:39 2017 -0700

    Smoother PlaybackControlView updates when speed != 1
    
    * If speed <= 0.1, update every second.
    * If 0.1 < speed < 1, update approximately once per
      second in real time, aligned so that each second boundary
      in media time has a corresponding updatae.
    * If speed == 1, keep existing behavior.
    * If 1 < speed <= 5, update every second in media time
    * If speed > 5, update every 200ms.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170559037

commit 096d7651d2b2f1636ee128bda05685009212f0fd
Author: tonihei <tonihei@google.com>
Date:   Fri Sep 29 01:51:00 2017 -0700

    Execute actions in action schedule immediately.
    
    Run next action immediately without using the handler when the requested
    delay is zero. This ensures that no other code can run between these two
    actions to improve deterministic test behaviour.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170456852

commit 28173991d18f5d4fef0ed70af61b538956a35c3e
Author: tonihei <tonihei@google.com>
Date:   Thu Sep 28 10:17:19 2017 -0700

    Return requested position when selecting tracks in FakeMediaPeriod.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170360487

commit a3a9c0f3b0eb5d38702aaecfe4308333ebd273ae
Author: olly <olly@google.com>
Date:   Thu Sep 28 08:04:01 2017 -0700

    Sanity check current position <= written frame position
    
    This avoids spurious position reports following an underrun.
    
    Github: #1874
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170344399

commit 7665571ff92a55fd7059ff3e03a3b96c11fb308e
Author: hoangtc <hoangtc@google.com>
Date:   Tue Jul 25 02:37:22 2017 +0100

    Do not copy data to output frame in libvpx unless necessary.
    
    In out libvpx extension, currently we always call vpxGetFrame and copy the data
    from the native decoder to output frame. However, if the inputBuffer has
    isDecoderOnly set, we can avoid populating the output buffer, but only setting
    BUFFER_FLAG_DECODE_ONLY.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170318527

commit 60de1574105e2669734237f79e7880b063e45834
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 28 02:32:27 2017 -0700

    Add a few initial tests for SimpleDecoderAudioRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170318174

commit 9c7950f342a9312ea2354df60cf3cdb84efd432c
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 28 00:56:03 2017 -0700

    Add AudioSink interface and use it from audio renderers
    
    This change allows applications to provide custom AudioSinks, which could be
    based on android.media.AudioTrack like AudioTrackAudioSink, or could be
    completely custom.
    
    The refactoring is mostly mechanical and shouldn't result in any functionality
    changes.
    
    Some android.media.AudioTrack-specific details have to appear in the AudioSink
    interface so this change modifies the javadoc on the AudioTrack (now AudioSink)
    to note that some methods will have no effect.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170311083

commit b14b3d43de673398bc18581aaa646e73166b73d7
Author: zhihuichen <zhihuichen@google.com>
Date:   Wed Sep 27 16:11:01 2017 -0700

    Expose OnKeyStatusChange events, this is required to learn the usabilities of the keys.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170268043

commit 52de36c5ebd52b61f01347ca258fe5336b04b815
Author: tonihei <tonihei@google.com>
Date:   Wed Sep 27 03:43:18 2017 -0700

    Add abstract, default Player event listener.
    
    This allows simplified listener implementations as most listeners
    will not listen to all possible notifications.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170177821

commit 55f696e11d6aa3fef22539d2eb998bb19bd0eeb5
Author: olly <olly@google.com>
Date:   Wed Sep 27 03:14:20 2017 -0700

    Fix spurious failures due to late decoding.
    
    By default, if a codec is instantiated during an ongoing
    playback, ExoPlayer will render the first frame that it
    receives (so that there's "something other than black"
    drawn to the surface). This frame is the key-frame before
    the current playback position, and may be as much as 5
    seconds behind the current position. ExoPlayer then drops
    subsequent frames that are late until it's caught up to
    the current position again.
    
    For GTS tests that are counting dropped frames, this is
    not desirable behavior, since it will cause spurious test
    failures in cases where DummySurface is not supported.
    This change overrides the default behavior so that the
    player instead skips (rather than drops) frames until it's
    caught up to the current playback position, and only then
    renders the first frame.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170175944

commit a3be9376509b9802171ae9b1b088b8f17ec2f999
Author: olly <olly@google.com>
Date:   Tue Sep 26 11:09:45 2017 -0700

    Prevent unnecessary consecutive playlist loads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=170078933

commit 792f046c02b45fee7a4f6f0f8ce8de41e081334d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 26 17:06:36 2017 +0100

    Clean up HlsPlaylistTracker

commit 8ee6da1fe974bb850434e37451d38612099155fb
Merge: b17a6ba 455f9fb
Author: ojw28 <olly@google.com>
Date:   Tue Sep 26 16:54:47 2017 +0100

    Merge pull request #3280 from yqritc/fix-primary-playlist-update
    
    Fix primary hls playlist update

commit b17a6ba51dbdfc5808330ebf0b370e920beee085
Author: olly <olly@google.com>
Date:   Mon Sep 25 10:44:28 2017 -0700

    Add TODO to respect FLAG_ALLOW_GZIP in CronetDataSource
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169927989

commit c6bc30bab73781c3d02f66d4d636045328fd190f
Author: strobe <strobe@google.com>
Date:   Mon Sep 25 09:41:58 2017 -0700

    Add NEON-accelerated HDR conversion routines to VPX.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169919087

commit 06f7b6be6ae5e085606cc11e122b861c1bec9d19
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 25 02:20:14 2017 -0700

    Use IntDef for AudioTrack.startMediaTimeState
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169880369

commit 505d5cd0a4953e43094759efdd4c6cbc0749bee7
Author: olly <olly@google.com>
Date:   Sun Sep 24 04:57:51 2017 -0700

    Fix a few lint warnings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169830938

commit 1f8a8dbfa39d8b50a2465d6b04b5508d799f0d68
Author: eguven <eguven@google.com>
Date:   Fri Sep 22 06:27:22 2017 -0700

    Add version number to serialized DownloadAction data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169681768

commit 4fb18453e1dd02e301fa99e73b01c19b58c862a2
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 22 03:22:02 2017 -0700

    Add a "forceLowestBitrate" option to DefaultTrackSelector
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169668371

commit 25a9177ce36aee20dfa95447695969e98a52b0c0
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 21 09:18:43 2017 -0700

    Deduplicate DefaultTrackSelector javadocs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169552239

commit 324339b88f18da30817e69218bc93be8dea51661
Author: hoangtc <hoangtc@google.com>
Date:   Tue Mar 7 05:42:33 2017 +0000

    Tweak live-streaming track selection logic.
    
    Follow-up on the update to ABR logic in AdaptiveTrackSelection for live
    streaming case:
    - Do not reset liveEdgeTimeUs when user seek to a different position.
    - For HlsChunkSource, for non-independent segments, currently the
    bufferedDuration calculate will subtract previousChunk's duration. So to make
    it work with live-streaming ABR logic, we subtract timeToLiveEdgeUs a similar
    amount to compensate for that operation.
    - Minor update to DefaultSSChunkSource, only perform TrackSelection when needed
    (after checking necessary conditions).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169531275

commit d71400d28023ef36e8ac049113c688fec4bc0240
Author: eguven <eguven@google.com>
Date:   Thu Sep 21 03:42:48 2017 -0700

    Add DashDownloadActionTest
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169522830

commit 455f9fb9f0fb422652ed3e1771f843db0c1383a1
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 16:01:32 2017 +0900

    remove space

commit cac16f1647be29828c1b404e5de0b6e2577d2e61
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 14:18:59 2017 +0900

    remove keep alive check for updating primary url to avoid redundant playlist loading

commit ff2ece56dd9afa7eaf03bdb994e1ef9387fe44a6
Author: yqritc <yqritc@gmail.com>
Date:   Thu Sep 21 12:01:25 2017 +0900

    fix primarySnapshotAccessAgeMs

commit ce7aaab3c6adc8d8b0d6723c0e59441fcca9bce2
Author: olly <olly@google.com>
Date:   Wed Sep 20 11:21:15 2017 -0700

    Handle bracket params on the end of SmoothStreaming URLs
    
    Issue: #3230
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169421873

commit 6314a0ec82343ee79075e7f8794a69471599b019
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Sep 20 05:38:24 2017 -0700

    Add support for Widevine encrypted HLS
    
    This includes both cbcs and cenc. Will only work for streams that require a single
    pssh.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169382884

commit 1fdc11f2b30547392c6fe6d2485493837d8f41a2
Merge: 9a02667 a8136cb
Author: ojw28 <olly@google.com>
Date:   Wed Sep 20 14:59:47 2017 +0100

    Merge pull request #3277 from google/dev-v2-r2.5.3
    
    r2.5.3

commit a8136cbb991ec3de9407a72e36fb48a1e8f966de
Author: Oliver Woodman <olly@google.com>
Date:   Wed Sep 20 14:49:23 2017 +0100

    Rm test class from release

commit eb3cc0b3502a2b4c6ff283ec23aeac07f20e0c6d
Author: olly <olly@google.com>
Date:   Wed Sep 20 03:37:59 2017 -0700

    Tweak release notes for 2.5.3
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169374725

commit 48bc420d02d118e7638075e7e41015fa8ae9cf07
Author: olly <olly@google.com>
Date:   Tue Sep 19 10:04:50 2017 -0700

    Bump version + release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169257339

commit c127a577d7af8e419f0d9308d66951717bbaedeb
Author: eguven <eguven@google.com>
Date:   Tue Sep 19 09:10:35 2017 -0700

    Notify span listeners even if index store fails in SimpleCache.removeSpan
    
    This fixes infinite loop in LeastRecentlyUsedCacheEvictor.evictCache when index store fails.
    
    Also made CachedContentIndex not final so it can be mocked and added a package protected SimpleCache
    constructor so mock index can be injected.
    
    Issue: #3260
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169249517

commit 8b43d896f1441c89bf7cec9b79eb8674ddb511e0
Author: eguven <eguven@google.com>
Date:   Tue Sep 19 09:07:04 2017 -0700

    Workaround a cipher issue in Android 4.3
    
    []
    
    Issue: #2755
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169249093

commit ca4d482b59d74bd4a88e13c5d32558b993b1c966
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 19 08:46:04 2017 -0700

    Fix PTS wraparound in HLS+Webvtt
    
    Issue:#2928
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169246424

commit 06bba08be78bbb8a4c44853eafcf3c099578fecf
Author: eguven <eguven@google.com>
Date:   Mon Sep 18 09:39:09 2017 -0700

    Check if the cache is already empty before trying to evict more span
    
    This case may happen if the max span size is more than the max size the
    evictor is configured.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169101093

commit 961f01a850f2879d5eda461f4f431e04347a5e34
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Sep 18 05:44:31 2017 -0700

    Fix 2 CEA decoder bugs
    
    1- Avoid dropped buffers by using a PriorityQueue instead of a set.
    2- Process the end of stream after non-EOS buffers.
    
    Issue:#3250
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169077365

commit 30a04fd14b15f9c329faa1ae137332b7c3de5f0c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 15 09:28:28 2017 -0700

    Work around broken AAC decoders on Galaxy S6
    
    Issue: #3249
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168844850

commit 642e95beaaeb57421ee4da43e0b72c3293c3191c
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 14 04:31:17 2017 -0700

    Workaround the skip ad button not being focused
    
    Issue: #3258
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168669969

commit 26d789e6d3e1160d14cde0d06a7cb0ddbe82a4c7
Author: olly <olly@google.com>
Date:   Wed Sep 20 03:37:59 2017 -0700

    Tweak release notes for 2.5.3
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169374725

commit 67567ffa6c5d3b5c532eaf2d78874a7ab9932209
Author: olly <olly@google.com>
Date:   Wed Sep 20 03:36:32 2017 -0700

    TsExtractor: Do less work if payload reader does not exist
    
    There's no reason to perform the discontinuity check or skip
    the adaptation field if we don't have a payload reader for
    the packet.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169374609

commit aacfb37dff4671f801872e429074447a466eaa04
Author: olly <olly@google.com>
Date:   Tue Sep 12 08:21:43 2017 -0700

    De-dupe ACTION_DOWN events
    
    Issue: #3259
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168378650

commit ed76882271e45f1098ad69f8e796f836d6d193f0
Author: olly <olly@google.com>
Date:   Tue Sep 19 10:04:50 2017 -0700

    Bump version + release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169257339

commit d346266dc9631a985c662c6c1e444f47bbb12caa
Author: olly <olly@google.com>
Date:   Tue Sep 19 09:57:07 2017 -0700

    Workaround Samsung tablet reboot playing adaptive secure content
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169256059

commit 89f66924d514732ffa74689d22c97b0fe3c16a38
Author: olly <olly@google.com>
Date:   Tue Sep 19 09:48:28 2017 -0700

    Use IntDef for MediaCodecRenderer internal states
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169254794

commit 09248608c08ebd349b5805a9e4685b147c41e55f
Author: eguven <eguven@google.com>
Date:   Tue Sep 19 09:10:35 2017 -0700

    Notify span listeners even if index store fails in SimpleCache.removeSpan
    
    This fixes infinite loop in LeastRecentlyUsedCacheEvictor.evictCache when index store fails.
    
    Also made CachedContentIndex not final so it can be mocked and added a package protected SimpleCache
    constructor so mock index can be injected.
    
    Issue: #3260
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169249517

commit 8a0e148041ad4368276c407afcc841c6848f8099
Author: eguven <eguven@google.com>
Date:   Tue Sep 19 09:07:04 2017 -0700

    Workaround a cipher issue in Android 4.3
    
    []
    
    Issue: #2755
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169249093

commit fed2a1a6eaf8025bc6ff8ff92c78ce7dcabc17d1
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 19 08:46:04 2017 -0700

    Fix PTS wraparound in HLS+Webvtt
    
    Issue:#2928
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169246424

commit 5b0e693419c189f76cd0822fb6168311c660658b
Author: olly <olly@google.com>
Date:   Tue Sep 19 07:44:46 2017 -0700

    Fix DefaultDashChunkSource.updateLiveEdgeTimeUs
    
    Very subtle, but lastAvailableSegmentNum is shifted by
    RepresentationHolder.segmentNumShift. When accessing the
    index directly it's necessary to unshift. The easiest way
    to do this is to call through the holder, which does this
    for you.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169239928

commit 9bdf1ee944ad8d021cf5a03bbdb399ff768d57d3
Author: eguven <eguven@google.com>
Date:   Mon Sep 18 09:39:09 2017 -0700

    Check if the cache is already empty before trying to evict more span
    
    This case may happen if the max span size is more than the max size the
    evictor is configured.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169101093

commit 5e2c7d967a74fe0ce67b9c57bb391c40935566d1
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Sep 18 05:44:31 2017 -0700

    Fix 2 CEA decoder bugs
    
    1- Avoid dropped buffers by using a PriorityQueue instead of a set.
    2- Process the end of stream after non-EOS buffers.
    
    Issue:#3250
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169077365

commit 8d739067ece566284c76e2e0ac7248c790a602bb
Author: eguven <eguven@google.com>
Date:   Mon Sep 18 02:42:26 2017 -0700

    Add HlsDownloadTest
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=169064003

commit 457d0ba1b9b9b4995e25d028655867fb4e5821e7
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 15 09:28:28 2017 -0700

    Work around broken AAC decoders on Galaxy S6
    
    Issue: #3249
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168844850

commit b2bc4450df84c8c6f6720a508dc08d5249761886
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 15 07:51:51 2017 -0700

    Run cbc1/cbcs tests from API 25 onwards
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168834998

commit 6592a6474e99d0710b0b03454bde750221a73d64
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 15 03:44:41 2017 -0700

    Improve documentation for SCTE35-related metadata
    
    Also expose break_durations in microseconds instead of 90kHz.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168816992

commit a3a2fb506ce30bd8a3e02eeea5b4503af2d22d44
Author: olly <olly@google.com>
Date:   Thu Sep 14 11:09:18 2017 -0700

    Provisioning: Fix some (admittedly quite theoretical) issues:
    
    1. Only tell sessions that want provisioning when provisioning occurs.
    2. Also propagate failure to provision to these sessions.
    3. If a session responsible for provisioning is released, start
       provisioning using another session instead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168713918

commit a479afff5f45f21810e0345f705fb07a14657ca8
Author: olly <olly@google.com>
Date:   Thu Sep 14 10:34:30 2017 -0700

    Fix potential NPE/ThreadSafety issues with MediaDrm listener
    
    - MediaDrmEventListener.onEvent is typically called on the
      app's main thread. mediaDrmHandler is instantiated on the
      playback thread. Hence mediaDrmHandler should be volatile
      to ensure visibility.
    - Nulling mediaDrmHandler could result in a NPE in onEvent.
      Instantiate mediaDrmHandler (and don't null it again) to
      avoid this. MediaDrmHandler.handleMessage will correctly
      discard any events for sessions that are now closed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168707938

commit 58293abc11a92eb90a0b634e879129d001eec15f
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 14 10:34:22 2017 -0700

    Remove IMA dependency and add AdsMediaSource
    
    AdsMediaSource lives in the core library so only ImaAdsLoader remains in
    the ima extension. AdsMediaSource takes an AdsLoader implementation.
    
    ImaAdsMediaSource is deprecated rather than removed for now.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168707921

commit 0ad39c642d8ff7881d7b3623a82669461c6deb48
Author: olly <olly@google.com>
Date:   Thu Sep 14 09:35:08 2017 -0700

    Relax test termination for API level 23 and above
    
    This allows test runs to continue when the activity
    is paused (but not stopped), which is in line with
    what we do in the demo app's PlayerActivity.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168699521

commit f2aed7186e9c47ddc55456c5f5bbeb5cb3100988
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 14 04:31:17 2017 -0700

    Workaround the skip ad button not being focused
    
    Issue: #3258
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168669969

commit b3004ab1c302bf9a0e195fc4234b982f2ffee255
Author: hoangtc <hoangtc@google.com>
Date:   Thu Sep 14 04:28:56 2017 -0700

    Do not apply SampleStream skip-ahead for NoSampleRenderer.
    
    Currently, to make transition to next media period seamless, after the renderer
    has read until the end of the current SampleStream, we may send it the next
    SampleStream so the renderer may read from the next SampleStream ahead of the
    transition.
    For NoSampleRenderer, we should avoid doing this: skipping ahead for such
    renderer doesn't have any benefit (the renderer does not consume data from
    SampleStream), and it will change the provided rendererOffsetUs while the
    renderer is still rendering from the playing media period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168669800

commit 7d59383cc442d8e443e08732c985b886f8d033a0
Author: tonihei <tonihei@google.com>
Date:   Wed Sep 13 09:25:46 2017 -0700

    Add reason to onPositionDiscontinuity.
    
    This allows listeners to easily determine the source of the discontinuity.
    Reasons can be period transitions, seeks, and internal reasons.
    
    Listeners still using the deprecated ExoPlayer.EventListener interface were
    updated to Player.EventListener.
    
    GitHub: #3252
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168549612

commit 872cbec9e13391da31135bf6e1fad280f41c5458
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Sep 13 09:08:43 2017 -0700

    Add TrimmingAudioProcessor for gapless
    
    Remove gapless functionality that relies on MediaCodec, and implement this in
    an AudioProcessor instead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168547487

commit c9591d76179c1fd9f4bd49ab442c5f7f484ee64a
Author: hoangtc <hoangtc@google.com>
Date:   Wed Sep 13 08:54:43 2017 -0700

    Added support for No-Sample Renderer.
    
    Currently our Renderer is always associated with and consume data from
    some SampleStreams, which were constructed from the provided MediaSource.
    There are use-cases, in which the users want to have simple Renderer
    implementation that does not consume data from SampleStream at all, but
    render using their custom logic at each rendering position - they mostly just
    need ExoPlayer to keep track of the playback position and enable/disable the
    renderer.
    This CL adds support for such Renderer by adding a TRACK_TYPE_NONE.
    Renderer of such type will be:
    - Associated with null TrackSelection as the result of track-selection
    operation.
    - Associated with EmptySampleStream.
    
    GitHub: #3212
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168545749

commit 5019da3e7b499f50dadfe691af807327e79b5d7c
Author: hoangtc <hoangtc@google.com>
Date:   Wed Sep 13 07:25:41 2017 -0700

    Update ABR logic in AdaptiveTrackSelection for live streaming case
    
    In live streaming, if the playback position is very close to live edge,
    the buffered duration will never reach minDurationForQualityIncreaseMs,
    which prevents switching from ever happening. So we will provide the
    durationToLiveEdgeUs to AdaptiveTrackSelection in live streaming case,
    so it can handle this edge case.
    
    GitHub: #3017
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168535969

commit 39dbb9a7fcaac16704c196187d937b99ba442fd6
Author: olly <olly@google.com>
Date:   Tue Sep 12 08:21:43 2017 -0700

    De-dupe ACTION_DOWN events
    
    Issue: #3259
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168378650

commit f257300d8e770b57a22cc4a9cbf1120943be7e91
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 12 06:18:03 2017 -0700

    Add tv module for USB tuner support + demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168366847

commit 0adb4502f6476f83cdbfcc8cfb9e4ba4fbde28ce
Author: olly <olly@google.com>
Date:   Mon Sep 11 11:34:44 2017 -0700

    Ignore all-zero defaultKid
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168259911

commit f9661b5373f0a88b131b2bddf84b0acbb8454a25
Author: tonihei <tonihei@google.com>
Date:   Mon Sep 11 03:40:58 2017 -0700

    Use Handler callback instead of sleep() to catch InteruptedException.
    
    The sleep used to simulate data load times is ignoring InterruptedExceptions.
    (This is intended and in line with SystemClock.sleep()). However, when a
    Loader cancels an ongoing load, it uses interrupts. To be able to catch these
    and to immediately return from the reading data source, a handler callback
    is used instead of the sleep() method which allows interuptable waiting.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168212652

commit c4bf83dd1a713376e2ba5658de3b1b782a1717ec
Author: tonihei <tonihei@google.com>
Date:   Mon Sep 11 03:03:05 2017 -0700

    Support stop() in FakeExoPlayer and release media properly.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168209817

commit c1810575506764f7aa8ba0a4ec03f9ea2aa51a24
Author: tonihei <tonihei@google.com>
Date:   Mon Sep 11 01:57:00 2017 -0700

    Fix bug in ActionSchedule.
    
    When having a repeat() action and another subsequent action,
    the next action should only be scheduled once (and not repeatedly).
    Thus, the "next" pointer in the repeated action needs to be nulled
    in the first iteration to prevent repeated scheduling of the next action.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168202212

commit 9a91482a1b3ded48c2c163c53e198dbc870ebd75
Author: tonihei <tonihei@google.com>
Date:   Mon Sep 11 01:50:04 2017 -0700

    Release streams in fake adaptive media period.
    
    Releasing the media period should also release the sample streams
    to allow resources to be cleaned up.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168201377

commit 75d5adce6fd5ce9b45b74236fb7f9cd93990e8f2
Author: olly <olly@google.com>
Date:   Mon Sep 11 00:25:36 2017 -0700

    Update dependency versions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168194589

commit 9a026671301f8a6f9d987bf689b7df07360c0a28
Author: ojw28 <olly@google.com>
Date:   Sun Sep 10 18:38:40 2017 +0100

    Update README.md

commit 2fb09dbb79ffb051adb521a99e0491faf374ff12
Merge: ce3042b 4ce862a
Author: ojw28 <olly@google.com>
Date:   Sun Sep 10 18:29:42 2017 +0100

    Merge pull request #3253 from google/dev-v2-r2.5.2
    
    r2.5.2

commit 4ce862adf285120709d60c655bf197877259b8d2
Author: olly <olly@google.com>
Date:   Thu Aug 17 07:59:29 2017 -0700

    Tweak and add READMEs + remove refs to V1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165578518

commit b174bcc173f34b63fde94ca1a1a32ccf0fa7164d
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 17 06:40:44 2017 -0700

    Update extension README with usage instructions
    
    Issue: #3162
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165572088

commit 9b18130eccce4c9bd6e974e24a0e641b7b1102fc
Author: olly <olly@google.com>
Date:   Sun Sep 10 08:39:15 2017 -0700

    Bump to 2.5.2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168155713

commit 340d0be40a6a1d744c79245289075b97db26f78e
Author: olly <olly@google.com>
Date:   Sun Sep 10 08:39:15 2017 -0700

    Bump to 2.5.2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168155713

commit 2d2062bf642661e6fb994f9a17d08ff5a8fcf13e
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Sat Sep 9 01:05:09 2017 +0100

    Fix build for release

commit 4c1fd23d8e8d448a1ce2c688a598953610319a07
Author: olly <olly@google.com>
Date:   Fri Aug 11 06:27:59 2017 -0700

    Add possibility of forcing a specific license URL in HttpMediaDrmCallback
    
    Resubmit of https://github.com/google/ExoPlayer/pull/3136
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164971900

commit 24b4cb844b0aedc624ffdf52baabf640c12aa681
Author: olly <olly@google.com>
Date:   Tue Sep 5 13:06:02 2017 -0700

    Fix attr inheritance in SimpleExoPlayerView
    
    When creating PlaybackControlView inside SimpleExoPlayerView,
    we want certain attributes to be passed through. This lets you
    set control attributes on the SimpleExoPlayerView directly. We
    don't want all attributes to be propagated though; only our own
    custom ones.
    
    Not sure if there's a cleaner way to do this. Pragmatically this
    solution seems ... ok :)?
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167619801

commit a5302be664bf9f1f37477bdc0b70102e24cb98de
Author: olly <olly@google.com>
Date:   Fri Sep 8 11:14:53 2017 -0700

    Destroy EGLSurface during DummySurface cleanup
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168020525

commit 09a8c7cd6ef02f7177363dcd4fb96975803c380a
Author: olly <olly@google.com>
Date:   Fri Sep 8 09:42:13 2017 -0700

    Enable rtmp in external demo app with extensions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168007345

commit ab94bd8b3bdc8185749209f7edce6ce8b2f23fbe
Author: olly <olly@google.com>
Date:   Wed Sep 6 07:26:23 2017 -0700

    Pick up rtmpClient fix
    
    Issue: #3156
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167718081

commit cdcdea2f98da3f1bfe5d18b4edb14f2437acfba7
Author: olly <olly@google.com>
Date:   Wed Sep 6 06:17:09 2017 -0700

    DecryptionException cleanup + add missing header
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167711928

commit 613950143ce1f891a8803a237badbaa77248b6b5
Author: olly <olly@google.com>
Date:   Wed Sep 6 05:40:33 2017 -0700

    Workaround for SurfaceView not being hidden properly
    
    This appears to be fixed in Oreo, but given how harmless
    the workaround is we can probably just apply it on all
    API levels to be sure.
    
    Issue: #3160
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167709070

commit 8719d41e34af4c9c1bfeb7a5301e5226b3d12eaf
Author: olly <olly@google.com>
Date:   Wed Sep 6 03:51:04 2017 -0700

    Fix position reporting during ads when period has non-zero window offset.
    
    Reporting incorrect positions for ad playbacks was causing IMA to
    think the ad wasn't playing, when in fact it was.
    
    Issue: #3180
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167702032

commit d187d294e517b7025fc5a263d5e5dc15a95b0f52
Author: olly <olly@google.com>
Date:   Tue Sep 5 08:17:44 2017 -0700

    Don't use MediaCodec.setOutputSurface on Nexus 7 with qcom decoder
    
    Issue: #3236
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167581198

commit 2853bf8575ba3a0cc025d43b660f69cbac7394bf
Author: olly <olly@google.com>
Date:   Tue Sep 5 08:03:07 2017 -0700

    Upgrade gradle plugin / wrapper
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167579719

commit 8676c4a0f42939d96c5462651f5b2f30a4d9104b
Author: olly <olly@google.com>
Date:   Mon Sep 4 09:57:56 2017 -0700

    Rewrite logic for enabling secure DummySurface
    
    Issue: #3215
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167505797

commit 61ee1f6a27447ca89e3d6a12250d579d13f9a419
Author: olly <olly@google.com>
Date:   Mon Sep 4 09:26:59 2017 -0700

    Be robust against unexpected EOS in WebvttCueParser
    
    Issue: #3228
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167504122

commit 5ceccac63d15ba9ac9b6d8189ae95f71a0f6b6ac
Author: olly <olly@google.com>
Date:   Mon Sep 4 08:55:20 2017 -0700

    Additional secure DummySurface device exclusions
    
    Merge: https://github.com/google/ExoPlayer/pull/3225
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167502127

commit 3d38e62205e2396864c5f4c45943377b1a38fdcb
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 4 07:28:24 2017 -0700

    Adding missing license header in IMA build.gradle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167496569

commit a73601f36f68b867b794b944cdb7da0ccd2ffe7e
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 4 06:47:03 2017 -0700

    Allow EXIF tracks to be exposed
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167493800

commit 65b14baab879fa27ceb2dec5273c9d37ee4c0557
Author: olly <olly@google.com>
Date:   Mon Sep 4 05:32:54 2017 -0700

    Update moe eqiuvalence
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167488837

commit 92185aa33c1e681a679479dc80cf1f1d4fa2b607
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 4 11:34:57 2017 +0100

    Minor cleanup to AspectRatioFrameLayout

commit 5cb78fa4c7b293b8c2d8cb32065bee9e7d8d21ef
Author: olly <olly@google.com>
Date:   Mon Sep 4 02:11:00 2017 -0700

    Fix typo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167474040

commit acd16d6eea178f21af897039c4086d9600652af2
Author: anjalibh <anjalibh@google.com>
Date:   Fri Sep 1 18:02:20 2017 -0700

    HDR 10 bits: Use a separate sampler for U and V dithering.
    Using the same sampler introduced some minor horizontal scratches.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167347995

commit d9427750682dbca40a6d41170eed9379e8a29fba
Author: olly <olly@google.com>
Date:   Thu Aug 31 04:13:13 2017 -0700

    Allow more aggressive switching for HLS with independent segments
    
    We currently switch without downloading overlapping segments, but
    we do not actually switch more aggressively. This change fixes
    this. Note there's an implicit assumption made that if one media
    playlist declares independent segments, the others will too. This
    is almost certainly true in practice, and if it's not the penalty
    isn't too bad (the player may try and switch to a higher quality
    variant one segment's worth of buffer too soon).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167120992

commit 2d4efffd1208a715536fc0907b641c0677571514
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 30 10:51:37 2017 -0700

    Fix ContentDataSource bytesRemaining calculation
    
    The bytesRemaining didn't always take into account any skipped bytes, which
    meant that reaching the end of the file was not correctly detected in read().
    
    Issue: #3216
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167016672

commit e70df7c22007ff67e8c10e4f387dbc30d5f08d61
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 30 10:20:37 2017 -0700

    Use UTF-8 everywhere
    
    UTF-8 is the default charset on Android so this should be a no-op change, but
    makes the code portable (in case it runs on another platform).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167011583

commit 219ad8a73e51e3740b0c6bb03ec8f47e42f2f5ae
Author: Danny Brain <me@danielbrain.com>
Date:   Thu Aug 31 14:31:18 2017 +1000

    #3215 Additional secure DummySurface device exclusions

commit 3137fcd1ca590a615fd5bbbac53f55024c160cdd
Author: Shyri Villar <igs.villar@gmail.com>
Date:   Wed Aug 30 16:25:50 2017 +0200

    Add support for new codecs parameter string

commit 64b1566ad4230dd092e40e80a054288366bae051
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 29 02:15:08 2017 -0700

    Use Math.abs in Sonic.java
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166820970

commit bbb030829524a4efd56cb3898a3e4840714dc3cc
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 23 06:53:11 2017 -0700

    Allow subclasses to customize the MediaFormat
    
    Make getMediaFormat protected so that subclasses can set additional MediaFormat
    keys. For example, if the decoder output needs to be read back via an
    ImageReader as YUV data it is necessary to set KEY_COLOR_FORMAT to
    COLOR_FormatYUV420Flexible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166195211

commit b80e3af2c978a482bceb7a8cb6fdfe41998ffe12
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 24 16:13:44 2017 -0700

    Support zoom mode for AspectRatioFrameLayout

commit 9aa4aa8ff5667f6e9bce9a112708f6f91dcaea14
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 24 14:31:33 2017 -0700

    Support aspect ratio fill mode for AspectRatioFrameLayout

commit 8524fb343bc353c0ff8d4962320dd980cd8c826f
Author: olly <olly@google.com>
Date:   Tue Aug 22 07:41:32 2017 -0700

    Use flavorDimensions for external demo app
    
    - This is soon becoming mandatory.
    - It also looks like future versions of com.android.tools.build
      are being distributed via Google's Maven repository.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166058299

commit cc5cfd46c01afda58b43d0e5b8982ddacbd3a6e8
Author: olly <olly@google.com>
Date:   Mon Aug 21 07:26:50 2017 -0700

    Handle size==0 in MP4 atoms
    
    Issue: #3191
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165925148

commit 85bc8a08dbb7aa960ec091d2b8cfb4c3a81991a1
Author: olly <olly@google.com>
Date:   Mon Aug 21 06:31:41 2017 -0700

    Fix broken link + minor doc tweak
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165920927

commit 351b8a60d1ec8c89ca22d85e9f99facd89175fe3
Author: tonihei <tonihei@google.com>
Date:   Mon Aug 21 03:49:38 2017 -0700

    Remove isFirstWindow/isLastWindow from Timeline.
    
    These methods are only used in one place, and offer duplicate
    functionality to checking getNext(Previous)WindowIndex == C.INDEX_UNSET.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165910258

commit 4c51d386d5864cd7983a36ba683757672635c2d4
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 21 00:47:34 2017 -0700

    Allow the app to specify extra ad markers
    
    Issue: #3184
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165895259

commit 47e3b4dc3e66b7174cdc9e4eb9e25261ab5a63bb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 17 23:13:12 2017 +0100

    Minor style tweaks

commit 51dac5838da0e3466f36136d13fcaabfdcb89460
Author: Dulmandakh <dulmandakh@gmail.com>
Date:   Wed Aug 9 15:42:58 2017 +0900

    expose setPropertyByteArray, setPropertyString
    
    export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization.

commit d824aa9db712a57da39201829125a677c90dd925
Author: olly <olly@google.com>
Date:   Thu Aug 17 14:19:41 2017 -0700

    Improve MediaSource/MediaPeriod documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165628229

commit 38bc289e71bc5a2516d6a3ff21076cbf932cf2ea
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 17 08:14:46 2017 -0700

    Improve FORMAT_UNSUPPORTED_DRM related documentation and logging
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165580016

commit 7e9b1fc8ae793e360b094876175a0fcf3f94ccfe
Author: olly <olly@google.com>
Date:   Thu Aug 17 07:48:49 2017 -0700

    Work around issue with Xiaomi JB devices
    
    Issue: #3171
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165577562

commit 94a5e9bc3abd955360c61ada39f293079081894d
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 16 04:47:51 2017 -0700

    Restore the interrupted flag after blocking operations
    
    If the main thread was interrupted during
    ExoPlayerImplInternal.blockingSendMessage/release, the interrupted flag was
    immediately set but then wait() was called on the next iteration. wait() would
    immediately throw InterruptedException, causing the main thread to spin until
    the blocking operation completed.
    
    Instead of resetting the flag immediately, reset it after the blocking
    operation completes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165426493

commit 0e16c43f0cd73bc6ea00e680bee5f72aa13bf29f
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:45:22 2017 -0700

    Destroy GL context when releasing dummy surface
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165293386

commit 04131a1ee143c44526238cb5685360ce7a491a39
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:14:24 2017 -0700

    Update instructions to include Google Maven repository
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165291982

commit a2a2acfd6a5ded91bcd37aa15ad0be7ed1fa6d83
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:06:29 2017 -0700

    Disable secure dummy surface on all Samsung N devices
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165291627

commit e198667251f56c0900f42286d95fbcf308d1ec3f
Author: mdoucleff <mdoucleff@google.com>
Date:   Mon Aug 14 10:35:37 2017 -0700

    Add flag to CachedContentIndex to disable encryption.  This allows the encryption feature
    to be disabled gracefully: encrypted index files may be read, but plaintext will be written.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165196508

commit 7bde58a46d3c992ba17d8016223d8ba41a42f486
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 17 11:01:42 2017 -0700

    Support crop mode for AspectRatioFrameLayout

commit 85d6c0f0a9ec7159880db6d5f7598409a85e9032
Author: Danny Brain <me@danielbrain.com>
Date:   Thu Aug 17 21:30:46 2017 +1000

    Fix possible subrip timing line NPE

commit 44fa0b446ebf1c4008e9e5e1dda1df4fafd4ef13
Author: WeiChungChang <r97922153@gmail.com>
Date:   Thu Aug 17 13:49:41 2017 +0800

    Support H262 video in MP4

commit b9ead4b7d1a89b6cbcdcf9d50688e9f9e6d1c6fe
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 11 15:47:03 2017 +0100

    Restrict usage of secure DummySurface for all Samsung devices.

commit 1f20e6f31ed0a8f4755be4e188632e27076a98fb
Author: olly <olly@google.com>
Date:   Thu Aug 10 04:45:40 2017 -0700

    Fix maskingX variables when timeline becomes empty
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164840037

commit 99f603c404302c4b0073e0111ba4a1422ad91d5b
Author: olly <olly@google.com>
Date:   Thu Aug 10 04:42:27 2017 -0700

    Support multiple video/text/metadata outputs
    
    We've seen more than one issue filed where a developer has
    registered a video listener and been confused by the fact
    their SimpleExoPlayerView no longer works properly. There
    are also valid use cases for having multiple metadata/text
    outputs.
    
    Issue: #2933
    Issue: #2800
    Issue: #2286
    Issue: #2240
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164839882

commit cf6c247bec92a17e2126b8a47be80cefa8f99e87
Author: bachinger <bachinger@google.com>
Date:   Wed Aug 9 14:35:38 2017 -0700

    set mediaSession flags properly and keep queue in sync when timeline changes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164774783

commit 5fedbf76db277bb2bb39ddba5a00f3d8cff66b51
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:27:13 2017 -0700

    Document usage of the RTMP extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164706135

commit 154f17ef1e8abbcd7c3a006378dd1935748e186a
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:26:18 2017 -0700

    Fix minor Javadoc error
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164706078

commit bc0829503acd094d58fecb6bde64f4b734654c5d
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:21:25 2017 -0700

    Clean up terminology for MediaSession extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164705750

commit 74e8acf14f23fc60abe7c0a06dd3c03eeb3e2316
Author: olly <olly@google.com>
Date:   Tue Aug 8 10:54:06 2017 -0700

    Minimal change to expose segment indices in DefaultDashChunkSource
    
    Issue: #3037
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164614478

commit 5a4155f09fee738da4ebd024a4f1b0a071d0fd42
Author: olly <olly@google.com>
Date:   Fri Sep 8 11:14:53 2017 -0700

    Destroy EGLSurface during DummySurface cleanup
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168020525

commit 40d443dc027c7a3e6ba45dd62ef6777906197dc1
Author: olly <olly@google.com>
Date:   Fri Sep 8 09:42:13 2017 -0700

    Enable rtmp in external demo app with extensions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=168007345

commit ec38d0d8ab8cc0d810d16d052fbf700b8fc603d8
Author: tonihei <tonihei@google.com>
Date:   Fri Sep 8 07:54:10 2017 -0700

    Check thread is still alive before sending message in Loader.
    
    The release callback handler in Loader might not be alive
    anymore. Catch this case to prevent warnings about sending
    messages on dead threads.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167996538

commit 8f43dcd424c02ae15ceae578764d620409506a06
Author: tonihei <tonihei@google.com>
Date:   Fri Sep 8 07:34:07 2017 -0700

    Clear buffer in fake renderer in each iteration.
    
    This simulates reading from the buffer (which is what actual
    renderers would do). Otherwise the buffer always gets expanded
    and might cause memory issues.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167994899

commit b2627d63fdb0215f65096ef2fe0c8e47c341e4a2
Author: tonihei <tonihei@google.com>
Date:   Fri Sep 8 04:05:38 2017 -0700

    Allow ExoPlayerTestRunner to end when Player.stop() is called.
    
    In this case the playback state transitions to IDLE, which isn't
    caught so far. (This code is equivalent to the one in ExoHostedTest.java)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167980981

commit 7c3fe19d3f5e0a08d855d4564c5c09d9e41d2ba2
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 7 01:45:56 2017 -0700

    Migrate remaining tests to Robolectric
    
    Remaining instrumentation tests either use android.os.Handler or rely on assets.
    In the latter case, the tests are difficult to migrate due to differences
    between the internal and external build systems, and configuration needed in
    Android Studio. In addition, SimpleCacheSpanTest remains as an instrumentation
    test because it fails due to a problem with string encoding on the internal
    build (and two other tests in its package are kept with it because they depend
    on it).
    
    This test removes a dependency from testutils on Mockito, as a different
    version of Mockito needs to be used for instrumentation tests vs Robolectric
    tests, yet both sets of tests need to rely on testutils. Mockito setup is now
    done directly in the tests that need it.
    
    Move OggTestData to testutils so it can be used from both instrumentation and
    Robolectric tests.
    
    It may be possible to simplify assertions further using Truth but this is left
    for possible later changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167831435

commit 7053284b02aa0c05cce9ac3c47d9725b046b0cb7
Merge: 4869a25 ce3042b
Author: Oliver Woodman <olly@google.com>
Date:   Wed Sep 6 19:05:37 2017 +0100

    Merge branch 'release-v2' into dev-v2

commit 4869a2506960899a94215df1fbf536e6542ac984
Author: olly <olly@google.com>
Date:   Wed Sep 6 07:26:23 2017 -0700

    Pick up rtmpClient fix
    
    Issue: #3156
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167718081

commit 7d4190f3c84a223d189d5f0689778b1b047da886
Author: olly <olly@google.com>
Date:   Wed Sep 6 07:22:00 2017 -0700

    Regroup final/non-final vars
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167717715

commit c6fa034eba88fe1a7fc62aae3288006ff4f3ad6d
Author: olly <olly@google.com>
Date:   Wed Sep 6 06:17:09 2017 -0700

    DecryptionException cleanup + add missing header
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167711928

commit d66143d96d3fab350ed67d437acfc927667001ae
Author: olly <olly@google.com>
Date:   Wed Sep 6 06:10:02 2017 -0700

    Add full stops
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167711267

commit e7992513d3494c273cba15e97a9292527f46f668
Author: olly <olly@google.com>
Date:   Wed Sep 6 05:58:56 2017 -0700

    Remove references to MediaDrm from DefaultDrmSession classes
    
    Everything should go through the ExoMediaDrm layer. We still
    need to abstract away the android.media exception classes, but
    this is left as future work.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167710213

commit 013379fd3ee299ab6f24e8d42686af13249d54c2
Author: olly <olly@google.com>
Date:   Wed Sep 6 05:40:33 2017 -0700

    Workaround for SurfaceView not being hidden properly
    
    This appears to be fixed in Oreo, but given how harmless
    the workaround is we can probably just apply it on all
    API levels to be sure.
    
    Issue: #3160
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167709070

commit 17232f58a339809279c0d7f8432a8014ce72309b
Author: olly <olly@google.com>
Date:   Wed Sep 6 03:51:04 2017 -0700

    Fix position reporting during ads when period has non-zero window offset.
    
    Reporting incorrect positions for ad playbacks was causing IMA to
    think the ad wasn't playing, when in fact it was.
    
    Issue: #3180
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167702032

commit 8ef6a2e7bd4f10c4e1600b67bfc94a1ab00865b7
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Sep 6 00:14:55 2017 -0700

    Clear gapless playback metadata for clipped media
    
    Also pass an unresolved end point to ClippingMediaPeriod. This removes some
    assertions checking timestamps in the ClippingMediaPeriod, but makes it
    possible to identify when the end point is at the end of the media.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167683358

commit fb023da529d9d86ec2f7c921dae7ba084fa50e5c
Author: olly <olly@google.com>
Date:   Tue Sep 5 13:06:02 2017 -0700

    Fix attr inheritance in SimpleExoPlayerView
    
    When creating PlaybackControlView inside SimpleExoPlayerView,
    we want certain attributes to be passed through. This lets you
    set control attributes on the SimpleExoPlayerView directly. We
    don't want all attributes to be propagated though; only our own
    custom ones.
    
    Not sure if there's a cleaner way to do this. Pragmatically this
    solution seems ... ok :)?
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167619801

commit b62eab63a4d13945d07431be3d30628392646260
Author: zhihuichen <zhihuichen@google.com>
Date:   Tue Sep 5 11:06:03 2017 -0700

    Implement multi session to support DRM key rotation.
    Spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_Android_Using_Key_Rotation.pdf
    
    1. Implement multisession to support drm key rotation
    2. Put MediaDrmEventListener back to manager since this is a per mediaDrm thing.
    3. It seems diffrenciate between single/multi session is unnecessary.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167602965

commit e16610a82c696b6121301c792c7f04d5e36a37c7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Sep 5 08:47:02 2017 -0700

    Fix import formatting
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167584287

commit 8413dab9dec518a3311762747084fac83d6e03c4
Author: tonihei <tonihei@google.com>
Date:   Tue Sep 5 08:32:56 2017 -0700

    Use clock in action schedule to handle delays.
    
    This allows to use a fake clock and an action schedule with timed delays
    together.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167582860

commit 0183a83047360f3bf2c60b2180ce356c75b454da
Author: olly <olly@google.com>
Date:   Tue Sep 5 08:17:44 2017 -0700

    Don't use MediaCodec.setOutputSurface on Nexus 7 with qcom decoder
    
    Issue: #3236
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167581198

commit a90cef0cb5e581757b43264e923e06653cda183e
Author: olly <olly@google.com>
Date:   Tue Sep 5 08:03:07 2017 -0700

    Upgrade gradle plugin / wrapper
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167579719

commit 2f4a3fe1f3a95ed9a8029c6e3d21e537852bc271
Author: tonihei <tonihei@google.com>
Date:   Tue Sep 5 05:50:43 2017 -0700

    Add postDelayed operation to Clock interface.
    
    The default implementation is just calling through to handler.postDelayed,
    while the fake clock uses its internal time value to trigger the handler
    calls at the correct time.
    
    This is useful to apply a fake clock in situations where a handler is used to
    post delayed messages.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167567914

commit 264f1c903def8a4f8ec7b65d52478470fc8a6358
Author: tonihei <tonihei@google.com>
Date:   Tue Sep 5 05:23:22 2017 -0700

    Fix bug in FakeChunkSource.
    
    In order to retrieve the data set, the track selection index was used, but
    the data set is actually indexed by track group indices.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167566049

commit bec5e6e2b2b59290963f7a22a6d005c8dac467e5
Author: olly <olly@google.com>
Date:   Mon Sep 4 09:57:56 2017 -0700

    Rewrite logic for enabling secure DummySurface
    
    Issue: #3215
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167505797

commit a0df5bb50a817bf99c335be2479ab9293ec735bf
Author: olly <olly@google.com>
Date:   Mon Sep 4 09:26:59 2017 -0700

    Be robust against unexpected EOS in WebvttCueParser
    
    Issue: #3228
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167504122

commit 472df08f0837ebbdcd0b1c7e8269ad816b13269b
Author: olly <olly@google.com>
Date:   Mon Sep 4 08:55:20 2017 -0700

    Additional secure DummySurface device exclusions
    
    Merge: https://github.com/google/ExoPlayer/pull/3225
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167502127

commit c9f31a41cd45bfe0a522ee77dfbe1af8ffd97442
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 4 07:28:24 2017 -0700

    Adding missing license header in IMA build.gradle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167496569

commit 0d86f4475c4b30e5a1a0ac55a5479ca680fc2096
Author: hoangtc <hoangtc@google.com>
Date:   Mon Sep 4 06:55:07 2017 -0700

    Remove the resampling to 16bit step from FlacDecoder.
    
    Currently FlacDecoder/FlacExtractor always perform resampling to 16bit. In some
    case (with 24bit audio), this might lower the audio quality if the system
    supports 24bit audio.
    Since AudioTrack implementation supports resampling, we will remove the
    resampling step, and return an output with the same bits-per-sample as the original stream.
    User can choose to re-sample to 16bit in AudioTrack if necessary.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167494350

commit bab2ce817e76431243aab61cb40425d163c3141d
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 4 06:47:03 2017 -0700

    Allow EXIF tracks to be exposed
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167493800

commit ab1e4df11aefe71c8069730ad5a9300733440f25
Author: olly <olly@google.com>
Date:   Mon Sep 4 05:32:54 2017 -0700

    Update moe eqiuvalence
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167488837

commit 0da8e1af6727aa0708ae498c83652957874e6628
Merge: 74b8c45 0c7f116
Author: ojw28 <olly@google.com>
Date:   Mon Sep 4 15:28:50 2017 +0100

    Merge pull request #3225 from dbrain/3215_additional_dummy_secure_surface_exclusions
    
    #3215 Additional secure DummySurface device exclusions

commit 74b8c45e6dd9c13ed9a32a1aad1ce795535b2ac2
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 4 11:34:57 2017 +0100

    Minor cleanup to AspectRatioFrameLayout

commit 1a6a6c901fb0e2442049a0eb6faeb7954a9356ee
Merge: 21363d2 49c2926
Author: ojw28 <olly@google.com>
Date:   Mon Sep 4 10:33:02 2017 +0100

    Merge pull request #3223 from Shyri/vp09-support
    
    Add support for new codecs parameter string

commit 21363d2f8e451a9558d40e171ffc838d289b6fcd
Merge: ba0bd72 b084821
Author: ojw28 <olly@google.com>
Date:   Mon Sep 4 10:31:21 2017 +0100

    Merge pull request #3187 from stellabei/stellabei/aspect-ratio-crop
    
    Support zoom mode for AspectRatioFrameLayout

commit ba0bd729192f6f99e80cc11d647e3ddc41977dda
Author: olly <olly@google.com>
Date:   Mon Sep 4 02:11:00 2017 -0700

    Fix typo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167474040

commit 7804c2b07961390d7a91d788ad2883e5dfbbfdfd
Author: anjalibh <anjalibh@google.com>
Date:   Fri Sep 1 18:02:20 2017 -0700

    HDR 10 bits: Use a separate sampler for U and V dithering.
    Using the same sampler introduced some minor horizontal scratches.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167347995

commit ca2bfbc56ea91169e2abdb56170340cf28e8e9f7
Author: olly <olly@google.com>
Date:   Fri Apr 7 12:10:08 2017 +0100

    DashManifestParser: Move schemeType up to DrmInitData
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167171407

commit daafbb1f1ce0cae9a23c324a073ca38e02ed8a52
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 31 10:02:43 2017 -0700

    Add missing Robolectric test path to codebase
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167151714

commit f15ce81c4763e2a4e6c606c9aeb8d24024b86440
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 31 09:33:55 2017 -0700

    Move some unit tests to use Robolectric
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167148146

commit 6bd0ba887c70e500724b4fc87d40db74f8d0c019
Author: olly <olly@google.com>
Date:   Thu Aug 31 04:13:13 2017 -0700

    Allow more aggressive switching for HLS with independent segments
    
    We currently switch without downloading overlapping segments, but
    we do not actually switch more aggressively. This change fixes
    this. Note there's an implicit assumption made that if one media
    playlist declares independent segments, the others will too. This
    is almost certainly true in practice, and if it's not the penalty
    isn't too bad (the player may try and switch to a higher quality
    variant one segment's worth of buffer too soon).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167120992

commit 0b78837f35f54acc3ef41f5ceeb3b634df1cd142
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 30 10:51:37 2017 -0700

    Fix ContentDataSource bytesRemaining calculation
    
    The bytesRemaining didn't always take into account any skipped bytes, which
    meant that reaching the end of the file was not correctly detected in read().
    
    Issue: #3216
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167016672

commit 84c13ccbf3daf7814099137f2cfa27957893c664
Author: bachinger <bachinger@google.com>
Date:   Wed Aug 30 10:32:47 2017 -0700

    Support setRepeatMode (and move shuffle action to PlaybackController)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167013507

commit e80a93d7990db645707f579df58cb380abb1edd4
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 30 10:20:37 2017 -0700

    Use UTF-8 everywhere
    
    UTF-8 is the default charset on Android so this should be a no-op change, but
    makes the code portable (in case it runs on another platform).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=167011583

commit 049d41db2a4a697e23a39271a9a2758c8bd90fbd
Author: olly <olly@google.com>
Date:   Wed Aug 30 07:03:41 2017 -0700

    Add license notes for extensions with non-Google dependencies
    
    Issue: #3197
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166988657

commit 0c7f11606f0eaf3660511d4a478fc80de4c2e63d
Author: Danny Brain <me@danielbrain.com>
Date:   Thu Aug 31 14:31:18 2017 +1000

    #3215 Additional secure DummySurface device exclusions

commit 49c2926e45b2d9ee4fc41dd834074c61c80e2c76
Author: Shyri Villar <igs.villar@gmail.com>
Date:   Wed Aug 30 16:25:50 2017 +0200

    Add support for new codecs parameter string

commit 6bf0b7f3de32b34cc58786474a302198cc18e421
Author: olly <olly@google.com>
Date:   Tue Aug 29 15:51:36 2017 -0700

    Fix moe config II
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166916769

commit b0df6dce9823e11c45c881abf31ac8cb9a9ba92f
Author: olly <olly@google.com>
Date:   Tue Aug 29 15:38:04 2017 -0700

    Fix moe config
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166914821

commit 5bed2bf5032a4e5bea36a30a667a795ed172798a
Author: olly <olly@google.com>
Date:   Tue Aug 29 13:55:19 2017 -0700

    Don't copy primary-track format to non-primary tracks
    
    This time plumbing the track type in from the other side.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166898172

commit d9cd13ce746c496adb6c327cb749e74afcfe2f05
Author: olly <olly@google.com>
Date:   Tue Aug 29 12:15:50 2017 -0700

    Automated rollback of changelist 166843123.
    
    *** Reason for rollback ***
    
    Doesn't work because trackOutputProvider can be null when extracting init data.
    
    *** Original change description ***
    
    Don't copy primary-track format to non-primary tracks
    
    Copying non-primary-track formats to non-primary tracks
    looks non-trivial (I tried; went down a dead-end), so
    leaving that for now.
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166883654

commit 55e928f75acb78107b1defb702e08aa6f3aa42e5
Author: olly <olly@google.com>
Date:   Tue Aug 29 08:50:17 2017 -0700

    Make LeanbackPlayerAdapter use a ControlDispatcher + Misc cleanup
    
    1. Make LeanbackPlayerAdapter use a ControlDispatcher. This
       allows apps to suppress control events in some circumstances,
       and is in-line with our mobile controls.
    2. Misc simplifications and cleanup to LeanbackPlayerAdapter.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166852816

commit 44dc3c3ab3ed599145fff5cf0986ee30880396fe
Author: olly <olly@google.com>
Date:   Tue Aug 29 08:49:51 2017 -0700

    Make all renderers DRM aware
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166852758

commit b2c245281a59973def165e09e9961cd310f1ab8b
Author: olly <olly@google.com>
Date:   Tue Aug 29 08:22:30 2017 -0700

    Parse SchemeData from urn:mpeg:dash:mp4protection:2011 element
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166849631

commit aafdd2267abd6c9191ef66e9cf109cc24e159e30
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Aug 29 08:16:11 2017 -0700

    Add media queue support to CastPlayer
    
    Also workaround the non-repeatable queue and fix other minor issues.
    
    Issue:#2283
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166848894

commit f44e30c7543e63bb8aec54f27626d4c70e808c48
Author: olly <olly@google.com>
Date:   Tue Aug 29 07:19:48 2017 -0700

    Fix mapping CLEARKEY_UUID to COMMON_PSSH_UUID
    
    This mapping when we call into platform components also needs
    to be applied when creating the MediaCrypto instance. The fix
    is to stop propagating the UUID through all the createMediaCrypto
    methods. This is unnecessary, since the eventual target already
    knows its own UUID!
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166843372

commit 3e762270062726a690be50d285474175c81ae91f
Author: olly <olly@google.com>
Date:   Tue Aug 29 07:17:24 2017 -0700

    Don't copy primary-track format to non-primary tracks
    
    Copying non-primary-track formats to non-primary tracks
    looks non-trivial (I tried; went down a dead-end), so
    leaving that for now.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166843123

commit ba6d208fe95b9c9eef431fdd6f6185794154e1a7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 29 02:15:08 2017 -0700

    Use Math.abs in Sonic.java
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166820970

commit cc58b515b773be93ba4572d5ac221cae856ee1ae
Author: eguven <eguven@google.com>
Date:   Fri Aug 25 09:35:10 2017 -0700

    Make Downloaders open source
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166486294

commit 30b31b56792664ebe181bc497282f075f6add1e5
Author: tonihei <tonihei@google.com>
Date:   Fri Aug 25 08:37:38 2017 -0700

    Support empty concatenations and empty timelines in concatenations.
    
    Both cases were not supported so far. Added tests which all failed in the
    previous code version and adapted the concatenated media sources to cope with
    empty timelines and empty concatenations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166480344

commit 01f481984437ce94bed16e71131d0ba084a2b70c
Author: bachinger <bachinger@google.com>
Date:   Fri Aug 25 07:43:15 2017 -0700

    Introduce MediaSessionConnector.CommandReceiver interface and add TimelineQueueEditor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166475351

commit 1b9c904dbae7009fcb448b0db3b2286289f14925
Author: tonihei <tonihei@google.com>
Date:   Fri Aug 25 02:52:35 2017 -0700

    Add UI for shuffle mode.
    
    This includes an option to show and hide the shuffle mode button. When
    pressing the button, the shuffle mode of the player is toggled.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166455759

commit 6907ffb2852d56556c5a4186d6d7cfb00d8d7553
Author: olly <olly@google.com>
Date:   Sun Jul 23 09:55:50 2017 +0100

    Remove unnecessary view casts
    
    findViewById is now defined using generics, which allows
    the types to be inferred.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166355555

commit 6e03dcdfa1fa18a7865085186b7e33790489d46c
Author: olly <olly@google.com>
Date:   Thu Aug 24 05:30:36 2017 -0700

    Add LocalMediaDrmCallback. Useful for providing local keys.
    
    Issue: #3178
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166330215

commit 57bad31e4c17883de178f7a743798c42b6c88dc4
Author: olly <olly@google.com>
Date:   Thu Aug 24 03:37:32 2017 -0700

    Update documentation with new demo app location
    
    Plus a few misc doc fixes / adjustments
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166323135

commit aa712114c66b5e92d73d0529e1cbdb7242e9cd50
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 09:04:29 2017 -0700

    Force stop hosted test after timeout.
    
    When hosted tests run into a timeout, the outer test method stops.
    However, the hosted test itself may continue running and needs to be
    forced-stopped to ensure it does not block any resources needed by
    subsequent test methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166208204

commit eeebb3968b2491539aaacd310d9ebc276faddfb7
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 07:40:05 2017 -0700

    Implement shuffle mode logic in ExoPlayerImplInternal.
    
    This is mostly connecting the already stored shuffleMode with the timeline queries
    for the playback order.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166199330

commit 1305b1155b73cc106c616bebd59ab8592b47acc2
Author: bachinger <bachinger@google.com>
Date:   Wed Aug 23 07:32:53 2017 -0700

    Migrate MediaSessionConnector to API 26 for shuffle mode.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166198698

commit f7eba77ee0378a0886ad9cb9d2b9ddeda8ed2285
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 07:30:29 2017 -0700

    Add shuffle support to dynamic concatenating media source.
    
    The media source is initialized with a DefaultShuffleOrder which can be changed at
    any time. Whenever the list of media source is changed, the shuffle order is adapted
    accordingly (either on the app thread if the player is not prepared yet, or on the
    player thread). The shuffle order is then used to construct the timeline.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166198488

commit e15633e9060d409996ff0f98e4bf274d052e821f
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 07:15:41 2017 -0700

    Add shuffle support to ConcatenatingMediaSource.
    
    The media source is initialized with a DefaultShuffleOrder which can be changed at
    any time. This shuffle order is then used within the corresponding timeline.
    
    The isRepeatOneAtomic flag is extended to also suppress shuffling (now called
    isAtomic only).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166197184

commit 8115e11489cff49dec9cd15c208bc65fc2dfea41
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 23 06:53:11 2017 -0700

    Allow subclasses to customize the MediaFormat
    
    Make getMediaFormat protected so that subclasses can set additional MediaFormat
    keys. For example, if the decoder output needs to be read back via an
    ImageReader as YUV data it is necessary to set KEY_COLOR_FORMAT to
    COLOR_FormatYUV420Flexible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166195211

commit b27c25e88072007b39a7a3c283eed50c2d0efdcd
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 06:42:24 2017 -0700

    Add fake shuffle order.
    
    This just implements a reverse order which is different from the original order but
    still deterministic for simplified testing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166194311

commit 9fd19d0e7c20818269c488e8fdd4d17d9528e5e0
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 06:00:51 2017 -0700

    Add shuffle logic to concatenated timelines.
    
    The implementation in the abstract base class takes care to forward the queries
    to the correct methods given the shuffle mode and a given shuffle order.
    
    All concatenated timeline implementations use an unshuffled order so far. The
    handling of the shuffle orders will follow in other changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166191165

commit 4883a9ba9a44479d02d4c280648a213bdb741e47
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 05:59:32 2017 -0700

    Add shuffle support to infinitely looping timeline.
    
    In addition, let unit test assert window indices for both shuffle modes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166191069

commit bd81181892879b3ca0a573b669cfbce14015cd24
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 03:29:21 2017 -0700

    Add shortcut methods to query next or previous window index.
    
    This functionality is most likely needed by UI modules which currently need
    to obtain the timeline, the current repeat and shuffle modes and are only then
    able to query the next/previous window index using this information.
    
    Adding these methods simplifies these cumbersome requests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166181202

commit 2c8d5f846e4c0e01b772c46f9626954a836a9a47
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 03:27:40 2017 -0700

    Pass shuffle mode to timeline assertion helper methods.
    
    This allows to test the expected behaviour of timeline with different shuffle modes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166181091

commit 10f1bd73961b972ec451076ed539ab7f189b1e62
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 23 01:08:08 2017 -0700

    Add shuffle mode parameter to Timeline interface methods.
    
    This parameter is used by methods such as getNextWindowIndex
    and getPreviousWindowIndex to determine the playback order.
    Additionally, there are method to query the first and last
    window index given the shuffle mode.
    
    None of the timeline implementations nor the ExoPlayer
    implementation supports shuffling so far.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166170229

commit b0848216786d6ebfd35c898286ebdd22e4aa5234
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 24 16:13:44 2017 -0700

    Support zoom mode for AspectRatioFrameLayout

commit 50c485652cb0b52f593b8a4035dcd50e050747e1
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 24 14:31:33 2017 -0700

    Support aspect ratio fill mode for AspectRatioFrameLayout

commit 5214bfa7b1ec229667ac841ff27040fb7ff19fc6
Author: tonihei <tonihei@google.com>
Date:   Tue Aug 22 08:00:09 2017 -0700

    Update ExoPlayerImplInternal with shuffle mode changes.
    
    The shuffle mode is saved using a message on the playback thread.
    After setting the shuffle mode, the same media period holder verification
    as for repeat mode changes gets executed.
    
    Note: the shuffle mode is not used yet to change the playback order.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166060231

commit f0bd40a5b69b0740a100480768481651ba252a5d
Author: olly <olly@google.com>
Date:   Tue Aug 22 07:41:32 2017 -0700

    Use flavorDimensions for external demo app
    
    - This is soon becoming mandatory.
    - It also looks like future versions of com.android.tools.build
      are being distributed via Google's Maven repository.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166058299

commit 6a8c99d037a411f2b45aab0c23d468a5d0e801eb
Author: tonihei <tonihei@google.com>
Date:   Sun Jul 16 07:33:01 2017 +0100

    Support shuffle mode in MediaSessionConnector.
    
    Changes to the player's shuffle mode are forwarded to the media session.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166057425

commit b9a6a405391f8f7be1091cab1d791aa757996469
Author: tonihei <tonihei@google.com>
Date:   Tue Aug 22 07:27:27 2017 -0700

    Add listener callback for shuffle mode changes.
    
    The listener implementations do not do anything yet.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166056933

commit 52ec70dd80d79396ba7bcea16422bc0dc2111200
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Aug 22 05:46:00 2017 -0700

    Add support for KEYFORMAT and SAMPLE-AES (only parsing, not decryption)
    
    Also add sample streams that use METHOD=SAMPLE-AES. Note that some of
    the streams provide alternative EXT-X-KEY's. Support for alternative
    decryption methods will be added in a later CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166048858

commit c1d7e5bf9d4efc6ef1f3d2814cfd8174052bad59
Author: tonihei <tonihei@google.com>
Date:   Tue Aug 22 03:49:50 2017 -0700

    Add set/getShuffleModeEnabled to Player interface.
    
    And implement a basic version of the methods in all implementations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=166041342

commit f1a97317d9fb5c02c8427c990db456aba017086a
Author: olly <olly@google.com>
Date:   Mon Aug 21 07:26:50 2017 -0700

    Handle size==0 in MP4 atoms
    
    Issue: #3191
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165925148

commit f1b3f3a177b144d86fcee3504927e9aac7b10596
Author: olly <olly@google.com>
Date:   Mon Aug 21 06:31:41 2017 -0700

    Fix broken link + minor doc tweak
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165920927

commit cb45a47da18f3c7867abc2b61a8b3f15f151bd89
Author: tonihei <tonihei@google.com>
Date:   Mon Aug 21 03:49:38 2017 -0700

    Remove isFirstWindow/isLastWindow from Timeline.
    
    These methods are only used in one place, and offer duplicate
    functionality to checking getNext(Previous)WindowIndex == C.INDEX_UNSET.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165910258

commit cec0c52c8d336bd54277e342379b81e1cf05745c
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 21 00:47:34 2017 -0700

    Allow the app to specify extra ad markers
    
    Issue: #3184
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165895259

commit 9a9bb2192ca5b8115d8b1bb41fe1d92d585804ae
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 18 13:57:53 2017 -0700

    Fix third_party settings.gradle for demo-cast
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165748557

commit 8e67837afec166c1a965a9f5d01815e2503ae828
Author: mansfieldmark <mansfieldmark@google.com>
Date:   Fri Aug 18 09:46:31 2017 -0700

    Adding conservative @Nullable annotations to Exoplayer v2 Cache + CacheSpan
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165715928

commit a1add8f9e69a824842b59cceb87947b67ef39469
Author: eguven <eguven@google.com>
Date:   Fri Aug 18 06:38:40 2017 -0700

    Fix downcasting in DownloadAction.Serializers
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165699826

commit 1e4f89954825b74d4064b1bb13e35f6a3b9a6759
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 18 06:30:21 2017 -0700

    Add support for the data URI scheme
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165699328

commit cc9a93d9d9f5369c6af158541a01ad32b2b30d4b
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 17 23:18:58 2017 +0100

    Rm SS offline for now

commit 4fa307d6549a9a6126527f95aa72581ba241b2c5
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 17 23:13:12 2017 +0100

    Minor style tweaks

commit ce3042bffcfb538421fa5bd2e807c57248c9f496
Merge: cc5e16e 6107807
Author: ojw28 <olly@google.com>
Date:   Thu Aug 17 23:12:01 2017 +0100

    Merge pull request #3190 from google/revert-3157-dulmandakh-patch-1
    
    Revert "expose setPropertyByteArray, setPropertyString"

commit 61078078df9fe9b7f2305f0ceb016a486cb02af2
Author: ojw28 <olly@google.com>
Date:   Thu Aug 17 23:11:44 2017 +0100

    Revert "expose setPropertyByteArray, setPropertyString"

commit 7e586c3a8fcf7d1967ee2d34eb17bf83aec2106f
Author: Dulmandakh <dulmandakh@gmail.com>
Date:   Wed Aug 9 15:42:58 2017 +0900

    expose setPropertyByteArray, setPropertyString
    
    export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization.

commit 6b7e0cb606b4e2782ca8a2f79755707b6e09dc46
Merge: 7ddcc46 469780f
Author: ojw28 <olly@google.com>
Date:   Thu Aug 17 23:10:05 2017 +0100

    Merge pull request #3182 from WeiChungChang/Support_MP4_in_h262
    
    Support H262 video in MP4

commit cc5e16eccf6fd9e836e570a432bc5df4aa81b900
Merge: 2f8c31d 65e212c
Author: ojw28 <olly@google.com>
Date:   Thu Aug 17 23:09:57 2017 +0100

    Merge pull request #3157 from dulmandakh/dulmandakh-patch-1
    
    expose setPropertyByteArray, setPropertyString

commit 7ddcc46cbdc60c5f3f68375933f9f576de7f5eba
Merge: 2470b39 571f98f
Author: ojw28 <olly@google.com>
Date:   Thu Aug 17 23:09:50 2017 +0100

    Merge pull request #3185 from dbrain/subrip_timing_line_crash
    
    Fix possible subrip timing line NPE

commit 2470b39d9520618c59a8c857085120dd8da2ffee
Author: olly <olly@google.com>
Date:   Thu Aug 17 14:20:56 2017 -0700

    Split metadata and text outputs from their renderer classes
    
    There will be non-ExoPlayer players that can output text
    and metadata, so the outputs should be standalone. There
    may also be ExoPlayer instances that use non-standard
    text and metadata renderers, for which this change also
    makes sense.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165628420

commit 4917929a3aa59b2a688994977fef8680464bff83
Author: olly <olly@google.com>
Date:   Thu Aug 17 14:19:41 2017 -0700

    Improve MediaSource/MediaPeriod documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165628229

commit 106d88df41974ce3c2e5ed2cbd62de1c68e710ba
Author: olly <olly@google.com>
Date:   Wed Jul 19 11:26:49 2017 +0100

    Some no-op LeanbackPlayerAdapter cleanup
    
    - Have a single inner class for all listeners. This is inline
      with what we do elsewhere in the library.
    - Avoid repeated getCallback() calls within methods.
    - Seek to default position from ended state, rather than 0.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165603927

commit e3f305b5c09de7b635125d22d6e14d80c9a4857b
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 17 08:14:46 2017 -0700

    Improve FORMAT_UNSUPPORTED_DRM related documentation and logging
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165580016

commit 34960ad891645514917545926877ad8d009b9ed6
Author: olly <olly@google.com>
Date:   Thu Aug 17 07:59:29 2017 -0700

    Tweak and add READMEs + remove refs to V1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165578518

commit 4d7f37f5a9b55010f3a2f5354a45d86d63c80d25
Author: olly <olly@google.com>
Date:   Thu Aug 17 07:48:49 2017 -0700

    Work around issue with Xiaomi JB devices
    
    Issue: #3171
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165577562

commit 04d76fa8fc3f997580c38ef1965dd8e6a58a7f29
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 17 07:41:10 2017 -0700

    Allow easier ExoPlayer/Cast integration
    
    This CL adds the fundamental pieces for ExoPlayer/Cast integration and includes a
    demo app to showcase this functionality. However, media queues should be supported
    in the first release of this extension.
    
    Issue:#2283
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165576892

commit 1cfd246cd32f901148c36d7671c6aebc93fa5361
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 17 06:40:44 2017 -0700

    Update extension README with usage instructions
    
    Issue: #3162
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165572088

commit a24f2b75b0e3c60813ef1d5e13728a8f0af3cb77
Author: olly <olly@google.com>
Date:   Thu Aug 17 04:04:01 2017 -0700

    Host GTS content ourselves + prevent spurious test passes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165561808

commit c2d2d967e93a1156e3c4c5e218d5193e2ec99967
Author: zhihuichen <zhihuichen@google.com>
Date:   Wed Aug 16 14:38:57 2017 -0700

    Refactor DrmSession part into a separate class to prepare for multi session scenario. NO_SQ=flaky
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165497666

commit 978019a1a383eb4c87a3a628597a8c4df35ec433
Author: eguven <eguven@google.com>
Date:   Wed Aug 16 08:45:10 2017 -0700

    Add ProgressiveDownloadAction
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165447436

commit 8e45bd27df2b37be2b3ac9cfda3774698e497a0a
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 16 07:29:11 2017 -0700

    Add nullable annotations to Renderer constructors
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165437929

commit bbc3b182bbd3bdfeeeb758c67d030b7e73e52615
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 16 04:47:51 2017 -0700

    Restore the interrupted flag after blocking operations
    
    If the main thread was interrupted during
    ExoPlayerImplInternal.blockingSendMessage/release, the interrupted flag was
    immediately set but then wait() was called on the next iteration. wait() would
    immediately throw InterruptedException, causing the main thread to spin until
    the blocking operation completed.
    
    Instead of resetting the flag immediately, reset it after the blocking
    operation completes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165426493

commit e0b69b8115290b884f1f2f56eae1571449cfc620
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 15 09:04:00 2017 -0700

    Add Format.copyWithRotationDegrees
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165314250

commit f72cd2b01484698e8c6ffe6ea47d6dd71d6b1722
Author: olly <olly@google.com>
Date:   Tue Aug 15 07:36:28 2017 -0700

    Add SmoothStreaming downloader and download action
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165305815

commit b9f5cc7256041f869dfef259f6311cfed4d9c49d
Author: olly <olly@google.com>
Date:   Tue Aug 15 05:26:13 2017 -0700

    Add missing TrackKey class
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165296184

commit 4b706d948471c9d2e2794d4e780f3de9ac207796
Author: olly <olly@google.com>
Date:   Tue Aug 15 05:23:15 2017 -0700

    Add SsManifest.copy and TrackKey for SmoothStreaming downloads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165295985

commit c94bce17b4d8c39046d81c7ec4aa16a9a8f43b75
Author: olly <olly@google.com>
Date:   Sun Jul 16 05:14:19 2017 +0100

    Make data sources private in SegmentDownloader
    
    Also fix SegmentDownloader.remove to not return early
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165295432

commit f8e47553e8c34c2105b0865f33918f300d37a823
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:45:22 2017 -0700

    Destroy GL context when releasing dummy surface
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165293386

commit 757bcf7c6346a4c8757b1d3a462bc5a84a21123c
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:14:24 2017 -0700

    Update instructions to include Google Maven repository
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165291982

commit 00547c578345676bc26fdfe1d84339adfd7c067e
Author: olly <olly@google.com>
Date:   Tue Aug 15 04:06:29 2017 -0700

    Disable secure dummy surface on all Samsung N devices
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165291627

commit 08d16c55d4713eb5865c05fff890f4a5770b0376
Author: olly <olly@google.com>
Date:   Mon Aug 14 13:20:23 2017 -0700

    Some Leanback extension + minVersion bump fixes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165219604

commit d9cd4641f2bc3678cc232bf3358b0f40b04d9dee
Author: mdoucleff <mdoucleff@google.com>
Date:   Mon Aug 14 10:35:37 2017 -0700

    Add flag to CachedContentIndex to disable encryption.  This allows the encryption feature
    to be disabled gracefully: encrypted index files may be read, but plaintext will be written.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165196508

commit c9393db8789edfacdaff47fd7254990d11c3ff0f
Author: susnata <susnata@google.com>
Date:   Mon Aug 14 08:53:03 2017 -0700

    Creating an leanback extension for ExoPlayer. Leanback added support for new
    transport control, which allows developers to plug in any media player. This
    extension provides the PlayerAdapter implementation for ExoPlayer.
    
    Demo:
    https://drive.google.com/open?id=0B1GHUu5ruGULZTJVV1pVNlBuVjQ
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165183497

commit cf6534ea5b50855488f78011d5907ef84101acc8
Author: olly <olly@google.com>
Date:   Mon Aug 14 08:31:59 2017 -0700

    SegmentDownloader loadManifest cleanup.
    
    - HlsDownloader.loadManifest (previously called getHlsPlaylist)
      suppressed errors for the offline case, where-as the DashUtil
      equivalent method did not. This change makes them consistent
      and moves both other to use ParsingLoadable.
    - Enable GZIP for manifest loads in both cases.
    - Use Uri rather than String to represent Uris. Previously the
      strings were parsed into Uris quite deep in the code, which
      isn't ideal if the parsing fails; you'd probably prefer the
      error to occur early at the top level.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165181398

commit fb83872365f8023f019567c65757addccbc0dbda
Author: olly <olly@google.com>
Date:   Mon Aug 14 05:57:59 2017 -0700

    Remove unused method
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165168924

commit 870c8ae4df9b3a0157318bcd4790906efc48430e
Author: olly <olly@google.com>
Date:   Mon Aug 14 03:15:43 2017 -0700

    Fix canAcquireSession for ClearKey
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=165159376

commit f764fe70b0306d7650cf83345f06ce3dd753470e
Author: Bei Yi <stellabei@gmail.com>
Date:   Thu Aug 17 11:01:42 2017 -0700

    Support crop mode for AspectRatioFrameLayout

commit 571f98f546d7c846ed672ff5250e47b43177c3d9
Author: Danny Brain <me@danielbrain.com>
Date:   Thu Aug 17 21:30:46 2017 +1000

    Fix possible subrip timing line NPE

commit 469780f7ea5ec59ccf8b72b085ed98249724b195
Author: WeiChungChang <r97922153@gmail.com>
Date:   Thu Aug 17 13:49:41 2017 +0800

    Support H262 video in MP4

commit 1829d71d29435ca1eb4240d4aed7cb1315e2b606
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 11 15:47:03 2017 +0100

    Restrict usage of secure DummySurface for all Samsung devices.

commit 730d2dd18ffa8902d84e08adf807c8bbb9f8afc6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 11 15:46:49 2017 +0100

    Formatting cleanup

commit 2e950633c797d15f05bdfa3b3c2abba0faa6a2f0
Merge: c661ed4 fc9a585
Author: ojw28 <olly@google.com>
Date:   Fri Aug 11 15:43:43 2017 +0100

    Merge pull request #3161 from DolbyLaboratories/dev-v2-eac3-7.1
    
    Support 7.1 EAC3 in MP4, DASH and HLS formats

commit c661ed42de666cbd6043dc6d43acd24058b67e8a
Author: olly <olly@google.com>
Date:   Fri Aug 11 06:27:59 2017 -0700

    Add possibility of forcing a specific license URL in HttpMediaDrmCallback
    
    Resubmit of https://github.com/google/ExoPlayer/pull/3136
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164971900

commit 40f34956a836557ba7dac681984bb076658715f1
Author: olly <olly@google.com>
Date:   Thu Aug 10 09:34:25 2017 -0700

    Bump minimum and target API levels + support lib version
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164863447

commit fc9a58529a1fddc2ef9ade587266846e47bfc535
Author: ybai001 <ybai@dolby.com>
Date:   Thu Aug 10 14:32:52 2017 +0800

    Support 7.1 EAC3 in MP4, DASH and HLS formats

commit 1b28d83f16e5a35e78082c79f8fed3c556122955
Author: olly <olly@google.com>
Date:   Thu Aug 10 04:45:40 2017 -0700

    Fix maskingX variables when timeline becomes empty
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164840037

commit 88bae5d9750333f0706e475d0024600ea057a1e6
Author: olly <olly@google.com>
Date:   Thu Aug 10 04:42:27 2017 -0700

    Support multiple video/text/metadata outputs
    
    We've seen more than one issue filed where a developer has
    registered a video listener and been confused by the fact
    their SimpleExoPlayerView no longer works properly. There
    are also valid use cases for having multiple metadata/text
    outputs.
    
    Issue: #2933
    Issue: #2800
    Issue: #2286
    Issue: #2240
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164839882

commit 5ab0c620bf84f8d24b9a1894359c25a17c7ab479
Author: olly <olly@google.com>
Date:   Thu Aug 10 04:31:01 2017 -0700

    Clean up ClearKey UUIDs
    
    - There is a proper ClearKey UUID now. This change requires
      it to be used instead of the Common PSSH UUID when instantiating
      DRM components.
    - Internally, we'll map the ClearKey UUID onto the Common PSSH
      UUID where necessary to (a) access the ClearKey CDM on older
      devices, and (b) access drm init data stored under the Common
      PSSH UUID in the stream.
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164839213

commit 2d0044fee4f99097cc4c53854b5f91322adaf282
Author: eguven <eguven@google.com>
Date:   Thu Aug 10 02:25:55 2017 -0700

    Generic DownloadManager and DownloadService
    
    Downloader specific parameters and constructor is moved to DownloadAction class.
    
    DownloadAction objects need to be serialized so they can be passed in Intents and can be stored to
    filesystem (to be implemented). So  DownloadAction.Serializer is added. Didn't use Serializable interface
    because of the concerns over incompabilities when the new versions of classes are used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164831115

commit ab277675a15afa7d546bfa0c7e92a61bf5484dc3
Author: bachinger <bachinger@google.com>
Date:   Wed Aug 9 14:35:38 2017 -0700

    set mediaSession flags properly and keep queue in sync when timeline changes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164774783

commit 0d11ebdf2d814eb6dbe0a820ae5c4b7d415a95ba
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Aug 9 08:25:06 2017 -0700

    Run optimage to optimize demo app's PNGs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164726319

commit b6b84839ed25476667abe6cdf6ccf0a41c8ab9b7
Author: olly <olly@google.com>
Date:   Wed Aug 9 07:10:42 2017 -0700

    Add ErrorMessageProvider to util package
    
    It's needed in multiple places. MediaSessionConnector uses it
    today. Our leanback connector will also use it. Maybe
    SimpleExoPlayerView should use one too, to show the message to
    the user when an error occurs.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164720020

commit 55d1abaa2190aaabc1c022aa2e080d018725a824
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:27:13 2017 -0700

    Document usage of the RTMP extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164706135

commit ebbf9f635bdbb1b7b4ba418955bc5be207afeca6
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:26:18 2017 -0700

    Fix minor Javadoc error
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164706078

commit 98d50c13ef9436ab018ee8381ebaf0a0adb6b6dc
Author: olly <olly@google.com>
Date:   Wed Aug 9 03:21:25 2017 -0700

    Clean up terminology for MediaSession extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164705750

commit 91adba5d1bc8dae54ef62f3276f81df2559c388b
Author: olly <olly@google.com>
Date:   Tue Aug 8 10:54:06 2017 -0700

    Minimal change to expose segment indices in DefaultDashChunkSource
    
    Issue: #3037
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164614478

commit ceb1e87219666f6c47f87f8f46df5de6f580a612
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 10 12:57:06 2017 +0100

    Revert "Add possibility of forcing a specific license URL in HttpMediaDrmCallback"
    
    This reverts commit 768a73b377d842aeefdd466cf7a5904f858cc8a4.

commit 65e212c409800f49d823d66ed55fb799799c77f1
Author: Dulmandakh <dulmandakh@gmail.com>
Date:   Wed Aug 9 15:42:58 2017 +0900

    expose setPropertyByteArray, setPropertyString
    
    export setPropertyByteArray, setPropertyString of DefaultDrmSessionManager for easy customization.

commit 3f31cec742f00998fd180e0623c2298f3a3fab53
Merge: 026ac1d 768a73b
Author: ojw28 <olly@google.com>
Date:   Tue Aug 8 17:21:37 2017 +0100

    Merge pull request #3136 from jeoliva/force-drm-license-url
    
    Add possibility of forcing a specific license URL in HttpMediaDrmCallback

commit 2f8c31d1731ec36f50d31405e01ba56055b6f451
Merge: deb9b30 a6fd4bd
Author: ojw28 <olly@google.com>
Date:   Tue Aug 8 16:53:44 2017 +0100

    Merge pull request #3151 from google/dev-v2-r2.5.1
    
    r2.5.1

commit a6fd4bdaf078375bc67820ec774ac0d1360c2dac
Author: olly <olly@google.com>
Date:   Tue Aug 8 04:07:13 2017 -0700

    Support clip end greater than the child's duration
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164577001

commit 13bcc0062e44f823296968fe040442aaacfd3515
Author: olly <olly@google.com>
Date:   Tue Aug 8 08:31:52 2017 -0700

    Don't release a surface until we've stopped using it
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164596062

commit c1827b10b6501b18bf68277b572e985c1315b76a
Author: olly <olly@google.com>
Date:   Tue Aug 8 08:30:17 2017 -0700

    Bump to 2.5.1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164595874

commit 371f675ae8d9076a859e28399c55d4aa7da2273a
Author: olly <olly@google.com>
Date:   Mon Aug 7 13:28:01 2017 -0700

    Fix missing source info refresh notification
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164502580

commit 026ac1d69b8c0afb8236029a914196abf6e4e2c3
Author: olly <olly@google.com>
Date:   Tue Aug 8 08:31:52 2017 -0700

    Don't release a surface until we've stopped using it
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164596062

commit b8c6ed670138ee4f864dc9cd7ba9cb5ff8a43094
Author: olly <olly@google.com>
Date:   Tue Aug 8 08:30:17 2017 -0700

    Bump to 2.5.1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164595874

commit 072788c88aa7f53ec2b671d7b95efd712fe0e2d8
Author: olly <olly@google.com>
Date:   Tue Aug 8 07:36:31 2017 -0700

    Support building of version 1 PSSH atoms
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164590835

commit 24bf2aa0e25041203a25b7172b88a3a01e591076
Author: olly <olly@google.com>
Date:   Tue Aug 8 04:07:13 2017 -0700

    Support clip end greater than the child's duration
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164577001

commit e45345e21b92df65510a64426b4ff031b90b58db
Author: olly <olly@google.com>
Date:   Mon Aug 7 13:28:01 2017 -0700

    Fix missing source info refresh notification
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164502580

commit 38360f626729a75a016ba20a546b40405b30ea80
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Aug 7 11:05:12 2017 -0700

    Add support for HLS's FRAME-RATE attribute
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164482135

commit b96d7eee6e1f90083e8bec2b1a9f97b20dc767a4
Merge: 427411b 0425ff6
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 7 14:48:27 2017 +0100

    Merge branch 'release-v2' into dev-v2

commit 0425ff6d417563f1e08e197919651eccbc6d6f61
Merge: deb9b30 427411b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 7 14:45:41 2017 +0100

    Merge branch 'dev-v2' into release-v2

commit deb9b301b2c7ef66fdd7d8a3e58298a79ba9c619
Merge: cbffc14 7a109f7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 7 14:31:45 2017 +0100

    Merge branch 'dev-v2-r2.5.0' into release-v2

commit 7a109f741153e2924f7e698dd5554491df10f635
Merge: e713ddc cbffc14
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 7 14:30:53 2017 +0100

    Merge branch 'release-v2' into dev-v2-r2.5.0

commit e713ddc22d6976b55aa4e178e4cd1343e7219df0
Author: eguven <eguven@google.com>
Date:   Mon Aug 7 05:22:15 2017 -0700

    Disable test coverage again
    
    https://issuetracker.google.com/issues/37019591 causes local variables can't be found while debugging.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164449443

commit f88149385a63c407f0589f496b87a864a1aa32cd
Author: olly <olly@google.com>
Date:   Mon Aug 7 03:45:10 2017 -0700

    Avoid rollover calculating sample offsets
    
    I considered using Util.scaleLargeTimestamp for this, but
    given sample offsets are relative and should always be
    small (<<1s), it really shouldn't be necessary.
    
    Issue: #3139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164443795

commit 15bcdf3b71f02b4ce2f8328625fb43a5b0f25fe6
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:54:51 2017 -0700

    Don't use TextureView's SurfaceTexture unless available
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434943

commit df05195f5fdaf12f83fa3e615d3cdc20e4dce401
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:53:09 2017 -0700

    Set correct Content-Type for ClearKey requests
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434858

commit 1f66f30ccdb51eea086619c6933cad0f73de4d15
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:51:26 2017 -0700

    Clean up extension READMEs
    
    Issue: #1157
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434768

commit 13a580fdbca297f1406b8d9ab6f8e37bd4eb1a07
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:48:44 2017 -0700

    Finalize r2.5.0
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434615

commit 427411befbff873b87fbc4846ab2953eafe902e7
Author: eguven <eguven@google.com>
Date:   Mon Aug 7 05:22:15 2017 -0700

    Disable test coverage again
    
    https://issuetracker.google.com/issues/37019591 causes local variables can't be found while debugging.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164449443

commit 87012f22f27337d3074839bbe3881621f4a81875
Author: olly <olly@google.com>
Date:   Mon Aug 7 03:45:10 2017 -0700

    Avoid rollover calculating sample offsets
    
    I considered using Util.scaleLargeTimestamp for this, but
    given sample offsets are relative and should always be
    small (<<1s), it really shouldn't be necessary.
    
    Issue: #3139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164443795

commit 865d74cde0cf3b135404a6e951de0d6efb8011ed
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:54:51 2017 -0700

    Don't use TextureView's SurfaceTexture unless available
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434943

commit 05179b4f1b36cb61e3ddee1653abe1239c9f986b
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:53:09 2017 -0700

    Set correct Content-Type for ClearKey requests
    
    Issue: #3138
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434858

commit d4c45861f49c943836f8bae6300358bee34a32ad
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:51:26 2017 -0700

    Clean up extension READMEs
    
    Issue: #1157
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434768

commit 9ecec92b568c0c73fbb259ffd0ba4561a705a3f0
Author: olly <olly@google.com>
Date:   Mon Aug 7 01:48:44 2017 -0700

    Finalize r2.5.0
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164434615

commit b0da1f98f6d24a852968841833fb904d1af71c4b
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 4 09:32:51 2017 -0700

    Remove unnecessary API level check in PlayerActivity of the demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164271226

commit b407b19296a75f34764ede59ed430a252f248b5c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 08:55:43 2017 -0700

    Log IMA LOG AdEvent ad data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164267555

commit fdcee8f1b6a13dc22972ae3cc28279edcebdc219
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 13 08:03:45 2017 +0100

    Fix detection of postroll when seeking to duration
    
    Also mark all ads as played when the postroll plays, in the case the
    player is backgrounded then resumed and the user seeks back.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164262738

commit ba46e472af2b6c5f5fad59337a72b5050880a093
Author: olly <olly@google.com>
Date:   Fri Aug 4 07:26:19 2017 -0700

    Fix playing local content after permission granted.
    
    After maybeRequestReadExternalStoragePermission and the
    subsequent granting of the permission, the media source
    would never be created.
    
    I can't see a case where initializePlayer shouldn't create
    a new MediaSource, so I've just removed the condition.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164260074

commit 42eaee3db8cee10802ffdfae1fb22f655b10c961
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 06:51:38 2017 -0700

    Update playbackInfo even if there's no period holder
    
    This is required to correctly update the playbackInfo.periodId when
    seeking close to the end of a period with ads, as the seek operation
    leads to an immediate source info refresh when midroll ads are marked as
    played.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164257099

commit c72278d23eb7da24f4f33d1a1f280499d316c8d9
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 06:20:38 2017 -0700

    Separate handling of oldTimeline == null case
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164254522

commit f502171e5fe78382e3972e8832b690c6eba97d71
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 4 09:32:51 2017 -0700

    Remove unnecessary API level check in PlayerActivity of the demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164271226

commit c449bae51aed45fcf28f95818a79a9670584ff23
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 08:55:43 2017 -0700

    Log IMA LOG AdEvent ad data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164267555

commit 287b999723b2b73b9822ec897af84233cae6e5c8
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 13 08:03:45 2017 +0100

    Fix detection of postroll when seeking to duration
    
    Also mark all ads as played when the postroll plays, in the case the
    player is backgrounded then resumed and the user seeks back.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164262738

commit c28ebf10f7f89b4b0a4b908a09788f533b762b00
Author: olly <olly@google.com>
Date:   Fri Aug 4 07:26:19 2017 -0700

    Fix playing local content after permission granted.
    
    After maybeRequestReadExternalStoragePermission and the
    subsequent granting of the permission, the media source
    would never be created.
    
    I can't see a case where initializePlayer shouldn't create
    a new MediaSource, so I've just removed the condition.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164260074

commit 576f362912924cff21e24ed9f7c52389c50a982c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 06:51:38 2017 -0700

    Update playbackInfo even if there's no period holder
    
    This is required to correctly update the playbackInfo.periodId when
    seeking close to the end of a period with ads, as the seek operation
    leads to an immediate source info refresh when midroll ads are marked as
    played.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164257099

commit 08e58af6e7ac8707e59fd2c80c48c5d4569ba48e
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 4 06:20:38 2017 -0700

    Separate handling of oldTimeline == null case
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164254522

commit 1203b534062b4b9ceefa59549fd72e796e0146ca
Author: olly <olly@google.com>
Date:   Fri Aug 4 00:57:05 2017 -0700

    Decrease number of Vpx input buffers
    
    I think they're excessively sized also, but changing that
    is a little more risky. And we should look at investigating
    the input buffer size for all our decoder extensions,
    rather than just this one.
    
    Issue: #3120
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164234087

commit 6bf967263ba5816467516fae1bc86e796a08ac60
Author: olly <olly@google.com>
Date:   Thu Aug 3 10:06:28 2017 -0700

    Remove dead sample link
    
    Issue: #3135
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164138761

commit de1f538e14738e0e8e84cc14156d005f264918d9
Author: olly <olly@google.com>
Date:   Thu Aug 3 08:26:44 2017 -0700

    Bump version
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164126494

commit 5fbb58c62f77707eef49709348815f5b5f46afaa
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 3 05:19:02 2017 -0700

    Take into account init data size for input buffer size
    
    Issue: #2900
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164110904

commit c2049ba1a7946c3e4c49b02098104a283ca13167
Author: olly <olly@google.com>
Date:   Thu Aug 3 04:11:08 2017 -0700

    Fix some lint warnings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164105662

commit 587704a2a0d9a4c4ce1a2281e0918f5615248b93
Author: olly <olly@google.com>
Date:   Thu Aug 3 04:10:10 2017 -0700

    Add some missing @param Javadoc to extensions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164105607

commit 838c4414eb63ce4a90119793b46b510e8acee639
Author: olly <olly@google.com>
Date:   Thu Aug 3 03:33:22 2017 -0700

    Fix targetSdkVersion to be consistent with gradle builds
    
    The manifest value is always overridden in gradle builds,
    so this is for internal builds only. The value should be
    the same (i.e. 25!).
    
    Also fix IMA build to force the right support library
    version, attempt 2!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164103183

commit fbee0c85212088212a3c1e1db217263b1807e639
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 3 00:50:47 2017 -0700

    Replace README reference to source with reference to javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164090619

commit 40f3f1cb784343657057bee8c212ba9e508e270b
Author: olly <olly@google.com>
Date:   Fri Aug 4 00:57:05 2017 -0700

    Decrease number of Vpx input buffers
    
    I think they're excessively sized also, but changing that
    is a little more risky. And we should look at investigating
    the input buffer size for all our decoder extensions,
    rather than just this one.
    
    Issue: #3120
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164234087

commit b664e92bb4084af281d8ab116bcd4cb3a7671030
Author: olly <olly@google.com>
Date:   Thu Aug 3 10:18:54 2017 -0700

    Remove shuffle button since it doesn't work yet
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164141326

commit 95dd590016d064a47f142159afa70286ba63ec4c
Author: olly <olly@google.com>
Date:   Thu Aug 3 10:06:28 2017 -0700

    Remove dead sample link
    
    Issue: #3135
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164138761

commit 1109bf50dd9cb9ed5108cf325559e139364e9872
Author: olly <olly@google.com>
Date:   Thu Aug 3 08:26:44 2017 -0700

    Bump version
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164126494

commit 53bc59b9d214a13b44a08fc088cb69971c40f2d8
Author: tonihei <tonihei@google.com>
Date:   Thu Aug 3 08:22:45 2017 -0700

    Add UI resources for shuffle mode.
    
    Including strings, icon, and button.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164126101

commit 72daef7a4c3ae5a9375f7d064d88bbc9f6f96da6
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 3 08:17:26 2017 -0700

    Don't read GaSpecificConfig unless required
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164125579

commit ccd05cbd04ca62659e4c1992dfeda912e2dbf7b9
Author: tonihei <tonihei@google.com>
Date:   Thu Aug 3 07:22:15 2017 -0700

    Add fake simple exo player.
    
    This implementation runs as fast as possible by triggering a simplified
    playback loop continuously without waiting. The class only supports a basic
    use case with a single-period timeline, no timeline update, no seeks or other
    user-initiated actions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164120420

commit 6f7dc974c963169130a8d59d4890f771883d66d7
Author: tonihei <tonihei@google.com>
Date:   Thu Aug 3 06:45:18 2017 -0700

    Add forwarding timeline to prevent repetition of boiler-plate code.
    
    Multiple timelines work as a wrapper around another timeline and forward
    most of the method calls to the wrapped timeline. Added a base class meant to
    be overridden which handles all the boiler-plate forwarding.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164117264

commit 768a73b377d842aeefdd466cf7a5904f858cc8a4
Author: J. Oliva <jesus@epiclabs.io>
Date:   Fri Aug 4 09:47:54 2017 +0200

    Add possibility of forcing a specific license URL in HttpMediaDrmCallback
    
    - Renamed some license URL related variables to keep consistency across the code.
    - Added a new parameter to HttpMediaDrmCallback that enables forcing defaultLicenseURL as the license acquisition URL.

commit 3c6ad40481c3b4f2b1a757b7e182c1343a545d03
Author: tonihei <tonihei@google.com>
Date:   Thu Aug 3 06:32:22 2017 -0700

    Add shuffle order interface and default implementation.
    
    These classes maintain a shuffled order of indices allowing to query the
    next, previous, first, and last indices. And also support inserting and
    removing elements without changing the shuffled order of the rest.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164116287

commit cb00b0209f551eefe7968633715ed3067b55aa08
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 3 05:19:02 2017 -0700

    Take into account init data size for input buffer size
    
    Issue: #2900
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164110904

commit db991873819d3bf6ab8b6cbe2514b89d03c1ef0e
Author: olly <olly@google.com>
Date:   Thu Aug 3 04:11:08 2017 -0700

    Fix some lint warnings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164105662

commit 78cdd08684ae7ad1f8cfe2793f5f9af52687f862
Author: olly <olly@google.com>
Date:   Thu Aug 3 04:10:10 2017 -0700

    Add some missing @param Javadoc to extensions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164105607

commit 147d5bb3b21432d364820582d7f1b167ded65240
Author: olly <olly@google.com>
Date:   Thu Aug 3 03:33:22 2017 -0700

    Fix targetSdkVersion to be consistent with gradle builds
    
    The manifest value is always overridden in gradle builds,
    so this is for internal builds only. The value should be
    the same (i.e. 25!).
    
    Also fix IMA build to force the right support library
    version, attempt 2!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164103183

commit 81cbd7348fab7a2ed2468beba7eb11cafacf0f38
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 3 01:51:50 2017 -0700

    Fix path to constants.gradle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164095350

commit a5f9f40bf0650adafac8ba69b98f8bbb3124d803
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 3 00:50:47 2017 -0700

    Replace README reference to source with reference to javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164090619

commit 19aa69e0f4a0f57816942fef0eeddf33f6c16a7e
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 2 09:26:58 2017 -0700

    Remove child data holder helper from AbstractConcatenatedTimeline.
    
    This helper class required a scratch instance to write on. Such a scratch
    instance may violate the immuatability of the timelines if used by multiple
    threads simultaneously.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163992458

commit a3df29a2462bed0f0c9a6c31d022de785baab9e9
Author: olly <olly@google.com>
Date:   Wed Aug 2 09:26:04 2017 -0700

    Some extractor fixes
    
    - Fix Ogg extractor to work without sniffing.
    - Fix extractors to handle seek() before init().
    - Add tests for both issues.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163992343

commit 1f019ca80854885d2d42e1fa08acfed9527bb41c
Author: olly <olly@google.com>
Date:   Wed Aug 2 10:44:38 2017 -0700

    Fix build.gradle to use modulePrefix
    
    Issue: #3131
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=164004981

commit 5ca84ebfd8bc933c676c3b1c5e8194ab21a95002
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 2 09:26:58 2017 -0700

    Remove child data holder helper from AbstractConcatenatedTimeline.
    
    This helper class required a scratch instance to write on. Such a scratch
    instance may violate the immuatability of the timelines if used by multiple
    threads simultaneously.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163992458

commit 412138b2eaf475edc4d7c997aad569ae87573aca
Author: olly <olly@google.com>
Date:   Wed Aug 2 09:26:04 2017 -0700

    Some extractor fixes
    
    - Fix Ogg extractor to work without sniffing.
    - Fix extractors to handle seek() before init().
    - Add tests for both issues.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163992343

commit 49b83c01ca2d005f54530adef360b5e9ae9bd235
Author: olly <olly@google.com>
Date:   Wed Aug 2 07:07:38 2017 -0700

    Throw ParserException if parsing unsupported media
    
    This is for consistency with what we do elsewhere;
    specifically in FragmentedMp4Extractor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163974960

commit 22ea9ed6875384800bcd86772709ee68c2ebdf67
Author: tonihei <tonihei@google.com>
Date:   Wed Aug 2 05:58:45 2017 -0700

    Clean-up ExoHostedTest/HostActivity.
    
    This change clearly seperates the hosting of a test (HostActivity) from
    the internals of hosting an ExoPlayer lifecycle (ExoHostedTest).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163967960

commit 55fe5d21a21ca257f631f8613e3ea6b26105333a
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Aug 2 05:57:38 2017 -0700

    Create the demos dir
    
    Now the demo app is under demos/main.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163967883

commit cad25e5a4dba6e2b3d113c80ab5e25b5c8026e1d
Author: olly <olly@google.com>
Date:   Wed Aug 2 03:07:56 2017 -0700

    Further fix H262 segmentation
    
    Issue: #2891
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163951910

commit e604daaa0954381f1e6917d66fb410627a967935
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 2 01:25:41 2017 -0700

    Fix handling of H.262 CSD
    
    The start code for H.262 codec-specific data may be across a packet boundary.
    Before this change the offset passed to CsdBuffer.onData may have been before
    the start point of the data in the newData buffer.
    
    After this change, start codes are added directly to the CSD buffer when it's
    filling and any start code bytes added by onData (at the end of a packet) are
    discarded.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163943584

commit 0717782fdc4e0dedf5b253bb294d10640beae262
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 1 18:20:54 2017 +0100

    Minor cleanup

commit 18bb04d6d9fcca6fc3a077a75e97c32fd5305ddf
Author: olly <olly@google.com>
Date:   Tue Aug 1 08:08:58 2017 -0700

    Bump version to 2.5.0-beta2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163830353

commit b2da61f70bfb9b1fea13db63fd2ce6dac92dc3ad
Author: olly <olly@google.com>
Date:   Tue Aug 1 07:50:12 2017 -0700

    Clean up MediaSessionExt documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163828712

commit 395249a950ec73b3475ff84239f4d14dffa048bc
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 1 04:44:02 2017 -0700

    Fix sequence extension position calculation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163814942

commit 893c7f34ba333d290bdbffcf16c186b0b6dcbbe8
Author: Michael Goffioul <michael.goffioul@gmail.com>
Date:   Thu Jul 27 15:44:28 2017 -0400

    Fix H262 segmentation.
    
    Prepend sequence headers to the next frame, instead of appending them to
    the previous frame. Tested decoders like FFMPEG and Google's
    Android/MPEG2 expects to read the sequence headers before the first
    frame they apply to. When sequence headers are appended to the previous
    frame, these are ignored and this leads to incorrect decoding.

commit 4a6a5b527fd411340a3a8300b29d7c222685f0f5
Author: Danny Brain <me@danielbrain.com>
Date:   Wed Jul 26 11:30:02 2017 +1000

    Allow PlaybackControlView to be overridden in SimpleExoPlayerView

commit 8e08d982aba3edf87c74f6462a99cadc793fa487
Author: olly <olly@google.com>
Date:   Wed Aug 2 03:07:56 2017 -0700

    Further fix H262 segmentation
    
    Issue: #2891
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163951910

commit 962a71314a670fb7e489a12444430f19623dce10
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 2 01:25:41 2017 -0700

    Fix handling of H.262 CSD
    
    The start code for H.262 codec-specific data may be across a packet boundary.
    Before this change the offset passed to CsdBuffer.onData may have been before
    the start point of the data in the newData buffer.
    
    After this change, start codes are added directly to the CSD buffer when it's
    filling and any start code bytes added by onData (at the end of a packet) are
    discarded.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163943584

commit 1a95a35434ec335d0c25d16cb80200673fb5a69d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 1 18:20:54 2017 +0100

    Minor cleanup

commit c01c8cd2a6acee76532d9b32465a4b4743281c9b
Author: olly <olly@google.com>
Date:   Tue Aug 1 08:08:58 2017 -0700

    Bump version to 2.5.0-beta2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163830353

commit 13513b9c3eb881bc87028245ea569c409b9fae26
Author: olly <olly@google.com>
Date:   Tue Aug 1 07:50:12 2017 -0700

    Clean up MediaSessionExt documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163828712

commit 55620348d4974ba8dfd0834e7ea968c41d6bab44
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 1 04:44:02 2017 -0700

    Fix sequence extension position calculation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163814942

commit 1151104e2f9c5e10da869dfb59860ca4a890e371
Author: tonihei <tonihei@google.com>
Date:   Tue Aug 1 02:18:48 2017 -0700

    Use TrackGroup instead of TrackSelection in FakeAdaptiveDataSet.
    
    This was a bug as the data set should contain sample data for all available
    tracks. Also added a unit test.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163806579

commit 08faafb4c16c96639ce648f7daee526708ddcceb
Merge: b562eb2 908362b
Author: ojw28 <olly@google.com>
Date:   Tue Aug 1 11:09:30 2017 +0100

    Merge pull request #3115 from goffioul/h262-segmentation
    
    Fix H262 segmentation.

commit b562eb215f0c0d20617e81918e3be64c28634302
Merge: 957158b be85da3
Author: ojw28 <olly@google.com>
Date:   Tue Aug 1 10:48:51 2017 +0100

    Merge pull request #3098 from dbrain/custom_playback_control_view
    
    Allow PlaybackControlView to be overridden in SimpleExoPlayerView

commit 9c2528a70f6fa56db6c9b10b794c5bf945731b1d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 31 21:28:22 2017 +0100

    Correctly handle reading 0 bits

commit 85445536c31809d78351023ec26d3da18eea7f58
Author: olly <olly@google.com>
Date:   Mon Jul 31 09:50:08 2017 -0700

    Fix 2.5.0 lint errors
    
    - Publish IMA extension
    - Force IMA to use the correct version of the support library
    - Add missing sr translations for repeat mode strings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163705883

commit bf4a460e4c8ae9c772f99fad69ebecd42849496b
Author: olly <olly@google.com>
Date:   Mon Jul 31 08:08:29 2017 -0700

    Fix typo in Id3Decoder
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163694825

commit 2b5bd800e3b3f2e85731f8bd7a7565bdac77610e
Author: olly <olly@google.com>
Date:   Mon Jul 31 07:53:08 2017 -0700

    Robustness fix for malformed ID3 metadata
    
    Issue: #3116
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163693235

commit ecbcf09804c80f7a66d03c94f51f44be88b11803
Author: olly <olly@google.com>
Date:   Mon Jul 31 07:00:10 2017 -0700

    Check for null entries in ConcatenatingMediaSource
    
    We do this in the dynamic case, and I think we've seen
    a few GitHub issues where developers do this and don't
    understand what they've done wrong (because the failure
    comes later).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163688557

commit aeb2f620f11717aa0f1a413a5c7d5cd57ff48056
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 31 03:30:09 2017 -0700

    Handle release() while initializing the ads manager
    
    Also don't detach any attached player in release() to prevent a possible
    NullPointerException if ImaAdsLoader.release() runs first, then the MediaSource
    is released and detaches the player. This is safe because if the loader was
    attached it's guaranteed to be detached.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163673750

commit ad5c8af01957975bb8eb61dc7f3edf60e2e4aa39
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 28 04:45:52 2017 -0700

    Allow apps to handle ad clicked/tapped events
    
    Issue: #3106
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163455563

commit 8e7a52483a38543d16a7cfd1d5a8c0717f5533e5
Author: aquilescanta <aquilescanta@google.com>
Date:   Sat Jul 22 02:17:02 2017 -0700

    Fix PlaybackControlView's repeat mode button update when player is null
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162824522

commit 957158b7ffe1a07d267bf31cb6a2cb52d672e8bb
Author: olly <olly@google.com>
Date:   Mon Jul 31 09:50:08 2017 -0700

    Fix 2.5.0 lint errors
    
    - Publish IMA extension
    - Force IMA to use the correct version of the support library
    - Add missing sr translations for repeat mode strings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163705883

commit 516762946d52e09ece780046715716cafdb40c8a
Author: olly <olly@google.com>
Date:   Mon Jul 31 08:08:29 2017 -0700

    Fix typo in Id3Decoder
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163694825

commit ecd9cff0588f739a815f79b0f7f7433282547166
Author: olly <olly@google.com>
Date:   Mon Jul 31 07:53:08 2017 -0700

    Robustness fix for malformed ID3 metadata
    
    Issue: #3116
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163693235

commit 3ec0ccabbc96ecd2164a6cd646493b92e72f7825
Author: olly <olly@google.com>
Date:   Mon Jul 31 07:00:10 2017 -0700

    Check for null entries in ConcatenatingMediaSource
    
    We do this in the dynamic case, and I think we've seen
    a few GitHub issues where developers do this and don't
    understand what they've done wrong (because the failure
    comes later).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163688557

commit c2d7e05429afeead1cac0d441f748b18c7319c0b
Author: olly <olly@google.com>
Date:   Mon Jul 31 05:49:58 2017 -0700

    Propagate skipped input buffers through to CodecCounters
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163683081

commit cdeea279739e4a5e9e418bee76051493ce6b8f5b
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 31 03:30:09 2017 -0700

    Handle release() while initializing the ads manager
    
    Also don't detach any attached player in release() to prevent a possible
    NullPointerException if ImaAdsLoader.release() runs first, then the MediaSource
    is released and detaches the player. This is safe because if the loader was
    attached it's guaranteed to be detached.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163673750

commit 1f0c85bd73c3ba7bfe8ce913fe22f2a69bb9112a
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 28 04:45:52 2017 -0700

    Allow apps to handle ad clicked/tapped events
    
    Issue: #3106
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163455563

commit bb044563245b3cf41772cf73ee5c75d84633f00b
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jul 28 04:39:57 2017 -0700

    Fix IndexOutOfBounds when reading a multiple of 8 number of bits
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163455269

commit 5bd5af8c60b1996fd819d0250f7dce8e1d3f46e3
Author: tonihei <tonihei@google.com>
Date:   Thu Jul 27 08:34:46 2017 -0700

    Replace canStop with blockUntilEnded in HostedActiviy.
    
    The canStop method gets called every second in a seperate thread until the
    test can be stopped. Replacing it with blockUntilEnded forwards the
    responsibility to stop to the test itself which has better control over the
    stop condition.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163343824

commit c3d7ccc3cb00bde4f1c2ae40d2e5a12ef8e494a8
Author: eguven <eguven@google.com>
Date:   Thu Jul 27 08:30:25 2017 -0700

    Replace iterable foreach loops with indexed for loops
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163343347

commit ad5ca0812d532645a60407881244df6ecad0e957
Author: tonihei <tonihei@google.com>
Date:   Thu Jul 27 08:15:15 2017 -0700

    Add unit test for FakeDataSource.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163341994

commit 84d19c464b04e0dc54a133ed5f56fdfb04ed8266
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 27 07:20:41 2017 -0700

    Add support for AAC-LATM in transport streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163337073

commit 5278a63768e51222af9163331142978373c6d94d
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 27 06:20:24 2017 -0700

    Change copyRenditionsList parameters names
    
    Also instantiate the resulting list with a predicted size to minimize
    list resizing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163332285

commit bcc69c2da7afc8a8463b9ec11fab78af2305564a
Author: eguven <eguven@google.com>
Date:   Wed Jul 26 08:58:02 2017 -0700

    Add HlsMasterPlaylist.copy method
    
    Creates a copy of this playlist which includes only the variants identified by the given variantUrls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163212562

commit 9936bc670293514811681cf9e1e3d89780f29ada
Author: eguven <eguven@google.com>
Date:   Wed Jul 26 04:47:56 2017 -0700

    Replace iterable foreach loops with indexed for loops
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163193118

commit b631755b634b14ca13b25742869fc9d9f13f1d9d
Author: tonihei <tonihei@google.com>
Date:   Wed Jul 26 03:08:52 2017 -0700

    Clean up test runner for ExoPlayer tests.
    
    Currently the ExoPlayerWrapper is used to run tests using an ExoPlayer
    implementation. Some properties of the test are set in the constructor, some
    are set by overloading the class, others are hard-coded in the
    ExoPlayerWrapper class, and a mechanism similar to the existing ActionSchedule
    is missing.
    
    This change does the following:
     1. Renames ExoPlayerWrapper to ExoPlayerTestRunner as it better reflects
        its purpose.
     2. Adds an internal Builder to easily set-up the test in a coherent way. This
        allows to only set necessary test components while using defaults for the rest.
     3. Integrate ActionSchedule.
     4. Apply the new structure to the existing tests currently using ExoPlayerWrapper.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163186578

commit cdb71a80aae7cc1bb605b74cf83623b2786e4990
Author: eguven <eguven@google.com>
Date:   Wed Jul 26 03:03:48 2017 -0700

    Remove empty line after copyright text
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163186057

commit 2dc1870dd43003733e218a9d9d25a751c987d722
Author: eguven <eguven@google.com>
Date:   Tue Jul 25 13:45:54 2017 -0700

    Simple Java style fix
    
    Put space between ] and {.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163116816

commit 3f7b4dc75fca331e13880a9a9daf04b697e5afba
Author: eguven <eguven@google.com>
Date:   Tue Jul 25 03:41:23 2017 -0700

    Add HlsDownloader
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=163052346

commit 3991a6198bf9d51ea06e4189f4aad3dfae3a9de4
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 24 04:16:47 2017 -0700

    Extend ActionSchedule with new actions.
    
    The new actions are: prepare source, set repeat mode, wait for timeline
    change, wait for position discontinuity, execute Runnable.
    
    Moreover, this change removes the restriction of using a SimpleExoPlayer to
    allow ActionSchedule to be used in other scenarios.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162918554

commit 0411add91e383bead238403c584fbb01edebc25b
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 24 04:15:22 2017 -0700

    Add fake adaptive media source.
    
    This class extends the existing FakeMediaSource by creating a
    FakeAdaptiveMediaPeriod instead of a FakeMediaPeriod.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162918487

commit 1bc01c09eefe4898de70b69d158ce700e45a65a6
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 24 03:46:14 2017 -0700

    Add fake adaptive media period.
    
    This class extends the existing FakeMediaPeriod by using a ChunkSampleStream
    with chunks from a FakeChunkSource instead of a FakeSampleStream.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162916656

commit df562bc8d1d6d233e64dbf7e15df216df94aca7d
Author: aquilescanta <aquilescanta@google.com>
Date:   Sat Jul 22 02:17:02 2017 -0700

    Fix PlaybackControlView's repeat mode button update when player is null
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162824522

commit 908362bdf352883497a58ff4c520f69497463070
Author: Michael Goffioul <michael.goffioul@gmail.com>
Date:   Thu Jul 27 15:44:28 2017 -0400

    Fix H262 segmentation.
    
    Prepend sequence headers to the next frame, instead of appending them to
    the previous frame. Tested decoders like FFMPEG and Google's
    Android/MPEG2 expects to read the sequence headers before the first
    frame they apply to. When sequence headers are appended to the previous
    frame, these are ignored and this leads to incorrect decoding.

commit be85da3a69b306e5d8ca9dc0faad806d51433aad
Author: Danny Brain <me@danielbrain.com>
Date:   Wed Jul 26 11:30:02 2017 +1000

    Allow PlaybackControlView to be overridden in SimpleExoPlayerView

commit 13732fe618c4e2c1da2ec758c8b8ee4c4dc5ff99
Author: olly <olly@google.com>
Date:   Fri Jul 21 09:29:46 2017 -0700

    Release notes + version bump for 2.5.0-beta1
    
    There's no way to represent a beta in our integer versioning
    scheme. I propose we just set it the same for all betas + the
    stable release. The versioning for the demo app isn't that
    important, so I've just put it directly to 2.5.0 as well.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162749130

commit 4436e94ba85212472083128ba57a2087f19feb4b
Author: olly <olly@google.com>
Date:   Fri Jul 21 08:58:34 2017 -0700

    Hardcode libopus output frequency to 48000Hz
    
    Issue: #3080
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162746202

commit cdfe57833dc91cc8f4e611d04627a72dd1b8e439
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 21 08:21:19 2017 -0700

    Update IMA extension README
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162742982

commit 3eb85446a2ea4823ed08249ab626bbf34082397e
Author: olly <olly@google.com>
Date:   Fri Jul 21 07:52:07 2017 -0700

    Fully document DefaultTrackSelector
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162740498

commit 9bb8b240d20a04ebd823c35a273ebc0f490f27b2
Author: olly <olly@google.com>
Date:   Fri Jul 21 07:51:27 2017 -0700

    Improve Player/ExoPlayer Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162740451

commit 6f600a8fa5486c0177a7b85c92b435b96805ea2f
Author: bachinger <bachinger@google.com>
Date:   Fri Jul 21 06:56:03 2017 -0700

    Take care playback preparer and queue navigator can not register overlapping
    playback actions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162736210

commit 3bc3900dba5b9bfb5b6f9b7e147233631207f498
Author: bachinger <bachinger@google.com>
Date:   Fri Jul 21 04:48:03 2017 -0700

    Do not update queue when the queue did not actually change to avoid
    unnecessary updates are broadcasted to all clients.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162728670

commit 89181cf4bccfcfca91205ba95acfa7e47fff0b0b
Author: olly <olly@google.com>
Date:   Fri Jul 21 02:43:25 2017 -0700

    Fully document MappingTrackSelector
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162721489

commit 07de4d1b2ca593ed917318eec06a75bc6eb8f840
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 20 07:05:34 2017 -0700

    Handle ad skipping and content resume
    
    SKIPPED can't be handled as CONTENT_RESUME_REQUESTED because after skipping an
    ad there may be further ads to play in its ad group.
    
    Remove workaround for handling unexpected playAd without stopAd, as the player
    can instead recover when IMA sends CONTENT_RESUME_REQUESTED. This in turn fixes
    handling of the case where playAd is called twice but IMA expects only the
    first ad to play, when skipping a particular ad. (Add an ad tag where this
    occurs to internal samples.)
    
    Check whether a currently playing ad has been marked as played in
    ExoPlayerImplInternal, and handle this case as a seek. This ensures that any
    loaded ad periods are discarded in the case of CONTENT_RESUME_REQUESTED.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162610621

commit 94b08b27e96efb6886af3602968435f305539e16
Author: olly <olly@google.com>
Date:   Thu Jul 20 07:02:52 2017 -0700

    Fix MediaSession gradle file to use modulePrefix
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162610352

commit 554a399407317626acf789637eb186631eb23dc8
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 20 05:57:25 2017 -0700

    Switch to non-deprecated player constants
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162605429

commit 8d56f904a068583eed2a387811edcd3643004424
Author: bachinger <bachinger@google.com>
Date:   Thu Jul 20 05:44:21 2017 -0700

    make MediaSessionConnector depend only to the Player interface
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162604746

commit 33f5bd6aed9c75e5e560ccea8369b64f7496eb14
Author: olly <olly@google.com>
Date:   Thu Jul 20 04:56:38 2017 -0700

    Start better documenting track selection
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162601990

commit 19087a7fa0481dde8ae266d8b9cfe196477b2aa6
Author: olly <olly@google.com>
Date:   Thu Jul 20 04:56:02 2017 -0700

    Fix broken Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162601961

commit 54e869cbbdf3bc5abbc08a090839e288e6624945
Author: olly <olly@google.com>
Date:   Thu Jul 20 04:51:59 2017 -0700

    Update Timeline Javadoc to include brief mention of ad groups
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162601778

commit cbffc14fa1ba2fa84379e95679f649cb8605e805
Merge: 2bebd52 46ba81c
Author: ojw28 <olly@google.com>
Date:   Wed Jul 19 20:05:45 2017 +0100

    Merge pull request #3083 from google/dev-v2-r2.4.4
    
    r2.4.4

commit 46ba81c45ec2fc12cc8a5d6f75d2048604a8ebba
Author: olly <olly@google.com>
Date:   Wed Jul 19 11:52:12 2017 -0700

    Update release notes + bump version number
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162514848

commit eb3860162671c0af65c6b4c0aa4206baa38f3461
Author: olly <olly@google.com>
Date:   Wed Jul 19 11:52:12 2017 -0700

    Update release notes + bump version number
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162514848

commit 108f4f14f3b7788472153925cb67495df3c43c9a
Author: olly <olly@google.com>
Date:   Wed Jul 19 07:43:43 2017 -0700

    Suppress no-op timeline changes in ExtractorMediaSource
    
    When an ExtractorMediaSource is used in a concatenation, and
    probably when using repeat modes, it needs to produce multiple
    ExtractorMediaPeriods during usage. Currently we fire a
    source info refresh every time a new ExtractorMediaPeriod
    instance prepares, which triggers ExoPlayer.EventListener's
    onTimelineChanged method. In nearly all cases the timeline is
    unchanged after the first ExtractorMediaPeriod is prepared.
    This change suppresses these no-op changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162484234

commit e5952d48595da297b97d1e8fe4291e044a1270d6
Author: olly <olly@google.com>
Date:   Wed Jul 19 06:15:24 2017 -0700

    Upgrade RTMP dependency
    
    - Drop minimum version to new RTMP min version
    - Publish the extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162477200

commit 5e203f482a567ce04bcd243097ceb96addad0c39
Author: olly <olly@google.com>
Date:   Mon Jul 24 05:16:16 2017 +0100

    Correctly flush HlsSampleStreamWrapper when primary selection changes
    
    Issue: #3079
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162473480

commit 9716b03f8fa11d855599008572da2f89419043a8
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jul 19 04:54:31 2017 -0700

    Fix isLastPeriod to take into account the played ad count
    
    A content period just before a postroll ad group with all ads played
    was not being marked as the last media period in the timeline period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162471919

commit 4658e619b3ed1ed12623145bbe2afaefcba19b3e
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jul 19 04:49:27 2017 -0700

    Don't modify playWhenReady in ImaAdsLoader, except for playAd
    
    Store playWhenReady when playAd is called, and restore it if necessary when the
    content resumes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162471616

commit 5e81cf99dcf6381067e6eef43ec94e770315ec86
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 18 10:23:07 2017 -0700

    Fix comment typo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162368534

commit 4f5ac9e04f192ebacc425754e494a9f380a1b79f
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jul 18 10:04:10 2017 -0700

    Extract Player interface from ExoPlayer
    
    This is the first step towards facilitating Cast integration to ExoPlayer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162366198

commit 41028fafbacb096930739225f1dc5cc71d253c27
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 18 09:52:30 2017 -0700

    Workaround late event delivery from IMA
    
    Remove assertions in pauseAd()/playAd(), which can fail if events are delivered
    after detaching the player, and log warnings instead.
    
    Use whether IMA has sent CONTENT_PAUSE_REQUESTED/CONTENT_RESUME_REQUESTED to
    determine whether we pause/resume the AdsManager, matching the IMA
    documentation.
    
    Also clean up use of player.isPlayingAd vs playingAd.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162364751

commit 078c57413bad16055293065665d637bb156b633d
Author: olly <olly@google.com>
Date:   Tue Jul 18 09:15:59 2017 -0700

    Correctly reset the upstream format from SampleQueues in HLS
    
    When resetting a SampleQueue, by default the upstream format
    is not cleared. This is necessary for progressive playbacks,
    since (a) the formats never change, and (b) the extractors
    only output them once. So when a seek occurs, it's necessary
    to clear all sample data from the queue, but retain the current
    upstream format.
    
    Uniquely for HLS, the media in a SampleQueue that we may read
    from can be in a format not supported by the consuming renderers.
    We clear all the sample data from the queue in this case, but
    not the upstream format. Since we have an optimization that
    allows the upstream format to be read in advance of another
    sample being written into the queue, this can result in an
    unsupported format being read by a consuming renderer. This
    change ensures the upstream format is correctly cleared in the
    problematic case.
    
    Issue: #3079
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162360267

commit b950a5e87491b83fc711669d1eb5c03dbb44cdb8
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 07:53:18 2017 -0700

    Add fake chunk source.
    
    This chunk source retuns SimpleSampleMediaChunks based on the data definition
    of a FakeAdaptiveDataSet.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162351688

commit fb2dbf2c77d38c624791a50e9bf3c8698e238da3
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 07:43:21 2017 -0700

    Use Clock in DefaultBandwidthMeter instead of SystemClock.
    
    The default behaviour stays the same as Clock.DEFAULT == SystemClock. And it
    enables bandwidth measurements in tests with simulated clocks.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162350852

commit 3ff9695a733a2da24bb2a4bacff11f16c3286581
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 07:20:40 2017 -0700

    Move getBufferedPositionUs into SequenceableLoader.
    
    All implementations of SequenceableLoader already implement this method.
    Moreover, all composite media periods contained an exact copy of an
    implementation that now moved to CompositeSequencableLoader.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162349083

commit e26b8824ddcd419fed7afe5294aad81b39df7226
Author: olly <olly@google.com>
Date:   Tue Jul 18 07:08:49 2017 -0700

    Add Downloader for progressive content
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162348129

commit 0717c3502f5d3336e76c804af38d30e1e650e602
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 06:38:30 2017 -0700

    Extend Clock interface with sleep method and add FakeClock.
    
    The FakeClock allows to simulate timing behaviour including sleep time
    for test cases.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162345258

commit 958f12e2cc9526f52240fca91cedbbc2b8dd8f58
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 06:07:49 2017 -0700

    Make isReady of FakeRenderer more realistic.
    
    Currently the renderer is only ready when the input stream has more data to
    read. Actual renderers, however, are also ready as long as their output buffer
    contains some audio/video samples to play, roughly corresponding to the fact
    that the playback time hasn't reached the timestamp of the last buffered
    sample. Added a isready flag to FakeRenderer to simulate this behaviour.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162343074

commit 4fd516e35bef3f3e7d34a81adaf466f0758fc420
Author: olly <olly@google.com>
Date:   Tue Jul 18 03:29:29 2017 -0700

    Make MediaSessionConnector depend only on ExoPlayer
    
    This is possible to do without passing the player instance to
    custom action providers through their constructors, given we
    no longer have a MuteActionProvider. Passing the player through
    the constructors generalizes better to such cases, however, so
    feels like the right thing to do.
    
    It's also possible to use generics and keep passing the player
    instance via the CustomActionProvider methods, but this adds
    some unnecessary complexity.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162333043

commit 1d046d5da8c0eb1cadfa42420dd46fad83c2db6a
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 03:08:51 2017 -0700

    Fix chunk count bug in FakeAdaptiveDataSet.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162331762

commit f77e96bca8ca43746ab67fac3e735fd6b7b4df98
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 18 01:47:59 2017 -0700

    Allow to extend FakeDataSource.
    
    Extensions can perform additional actions whenever data is read (e.g. sleeping
    to simulate bandwidth restrictions).
    
    Additionally, the factory class can also be overwritten and allows to set the
    FakeDataSet later in case it is not available right away.
    
    Moreover, this class now also uses a transfer listener similar to all real data sources.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162326000

commit c28a2a4100e098ec2e68101e230d1b5d599e2ff0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 18 00:57:53 2017 -0700

    Fix content position for postroll ads
    
    The position returned by getContentPosition() could be C.TIME_END_OF_SOURCE.
    Fix the content position stored in MediaPeriodInfos for postroll ads to be the
    duration of the containing period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162322339

commit 5be79d4f42848d40491d97c33a044eedaaa79f92
Author: bachinger <bachinger@google.com>
Date:   Mon Jul 17 11:48:49 2017 -0700

    Media session extension to connect ExoPlayer with the MediaSession of the
    framework.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162245883

commit 387720d1821e3b1be95535cdd9d46603189a74bd
Author: olly <olly@google.com>
Date:   Mon Jul 17 09:31:07 2017 -0700

    Allow module registrations + log player release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162223981

commit da79dec6c14483bafe33c0c930a5d774d79f52ce
Author: olly <olly@google.com>
Date:   Mon Jul 17 09:11:52 2017 -0700

    Make it a bit easier to sideload a subtitle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162221516

commit daa214f82ae98b04f2cf913e7e5878eed3525756
Author: olly <olly@google.com>
Date:   Mon Jul 17 09:06:53 2017 -0700

    Reinstate gradle instructions for IMA extension
    
    Note: Wont work quite yet; we need to actually do a
    release for the instructions to become effective.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162220939

commit 81048ee7af2e0e8ab6f5c6a28461f19d387ae60d
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 17 08:44:57 2017 -0700

    Add byte offset variable to fake data segments.
    
    The value is automatically set at creation and allows simpler access to the
    faked data position within the source.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162218095

commit 91341df7b05c44637b0cf474de55f56031ba869e
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 17 07:11:01 2017 -0700

    Add fake adaptive data set.
    
    This class defines the data of an adaptive media source. It currently has
    chunks of equal length and size corresponding to the declared average bitrate
    of the Formats.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162208008

commit 009369bf94e9202f7b2500df84ea8f0f853f0005
Author: olly <olly@google.com>
Date:   Mon Jul 17 06:57:10 2017 -0700

    Reduce calls from TsExtractor to ExtractorInput.read
    
    We currently read at most 5 packets at a time from the
    extractor input. Whether this is inefficient depends on
    how efficiently the underlying DataSource handles lots
    of small reads. It seems likely, however, that DataSource
    implementations will in general more efficiently handle
    fewer larger reads, and in the case of this extractor
    it's trivial to do this.
    
    Notes:
    - The change appears to make little difference in my
      testing with DefaultHttpDataSource, although analysis
      in #3040 suggests that it does help.
    - This change shouldn't have any negative implications
      (i.e. at worst it should be neutral wrt performance). In
      particular it should not make buffering any more likely,
      because the underlying DataSource should return fewer
      bytes than are being requested in the case that it
      cannot fully satisfy the requested amount.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162206761

commit 6041b0fe9cbb9472ee58621d2251068791095225
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 17 06:30:00 2017 -0700

    Handle VAST loading errors by playing content
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162204327

commit 706d4e51fedcd8fd6450888a590fd27cee959b96
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 17 03:00:30 2017 -0700

    Don't offset the first period holder by the start position
    
    If seek is called for a non-seekable period, when the period is prepared the
    start position will be updated from the seek position to zero. Because the
    start position is part of the renderer offset for the first loaded period
    holder, after the update the renderer offset start position and the new start
    position would no longer cancel out, leading to the player position being
    negative.
    
    The first period holder's renderer offset is the fixed base offset (60 seconds)
    plus its start position, but the start position is always subtracted. Avoid
    subtracting the start position for the first period holder so that when it
    changes there is no need to update the renderer offset.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162188133

commit 508db5fd0aba3ee1824fc20177ae26ae7cb80fff
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 17 01:42:21 2017 -0700

    Allow multiple Formats per TrackGroup in testutil fake classes.
    
    This enables adaptive media test cases using TrackGroups with multiple
    Formats.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162182005

commit 8399de47060eab2e8428c7318ba9e9a345c03972
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 17 01:27:27 2017 -0700

    Move FakeDataSet to seperate class.
    
    This allows to create extensions of FakeDataSet and also simplifies the
    FakeDataSource class.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=162180952

commit 055abc759269e48dd4a9c7a1b315012d3abf0ac1
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jul 4 09:38:57 2017 -0700

    Detect playlist stuck and playlist reset conditions in HLS
    
    This CL aims that the player fails upon:
    
    - Playlist that don't change in a suspiciously long time,
      which might mean there are server side issues.
    - Playlist with a media sequence lower that its last snapshot
      and no overlapping segments.
    
    This two error conditions are propagated through the renderer,
    but not through MediaSource#maybeThrowSourceInfoRefreshError.
    
    Issue:#2872
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160899995

commit 1855423734287861163ccb82258779555159dad8
Author: olly <olly@google.com>
Date:   Thu Jul 13 05:59:15 2017 -0700

    Simplify + optimize VorbisBitArray
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161796758

commit 977fb225e3ba58965b16bda99483f5e5eef9313e
Author: olly <olly@google.com>
Date:   Wed Jul 12 11:55:49 2017 -0700

    Minor tweak to demo app
    
    "Default (none)" is sometimes just wrong, since the track
    selector may attempt to select a track even if it exceeds
    the renderer's capabilities. Just "Default", as it used to
    be, was more accurate.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161695241

commit a39ab8161e035174c862fb42b0c522baf42f22fb
Author: olly <olly@google.com>
Date:   Wed Jul 12 09:53:20 2017 -0700

    Fix FlacStreamInfo to not call readBits with a >32 value
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161677399

commit 17e73bdc7859852cab8821501da6c61bbcb7dc29
Author: olly <olly@google.com>
Date:   Wed Jul 12 09:25:08 2017 -0700

    Optimize ParsableNalUnitBitArray
    
    Apply the same learnings as in ParsableBitArray.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161674119

commit fba0546774133c0d7b78b575e96ba8208a88cab5
Author: olly <olly@google.com>
Date:   Wed Jul 12 08:12:11 2017 -0700

    Optimize ParsableBitArray
    
    ParsableBitArray.readBit in particular was doing an excessive
    amount of work. The new implementation is ~20% faster on desktop.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161666420

commit 4cb5b349777ed6a71ab704200e7ccc6a8d1d3fe2
Author: olly <olly@google.com>
Date:   Wed Jul 12 04:47:31 2017 -0700

    Don't use ParsableBitArray to parse TS packet headers
    
    Really low hanging fruit optimization for TS extraction.
    
    ParsableBitArray is quite expensive. In particular readBits
    contains at least 2 if blocks and a for loop, and was being
    called 5 times per 188 byte packet (4 times via readBit). A
    separate change will follow that optimizes readBit, but for
    this particular case there's no real value to using a
    ParsableBitArray anyway; use of ParsableBitArray IMO only
    really becomes useful when you need to parse a bitstream more
    than 4 bytes long, or where parsing the bitstream requires
    some control flow (if/for) to parse.
    
    There are probably other places where we're using
    ParsableBitArray over-zealously. I'll roll that into a
    tracking bug for looking in more detail at all extractors.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161650940

commit 2665e42f85b5c64dd38439b49247bfbfa983cda2
Author: olly <olly@google.com>
Date:   Tue Jul 11 04:36:06 2017 -0700

    Correctly propagate format identifier for CEA-608 in HLS
    
    Issue: #3033
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161512537

commit 4233f81ed7d95d3f40d277f93820b03f6c50890d
Author: olly <olly@google.com>
Date:   Mon Jul 10 16:00:12 2017 -0700

    Misc tweaks to UI components
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161454491

commit f94db63366f8649fab29978d008fea35c761b837
Author: olly <olly@google.com>
Date:   Tue Jul 4 03:32:23 2017 -0700

    Fix reporting of width/height
    
    1. maybeRenotifyVideoSizeChanged should report reported* variables
    2. Add check into maybeNotifyVideoSizeChanged to suppress reporting
       in the case that the width and height are still unknown.
    
    Issue: #3007
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160879625

commit bf5495f2f5909751a6cdea12c7c4aadce3758127
Author: olly <olly@google.com>
Date:   Fri Jul 14 10:24:30 2017 -0700

    Optimize in-buffer seeking for HLS
    
    Also move to using an array to hold the SampleQueues,
    as we've moved to doing in ExtractorMediaPeriod.
    
    Issue: #551
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161972990

commit a2ffcec2007ed07b13832418cf935ccd023716b0
Author: olly <olly@google.com>
Date:   Fri Jul 14 07:54:12 2017 -0700

    Fix NPE setting drm scheme type
    
    drmInitData can be null in DASH if all of the init data is
    specified at the manifest level instead. I took a look at
    injecting the manifest format into the extractors, so that
    we can actually copy the scheme type into it, but that's
    at least non-trivial enough to delay for a subsequent CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161956246

commit 08698021735217596409a3426a15ecb9136703db
Author: olly <olly@google.com>
Date:   Fri Jul 14 06:47:40 2017 -0700

    Show last seek position when playing an ad
    
    We'd normally expect playback controls to be hidden during
    ad playback, although if they are visible for whatever reason,
    it makes sense to set the position to the current content
    position now that we have it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161950098

commit 7b20e130ce2bb2e61e68b23f0f3cd23779dce887
Author: matttt <matttt@google.com>
Date:   Thu Jul 13 08:45:53 2017 -0700

    Allow a direct executor for Cronet's response handling thread.
    
    We want to experiment with a direct executor to avoid thread hops between the
    network thread and the response handling thread. This change is needed to do
    so.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161812382

commit 68e5e9173559f9e55d62ec136732353ed6060ddf
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 13 06:50:46 2017 -0700

    Store the resume position even if the window is not seekable
    
    Note: this temporarily exposes a bug where seeking a non-seekable source leads
    to the player position being negative before playback starts.
    
    Issue: #2655
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161801111

commit 8378c3dc1f0247d85d57ab81d75596a3a79345fb
Author: olly <olly@google.com>
Date:   Thu Jul 13 05:59:15 2017 -0700

    Simplify + optimize VorbisBitArray
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161796758

commit 90398c581158f6d335fb69b5e07ed11af75f022d
Author: eguven <eguven@google.com>
Date:   Thu Jul 13 03:08:56 2017 -0700

    Check if thread is interrupted before opening connection
    
    On an old version of okhttp, opening connection clears the thread interrupt flag silently. This is a workaround
    to reduce the effect of the bug.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161784435

commit 70c5bf70526cf177fb4ca21dd99160bf9f0895af
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 13 01:55:33 2017 -0700

    Support resuming ads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161778560

commit 6c74a315562ecbb4c7d8f4757e33e33d6e49a6da
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 13 01:10:51 2017 -0700

    Support resuming content after ads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161775394

commit 4f2fae4fba2c3ad36bf3a01e154a53884becc49c
Author: olly <olly@google.com>
Date:   Wed Jul 12 11:55:49 2017 -0700

    Minor tweak to demo app
    
    "Default (none)" is sometimes just wrong, since the track
    selector may attempt to select a track even if it exceeds
    the renderer's capabilities. Just "Default", as it used to
    be, was more accurate.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161695241

commit 0da2299c4966cc381ed52565d7f9637c257612dd
Author: olly <olly@google.com>
Date:   Wed Jul 12 09:53:20 2017 -0700

    Fix FlacStreamInfo to not call readBits with a >32 value
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161677399

commit 5885f34d12fc88c2edde6e2379ff7c7e3fb1090a
Author: olly <olly@google.com>
Date:   Wed Jul 12 09:25:08 2017 -0700

    Optimize ParsableNalUnitBitArray
    
    Apply the same learnings as in ParsableBitArray.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161674119

commit 01c0ccbdbded9f1d7df22067a7c644772a1bba15
Author: olly <olly@google.com>
Date:   Wed Jul 12 08:12:11 2017 -0700

    Optimize ParsableBitArray
    
    ParsableBitArray.readBit in particular was doing an excessive
    amount of work. The new implementation is ~20% faster on desktop.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161666420

commit 2b1614cc7bcc4d0b7dbd2a247a424d266a3b3c55
Author: olly <olly@google.com>
Date:   Wed Jul 12 04:47:31 2017 -0700

    Don't use ParsableBitArray to parse TS packet headers
    
    Really low hanging fruit optimization for TS extraction.
    
    ParsableBitArray is quite expensive. In particular readBits
    contains at least 2 if blocks and a for loop, and was being
    called 5 times per 188 byte packet (4 times via readBit). A
    separate change will follow that optimizes readBit, but for
    this particular case there's no real value to using a
    ParsableBitArray anyway; use of ParsableBitArray IMO only
    really becomes useful when you need to parse a bitstream more
    than 4 bytes long, or where parsing the bitstream requires
    some control flow (if/for) to parse.
    
    There are probably other places where we're using
    ParsableBitArray over-zealously. I'll roll that into a
    tracking bug for looking in more detail at all extractors.
    
    Issue: #3040
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161650940

commit ecc8f6c4fa394fe0ae5da3c3c3dc2f3779ec7102
Author: olly <olly@google.com>
Date:   Wed Jul 12 03:57:18 2017 -0700

    Upgrade dependencies
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161648060

commit f72833476e1501323fb5a05355718046e0d07bf8
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jul 11 11:28:08 2017 -0700

    Add DRM support to RendererCapabilities
    
    This CL also makes DefaultTrackSelector take it into account when RendererCapabilities
    sets it to unsupported.
    
    A following CL could add a DefaultTrackSelector parameter to force DRM "known support" for specific track types.
    
    Issue:#1661
    Issue:#1989
    Issue:#2089
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161556467

commit 3c5688de73e8f6aa5825c20b187476f7d26dc9b1
Author: olly <olly@google.com>
Date:   Tue Jul 11 10:18:25 2017 -0700

    Optimize in-queue seeking when non-AV tracks are present
    
    Let's do it this way for now. Note there's an implicit
    assumption in here that non-AV tracks consist of only
    key-frames, but I think we'll not encounter any issues
    in the real world as a result, we already make this
    assumption in ChunkSampleStream, and actually tagging
    every queue with this information explicitly is a very
    painful amount of plumbing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161545383

commit 6b17e2cf3f67139ef6b00e47eeaf89bedb3398e7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 11 09:23:58 2017 -0700

    Fix handling of postrolls
    
    adsLoader.contentComplete was called twice which led to postrolls not seeing
    the STARTED event.
    
    Also make the onPositionDiscontinuity handler easier to follow by renaming
    variables, and remove the adGroupIndex field.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161537765

commit 06216514765344926bda9f683e1fc8b9f466523e
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 11 07:43:38 2017 -0700

    Add buffer length metric to ABR playback test.
    
    This metric is measured once every second.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161527345

commit 0b58c33632014bf485774b0c19ce2e92ae5ef42d
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 11 07:29:39 2017 -0700

    Handle detaching and reattaching the ads loader
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161526026

commit 94683d1e8c69d6827e453cf3e1b0427d1c57cd0d
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 11 07:11:49 2017 -0700

    Show ad markers for non-multi-window time bars
    
    Ads don't have their own periods any more, so show ad group markers even if the
    time bar is not multi-window.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161524411

commit 6f2f8e49b8b8aed4ebb6e25d86d204db3a4d2565
Author: tonihei <tonihei@google.com>
Date:   Tue Jul 11 04:56:05 2017 -0700

    Add rebuffer test metrics to ABR playback tests.
    
    This includes a metric logger class which logs events and generates metrics, and some changes to the Perfgate benchmark config to add the metrics. So far, only rebuffer counts, rebuffer time and startup time are measured, together with auxiliary values of total playback time used for testing and number of playback failures.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161513672

commit 0052a70f607ef3bd9523964075dba8173d6b52bb
Author: olly <olly@google.com>
Date:   Tue Jul 11 04:36:06 2017 -0700

    Correctly propagate format identifier for CEA-608 in HLS
    
    Issue: #3033
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161512537

commit ef56c9fe3958739fae9fa9f382c054b98c466ee9
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 11 02:25:21 2017 -0700

    Move ad playback state into ImaAdsLoader
    
    Once background and resuming is supported, the ads loader will be kept when the
    player is destroyed and recreated. Move the state relating to the structure of
    ads and what ads have been loaded/played out of the media source and into the
    loader so the information is not lost when the source is released, in
    preparation for supporting background and resuming.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161503571

commit b31fd5bc7c14cce046807a608f1ca74eb3c29a61
Author: olly <olly@google.com>
Date:   Mon Jul 10 16:00:12 2017 -0700

    Misc tweaks to UI components
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161454491

commit 45f94eab62026ae8769ca136b6fa19c4b5b666b5
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 10 09:20:56 2017 -0700

    Allow moving media source within DynamicConcatenatingMediaSource.
    
    This option allows to move the currently playing media source to another position
    and also to move other media source without creating a new MediaSource object.
    
    Issue:#1706
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161402022

commit 06b3b3ca8d8ee807008e1cbd5d94c6de5cf96df0
Author: olly <olly@google.com>
Date:   Mon Jul 10 07:23:25 2017 -0700

    Migrate HLS over to new SampleQueue methods
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161391296

commit 5ebbb6ef459ba45e1c42c07918eaa47dc0951071
Merge: 78e0545 b333169
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 10 12:29:16 2017 +0100

    Merge branch 'jcable-dev-v2' into dev-v2

commit b333169ada4b370caf719d059a2de0f7d5123709
Merge: 78e0545 402c985
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 10 12:28:32 2017 +0100

    Merge branch 'dev-v2' of git://github.com/jcable/ExoPlayer into jcable-dev-v2

commit 78e0545774a767c1060ebf9f16d14a04902bc571
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 10 12:16:20 2017 +0100

    Re-add RTMP extension classes

commit 68827878e9d2e9dc344efa4932e32665b400a949
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 10 01:41:51 2017 -0700

    Fix RTMP library gradle file.
    (GitHub issue #3038)
    
    Module prefix was missing for library-core module.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161366375

commit 4180b9656d46f26cdf62bb2e4d03cd068d569af5
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 6 10:39:00 2017 -0700

    Show played ad groups
    
    By default played ad groups are shown faded out. This helps the user know
    whether they will see an ad when they seek to a given position.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=161098491

commit a0aa9a3803ce7f9862bde82095351e16f204e390
Author: olly <olly@google.com>
Date:   Wed Jul 5 07:33:00 2017 -0700

    Update moe equivalence
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160955809

commit 75242281601fcdd5cf365d0025e453a83d919863
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 5 15:08:00 2017 +0100

    Clean up rtmp extension

commit 1279b7dcf1165741dfcf001bc31a82effa898cb1
Merge: a046633 0ecbe5d
Author: ojw28 <olly@google.com>
Date:   Wed Jul 5 15:04:58 2017 +0100

    Merge pull request #2503 from b95505017/rtmp_client
    
    Rtmp client

commit 0ecbe5dc04bcda27189637a88c6b6afd99f6d8d4
Merge: 4343ce6 a046633
Author: ojw28 <olly@google.com>
Date:   Wed Jul 5 15:04:49 2017 +0100

    Merge branch 'dev-v2' into rtmp_client

commit a04663372fe6f3538fd27c322054769996bf84e4
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jul 4 09:38:57 2017 -0700

    Detect playlist stuck and playlist reset conditions in HLS
    
    This CL aims that the player fails upon:
    
    - Playlist that don't change in a suspiciously long time,
      which might mean there are server side issues.
    - Playlist with a media sequence lower that its last snapshot
      and no overlapping segments.
    
    This two error conditions are propagated through the renderer,
    but not through MediaSource#maybeThrowSourceInfoRefreshError.
    
    Issue:#2872
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160899995

commit dda3616f5ad2b83016bfe1f8a7fe427b29670a41
Author: olly <olly@google.com>
Date:   Tue Jul 4 03:32:23 2017 -0700

    Fix reporting of width/height
    
    1. maybeRenotifyVideoSizeChanged should report reported* variables
    2. Add check into maybeNotifyVideoSizeChanged to suppress reporting
       in the case that the width and height are still unknown.
    
    Issue: #3007
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160879625

commit 37faead26ed36e23b85af13bfe0873e68e09e3c5
Author: eguven <eguven@google.com>
Date:   Tue Jul 4 01:53:38 2017 -0700

    Rename some assert methods in CacheAsserts to better reflect what they do
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160873280

commit 05a77eef5d24e307113787f67d30d8722032708d
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 3 07:42:57 2017 -0700

    Move Extractor test assertion methods to ExtractorAsserts class.
    
    This cleans up test the TestUtil class that in large parts consisted of
    assertions for Extractor tests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160829066

commit ad3d1e0cf2ea085d18627184a5213f47982b738a
Author: olly <olly@google.com>
Date:   Mon Jul 3 07:23:03 2017 -0700

    Add reset() to SampleQueue. Deprecate reset(boolean) and disable()
    
    The deprecated methods will be removed as soon as HLS is migrated
    to use the new ones.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160827936

commit d733bb4101330dcb7fb4ab7d3047299081bf577d
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 3 07:14:56 2017 -0700

    Fix video tunneling state transition to ready
    
    Issue: #2985
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160827532

commit 960315c4d5647df949a9f942a01a886800845674
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 3 07:10:21 2017 -0700

    Move extractTimelineFromMediaSource to test util class.
    
    This also ensures that TimelineAsserts only contains assert methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160827271

commit a82e51070b0e26466c34463c900f7d2a6b848b02
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jul 3 06:45:25 2017 -0700

    Add playback tests for CENC/DASH streams.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160825705

commit a9efb4553d978fc89e2b0b8a3cc96dbe34f9a8d9
Author: tonihei <tonihei@google.com>
Date:   Mon Jul 3 02:07:39 2017 -0700

    Merge TimelineAsserts.FakeTimeline into FakeTimeline.
    
    They serve the same purpose. One was defined as single window, multi-period
    timeline, while the other was a multi-window, single-period-each timeline.
    
    The combined FakeTimeline uses TimelineWindowDefinitions which allow multi-
    window, multi-period fake timelines.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160808844

commit 19a3d94022d4450eaccaaf48bcbf71f27aef4418
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Fri Jun 30 22:24:40 2017 +0100

    Remove offline classes for now (not ready yet)

commit 2bebd526e1ece801ef53e6daeaaee76b0255ec6d
Merge: 3ada4e1 1b64d62
Author: ojw28 <olly@google.com>
Date:   Fri Jun 30 19:07:03 2017 +0100

    Merge pull request #3009 from google/dev-v2-r2.4.3
    
    r2.4.3

commit 1b64d62e61dd68635df0df3a1a83d303db4d0b12
Author: olly <olly@google.com>
Date:   Fri Jun 30 10:48:03 2017 -0700

    Update release notes + bump version number
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160663100

commit 43daf0f2bb96bb514d22561dd4821f6ce7562aa9
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 15 08:06:31 2017 -0700

    Update MIME type in FLAC test data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159104188

commit 4ee0b2e1c86a714bc87206d4ae42fde9b3233da8
Author: olly <olly@google.com>
Date:   Fri Jun 30 10:48:03 2017 -0700

    Update release notes + bump version number
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160663100

commit a579b8d82dd74dca8a4e6b666c0df693aa14aa80
Author: olly <olly@google.com>
Date:   Fri Jun 30 02:52:20 2017 -0700

    Fix DvbParser bug
    
    Issue: #2957
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160628086

commit 79f7db7fcd1285e1248045fd486a109dade941e4
Author: olly <olly@google.com>
Date:   Thu Jun 29 06:49:30 2017 -0700

    Prefer Google over MediaTek for PCM decoding pre-O.
    
    Issue: #2873
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160520136

commit df84f2930cdb1f75d273668a96953c0aae102943
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 29 04:16:16 2017 -0700

    Clarify JavaDoc of MediaPeriod.
    
    Two of MediaPeriod's methods are only called after the media period has been
    prepared. Added this to JavaDoc of these method to simplify implementations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160510373

commit c33d16d6aec91ac2a445d5bbaf0f7138dd19c766
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 29 00:37:28 2017 -0700

    Show larger scrubber handle when focused
    
    Also remove updateScrubberState as it doesn't do anything useful.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160496133

commit efd17f86c5507a68e2568b2d4a30f9280eb53bab
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 27 09:38:31 2017 -0700

    Add URLs EXT-X-STREAM-INF uris only once
    
    This prevents ExoPlayer from thinking there are many more video tracks
    than there actually are. And will prevent downloading multiple times
    the same rendition once offline support for HLS is added.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160285777

commit 6c24d9380560adfc7c2577cdadf49d770541c383
Author: eguven <eguven@google.com>
Date:   Mon Jun 26 06:51:52 2017 -0700

    Fix FLAC extension native part compilation
    
    In the latest NDK version (r15) compilation fails because 'memset' isn't defined. Included cstring header.
    
    Issue: #2977
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160139022

commit 2f7de7d3e8a7b29f29d429d1deaffee7a33a5883
Author: olly <olly@google.com>
Date:   Mon Jun 26 04:02:03 2017 -0700

    Merge ContentDataSource fixes + tests from GitHub
    
    https://github.com/google/ExoPlayer/pull/2963/files
    https://github.com/google/ExoPlayer/commit/8bb643976fe20d1ec684291aa7bf5337e474bec4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160128047

commit a5eba0162b08f786d5a57b28746737a9ed83504e
Author: hoangtc <hoangtc@google.com>
Date:   Mon Jun 26 02:46:42 2017 -0700

    Update DrmSessionException.
    
    Make DrmSessionException takes in Throwable cause instead of Exception cause, which is more limiting and doesn't add any benefit.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160121486

commit 045a153cb7afdffc69b46adb9de1aad8b14b909f
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Sun Jun 25 15:16:11 2017 +0100

    Clean up okhttp datasource.

commit d4e598f4172352e1ab6eb916aed9de1c03686957
Author: Alex Birkett <alex@birkett.co.uk>
Date:   Fri Jun 23 18:56:40 2017 +0200

    Make OkHttpDataSource userAgent parameter optional

commit fd9b162d0fe635e9dbbbcffd0ff1a63ee45cfc08
Author: olly <olly@google.com>
Date:   Fri Jun 23 09:44:27 2017 -0700

    Fix setSelectionOverride(index, tracks, null)
    
    Issue: #2988
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159958591

commit d293cc4989ef4d67c9e7be171b943771c0271486
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 23 17:37:28 2017 +0100

    Mini cleanup

commit 5eb64dbe1208a61c157d87f1e33fc33180ad85c3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 23 17:20:51 2017 +0100

    Fix ContentDataSource and enhance tests to validate read data

commit 795e3be44029878b5772014f92a5fb435b335299
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Mon Jun 19 16:09:54 2017 +0200

    null AssetFileDescriptors support added in `ContentDataSource`

commit 66c461e65b57e289189846580ba42672539210e5
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Mon Jun 19 12:46:09 2017 +0200

    Comments from https://github.com/google/ExoPlayer/pull/2963#discussion_r122669328 applied

commit a0a50ac97913c006ef0a9033477ee045f7a26829
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Sat Jun 17 16:26:29 2017 +0200

    InputStream creation for ContentDataSource changed

commit 4b8cddbefd7f212b65b78c612ae7b12053bdb882
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Sat Jun 17 16:18:43 2017 +0200

    Introduced failing unit test for ContentDataSource

commit 76faa5b6d2d271474bcae6ee106177aa53de3ed3
Author: olly <olly@google.com>
Date:   Mon Jun 19 06:48:18 2017 -0700

    Move clearing of joining deadline back to onStopped
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159421000

commit 92206b9fc2434027cd524be1901c13b8131d5eeb
Author: olly <olly@google.com>
Date:   Sun May 7 05:37:26 2017 +0100

    TTML: Ignore regions that don't declare origin and extent
    
    Issue: #2953
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159218386

commit e618080c7385e9ddf7217f668fd5635c86e34dec
Author: olly <olly@google.com>
Date:   Fri Apr 7 07:08:04 2017 +0100

    Adjust incorrect looking max-channel counts
    
    Issue: #2940
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159099602

commit e8ee868a9f65a1e9013dee2729b46df9aa54a83b
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 15 02:36:46 2017 -0700

    Add support for mono input to the GVR extension
    
    Issue: #2710
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159082518

commit facfa5267787fd51e3ab04b89ad13c763e8cbc41
Author: olly <olly@google.com>
Date:   Wed Jun 14 07:56:37 2017 -0700

    Log frame counts when we see a spurious audio timestamp
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158977741

commit c7924bfe222481e9e7002a1f9d4599110de2930c
Author: olly <olly@google.com>
Date:   Fri Jun 30 07:52:35 2017 -0700

    Clean up parseSampleEntryEncryptionData
    
    It was a bit strange how it returned something via the return
    value and something else via the "out" variable, and doing it
    this way wasn't even saving any allocations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160645640

commit 51b98e817c09f58b5c5690d458c935feb9271b49
Author: olly <olly@google.com>
Date:   Fri Jun 30 06:05:42 2017 -0700

    Make Android Studio happy (make State public)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160638478

commit 177a33bbee7c796d974f73954f292fb45d9201f7
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 30 06:02:22 2017 -0700

    Merge TimelineAsserts.StubMediaSource into FakeMediaSource.
    
    The StubMediaSource was a subset of the FakeMediaSource.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160638245

commit b3a7f8774f305c48e88b560999672fcff0630c9c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 30 04:12:29 2017 -0700

    Upgrade IMA dependencies and README
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160632943

commit 9db0b8cce09c6ec72c2d58e192d4e744f399aa42
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 30 04:11:22 2017 -0700

    Move fake ExoPlayer component test classes to testutils.
    
    Fake ExoPlayer componenets used within ExoPlayerTest.java can be useful for
    other test classes and are therefore made available in testutils.
    They can also be merged with other existing fake components.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160632908

commit d54df32f25c55aaf37ee5cb5cf44c9f8d2d76625
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 30 03:37:34 2017 -0700

    Correct JavaDoc in TimelineAsserts.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160631095

commit 3b2cfa148ccb0a899484a3a47cb81ea2c72394c3
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 30 03:14:40 2017 -0700

    Move Timeline assertions to testutils.
    
    Some parts of TimelineTest provided common assertions and helper classes for
    other tests. As such, they better fit into testutils. In line with other
    assertion methods, the TimelineVerifier class has been converted to a set of
    static assertion methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160629797

commit 04b57f9c8e9147a1d7511259aedf645a41fb90e7
Author: olly <olly@google.com>
Date:   Fri Jun 30 02:52:20 2017 -0700

    Fix DvbParser bug
    
    Issue: #2957
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160628086

commit 28030b6c7eba2d3c7578db24761bee26c6b4f829
Author: hoangtc <hoangtc@google.com>
Date:   Thu Jun 29 10:33:14 2017 -0700

    Temp workaround for [Internal: b/63092960]
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160543009

commit 84f4fe5cf9c5085a0631ace25644e9ad79ab06a6
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 29 09:48:46 2017 -0700

    Recover from empty timelines.
    (Related to GitHub #1706)
    
    When the timeline becomes empty, the playback state transitions to "ended".
    When the timeline becomes non-empty again, exceptions are thrown because MSG_DO_SOME_WORK is still regularly sent and media periods are getting prepared.
    
    This change ensures that no MSG_DO_SOME_WORK messages are sent in "ended" state.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160537147

commit ba0e5246d66d1c348062d6065e32009c60e86a42
Author: olly <olly@google.com>
Date:   Thu Jun 29 09:48:28 2017 -0700

    Properly handle replacement of the DRM session in LibvpxVideoRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160537100

commit db177db6d9aa11b765a25496630f220bab2edc76
Author: olly <olly@google.com>
Date:   Thu Jun 29 09:41:36 2017 -0700

    DrmSession cleanup
    
    These changes are in part related to handling playback of mixed clear
    and encrypted content, where we might want to use a secure decoder
    throughout, but only have drm init data and only care about the state
    of the DrmSession during playback of encrypted parts.
    
    - requiresSecureDecoderComponent became unnecessary when we added
      ExoMediaCrypto, which provides a layer in which requiresSecureDecoderComponent
      can be overridden.
    - Relaxed requirements for obtaining the MediaCrypto. It's helpful
      to allow retrieval in the error state, since it can be used to
      instantiate a decoder and play clear samples.
    - Deferred throwing of errors in renderer implementations. As long as
      we can get a MediaCrypto, we should init the codec. We can also
      play clear samples without failing if playClearSamplesWithoutKeys is
      true, regardless of the errors state.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160536365

commit beb07341070a9ff233d3773afed0e49fb416bf17
Author: eguven <eguven@google.com>
Date:   Thu Jun 29 07:30:24 2017 -0700

    Extract base class from DashDownloaderFactory
    
    This base class will be used to extend HlsDownloaderFactory from.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160523335

commit e344e9cbb756a384c437850028c3fb09e145a386
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jun 29 06:53:56 2017 -0700

    Add SinglePeriodTimeline constructor to fill missing window information
    
    Issue:#2930
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160520480

commit 51af85f263a34bce3ae518f1d457dcf540929750
Author: olly <olly@google.com>
Date:   Thu Jun 29 06:49:30 2017 -0700

    Prefer Google over MediaTek for PCM decoding pre-O.
    
    Issue: #2873
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160520136

commit 69db6cb60bde95cbd7f86699f631dcbdc71b1ec9
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 29 06:01:49 2017 -0700

    Add dynamic concatenating media source.
    (GitHub issue #1706)
    
    The media source allows adding or removing child sources before and after prepare() was called.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160516636

commit a98d5bbd0a44930d7e179d228d0e662070f0c50e
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 29 05:58:39 2017 -0700

    Do not start rebuffering after playback ended.
    
    This is currently happening after toggling the repeat mode. This is line with
    the rest of the implementation which requires a seek operation to resume
    playback.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160516449

commit 1f815db367b5ca7112cd28f48c6879677379ae1e
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 29 04:22:22 2017 -0700

    Switch the IMA extension to use in-period ads
    
    This also adds support for seeking in periods with midroll ads.
    
    Remove Timeline.Period.isAd.
    
    Issue: #2617
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160510702

commit 6509dce6b7cea332b22449bfdd7bade6f74515be
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 29 04:16:16 2017 -0700

    Clarify JavaDoc of MediaPeriod.
    
    Two of MediaPeriod's methods are only called after the media period has been
    prepared. Added this to JavaDoc of these method to simplify implementations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160510373

commit 50530147d01a948ccd277e46bca8b0414bf87254
Author: eguven <eguven@google.com>
Date:   Thu Jun 29 03:28:21 2017 -0700

    Add a new test and extra checks to DashDownloadServiceTest
    
    Modified old testRemoveAction to test removing content after it's fully downloaded.
    Added a new testRemoveBeforeDownloadComplete which tests removing content before it's fully downloaded.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160507573

commit 81d077c037e3d559d28fa95e596ef91788587add
Author: eguven <eguven@google.com>
Date:   Thu Jun 29 03:03:25 2017 -0700

    Extract base class from DashDownloader
    
    This base class will be used to extend HlsDownloader from.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160505710

commit db11e3ddb6f48c897e7e9cdd40ad06b4911ce828
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 29 00:37:28 2017 -0700

    Show larger scrubber handle when focused
    
    Also remove updateScrubberState as it doesn't do anything useful.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160496133

commit a543436b960cc97ec1dfdb1ac5efe5da6e99fbe0
Author: olly <olly@google.com>
Date:   Wed Jun 28 08:57:57 2017 -0700

    SimpleExoPlayerView/DefaultTimebar fixes
    
    - Restore making the playback controls visible on any key press.
    - Turn anti-aliasing on for drawing the scrubber circle. It looks
      really ugly on some devices if you don't do this.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160413777

commit c6e5b67626baae294d5c7a99dbac9f384bafb3fe
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 28 08:42:49 2017 -0700

    Move InlinedApi warning suppression to class level for C
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160412354

commit 71ffc7668c552ee2daed2da46424ca3226e104f9
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 28 08:02:07 2017 -0700

    Support specifying AudioAttributes for AudioTrack
    
    Add a compatibility AudioAttributes class so that the app can specify
    audio attributes in the same way before and after API 21.
    
    Deprecate SimpleExoPlayer.setStreamType. Add
    SimpleExoPlayer.setAudioAttributes and MSG_SET_AUDIO_ATTRIBUTES.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160408574

commit c385ece69db39c904dceeb2026e70646c2bec981
Author: tonihei <tonihei@google.com>
Date:   Wed Jun 28 02:35:30 2017 -0700

    Move methods into MediaPeriodHolder.
    
    Both methods make extensive use of MediaPeriodHolder internals.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160386401

commit 96fa66028467596e404ff491443329419efe1df3
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 28 01:43:54 2017 -0700

    Expose ad playback information on ExoPlayer
    
    Also update the time bar to show ad markers using in-period ads and
    remove support for periods being marked as ads.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160382805

commit 66d122710ee9df56000f8f35ab709f847dcd748f
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 27 10:40:34 2017 -0700

    Add support for in-period ads
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160294524

commit d5c2cf79f403b89cc4f79b467714e2f746898135
Author: olly <olly@google.com>
Date:   Tue Jun 27 10:11:26 2017 -0700

    Update READMEs with new local build instructions
    
    Issue: #2851
    Issue: #2974
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160290097

commit efb367b417564a258a69140209e43f620c87537c
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 27 09:38:31 2017 -0700

    Add URLs EXT-X-STREAM-INF uris only once
    
    This prevents ExoPlayer from thinking there are many more video tracks
    than there actually are. And will prevent downloading multiple times
    the same rendition once offline support for HLS is added.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160285777

commit 4a59c7cf409a3c9caf01217eeba74adb41ad30d2
Author: olly <olly@google.com>
Date:   Tue Jun 27 08:27:36 2017 -0700

    Make it easier to use ExoPlayer modules in other projects II
    
    With this change, it becomes possible to depend on ExoPlayer
    locally in settings.gradle by doing:
    
    gradle.ext.exoplayerRoot = 'path/to/exoplayer/root'
    apply from: new File(gradle.ext.exoplayerRoot, 'core_settings.gradle')
    
    You can optionally add a prefix onto ExoPlayer's module names
    by adding:
    
    gradle.ext.exoplayerModulePrefix = 'prefix'
    
    Issue: #2851
    Issue: #2974
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160277967

commit 26b32f60789c571a070da01d59449d02647736e0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 27 07:46:33 2017 -0700

    Move getPeriodPosition methods to Timeline
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160273929

commit 2a8eb5a2a11b8e51120e3aca3884c95c4c144e29
Author: olly <olly@google.com>
Date:   Tue Jun 27 07:23:02 2017 -0700

    Make it easier to use ExoPlayer modules in other projects
    
    It's currently difficult to use ExoPlayer modules in other gradle
    projects because they rely on constants and dependencies defined
    in our own top level gradle file. This change moves the constants
    into a separate file referenced directly from each module. It also
    removes the need for the top level gradle file to declare a
    dependency on com.novoda:bintray-release. This is now only needed
    if "exoplayerPublishEnabled = true" is specified.
    
    Issue: #2851
    Issue: #2974
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160272072

commit 1dcad4d1733cf0f64be02d1bfaa184612bcfcef0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 27 07:17:46 2017 -0700

    Store a MediaPeriodId in PlaybackInfo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160271631

commit 675756d32dff5d9541909f38691ee9fccabc857b
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 27 06:29:29 2017 -0700

    Create MediaPeriods based on an identifier not an index
    
    This will allow MediaSources to provide MediaPeriods that correspond to ad
    breaks in a timeline period rather than content for a timeline period, in a
    future change.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160267841

commit d4059ecc6501d2b7f42c2c8fa24ecb3bd6bb2832
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 27 03:41:30 2017 -0700

    Use period holder indices to determine if a period was seen
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160257503

commit 444dbeb4c405045dd5b51e1f68fa144f1989a3fe
Author: eguven <eguven@google.com>
Date:   Tue Jun 27 01:45:13 2017 -0700

    Fix NPE in FakeDataSource.close()
    
    If open() fails because of the file isn't available then fakeData is null.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160249214

commit 410228acb80f51303fd55572ff7cbf41983e4f39
Author: tonihei <tonihei@google.com>
Date:   Tue Jun 27 01:05:16 2017 -0700

    Rename isLast to isFinal in MediaPeriodHolder.
    
    This better reflects the purpose of this flag and makes code more readable.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160246573

commit 076a77e598dc9f32110c4fcbe9fd67cc4a5e023b
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Mon Jun 26 23:41:00 2017 +0100

    Fix indexing error

commit 3fbfe29d27ba84cdedafe9de09c4a36a004a6912
Author: eguven <eguven@google.com>
Date:   Mon Jun 26 07:31:32 2017 -0700

    Modify CacheUtil.cache() for polling counters
    
    Getting active status of caching is needed to display on UI. Instead of a listener interface polling was chosen because of simplicity and better suits to UI refreshing.
    
    CachingCounters.downloadedBytes was updated after whole data is downloaded. Now it's updated for each read into buffer. Buffer length defines how finer these updates are.
    
    CachingCounters.totalBytes is added so UI can display a progress bar.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160142048

commit a7ed199622500584d5070335f2381288198a53e7
Author: eguven <eguven@google.com>
Date:   Mon Jun 26 06:51:52 2017 -0700

    Fix FLAC extension native part compilation
    
    In the latest NDK version (r15) compilation fails because 'memset' isn't defined. Included cstring header.
    
    Issue: #2977
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160139022

commit acbddbc0a5e628946b6311a2d03ae82f530e7bd3
Author: olly <olly@google.com>
Date:   Mon Jun 26 06:50:08 2017 -0700

    Use regular array for SampleQueues in ExtractorMediaPeriod
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160138881

commit c448463a05e31046d5dc4695aeebae58086a0393
Author: olly <olly@google.com>
Date:   Mon Jun 26 04:45:01 2017 -0700

    Move DashMediaSource and SsMediaSource to new SampleQueue methods
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160130540

commit 1b71e3b40ddec3c61bef721dd27f8bb27f3130d1
Author: olly <olly@google.com>
Date:   Mon Jun 26 04:09:59 2017 -0700

    Move ExtractorMediaPeriod to new SampleQueue methods
    
    This change allows you to enable/disable tracks within which
    all samples are key-frames without any re-buffering (e.g. audio,
    text and metadata). This effectively reverts V2 back to the
    behavior in V1, only this time we're doing it properly. []ly
    disabling/enabling, or disabling/enabling whilst paused, no longer
    cause samples to get "lost" between the source and renderers.
    
    Note it also becomes really easy to support a few other things,
    although support is not exposed in this change:
    
    - Enable/disable video tracks without any re-buffering, by
      changing the toKeyframe argument passed to discardTo to true.
    - Retain media in the buffer for some time after it's been played
      (e.g. to support a single back-5s-seek efficiently), by
      subtracting the desired back-buffer time from the value that's
      passed to discardTo.
    
    Issue: #2956
    Issue: #2926
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160128586

commit b3c6f6fb31c95cca4ff10a93318680c66cd1da12
Author: olly <olly@google.com>
Date:   Mon Jun 26 04:02:03 2017 -0700

    Merge ContentDataSource fixes + tests from GitHub
    
    https://github.com/google/ExoPlayer/pull/2963/files
    https://github.com/google/ExoPlayer/commit/8bb643976fe20d1ec684291aa7bf5337e474bec4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160128047

commit 70e6dd5930f912f261e0a39ece3564e747de558f
Author: hoangtc <hoangtc@google.com>
Date:   Mon Jun 26 02:46:42 2017 -0700

    Update DrmSessionException.
    
    Make DrmSessionException takes in Throwable cause instead of Exception cause, which is more limiting and doesn't add any benefit.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=160121486

commit b0a873df258c1f1f81f37622ec03746c6ec509b0
Author: Oliver Woodman <olly@olly-macbookpro1.roam.corp.google.com>
Date:   Sun Jun 25 15:16:11 2017 +0100

    Clean up okhttp datasource.

commit ea2f5cce8599e723276b05ab9745d60980dee66b
Merge: c007e93 0572d19
Author: ojw28 <olly@google.com>
Date:   Sun Jun 25 15:10:56 2017 +0100

    Merge pull request #2994 from alexbirkett/feature/make-ok-http-data-source-ua-optional
    
    Make OkHttpDataSource userAgent parameter optional

commit c007e93ab0473a03c9dfe3202de7c51e3af143df
Author: olly <olly@google.com>
Date:   Fri Jun 23 09:44:27 2017 -0700

    Fix setSelectionOverride(index, tracks, null)
    
    Issue: #2988
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159958591

commit 363f2414d141b31c311630fa84dff1edb20c0a30
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 23 07:57:19 2017 -0700

    Fix check for last period index in ExoPlayerImplInternal
    
    The if clause was never executed because nextLoadingPeriodIndex is set
    to C.INDEX_UNSET instead of loadingPeriodIndex + 1.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159948661

commit 0572d190fee3992170b2cd3a7cbced01ac8b3ebf
Author: Alex Birkett <alex@birkett.co.uk>
Date:   Fri Jun 23 18:56:40 2017 +0200

    Make OkHttpDataSource userAgent parameter optional

commit 555eb9d423d56e939b50e1c8b7db11fe6d7a679e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 23 17:37:28 2017 +0100

    Mini cleanup

commit 8bb643976fe20d1ec684291aa7bf5337e474bec4
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 23 17:20:51 2017 +0100

    Fix ContentDataSource and enhance tests to validate read data

commit 2da22e9e0fc4c0935d662fcf288aa5bee6032d4d
Merge: 6cde833 86ff19b
Author: ojw28 <olly@google.com>
Date:   Fri Jun 23 15:45:21 2017 +0100

    Merge pull request #2963 from DroidsOnRoids/dev-v2
    
    Source length calculation in ContentDataSource changed

commit 6cde8335ffdd91127f9745e7a4a016120ad442d7
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 23 05:09:01 2017 -0700

    Add setter method to child data holder of abstract concatenated timeline.
    
    Prevents that we forget to set variables.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159939180

commit 499f9370a2ada8169f1df17cb7c18157c7d92b37
Author: olly <olly@google.com>
Date:   Thu Jun 22 05:49:09 2017 -0700

    Remove use of mod operator from SampleMetadataQueue
    
    It's no more complicated to avoid it, and according to the
    Art team it should be faster without.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159816746

commit 950c2159b00a2a0459de22569909bee6690f7ea9
Author: olly <olly@google.com>
Date:   Thu Jun 22 05:41:02 2017 -0700

    Discard upstream allocations more aggressively + doc cleanup
    
    - If we have <s1>garbage<s2> and discard <s2>, throw away
      the garbage too.
    - Cleanup some documentation to consistently refer to the
      queue as "queue" rather than "buffer".
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159816309

commit aca80b8347796ba15913f78029e788ffa1e15082
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jun 22 04:03:31 2017 -0700

    Add support for pattern encryption and default initialization vectors
    
    This will extend our CENC modes support to cbcs and cens. The change was
    not split into two different CLs due to lack of test content for
    default initialization vectors, aside from AES-CBCS encrypted ones.
    
    Issue:#1661
    Issue:#1989
    Issue:#2089
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159810371

commit 73b17a7e7b96c280343638081febdce3179f0cf1
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 22 02:46:42 2017 -0700

    Use HTTPS for all GCS URLs
    
    Also update the dizzy sample to use HTTPS as it has moved
    permanently.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159805004

commit 9bad78dce6439fcf0b99dff79a9d47dde6f7b6fa
Author: olly <olly@google.com>
Date:   Wed Jun 21 09:51:26 2017 -0700

    Fix SampleMetadataQueue.getLargestQueuedTimestampUs
    
    This was broken prior to my recent changes, since
    largestDequeuedTimestampUs was only being updated in readData.
    It should have been updated in the skip methods. as well.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159704945

commit 531eb15ff46522b51aa1936c17f821bed4130b16
Author: eguven <eguven@google.com>
Date:   Wed Jun 21 07:04:59 2017 -0700

    Move DashDownloadTestBase assert methods to CacheAsserts
    
    CacheAsserts contains cache assertion methods for testing. It's easier to use in tests than DashDownloadTestBase which requires to be extended.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159688808

commit 8e49cab865c2ef02961ad1e03512fc1e63729510
Author: olly <olly@google.com>
Date:   Wed Jun 21 07:03:05 2017 -0700

    Start finalizing SampleQueue methods
    
    It's a bit messy at the moment with the deprecated methods
    in there, but on the read side the new set of methods is as
    follows:
    
    Modifies the start of buffer:
    - discardTo(time, keyframe, ...) [this is new]
    - discardToRead()
    - discardToEnd()
    
    Modifies the read position:
    - rewind()
    - advanceTo(time, keyframe, ...) [this is a generalization of skipToKeyframeBefore]
    - advanceToEnd() [previously called skipAll]
    - read(...)
    
    Which seems quite nice and self-consistent, and is powerful
    enough for everything that we need to do as we move MediaSource
    implementations over to the new methods.
    
    TODOs for subsequent changes:
    - Re-order methods in the two classes so that they're actually in
      the same order, and move the deprecated ones out of the way
    - Enhance SampleQueueTest to also cover new functionality, as we
      start transitioning MediaSource implementations over to use it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159688660

commit 59ccd63544caadd4a1facee3b7ce5fa08e18f493
Author: olly <olly@google.com>
Date:   Sun May 7 05:19:29 2017 +0100

    Remove weird nextOffset state from SampleMetadataQueue
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159681714

commit 9154d54df9fe3d5e6699ab6c780f6148be406f64
Author: tonihei <tonihei@google.com>
Date:   Wed Jun 21 04:00:02 2017 -0700

    Fix resolveSubsequentPeriod in EPII.
    
    getNextPeriod might return C.INDEX_UNSET.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159676949

commit ed060a8f3397253129224b96364718288e67942b
Author: eguven <eguven@google.com>
Date:   Wed Jun 21 03:54:00 2017 -0700

    Add FakeDataSource.setTestData() to simplify adding random test data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159676653

commit 40039ed0a1a58e368916ed332933292597a97bac
Author: eguven <eguven@google.com>
Date:   Wed Jun 21 02:17:27 2017 -0700

    Fix and move Util.getRemainderDataSpec() to DataSpec.subrange()
    
    Made the method copy all of the fields of DataSpec in to the new instance. Also converted
    it to an instance method of DataSpec for ease of usage, discovery and maintenance.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159670314

commit 44f6dbb0ccb856391e67ca96c5a8bdc5bbf7e067
Author: eguven <eguven@google.com>
Date:   Tue Jun 20 09:02:46 2017 -0700

    Work around the error prone warning
    
    Error prone check doesn't like we pass a variable named 'end' as start parameter and 'start' as end.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159567308

commit 467fd2535c030171a0520e4884de76ecd9308731
Author: olly <olly@google.com>
Date:   Tue Jun 20 07:01:35 2017 -0700

    Expose new non-discarding SampleQueue read/skip methods
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159555748

commit 0ffc3ffd291969194f30903630f748caf794d7ba
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 20 06:48:44 2017 -0700

    Fix DrmInitDataTest
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159554717

commit 8d74ba4850df39c8ef8cb26e4d3b5b8bbf96be38
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 20 06:32:12 2017 -0700

    Add support for cbc1 encryption scheme
    
    Issue:#1661
    Issue:#1989
    Issue:#2089
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159553419

commit 1c8f14b5fd68872da92eac7343f9735fc2859b1f
Author: eguven <eguven@google.com>
Date:   Tue Jun 20 04:43:03 2017 -0700

    Add support to run actions into FakeDataSource
    
    An actions is triggered when the reading reaches action's position. This can be
    used to make sure the code is in a certain state while testing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159545923

commit ce8634507daf922c72b34e4cc0a35dbb931d3b8f
Author: olly <olly@google.com>
Date:   Tue Jun 20 02:54:20 2017 -0700

    Add a read reference into our linked list of Allocations
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159538997

commit 317a9944997d3bfaccb1deae1ac50acb2b8bf1e4
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 20 02:52:55 2017 -0700

    Add type to DrmInitData.SchemeData
    
    At the moment, only CENC-defined scheme types are known values.
    This will allow having more information about the encryption
    scheme through the format, which in turn will allow more informed
    decisions on format support.
    
    Issue:#1661
    Issue:#1989
    Issue:#2089
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159538907

commit 2c09f8e0e315d06600710e355734485e1cd971c1
Author: olly <olly@google.com>
Date:   Mon Jun 19 07:59:43 2017 -0700

    Decouple start and read indices in SampleMetadataQueue
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159426366

commit 86f06faa8df1e8cbbfb0b298ed4fa9d98bae9703
Author: olly <olly@google.com>
Date:   Mon Jun 19 06:48:18 2017 -0700

    Move clearing of joining deadline back to onStopped
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159421000

commit de4ff4c5ec71698fb4d2ff9ce4572929d70d477a
Author: tonihei <tonihei@google.com>
Date:   Mon Jun 19 06:23:22 2017 -0700

    Extend HostActivity for reuse and silent timeout.
    
    Added option to fail on timeout. Also reset internals in all cases
    such that the activity can be used more than once.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159419176

commit 56ff2ef598d1bcc2e5f78d2fe8e27b20f731b386
Author: hoangtc <hoangtc@google.com>
Date:   Mon Jun 19 05:37:25 2017 -0700

    Add getPlaybackLooper() to ExoPlayer v2.
    
    A few components in ExoPlayer requires playback looper to operate (such as:
    DrmSessionManager#acquireSession), so this CL add back getPlaybackLooper()
    to facilitate such cases.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159416012

commit d9ea8f71430bed129917b5eb9554a8f1debf8018
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 16 07:51:58 2017 -0700

    Allow disabling the initial discontinuity on ClippingMediaSource
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159227077

commit 56205893e5f392531baa9bc1d33a56858193a36e
Author: tonihei <tonihei@google.com>
Date:   Fri Jun 16 06:41:19 2017 -0700

    Remove initial discontinuity from ClippingMediaSource
    (Fixing GitHub issue #2923)
    
    Cuurently, ClippingMediaSource issues an initial discontinuity. This causes the
    renderers to be disabled and re-enabled when this media source is used in a sequence
    with other sources (or in a loop).
    
    This change disables the use of an initial discontinuity for audio-only media under
    the assumption that audio streams have random access capabilities.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159221963

commit c7948f2f7a9b9bee91b116fbcc61e727443453cf
Author: olly <olly@google.com>
Date:   Sun May 7 05:37:26 2017 +0100

    TTML: Ignore regions that don't declare origin and extent
    
    Issue: #2953
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159218386

commit 023c9d56a914fe4c298f7abb553a0b5c060abaa9
Author: tonihei <tonihei@google.com>
Date:   Thu Jun 15 08:53:47 2017 -0700

    Simplify timeline test stub class.
    
    Use an actual class for the stub media source instead of an anomymous class.
    Allows to call assertReleased() on that class.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159109143

commit ed27017b0ca8061559d7ebcee98154c4e5c66c3e
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 15 08:06:31 2017 -0700

    Update MIME type in FLAC test data
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159104188

commit 86ff19b55bd4b028b4b5215ee120b04c10b9c351
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Mon Jun 19 16:09:54 2017 +0200

    null AssetFileDescriptors support added in `ContentDataSource`

commit 50da6d870c1613c0e1bbcf67575ad30383f47593
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Mon Jun 19 12:46:09 2017 +0200

    Comments from https://github.com/google/ExoPlayer/pull/2963#discussion_r122669328 applied

commit 8caad492d4b605d1155770d39d0b34ed116735ea
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Sat Jun 17 16:26:29 2017 +0200

    InputStream creation for ContentDataSource changed

commit b77cc7c621bc6d7fe432ed0aef041829a41120c4
Author: Karol Wrótniak <karol.wrotniak@droidsonroids.pl>
Date:   Sat Jun 17 16:18:43 2017 +0200

    Introduced failing unit test for ContentDataSource

commit 8af77acb01edbcc7fe7005d44a0146e25c6695eb
Author: olly <olly@google.com>
Date:   Fri Apr 7 07:08:04 2017 +0100

    Adjust incorrect looking max-channel counts
    
    Issue: #2940
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159099602

commit 2a353a834dc8571e805cb8c7c6a7fdbd149b33a4
Author: olly <olly@google.com>
Date:   Thu Jun 15 07:06:38 2017 -0700

    Advance SampleQueue writeAllocationNode earlier
    
    Previously, writeAllocationNode was not advanced to the
    terminating node when finishing writing sample data that
    fills exactly up to the end of the current write node.
    This wasn't actually broken, but is confusing because it
    causes edge cases where the start/read references could
    temporarily refer the node after the current write node.
    This change advances the write reference in this case,
    removing this confusion and bringing the implementation
    in line with what the design doc says happens.
    
    Also making some simplification and consistency changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159099522

commit a913fd952fff38c9e9978a7734a10cdab7c348c3
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 15 02:36:46 2017 -0700

    Add support for mono input to the GVR extension
    
    Issue: #2710
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=159082518

commit 3ada4e178dc320abb73c01ec7bdf4535334e0a3d
Merge: 9f81485 4e578a1
Author: ojw28 <olly@google.com>
Date:   Wed Jun 14 19:53:04 2017 +0100

    Merge pull request #2952 from google/dev-v2-r2.4.2
    
    r2.4.2

commit 4e578a1b2164c4c0a358f6ae28153383e133473f
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 14 03:34:19 2017 -0700

    Increase MP3 sniffing distance
    
    Issue: #2951
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158960483

commit cdcdf1d37c84f4436d6aeee998fdf2590b8f7b81
Author: olly <olly@google.com>
Date:   Wed Jun 14 07:56:37 2017 -0700

    Log frame counts when we see a spurious audio timestamp
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158977741

commit 810c120abcb10567f26f6ae2c8b4f22f2cb9a211
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 14 03:34:19 2017 -0700

    Increase MP3 sniffing distance
    
    Issue: #2951
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158960483

commit e4617567a3ce23980319d79e961e5043343edf4e
Author: olly <olly@google.com>
Date:   Tue Jun 13 07:26:53 2017 -0700

    Rename DefaultTrackOutput to SampleQueue
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158842843

commit 6362dfeb986b9f672c745349f674feba96c8ac12
Author: olly <olly@google.com>
Date:   Tue Jun 13 06:43:20 2017 -0700

    Replace LinkedBlockingDeque with our own linked list
    
    This will allow us to maintain a reference to the middle
    of the queue, which is necessary to efficiently support
    decoupling the read position from the start of the buffer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158839336

commit f3e9166a4eabeb7b2ec8cffedf7c4914a91f48d5
Author: olly <olly@google.com>
Date:   Tue Jun 13 06:34:02 2017 -0700

    Use DummySurface on S8 where possible
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158838707

commit fb12a659a2e06a70a4dc8db4f793068ce8a60f1b
Author: olly <olly@google.com>
Date:   Tue Jun 13 06:19:59 2017 -0700

    Fix discarding upstream from DefaultTrackOutput
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158837777

commit 0c1212b3099ff14177dc52f34985bd2831488c34
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jun 13 14:10:31 2017 +0100

    Fix typo

commit 0f5c30d3453c5faa32fe1378a8b38f125e834a9e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jun 13 13:35:10 2017 +0100

    Misc cleanup

commit c6dfccf3931d7351d007480ea21b80ea342135a5
Merge: b95417e c24ef59
Author: ojw28 <olly@google.com>
Date:   Tue Jun 13 13:21:01 2017 +0100

    Merge pull request #2756 from kiall/par-debugview
    
    Include Pixel Aspect Ratio in DebugTextViewHelper

commit b95417e783d572df53da52f4bac1dbc9aabf3c22
Merge: 3509982 dbfbcd6
Author: ojw28 <olly@google.com>
Date:   Tue Jun 13 13:20:50 2017 +0100

    Merge pull request #2943 from michalliu/dev-v2-fix
    
    check if defaultRefreshRate is reasonable

commit 350998219acd01a1694fa1f927a1b79688ff0d0b
Author: olly <olly@google.com>
Date:   Mon Jun 12 12:12:23 2017 -0700

    Add test for DefaultTrackOutput
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158745843

commit fa4f876668a5a1ed8f3e945c762df3beb1777b03
Author: tonihei <tonihei@google.com>
Date:   Mon Jun 12 07:51:10 2017 -0700

    UI parameter to disable automatically showing playback controls.
    (Fixing GitHub issue #2699)
    
    Added controllerAutoShow parameter to decide whether playback controls are
    shown automatically. Default is true. Can be overwritten in the XML with
    auto_show=false or via SimpleExoPlayerView.setControllerAutoShow(false).
    
    Also inverted the logic of maybeShowControllers and showController.
    SimpleExoPlayerView.(show/hide)Controller and PlaybackControlView.(show/hide)
    now unconditionally do what they say to allow manual operation.
    SimpleExoPlayerView.maybeShowController is used internally to automatically
    show playback controls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158712277

commit dcc2f9bd67126b9ad9992941792203cde9629050
Author: tonihei <tonihei@google.com>
Date:   Mon Jun 12 07:46:48 2017 -0700

    Add meta data class for AbstractConcatenatedTimeline.
    (Preparation for GitHub issue #1706)
    
    AbstractConcatenatedTimeline repeatly calls methods of its implementation to
    query a specific child timeline. This may be inefficient if the implementation
    repeatly executes the same code to find the timeline.
    
    Changed the class such that it now queries all information at once using a meta
    data class. As all methods need at least two of four variables anyway, this
    doesn't generate unnecessary overhead.
    
    Also generified the UID for the child indices to allow new implementations to
    use some other UID besides the index.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158711979

commit 629edc2b9549e2151c204c09abe9e8b989fbcddf
Author: tonihei <tonihei@google.com>
Date:   Mon Jun 12 04:13:01 2017 -0700

    Remove needsContinueLoading from ExoPlayerImplInternal
    
    The same effect can be achieved by checking the isLoading variable of ExoPlayerImplInternal
    because this variable is in almost all cases set simultaneously with loadingMediaPeriodHolder.needsContinueLoading.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158697948

commit 58280f979ee07a0fc30ed39a6e898f4966a7d901
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jun 12 03:49:12 2017 -0700

    Fix continueLoading in IMA deferred periods
    
    continueLoading may be called during preparation, but this is not
    handled correctly in the case where a deferred period doesn't
    have a source yet.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158696539

commit dbfbcd63125fbb34bfc98ac4786393617c3c16e1
Author: michalliu <michalliu@foxmail.com>
Date:   Tue Jun 13 15:17:32 2017 +0800

    check if defaultRefreshRate is reasonable
    
    We found getDefaultDisplay has a very small chance returns null

commit 80be637dcc6c13110f157e07e7c28ba8d2d05b26
Author: olly <olly@google.com>
Date:   Mon Jun 12 01:37:01 2017 -0700

    Allow overriding of getCodecMaxValues
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158686545

commit 4510abf278bd5a8bf8eb2e8b310e701080cdce07
Author: olly <olly@google.com>
Date:   Wed Jun 7 08:01:28 2017 -0700

    Update handled schemes for timing element resolution.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158269487

commit c980eae9c4c9a7768cccdf574ba1fd9723750d97
Author: olly <olly@google.com>
Date:   Mon Jun 12 01:37:01 2017 -0700

    Allow overriding of getCodecMaxValues
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158686545

commit 5cd3a9baa03ca37bbc8060791596d36162d22739
Author: olly <olly@google.com>
Date:   Mon Jun 12 01:11:17 2017 -0700

    Fix passing of invalid surface to video renderers
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158684924

commit cb5b6fba01ba2a60b919b0b4377e202f40e75da9
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jun 12 00:51:19 2017 -0700

    Allow customization of ExtractorMediaSource's check interval
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158683582

commit 646047f0885524c9da4e74795a5dd76fa68854cf
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jun 9 08:45:50 2017 -0700

    Add nullable annotation to onSourceInfoRefreshed's manifest argument
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158522507

commit 59315cf9233f2caba6a54d813458a64067c25756
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 9 02:35:47 2017 -0700

    Fix maximum read ahead logic for repeat mode
    
    Separate MediaPeriodHolder.index and MediaPeriodHolder.periodIndex, so that the
    latter is always a period index (which may repeat or jump) whereas the holder
    index increases by one each time an item is added to the period holder queue.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158497639

commit 4e006a9616427a1b45ffd13d09a93b653fa6472c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 9 01:52:54 2017 -0700

    Move positionUs parameter from createPeriod to prepare
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158494794

commit 047e0eb645826b4ba5cd0502319c238ba2550808
Author: olly <olly@google.com>
Date:   Thu Jun 8 10:18:45 2017 -0700

    Renames to prepare for upcoming media buffer changes
    
    Currently, media is discarded from DefaultTrackOutput
    and SampleMetadataQueue as soon as it's been read. In
    upcoming changes we'll decouple discard and read. This
    will make it possible to retain already-read media in
    these buffer classes, and allow the read position to
    be moved backward as far as media is retained. This is
    important for fixing an edge case around 608/EMSG
    tracks, and could also underpin future features like
    allowing retaining of X-seconds past media in the
    buffer.
    
    This change renames some variables and methods to
    prepare for the upcoming changes. read/write indices
    are renamed to start/end. The upcoming changes will
    add a read index that's between the two. isEmpty is
    inverted and renamed to hasNextSample, since it will
    be possible to not have a next sample (because the
    read index == end index) but for the buffer to not
    be empty (because start index < read index).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158409630

commit b7b0fef694a1a4477de11d40193f9c7645b695f2
Author: olly <olly@google.com>
Date:   Thu Jun 8 07:44:25 2017 -0700

    Split InfoQueue into its own class
    
    It's pretty big as an inner class, and is going to get a
    little more complicated. I think it makes sense to be
    able to consider it in isolation.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158393754

commit 1b06ce740734e60d6a78f65720d84daf367cbc78
Author: olly <olly@google.com>
Date:   Wed Jun 7 08:02:57 2017 -0700

    Fix ArrayIndexOutOfBoundsException in DashMediaPeriod
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158269662

commit 5908d2d7e2e92fa6143034886a351248bf98f1d8
Author: olly <olly@google.com>
Date:   Wed Jun 7 08:01:28 2017 -0700

    Update handled schemes for timing element resolution.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158269487

commit cdad6a4ef184995178091e9c16f45438f95b4c7e
Author: tonihei <tonihei@google.com>
Date:   Tue Jun 6 17:35:25 2017 -0700

    Move playback test utils to testutils.
    
    This allows other tests to reuse the util classes without having to link to playbacktests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158214560

commit c24ef592e77d6146983a3cf156e86f14dfcecd07
Author: Kiall Mac Innes <kiall@macinnes.ie>
Date:   Sun Apr 30 12:37:15 2017 +0100

    Include Pixel Aspect Ratio in DebugTextViewHelper
    
    Add the video Pixel Aspect Ratio to the DebugTextViewHelper in order
    to help debug issues related to PAR changes etc

commit df99922ac13d273ac51d982b733ea5c771f2e155
Author: olly <olly@google.com>
Date:   Tue Jun 6 10:03:08 2017 -0700

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158153988

commit fb7cb507ea6440a12b674a2e38a3d94fca833cf1
Author: olly <olly@google.com>
Date:   Tue Jun 6 09:29:24 2017 -0700

    Expose current scrubber position through onScrubStart
    
    Issue: #2910
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158149904

commit 2439c582d408103b4360e0aed3cbe63a2057c492
Author: olly <olly@google.com>
Date:   Tue Jun 6 10:03:08 2017 -0700

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158153988

commit 39b1c85c27aa982aa88707a125d9847378c055d1
Author: olly <olly@google.com>
Date:   Tue Jun 6 09:29:24 2017 -0700

    Expose current scrubber position through onScrubStart
    
    Issue: #2910
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158149904

commit 1ac8420b7fea5e695bbf4dce3b373b7c00b34d6d
Author: olly <olly@google.com>
Date:   Tue Jun 6 08:21:38 2017 -0700

    Constraint buffered percentage to [0,100]
    
    Issue: #2902
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158142754

commit 643083194d2e520a443c24778f9a570d14d3787d
Author: olly <olly@google.com>
Date:   Tue Jun 6 08:15:25 2017 -0700

    Pass non-null logger into DefaultDrmSessionManager
    
    Issue: #2903
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158142226

commit a0c884849e501e110b04cd9cfc363119985791fc
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 6 08:03:04 2017 -0700

    For HLS mode, pick the lowest PID track for each track type
    
    This prevents strange behaviors for streams that changes the track declaration
    order in the PMT.
    
    NOTE: This should not change ANY behavior other than the one described above.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158140890

commit 79048ffae67c44e08330bd3b9328ca0f95267cc9
Author: olly <olly@google.com>
Date:   Tue Jun 6 07:31:01 2017 -0700

    Further cleanup of updateSelectedTrack
    
    - Return early if the selection is unchanged.
    - Remove unnecessary variables.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158138187

commit 8241bb8a6e5f91e0dfa70800f8e187cfd9318c23
Author: hoangtc <hoangtc@google.com>
Date:   Tue Jun 6 06:58:07 2017 -0700

    Fix a minor bug with AdaptiveTrackSelection.
    
    When updating track selection, we should only revert back from ideal
    track selection to current track selection if the currently selected
    track is not black-listed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158135644

commit df5e75b76c236e941c24dbc4f769cdc1fd369a9a
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jun 5 05:28:01 2017 -0700

    Pick the lowest quality video when capabilities are exceeded
    
    Issue:#2901
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158006727

commit cc748c30c72eb5b5c421de157358c8da8be999e9
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun Jun 4 07:02:13 2017 -0700

    Add a null check in DummySurface static initializer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157958694

commit 9796a096983a55d95e29bc5f661489bca98bc9d6
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 2 09:48:58 2017 -0700

    Assume CBR for MP3s with Info headers
    
    Issue: #2895
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157841519

commit c36793ab360a4a6edae97948520ede52427d6b73
Author: olly <olly@google.com>
Date:   Wed May 31 07:23:13 2017 -0700

    Move adaptation disabling workaround into MediaCodecUtil
    
    This is necessary to make sure that the correct thing happens
    where MediaCodecInfo.adaptive is queried directly (for example,
    MediaCodecVideoRenderer uses the field to determine how to size
    input buffers). Also disable adaptive on Nexus 10.
    
    Issue: #2806
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157583473

commit 80600ffe1be73e83631c8cc38f03db8e3cd0dfce
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed May 31 03:59:24 2017 -0700

    Ignore invalid EXT-X-PLAYLIST-TYPE values
    
    Issue:#2889
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157571216

commit c80b60f4ac571c7ca22607f7049d90db2629e98a
Author: olly <olly@google.com>
Date:   Wed May 31 03:16:47 2017 -0700

    Constraint seeks within bounds for ConstantBitrateSeeker
    
    We do this everywhere for index based seeking already.
    
    Issue: #2876
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157568788

commit 854c8d0381ebcb7f2a756de711236899c2801829
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 31 01:46:49 2017 -0700

    Fix DefaultTimeBar invalidation
    
    Issue: #2871
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157562792

commit 2795269daee2270fc2bda1512cefd86ef021f905
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 07:48:43 2017 -0700

    Use AVERAGE-BANDWIDTH instead of BANDWIDTH when available
    
    Also prevent BANDWIDTH's regex from matching the AVERAGE-BANDWIDTH attribute.
    
    Issue:#2863
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157219453

commit 5a754fe7611856d333a74bc2c9dfb9f2c4abab28
Author: olly <olly@google.com>
Date:   Fri May 26 04:49:44 2017 -0700

    Don't fail if we find a track is unsupported
    
    Use AUDIO_UNKNOWN instead. This is in line with our handling
    of video tracks with VIDEO_UNKNOWN.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157209428

commit 67cb7d8da5019af5f273b7be8885ef1281f302f7
Author: olly <olly@google.com>
Date:   Thu May 25 06:52:39 2017 -0700

    Fix SmoothStreaming Timeline
    
    There were a few things wrong. Specifically the case in
    the ref'd issue. Also, the timeline was being marked as
    non-dynamic in the empty-but-live case (it should be
    marked dynamic as segments may be added later).
    
    Issue: #2760
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157103727

commit 22137f621535fd765eea411ac31fbf00af805667
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed May 24 09:48:39 2017 -0700

    Flexibilize Util.parseXsDateTime to allow single digit hour
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156999955

commit 10f8944060356d575815c6570db9995a1a0d1e01
Author: olly <olly@google.com>
Date:   Wed May 24 07:38:42 2017 -0700

    Don't select more than one audio/video/text track by default
    
    Issue: #2618
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156986606

commit 1316445c00328f9fc04845350800783aef55ba44
Author: olly <olly@google.com>
Date:   Tue Jun 6 08:21:38 2017 -0700

    Constraint buffered percentage to [0,100]
    
    Issue: #2902
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158142754

commit 90c62f636ce7e1b27236f76f3bfc596ce6941b23
Author: olly <olly@google.com>
Date:   Tue Jun 6 08:15:25 2017 -0700

    Pass non-null logger into DefaultDrmSessionManager
    
    Issue: #2903
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158142226

commit 1637575d4b9d4786784a13b9dead540599ac730a
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 6 08:03:04 2017 -0700

    For HLS mode, pick the lowest PID track for each track type
    
    This prevents strange behaviors for streams that changes the track declaration
    order in the PMT.
    
    NOTE: This should not change ANY behavior other than the one described above.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158140890

commit a3ee684e270abe9e271510428dc7851903ed2587
Author: olly <olly@google.com>
Date:   Tue Jun 6 07:31:01 2017 -0700

    Further cleanup of updateSelectedTrack
    
    - Return early if the selection is unchanged.
    - Remove unnecessary variables.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158138187

commit c1bfab3c23a6c6eafc5842ba13f59cff1df8b6ee
Author: hoangtc <hoangtc@google.com>
Date:   Tue Jun 6 06:58:07 2017 -0700

    Fix a minor bug with AdaptiveTrackSelection.
    
    When updating track selection, we should only revert back from ideal
    track selection to current track selection if the currently selected
    track is not black-listed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158135644

commit 5c2c3c5c63aecfb8fe4b31db10aa7c48933cdfbb
Author: eguven <eguven@google.com>
Date:   Tue Jun 6 05:31:42 2017 -0700

    Create a base class for DASH downloading related tests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158129802

commit edbc2046e2c6291e0e229638c78a507ea491c996
Author: tonihei <tonihei@google.com>
Date:   Mon Jun 5 16:03:39 2017 -0700

    Clean-up manifest merge attributes.
    
    1. Remove tools:replace in manifest files. This attribute is only needed to establish priority when two manifests are merged and have the same attribute with different values.
    As this is not happening here, the attributes can be removed.
    
    2. Some BUILD files also define a deprecated manifest merge strategy different from the android default merge strategy. For consistency these are set to "android'.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158075128

commit 10c2d3156b3aa8b4322bbd5d523a07f9d3f8e8ee
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jun 5 05:28:01 2017 -0700

    Pick the lowest quality video when capabilities are exceeded
    
    Issue:#2901
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=158006727

commit 8dca0b941886b4eab9246c0a6a36c5f0dc5e44b5
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun Jun 4 07:02:13 2017 -0700

    Add a null check in DummySurface static initializer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157958694

commit 35cc0d65cde21395929e4750988d1502a0191ccb
Author: olly <olly@google.com>
Date:   Fri Jun 2 10:40:39 2017 -0700

    Only update codecInfo when needed
    
    This avoids calling getDecoderInfo repeatedly in the case
    where shouldInitCodec return false (e.g. because we don't
    have a surface and cannot instantiate a dummy surface).
    
    Issue: #677
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157847702

commit c5cf9090fc44f9502c97e404f4e185d84a44c5bc
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 2 09:48:58 2017 -0700

    Assume CBR for MP3s with Info headers
    
    Issue: #2895
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157841519

commit e98bee6163a354754fe0b383c3e2160865d754be
Author: olly <olly@google.com>
Date:   Fri Jun 2 08:26:13 2017 -0700

    Add surface attach/detach to *WithRendererDisabling tests
    
    This will cause the test to exercise the code path of
    instantiating a DummySurface, rendering to it for 10
    seconds, then re-targeting the real surface again. For
    secure content tests the code path is only exercised if
    DummySurface.SECURE_SUPPORTED is true. The logic for
    checking this is within MediaCodecVideoRenderer itself,
    rather than being part of the test.
    
    Issue: #677
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157833026

commit ba9114c9c7691b38d91cdd00eae73ab3743860d5
Author: olly <olly@google.com>
Date:   Fri Jun 2 08:10:58 2017 -0700

    Automatically use DummySurface when possible
    
    Issue: #677
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157831796

commit 32b5a802918ab01018fb39f6ee964ed7275d7b0a
Author: olly <olly@google.com>
Date:   Fri Jun 2 07:39:33 2017 -0700

    Deprecate LoopingMediaSource for indefinite looping
    
    ExoPlayer.setRepeatMode should be preferred. Deprecate
    the constructor and update the relevant documentation.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157829207

commit ea21af2ce9e60a064602f8a78c2394e90b1c208f
Author: olly <olly@google.com>
Date:   Wed May 31 07:23:13 2017 -0700

    Move adaptation disabling workaround into MediaCodecUtil
    
    This is necessary to make sure that the correct thing happens
    where MediaCodecInfo.adaptive is queried directly (for example,
    MediaCodecVideoRenderer uses the field to determine how to size
    input buffers). Also disable adaptive on Nexus 10.
    
    Issue: #2806
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157583473

commit 0f27efae4465e0e48fd18850f2efe42de63046e1
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed May 31 03:59:24 2017 -0700

    Ignore invalid EXT-X-PLAYLIST-TYPE values
    
    Issue:#2889
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157571216

commit b1fd99baaba91b3a8610666e60f4bc196cd556ff
Author: olly <olly@google.com>
Date:   Wed May 31 03:16:47 2017 -0700

    Constraint seeks within bounds for ConstantBitrateSeeker
    
    We do this everywhere for index based seeking already.
    
    Issue: #2876
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157568788

commit bcd4bf0fd5e729168b2ed125dc28eae0ed3dc0b7
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 31 01:46:49 2017 -0700

    Fix DefaultTimeBar invalidation
    
    Issue: #2871
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157562792

commit 7d4eaa74f76a49e7547a177801005133a9810ce3
Author: anjalibh <anjalibh@google.com>
Date:   Wed Jun 7 15:02:35 2017 +0100

    Expose the HDR ColorInfo in the VpxOutputBuffer so the renderer can use it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157267699

commit 12ef97fc34376838e3eb09f16fc371d952577b64
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 11:33:09 2017 -0700

    Fix and complete MediaPlaylist javadocs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157243533

commit 122b2a1a3187a36a9d8e13f6add87cb3e2e1c2ba
Author: olly <olly@google.com>
Date:   Fri May 26 10:36:29 2017 -0700

    Use single TrackGroup for switchable adaptation sets
    
    Issue: #2431
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157236031

commit 27fc82f0adf05c0246e5d1d6548cfb8ea41df11d
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri May 26 09:14:14 2017 -0700

    Make repeatMode private
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157226768

commit cf6f1d7bf2e6119b2c2f2def797408990727a9a2
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 08:31:41 2017 -0700

    Move Period and Window to the top of timeline to match Exoplayer style
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157223090

commit 53b52e784c2a7902b634348a2edfe81306318770
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 07:48:43 2017 -0700

    Use AVERAGE-BANDWIDTH instead of BANDWIDTH when available
    
    Also prevent BANDWIDTH's regex from matching the AVERAGE-BANDWIDTH attribute.
    
    Issue:#2863
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157219453

commit 26728142eea52f16f8ce98734e915f0b92f54ca4
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 07:14:59 2017 -0700

    Expose all "other" tags that start with #EXT through the playlist
    
    "other" includes tags for which there is no existing behavior defined.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157217270

commit 3108b07c90334c69015b7bff045240aa169bb6e7
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 26 05:10:04 2017 -0700

    Minimize overlapping chunks if #EXT-X-INDEPENDENT-SEGMENTS is present
    
    It is worth mentioning that the tag can be in the master playlist as well, which
    means that it applies to all media playlists. There are a few tags with this
    characteristic. This will be addressed in a later CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157210505

commit 2c20689237353472cad859335c488fa42ae83231
Author: olly <olly@google.com>
Date:   Fri May 26 04:49:44 2017 -0700

    Don't fail if we find a track is unsupported
    
    Use AUDIO_UNKNOWN instead. This is in line with our handling
    of video tracks with VIDEO_UNKNOWN.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157209428

commit 9737046e53e1db976e77bfaa53e7901170b14e38
Author: olly <olly@google.com>
Date:   Fri May 26 04:48:11 2017 -0700

    Parse SupplementalProperty elements in DASH adaptation sets
    
    This will be used to merge adaptation sets that are marked for
    seamless switching into single TrackGroups in DashMediaSource.
    
    Issue: #2431
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157209358

commit 5092efe301210f53ff69c475543f02c95b0c254f
Author: eguven <eguven@google.com>
Date:   Fri May 26 03:03:48 2017 -0700

    Add a comment to record the reason for restoring licenses before releasing
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157204373

commit 3daa7a084fe89dc241768403f61086694388a249
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 25 10:30:27 2017 -0700

    Shorten the player type
    
    The string is truncated to 20 character in IMA.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157122929

commit f8cbe53f20325dd06e920c0d989b891b760bf276
Author: olly <olly@google.com>
Date:   Thu May 25 06:52:39 2017 -0700

    Fix SmoothStreaming Timeline
    
    There were a few things wrong. Specifically the case in
    the ref'd issue. Also, the timeline was being marked as
    non-dynamic in the empty-but-live case (it should be
    marked dynamic as segments may be added later).
    
    Issue: #2760
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157103727

commit c4f7a2d62da280370dee61e102f0fe4eb74cc258
Author: olly <olly@google.com>
Date:   Thu May 25 06:17:04 2017 -0700

    Correctly transition to ended state
    
    This fixes transitioning into the ended state if we see
    endOfStream from the chunk source whilst in the pending
    reset state. Prior to this fix we'd still be pending a
    reset, and so readData would never allow EOS to be read
    by the consuming renderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157101755

commit eb3a31c881d5c5426c11a28047949669ab664758
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 25 03:57:11 2017 -0700

    Fix default position masking period index calculation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=157095116

commit f16967cdfeda442128edc754cba0c40949a2d429
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed May 24 09:48:39 2017 -0700

    Flexibilize Util.parseXsDateTime to allow single digit hour
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156999955

commit 695347c26b92edcbb225eb6d85ca4713362d11ce
Author: olly <olly@google.com>
Date:   Wed May 24 07:38:42 2017 -0700

    Don't select more than one audio/video/text track by default
    
    Issue: #2618
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156986606

commit 9f814850535afbe5a0123f7fa8fc2875ba2c5015
Merge: d979469 fe50459
Author: ojw28 <olly@google.com>
Date:   Tue May 23 18:12:22 2017 +0100

    Merge pull request #2860 from google/dev-2.4.1-rc
    
    r2.4.1

commit fe50459449413ae3a9f3a9bb720812547fbd63a8
Author: olly <olly@google.com>
Date:   Tue May 23 09:41:37 2017 -0700

    Bump version and update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156872383

commit c14a14e51d5c9a6d29f101892fdf184d61f546f9
Author: olly <olly@google.com>
Date:   Tue May 23 07:45:53 2017 -0700

    Update gradle + bintray-release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156860658

commit 3a448f3a0ea935f9e11b8a6bd5db8b4a62144cf3
Author: olly <olly@google.com>
Date:   Tue May 23 09:41:37 2017 -0700

    Bump version and update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156872383

commit 3b1e4b5ca9329cf161e64a5793261cf61388ed0d
Author: olly <olly@google.com>
Date:   Tue May 23 07:45:53 2017 -0700

    Update gradle + bintray-release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156860658

commit bf71ad48838169326b7f5f95c6a4a3f5723c8870
Author: olly <olly@google.com>
Date:   Mon May 22 13:52:51 2017 -0700

    Fix TTML positioning
    
    Issue: #2824
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156781252

commit fb3c19055691ed835c9594d9a92bdf76117b835f
Author: olly <olly@google.com>
Date:   Mon May 15 18:11:45 2017 -0700

    Clear the correct buffer in MediaCodecRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156131086

commit a4a31546047a6bea63e41775fb8f4c8ff88cf9be
Author: olly <olly@google.com>
Date:   Mon May 15 18:06:20 2017 -0700

    Clear up BaseRenderer.disable
    
    - Call onDisabled last. onDisabled really shouldn't be doing
      anything with the stream, so pretty sure this is fine (and
      guarantees the stream is cleared properly even if onDisabled
      throws a RTE).
    - Remove super.onDisabled calls from Text/Metadata renderers.
      This is just for consistency; we don't make such calls in
      other direct descendants of BaseRenderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156130640

commit a0f4bf0ee18a5f883530202a2aad0f53604b99cb
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 15:36:20 2017 -0700

    Constrain DefaultTimeBar maximum positions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156113616

commit ecc4184e6c6ac8242fc796962f7eba936990077d
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 11:14:04 2017 -0700

    Enable neon for libvpx on arm64-v8a
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156077889

commit e7ec4e6755e83162d1e2b3b44b6dce863348d01c
Author: bachinger <bachinger@google.com>
Date:   Sun May 14 22:26:39 2017 -0700

    Enlarge size of data array of parsable packetArray if ogg packet size exceeds
    the current size.
    
    https://github.com/google/ExoPlayer/issues/2782
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156018137

commit 1cda6e025e38608263572fb5a65b125c58b4334f
Author: sillywab8 <sillywab8@gmail.com>
Date:   Fri May 12 08:24:40 2017 -0500

    Add support for AVC Level 5.2

commit 9a2cac7f741101c58900da7c0070d66c4a578740
Author: arakawa_yusuke <mofneko@users.noreply.github.com>
Date:   Thu May 11 21:11:21 2017 +0900

    Refactor: Change the position of variable.

commit 5dca496b896c0738ffced72d69fe9345937eb723
Merge: dbc0cf8 37ffb33
Author: ojw28 <olly@google.com>
Date:   Tue May 23 15:21:21 2017 +0100

    Merge pull request #2809 from mofneko/change-position-variable
    
    Refactor: Change the position of variable.

commit dbc0cf8002b98deb7419db9ebdea1a9d0f7cf051
Merge: 72dcfd1 ed65958
Author: ojw28 <olly@google.com>
Date:   Tue May 23 15:21:04 2017 +0100

    Merge pull request #2820 from sillywab8/support_avclevel52
    
    Add support for AVC Level 5.2

commit 72dcfd19c8c0086874898f00ed7527acc16ab999
Author: eguven <eguven@google.com>
Date:   Tue May 23 03:32:42 2017 -0700

    Automated g4 rollback of changelist 156712385.
    
    *** Reason for rollback ***
    
    This change may silently introduce bugs where both parameters are acceptable in both places. It's decided that the gain isn't worth the risk.
    
    *** Original change description ***
    
    Make the error messages the first parameter in Assertions methods to match JUnit methods
    
    Reverse parameter order creates a slight confusion.
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156844728

commit 88fddb42eca2da65297cfacd1a068aadc47b2614
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue May 23 01:43:24 2017 -0700

    Provide video frame timestamps to subclasses
    
    Expose the stream offset to BaseRenderer subclasses.
    
    Issue: #2267
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156837514

commit e892e3a5c71ac4543f49d6e8b35359ee62a0f523
Author: olly <olly@google.com>
Date:   Mon May 22 13:52:51 2017 -0700

    Fix TTML positioning
    
    Issue: #2824
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156781252

commit 78c4cb74ea3ec0076bb17307b4850dce3b733b56
Author: andrewrice <andrewrice@google.com>
Date:   Mon May 22 08:22:10 2017 -0700

    Fixes incorrectly-ordered arguments to calls to assertEquals
    ([]
    This change has been automatically generated by an Error Prone check that
    detects incorrect argument ordering on calls to assertEquals-style methods. See
    []
    
    Cleanup change automatically generated by javacflume/refactory
    Refactoring: third_party/java_src/error_prone/project/core/src/main/java/com/google/errorprone/bugpatterns/argumentselectiondefects:AssertEqualsArgumentOrderChecker_refactoring
    
    Tested:
        TAP --sample for global presubmit queue
        []
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156739144

commit 1687f1653eadc4eb22177f029d27b5179c2cbf5e
Author: eguven <eguven@google.com>
Date:   Mon May 22 01:40:15 2017 -0700

    Make the error messages the first parameter in Assertions methods to match JUnit methods
    
    Reverse parameter order creates a slight confusion.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156712385

commit 60ebe15c4b35d215f6af524c381e5184d60928f8
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:55:24 2017 -0700

    Update README.md

commit 6fdfdce19c568a18c7915a7b3c228e87a0383f41
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:53:29 2017 -0700

    Update README.md

commit d496621e4b60b4ff763d25174f08044b6f91a580
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:52:19 2017 -0700

    Update README.md

commit 27698496fe8cb319a9c982de3307aaea348898fa
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:51:36 2017 -0700

    Update README.md

commit a6c088050a1987536b673dc1756afb5d28e48f21
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:46:20 2017 -0700

    Update IMA readme

commit 16445356dce967bcb7efabb8d50ac53394eccbc5
Author: ojw28 <olly@google.com>
Date:   Wed May 17 13:37:09 2017 -0700

    Fix broken link

commit cdac347f8f175fb5ac5a9f4250d5462c6a083aed
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 17 08:54:09 2017 -0700

    Open source IMA extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156312761

commit 4359d44331b6269b5516737a387bc41a6b99201d
Author: tonihei <tonihei@google.com>
Date:   Tue May 16 08:39:03 2017 -0700

    Rename CronetEngineFactory to CronetEngineWrapper
    
    In addition, the class now accepts available Cronet instances and returns the
    source of the current CronetEngine.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156185701

commit 1594e71917a37ce2f603cb462403b884023eebfd
Author: tonihei <tonihei@google.com>
Date:   Tue May 16 04:58:14 2017 -0700

    Test for changing repeat mode during playback
    (Related to GitHub Issue #2577)
    
    Added test to ExoPlayerTest which changes the repeat mode during playback.
    Test verifies that ExoPlayer shows the periods in the intended order.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156168166

commit 8e0bf6cd2f26d2b9a2f794fb140b2e9a14ec04f0
Author: olly <olly@google.com>
Date:   Mon May 15 18:11:45 2017 -0700

    Clear the correct buffer in MediaCodecRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156131086

commit 72ba736a7f87c7f5eed8b5d00ddfa69f6574bef3
Author: olly <olly@google.com>
Date:   Mon May 15 18:06:20 2017 -0700

    Clear up BaseRenderer.disable
    
    - Call onDisabled last. onDisabled really shouldn't be doing
      anything with the stream, so pretty sure this is fine (and
      guarantees the stream is cleared properly even if onDisabled
      throws a RTE).
    - Remove super.onDisabled calls from Text/Metadata renderers.
      This is just for consistency; we don't make such calls in
      other direct descendants of BaseRenderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156130640

commit 84875bbe7b380bdd4f797c22d53650321836ce6f
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 15:36:20 2017 -0700

    Constrain DefaultTimeBar maximum positions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156113616

commit b31ec337ed60143248038a79a2c16d35516b76c3
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 11:14:04 2017 -0700

    Enable neon for libvpx on arm64-v8a
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156077889

commit 9a7306a4cc219feb33f24157629b8f8f393ddebb
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 09:15:29 2017 -0700

    Remove unnecessary throws clause
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156061458

commit 929ef172a01d5f253803680af6ed6711b21e4afd
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 15 09:12:05 2017 -0700

    Fix handling of removed periods
    
    If a timeline update removed periods at the end of the timeline which
    had been buffered, handleSourceInfoRefreshed would call
    getNextPeriodIndex and get back -1 for the last period holder in the
    new timeline. Then isLastPeriod(-1) could throw.
    
    Fix this behavior so that the remainder of the timeline is discarded.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156061016

commit f335fb936d223fcbb8822ef6ff3f45b31dd72f53
Author: bachinger <bachinger@google.com>
Date:   Sun May 14 22:26:39 2017 -0700

    Enlarge size of data array of parsable packetArray if ogg packet size exceeds
    the current size.
    
    https://github.com/google/ExoPlayer/issues/2782
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=156018137

commit 3dd2f4af573addd561f80991e72ab3ce6c834d5a
Author: tonihei <tonihei@google.com>
Date:   Thu May 11 02:31:13 2017 -0700

    Tests for timeline repeat mode support.
    
    Checking the expected next/previous window indices and if the correct window
    or period gets returned.
    
    TimelineTest defines mock classes and verification methods used by the specific
    implementation tests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155727385

commit ed65958e5d114a74676ee63e23b74fd2790e8c7b
Author: sillywab8 <sillywab8@gmail.com>
Date:   Fri May 12 08:24:40 2017 -0500

    Add support for AVC Level 5.2

commit 37ffb33183ca407463772184758799727b689988
Author: arakawa_yusuke <mofneko@users.noreply.github.com>
Date:   Thu May 11 21:11:21 2017 +0900

    Refactor: Change the position of variable.

commit 7eadfb1ff019f61f53cfb7d323cd77ba96c20cd6
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 10 19:36:06 2017 -0700

    Fix wrap_content handling in DefaultTimeBar
    
    Issue: #2788
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155705318

commit 8d6f5d86b40a04f49977b669c06f6b84e91d8b5a
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 9 03:20:40 2017 -0700

    Make MODE_SINGLE_PMT the default mode
    
    Even though this is not strictly spec compliant, this will make exoplayer
    behave like it used to before multiple program support. Developers
    who want to take advantage of the multiple program support are probably
    less than the ones who only want their stream to "just work". This is
    particularly useful for streams obtained after a filtering component,
    like a tv tuner.
    
    Issue:#2757
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155486122

commit 70b628526a742a433fdf5d1fccbb9e1995e4297d
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 9 03:14:58 2017 -0700

    Propagate playlist loading error if it prevents playback
    
    This imitates DashMediaSource's behavior.
    
    Issue:#2623
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155485738

commit 51132f58f9e08cd247a9d2f7149c860037cdb590
Author: tasnimsunny <tasnimsunny@google.com>
Date:   Mon May 8 12:46:09 2017 -0700

    Make removal of non-existent cache span a no-op
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155413733

commit 1d6816d94b3eb3238abfaa38c2edda1a1e4d9e0f
Author: olly <olly@google.com>
Date:   Sat Jan 7 11:59:20 2017 +0000

    Avoid process death if OOM occurs on a loading thread
    
    This is most commonly caused by malformed media, where
    the media indicates that something we need to make an
    allocation for is *really huge*. Failing playback is
    appropriate for this case; killing the process is not.
    
    Issue: #2780
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155408062

commit 963b7cbf72104e1fe1d61d8b218f620c4a39f5c1
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 8 00:25:59 2017 -0700

    Fix interpolation for rate/pitch adjustment
    
    Based on https://github.com/waywardgeek/sonic/commit/7b441933.
    
    Issue: #2774
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155349817

commit 2d2fcf1510be02a2315d41dd1a49e01aa0f71db4
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun May 7 08:18:25 2017 -0700

    Use native byte order for SimpleOutputBuffers
    
    The default byte order for ByteBuffers is big endian, but platform decoder
    output buffers use native byte order. AudioProcessors handle native byte order
    input/output.
    
    When using a software audio decoding extension the Sonic audio processor would
    receive big endian input but was outputting to a native byte order buffer,
    which could be little endian. This mismatch caused audio output to be
    distorted.
    
    After this change both platform decoder and extension decoder output buffers
    should be in native byte order.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155320973

commit 65607b2736d3e51c59b66fa1a76712c98576b854
Author: arakawa_yusuke <mofneko@users.noreply.github.com>
Date:   Mon May 8 20:05:10 2017 +0900

    Remove fully-qualified name

commit bcee02cde20f403c6f09960b9d6cb612c3edd5a9
Author: olly <olly@google.com>
Date:   Fri May 5 07:21:48 2017 -0700

    Don't set MAX_INPUT_SIZE to unnecessarily large values
    
    If the codec isn't adaptive, there's no need to accommodate
    the width/height/input-size of streams that don't have the
    same resolution as the current stream. This is because we'll
    always need to instantiate a new codec anyway.
    
    Issue: #2607
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155194458

commit 68b3e0b54d0c34842c7ec35174e431b2d8f0284b
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 5 03:49:22 2017 -0700

    Expose no CC tracks if CLOSED-CAPTIONS=NONE is present
    
    Issue:#2743
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155182859

commit 943141fb076a4aeb7e7c10d4830aef32caa46aca
Author: olly <olly@google.com>
Date:   Thu May 4 11:30:25 2017 -0700

    Some minor cleanup related to track selection and caching
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155103828

commit bf61691c27612dca7de21223473125788bee8532
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu May 4 03:29:10 2017 -0700

    Fix javadocs typos
    
    Issue:#2773
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155062917

commit ed836d31e28867fc81005b4d2dff4891289e5a74
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu May 4 03:24:19 2017 -0700

    Propagate EXT-X-DATERANGE tags with media playlists
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155062718

commit 8bffe5d11ef5bbdbaa892226b4cba4273351967a
Author: olly <olly@google.com>
Date:   Wed May 3 01:32:22 2017 -0700

    Add DummySurface for use with MediaCodec
    
    A DummySurface is useful with MediaCodec on API levels 23+.
    Rather than having to release a MediaCodec instance when the
    app no longer has a real surface to output to, it's possible
    to retain the MediaCodec, using MediaCodec.setOutputSurface
    to target a DummySurface instance instead. When the app has
    a real surface to output to again, it can call swap this
    surface back in instantaneously. Without DummySurface a new
    MediaCodec has to be instantiated at this point, and decoding
    can only start from a key-frame in the media.
    
    A future change may hook this up internally in MediaCodecRenderer
    for supported use cases, although this looks a little awkward. If
    this approach isn't viable, we can require applications wanting
    this to set a DummySurface themselves. This isn't easy to do with
    the way SimpleExoPlayerView.setPlayer works at the moment, however,
    so some changes will be needed either way.
    
    Issue: #677
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154931778

commit 60bf31ff24f492e8c0bbd798b76d3081e270a4ba
Author: falhassen <falhassen@google.com>
Date:   Tue May 2 10:09:55 2017 -0700

    Use Looper.getMainLooper() in Handler constructors in ExoPlayer when needed.
    
    Looper.myLooper(), the default looper, may be null in background threads. This adds a fallback to use the main app looper.
    
    This will allow ExoPlayer instances to be built in background threads in Photos.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154845446

commit e90e2caec4fe94d7fbb706c7da827c9f0ad3a1c7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue May 2 06:38:57 2017 -0700

    Improve DefaultTimeBar color customization
    
    Add attributes for the scrubber handle color and unplayed color. If attributes
    are missing, derive defaults from the played color.
    
    Issue: #2740
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154825736

commit 2e2b0085c1de98acfe054b3797de298a767566b1
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Apr 27 07:49:14 2017 -0700

    Prevent text tracks with no language being selected by default
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154421706

commit dc80be0ca1c8c87ea4522f9efbb55dd346c836bd
Author: Andrew Orobator <orobator.andrew@gmail.com>
Date:   Wed May 3 10:49:36 2017 -0400

    Improved Documentation
    
    Added missing coma and fixed typo for EventListener#onTimelineChanged

commit 785fc761243720598b0b995bfda0dbbd5e361326
Author: ojw28 <olly@google.com>
Date:   Wed May 10 22:17:39 2017 -0700

    Delete gcore_versions.bzl

commit 17cee63544d3f8cbbb8ddf9b1773a49a3ef9b6d5
Merge: 4963061 86ac913
Author: ojw28 <olly@google.com>
Date:   Wed May 10 21:59:05 2017 -0700

    Merge pull request #2794 from mofneko/fix-unused-variable
    
    Fix unused variable

commit 496306192340f39c67f6e9095cd2d0015794d2f5
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 10 19:36:06 2017 -0700

    Fix wrap_content handling in DefaultTimeBar
    
    Issue: #2788
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155705318

commit c0d16ea2cb523d28477385ef6d6b619c21f77d1e
Author: tonihei <tonihei@google.com>
Date:   Wed May 10 09:18:01 2017 -0700

    Possible NullPointerException in ExoPlayerImplInternal.setRepeatModeInternal
    
    When readingPeriodHolder and playingPeriodHolder are both null, a
    NullPointerException is thrown when trying to reassign readingPeriodHolder.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155635846

commit a6220b8be36410e971086b3204118816fd37463f
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 10 07:30:52 2017 -0700

    Handle control layouts with no repeat button
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155625893

commit 02c51ee01cf7d82983f89053f441543468e9a737
Author: tonihei <tonihei@google.com>
Date:   Wed May 10 00:52:33 2017 -0700

    Update period holders in ExoPlayerImplInternal when repeat mode changes.
    (Relating to GitHub issue #2577)
    
    Changing the repeat mode during playback may require to discard or rebuffer
    certain periods because the requested order of playback changed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155600910

commit 8a210becefce8eaa5c101a6e075ace13b990370e
Author: tonihei <tonihei@google.com>
Date:   Tue May 9 08:53:29 2017 -0700

    Add repeat mode support to Timeline implementations.
    (Relating to GitHub Issue #2577)
    
    The Timeline base class provides the default implementation.
    
    Timeline wrappers (e.g. ClippingTimeline, ConcatatedTimeline) forward all
    requests to the respective inner timelines. Some like ConcatenatedTimeline add
    their own additional logic to bridge between the child timelines.
    
    In addition, ConcatenatedTimeline and LoopingTimeline now have a common
    abstract base class as they share most of their code.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155509269

commit 4abf64b7eff12685e282a98e7d805f8ef69185ac
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 9 03:20:40 2017 -0700

    Make MODE_SINGLE_PMT the default mode
    
    Even though this is not strictly spec compliant, this will make exoplayer
    behave like it used to before multiple program support. Developers
    who want to take advantage of the multiple program support are probably
    less than the ones who only want their stream to "just work". This is
    particularly useful for streams obtained after a filtering component,
    like a tv tuner.
    
    Issue:#2757
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155486122

commit 002dd72e702929a33d8940cfbaa758459e0067c6
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 9 03:14:58 2017 -0700

    Propagate playlist loading error if it prevents playback
    
    This imitates DashMediaSource's behavior.
    
    Issue:#2623
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155485738

commit 1f43fb19985964566c0613205e39dbc0f4d5bb6d
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 9 02:20:43 2017 -0700

    Introduce CryptoData parameter object
    
    This will allow supporting more encryption schemes. Including some
    that require more encryption data, like the encryption pattern.
    
    Issue:#1661
    Issue:#1989
    Issue:#2089
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155481889

commit 86ac913df61b6fc79d8ed5a905c775ed10c832ff
Author: arakawa_yusuke <mofneko@users.noreply.github.com>
Date:   Tue May 9 21:20:57 2017 +0900

    Fix unused variable

commit 0302fd6b4d5516c6a6ce67075ede7a880d859e92
Merge: f302d52 69db9a7
Author: ojw28 <olly@google.com>
Date:   Mon May 8 23:14:14 2017 +0100

    Merge pull request #2765 from AOrobator/dev-v2
    
    Dev v2

commit f302d528f884b28fa9efb83684bdaee6f7cde598
Merge: b299718 4f9cf44
Author: ojw28 <olly@google.com>
Date:   Mon May 8 23:14:03 2017 +0100

    Merge pull request #2787 from mofneko/remove-fully-qualified-name
    
    Remove fully-qualified name

commit b2997180362d9a1cec5647259eaa7cdca844cb72
Author: tasnimsunny <tasnimsunny@google.com>
Date:   Mon May 8 12:46:09 2017 -0700

    Make removal of non-existent cache span a no-op
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155413733

commit 812068a2087c2d5c1b7b84b39881aadd4a33555a
Author: olly <olly@google.com>
Date:   Sat Jan 7 11:59:20 2017 +0000

    Avoid process death if OOM occurs on a loading thread
    
    This is most commonly caused by malformed media, where
    the media indicates that something we need to make an
    allocation for is *really huge*. Failing playback is
    appropriate for this case; killing the process is not.
    
    Issue: #2780
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155408062

commit c70cd37c5a28e6b7fa2e9b87c032ff5a2b501ee4
Author: tonihei <tonihei@google.com>
Date:   Mon May 8 09:19:56 2017 -0700

    Repeat mode UI
    
    Added repeat mode toggle buttons to UI. Current mode gets forwarded to
    Exoplayer instance, but without playback behaviour changes yet.
    Translations for button descriptions are also missing - this will be another CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155386549

commit df0d1b0f8a815a4a890690d714aee07952000a26
Author: tonihei <tonihei@google.com>
Date:   Mon May 8 09:19:27 2017 -0700

    Removed superfluous dots in russian translation of repeat modes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155386511

commit 631cce9171f37f98a71caa6921f5d589af4bbf4f
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 8 00:25:59 2017 -0700

    Fix interpolation for rate/pitch adjustment
    
    Based on https://github.com/waywardgeek/sonic/commit/7b441933.
    
    Issue: #2774
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155349817

commit 4b5c521a3354eb573087a14f0da927b2aed44bef
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun May 7 08:18:25 2017 -0700

    Use native byte order for SimpleOutputBuffers
    
    The default byte order for ByteBuffers is big endian, but platform decoder
    output buffers use native byte order. AudioProcessors handle native byte order
    input/output.
    
    When using a software audio decoding extension the Sonic audio processor would
    receive big endian input but was outputting to a native byte order buffer,
    which could be little endian. This mismatch caused audio output to be
    distorted.
    
    After this change both platform decoder and extension decoder output buffers
    should be in native byte order.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155320973

commit 4f9cf44986b0dd381f43cc1bfa1f84e6a62fdbc6
Author: arakawa_yusuke <mofneko@users.noreply.github.com>
Date:   Mon May 8 20:05:10 2017 +0900

    Remove fully-qualified name

commit 7f66725953da42e78997838556a6ad1cdb95a046
Author: olly <olly@google.com>
Date:   Fri May 5 07:21:48 2017 -0700

    Don't set MAX_INPUT_SIZE to unnecessarily large values
    
    If the codec isn't adaptive, there's no need to accommodate
    the width/height/input-size of streams that don't have the
    same resolution as the current stream. This is because we'll
    always need to instantiate a new codec anyway.
    
    Issue: #2607
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155194458

commit 5d459c8103a00735260a2f849c00f98a1d6e865d
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 5 03:49:22 2017 -0700

    Expose no CC tracks if CLOSED-CAPTIONS=NONE is present
    
    Issue:#2743
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155182859

commit 4c39627ed16b0047b644eee3c9725785f86c080a
Author: olly <olly@google.com>
Date:   Thu May 4 11:30:25 2017 -0700

    Some minor cleanup related to track selection and caching
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155103828

commit ba9cbfbb910c0a241da82bc18d940345ddcd8269
Author: tonihei <tonihei@google.com>
Date:   Thu May 4 07:51:14 2017 -0700

    Localized strings for repeat modes.
    
    Related to GitHub Issue #2577.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155078753

commit 4d1826dd3d079338495a2e5d178c244580c7ad42
Author: tonihei <tonihei@google.com>
Date:   Thu May 4 06:11:12 2017 -0700

    Add repeat mode mechanics to Exoplayer.
    (Relating to GitHub Issue #2577)
    
    All getter, setter and callbacks have been added and value of repeatMode is
    passed to getNextXXXIndex methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155071985

commit 3a5548d72aa7fa889ca6559fdb09070faf86e086
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu May 4 03:29:10 2017 -0700

    Fix javadocs typos
    
    Issue:#2773
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155062917

commit b408750aa9daed185be188d9e671103897c34ff2
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu May 4 03:24:19 2017 -0700

    Propagate EXT-X-DATERANGE tags with media playlists
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=155062718

commit 7773831d88b910d323fa675dd3fb9aad98e3abfe
Author: olly <olly@google.com>
Date:   Wed May 3 01:32:22 2017 -0700

    Add DummySurface for use with MediaCodec
    
    A DummySurface is useful with MediaCodec on API levels 23+.
    Rather than having to release a MediaCodec instance when the
    app no longer has a real surface to output to, it's possible
    to retain the MediaCodec, using MediaCodec.setOutputSurface
    to target a DummySurface instance instead. When the app has
    a real surface to output to again, it can call swap this
    surface back in instantaneously. Without DummySurface a new
    MediaCodec has to be instantiated at this point, and decoding
    can only start from a key-frame in the media.
    
    A future change may hook this up internally in MediaCodecRenderer
    for supported use cases, although this looks a little awkward. If
    this approach isn't viable, we can require applications wanting
    this to set a DummySurface themselves. This isn't easy to do with
    the way SimpleExoPlayerView.setPlayer works at the moment, however,
    so some changes will be needed either way.
    
    Issue: #677
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154931778

commit 6d01460b588afdc71294f2824477312e271ef93b
Author: falhassen <falhassen@google.com>
Date:   Tue May 2 10:09:55 2017 -0700

    Use Looper.getMainLooper() in Handler constructors in ExoPlayer when needed.
    
    Looper.myLooper(), the default looper, may be null in background threads. This adds a fallback to use the main app looper.
    
    This will allow ExoPlayer instances to be built in background threads in Photos.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154845446

commit c3158d3e682041f21cf0474dfdba6545f29be1ea
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue May 2 06:38:57 2017 -0700

    Improve DefaultTimeBar color customization
    
    Add attributes for the scrubber handle color and unplayed color. If attributes
    are missing, derive defaults from the played color.
    
    Issue: #2740
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154825736

commit d33a6b49f0ee3a36b9236bc76bc765fe0b7fd670
Author: tonihei <tonihei@google.com>
Date:   Tue May 2 05:15:56 2017 -0700

    User-defined fallback if Cronet is not available
    
    When using the CronetEngine.Builder class, it automatically selects the
    Cronet version preferring higher version codes and falling back to a Java
    Http implementation if no native or GMSCore version is available.
    
    This version selection has now been moved into the CronetEngineFactory
    class to always prefer GMSCore over natively bundled versions. We also
    ignore the Cronet internal Java implementation. Instead, users of
    CronetDataSourceFactory can provide their own fallback factory. If none is
    provided, we use DefaultHttpDataSourceFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154821040

commit ab30d715c7b61d63ee664a48a03ca7a7a67ffa64
Author: tonihei <tonihei@google.com>
Date:   Tue May 2 04:09:00 2017 -0700

    Infinite loops using new Timeline features
    
    Using the new getNextWindowIndex method of Timeline, LoopingMediaSource now
    uses a InfinitelyLoopingTimeline which does not unroll the windows to
    157 million iterations but just starts from the beginning. If an explicit
    number of iterations is given, we still unroll.
    
    This change also allows multi-window timebars to show infinitely looping
    playlists correctly.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154817554

commit 94ffbb2b6ac2f210b6fd59086cb42364476c7aad
Author: tonihei <tonihei@google.com>
Date:   Tue May 2 02:34:59 2017 -0700

    Support for Cronet from GMSCore (Blaze only)
    
    The blaze BUILD file for the Cronet extension now has three options:
    Using native bundled Cronet libs, using GMSCore, or using whichever is newer.
    The GMSCore version is preselected (as it is the smallest), but other variants
    may be used by uncommenting the respective lines.
    
    The API is the same for all cases and the CronetEngine.Builder automatically
    selects the newest option or falls back to default http.
    
    To avoid that apps using this extension need to add a dependency to Cronet
    themselves, I added a CronetEngineFactory to the Exoplayer extension.
    
    Gradle builds can't be supported (as far as I can see), as the GMSCore Cronet
    version is first party only.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154812029

commit 6d2fa12e163034fd8cc5321313760ae657cd8128
Author: tonihei <tonihei@google.com>
Date:   Fri Apr 28 02:11:03 2017 -0700

    Add getNextWindowIndex to Timeline
    (Preparation for Repeat Toggle Function - GitHub Issue #2577)
    
    In addition, Timeline now also got a getPreviousWindowIndex and a
    getNextPeriodIndex method with default implementations.
    
    Changed ExoPlayerImplInternal and PlaybackControlView to use these
    methods at all occurances of period and window index operations.
    
    Note: Does not include repeat mode yet and no timelines are actually
    using it so far. Please wait for the next CLs for this.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154520664

commit 5c723f4d3da3162cea11b9fc49aea004a3d2c87e
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Apr 27 07:49:14 2017 -0700

    Prevent text tracks with no language being selected by default
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154421706

commit 69db9a78e26977a41a0fb46b97c680ec0244dc9e
Merge: 7761cdc c4fff54
Author: Andrew Orobator <orobator.andrew@gmail.com>
Date:   Wed May 3 10:50:07 2017 -0400

    Merge pull request #2 from AOrobator/AOrobator-patch-1
    
    Improved Documentation

commit c4fff54d2ca0ce69ce9c7b63ae5082fa16091c4f
Author: Andrew Orobator <orobator.andrew@gmail.com>
Date:   Wed May 3 10:49:36 2017 -0400

    Improved Documentation
    
    Added missing coma and fixed typo for EventListener#onTimelineChanged

commit 4343ce6058371d21527cc5aeee7015b67ef9ec09
Author: Yu-Hsuan Lin <yuhsuan.lin@livehouse.in>
Date:   Sun Apr 30 08:58:55 2017 +0800

    Rtmp extension

commit d979469659861f7fe1d39d153b90bdff1ab479cc
Merge: 6577013 b4fb8c3
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 26 16:23:48 2017 +0100

    Merge branch 'dev-v2' into release-v2

commit b4fb8c3c4302a47e23e5b2bf61f331fcaacb3261
Merge: 7761cdc 6577013
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 26 16:23:31 2017 +0100

    Merge branch 'release-v2' into dev-v2

commit 7761cdcd1ef0d7c9dd9cbe2231247b5d1ab6f9f7
Author: olly <olly@google.com>
Date:   Wed Apr 26 08:12:33 2017 -0700

    Fill in release note TODOs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154298148

commit 1e12c0795476488b4065c50486d16fc1e022da25
Author: olly <olly@google.com>
Date:   Wed Apr 26 07:44:33 2017 -0700

    Move renderer building into a factory class.
    
    To inject custom renderers into SimpleExoPlayer, developers
    currently need to extend SimpleExoPlayer and override the
    renderer building methods. This is in contrast to the rest
    of the library, where we use proper injection. This change
    restores consistency. I think it's fine to make
    SimpleExoPlayer final again, but if we find people extending
    it for non-renderer purposes, we can revert that part of the
    change.
    
    ExoPlayerFactory now has analogous methods for the simple
    and non-simple cases, which is a nice outcome.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154295726

commit 0f9d9d56d6b4e2b1c5a8f3e83a7a843b14035034
Author: tonihei <tonihei@google.com>
Date:   Wed Apr 26 01:24:30 2017 -0700

    Fix scrub seek position estimation for multi window time bar.
    
    When using a multi window time bar, the onScrubStop method uses another
    method to estimate the seek position than the updateProgress method for
    rendering the time bar. If the time line contains windows starting with an
    ad period followed by other content, they differ in their behaviour.
     - updateProgress checks all periods and leaves out all ad periods
     - onScrubStop only checks windows and leaves them out when the first
       period is an ad.
    
    Changed onScrubStop to fit approach in updateProgess.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154271628

commit f9c374235492389142ed2b59ad3cf444b1905afb
Author: vigneshv <vigneshv@google.com>
Date:   Wed Apr 26 01:22:55 2017 -0700

    vp9_extension: Include cstring explicitly
    
    Without this, newer android NDKs (r14+) fail to compile.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154271517

commit 9c2b0f6de2c444418ab8412fc575e83119d0cb93
Author: olly <olly@google.com>
Date:   Tue Apr 25 11:50:34 2017 -0700

    Fix lint errors when building release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154201059

commit b88deaa1ca7b853cc20b0ca676f5d5b244680654
Author: olly <olly@google.com>
Date:   Tue Apr 25 11:30:37 2017 -0700

    Bump version and update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154198359

commit 9d76ab71336ed3bf68c73f6be4fd79d0976f7a54
Author: vigneshv <vigneshv@google.com>
Date:   Tue Apr 25 09:06:28 2017 -0700

    vp9_extension: Update libyuv build configuration
    
    Disable libjpeg dependency when building libyuv.
    
    Partially fixes Github Issue #2661
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154179126

commit c50cfd8345829a1ab942e2b76c514c3885dbc4cd
Author: Oliver Woodman <olly@google.com>
Date:   Tue Apr 25 16:41:04 2017 +0100

    Minor additional cleanup of multiple DVB subtitles per PID support

commit f903098721739df4c7439cd95d4731a5694ac324
Merge: 51de6e5 fb88087
Author: Oliver Woodman <olly@google.com>
Date:   Tue Apr 25 16:38:06 2017 +0100

    Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2

commit fb88087ac4f6f58636c3fc90a94cd91bbdcb8f9a
Author: olly <olly@google.com>
Date:   Tue Apr 25 07:42:03 2017 -0700

    Tweak video renderer surface swaps
    
    Fixes the following issues:
    
    1. When a surface is set, it's expected that the renderer will
    notify video size + when a frame is rendered to it. This is true
    even if the surface isn't changing. Right now this is achieved
    by setting renderedFirstFrame to false, but this is problematic
    in the case that the surface isn't changing because (a) it will
    force rendering of a subsequent frame to the output even when
    paused, which is incorrect, and (b) isReady will return false
    until this occurs.
    
    2. When the surface really is changing, isReady can return false
    until the first frame has been rendered into the new surface, which
    will break seamless surface switching. This change allows isReady
    to return true up to allowedJoiningTimeMs for this case.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154171111

commit e07b8fe7d5b241268bf7d428ff4e0ab348359000
Author: anjalibh <anjalibh@google.com>
Date:   Mon Apr 24 14:33:15 2017 -0700

    Parse ColorInfo from WebM Container and set it on MediaFormat.
    
    * colorSpace, colorRange and colorTransfer are relevant to all videos.
    * The rest of the fields are relevant only to HDR videos.
    * Tested on a prototype device that decodes VP9 profile 2, 10 bit.
    * The Webm spec spells color as 'colour' so the webm id reference use the same spelling.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154098189

commit d3fe20cc64873472ef9c00e186d16a5884d9e453
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 24 12:02:36 2017 -0700

    Check the type of the (non-initial) loaded HLS playlist
    
    This prevents illegal casts.
    
    Issue:#2702
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154078240

commit f0a72c4908c5c8e901f0a628132fea5b992ee3be
Author: olly <olly@google.com>
Date:   Mon Apr 24 11:53:50 2017 -0700

    Fix playback of DASH/VP9/SegmentList DASH content
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154077149

commit 8e8a6a2994296bbe0f36ec040669698cebf4d216
Author: olly <olly@google.com>
Date:   Mon Apr 24 06:51:42 2017 -0700

    Support efficient switching between SimpleExoPlayerView instances
    
    Prior to this change, the only way to switch SimpleExoPlayerView
    was to do:
    
    oldView.setPlayer(null);
    newView.setPlayer(player);
    
    This would cause the video renderer to have to transition through
    oldSurface->noSurface->newSurface, which is inefficient (noSurface
    requires platform decoders to be fully released).
    
    After this change we support:
    
    newView.setPlayer(player);
    oldView.setPlayer(null);
    
    This results in direct oldSurface->newSurface transitions, which are
    seamless on Android M and above. The change also adds some robustness
    against developers ending up with strange behavior as a result of
    clearing the player from a view in a different ordering than we expect
    w.r.t. registering of other listeners.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154044976

commit 4c0b53905402e9c9b9826033b8f58e531c38225d
Author: olly <olly@google.com>
Date:   Mon Apr 24 04:35:25 2017 -0700

    Allow disabling hide on touch for SimpleExoPlayerView
    
    Issue: #2501
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=154036726

commit e1c82fbb1a907809d04ae5ab405d0bd4185beb48
Author: tasnimsunny <tasnimsunny@google.com>
Date:   Fri Apr 21 12:42:07 2017 -0700

    Libvpx: configure a way in Medialib to drop frames instead of video lag.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153858804

commit 51de6e53ebf7188bd6e469165986283f6ef75b3d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 24 16:03:19 2017 +0100

    Clean up multiple DVB subtitles per PID support

commit 68ff7e0f6f179c589fa305d0904d7edcc3b6a455
Merge: 860eb26 aa43556
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 24 15:31:38 2017 +0100

    Merge branch 'tresvecesseis-dev-v2-dvbsubs-leftovers' into dev-v2

commit aa43556b796ee7d04c12990291d34950aa275266
Merge: 860eb26 3b7f475
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 24 15:31:19 2017 +0100

    Merge branch 'dev-v2-dvbsubs-leftovers' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev-v2-dvbsubs-leftovers

commit 860eb26301ca5aea47f8a34a2394dc304fbf8096
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 21 18:04:55 2017 +0100

    Misc cleanup for merged pull requests

commit 5381b4ec56b4105b750f73a15e4b87163f72f555
Merge: 4c09650 329b891
Author: ojw28 <olly@google.com>
Date:   Fri Apr 21 17:57:18 2017 +0100

    Merge pull request #2683 from tylerjroach/dev-v2
    
    Added mp3 support to FLV extractor

commit 4c096505d38b98a11d94c8df59b8191ac5ffa6a2
Merge: 2e25eec 3b4d981
Author: ojw28 <olly@google.com>
Date:   Fri Apr 21 17:56:49 2017 +0100

    Merge pull request #2688 from tylerjroach/dev-v2-NALU-OOM-Fix
    
    Fix potential OOM that can occur reading first NAL packet before seq header

commit 2e25eecf8414fbb9aebac7f2e7997735d851432f
Merge: d8666ac d27d642
Author: ojw28 <olly@google.com>
Date:   Fri Apr 21 17:56:08 2017 +0100

    Merge pull request #2708 from gpinigin/ffmpeg-host-platform
    
    Simplify cross-compiling on Mac OS X host machine by copy-paste commands

commit d8666ac03d99e22498434dec14c848b1765bfca4
Merge: 86ed73e 41f4f24
Author: ojw28 <olly@google.com>
Date:   Fri Apr 21 17:55:56 2017 +0100

    Merge pull request #2715 from canatella/out-of-tree-build
    
    Allow out of tree builds.

commit 86ed73e74416f5609f27347c55e7fa61d4fde386
Author: olly <olly@google.com>
Date:   Fri Apr 21 08:34:16 2017 -0700

    Use method arguments instead of member variables
    
    This is a no-op cleanup change.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153830409

commit 1506b6d2b72ae51fd0215e5acddb42e2466266ef
Author: olly <olly@google.com>
Date:   Fri Apr 21 07:57:37 2017 -0700

    Pragmatic fix for Concat(source1, Looping(source2))
    
    Issue: #2680
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153827243

commit 3280dc8777287e851c7b56dc541a64ef8a9c522a
Author: cblay <cblay@google.com>
Date:   Thu Apr 20 15:07:53 2017 -0700

    Make SonicAudioProcessor public
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153762476

commit 41f4f24f539b8c647e7b8bb1f48bbad5383ef47a
Author: Damien Merenne <dam@cosinux.org>
Date:   Fri Apr 21 11:32:00 2017 +0200

    Allow out of tree builds.
    
    Before modularisation of the code, it was possible to do an out of tree build
    giving an -PbuildDir=someDir argument to gradle. With the modularisation, it's
    broken as using -PbuildDir=someDir will force the same directory for each
    projects, which breaks the gradle build system.
    
    This commit adds a new externalBuildDir project property to allow out of tree
    builds again. When set, it updates the buildDir property for each project to
    point to ${externalBuildDir}/${project.name}. That way, the build artifacts are
    written in the out of tree directory in a project specific folder.
    
    To do an out of tree build, use
    
        gradle -PexternalBuildDir=someDir ...
    
    It supports absolute and relative path. Relative path are interpreted against
    the ExoPlayer root directory.

commit 3b7f47551c72a690e83e19042c7fa2002fd4390d
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Thu Apr 20 21:32:59 2017 +0200

    Add support for multiple subtitle tracks per PID and subtitle type identification

commit da1b55ed4c2621f8a4ec49cf35a0a9f435188a70
Author: tonihei <tonihei@google.com>
Date:   Tue Apr 18 09:28:03 2017 -0700

    NullPointerException in CronetDataSource constructor
    
    When calling CronetDataSourceFactory.createDataSourceInteral, a null pointer
    is passed as clock to the CronetDataSource constructor which in turn throws a
    NullPointerException. Can be prevented by using other constructor without
    clock parameter.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153470874

commit ecb62cccd50d891338253faf768d400df0ecfa66
Author: olly <olly@google.com>
Date:   Tue Apr 18 07:43:56 2017 -0700

    Delete broken PriorityHandlerThread class
    
    This class is unnecessary; you can simply pass a thread
    priority to HandlerThread's own constructor. It's also
    broken, since HandlerThread.run() immediately overrides
    the priority being set!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153461225

commit 3c49044fb43060b28afe3da3d89544cabd28750a
Author: olly <olly@google.com>
Date:   Tue Apr 18 06:12:08 2017 -0700

    Updates for ExoPlayer modularization
    
    - Update relevant documentation
    - Use individual modules for the demo app. Given it's
      preferable to use them over the full library, and that
      many people probably use the demo app as a starting
      point, we should set the right example even though we
      currently need to include all of them.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153454898

commit 8be85d4d2fa1e35281abf7bce2108719b3d72d21
Author: olly <olly@google.com>
Date:   Tue Apr 18 05:56:43 2017 -0700

    Consolidate version codes in root gradle file
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153453768

commit 42e4100c0511b8dbd405f143e0d8aca84e2ea50b
Author: eguven <eguven@google.com>
Date:   Tue Apr 18 03:46:46 2017 -0700

    Add DashDownloaderService which downloads DASH streams at the background
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153446615

commit e87e2318d8cad794b0342a8e80217c9b3047ddf7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 18 03:22:42 2017 -0700

    Fully reset AudioProcessors on releasing AudioTrack
    
    Issue: #2675
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153445372

commit 835839456ff7792afb6d7a768914696993eecf80
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Apr 13 10:53:02 2017 -0700

    Apply playback parameters when uninitialized
    
    If AudioTrack.setPlaybackParameters was called before initialization (for
    example, when an audio renderer is enabled) the parameters would actually be
    dropped, because configure calls reset, which didn't apply draining playback
    parameters if the track was not initialized. It would then overwrite the
    draining parameters with the current parameters.
    
    Set the playback parameters directly (without draining) for uninitialized tracks
    so that the call to setPlaybackParameters in configure is a no-op.
    
    Also, reset the stored channel count and sample rate when the audio processor
    is released so that configure returns true when it is next used, which makes
    sure that it gets flushed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153078759

commit 579d57b445400a6c32d2db31f2b315c494f10769
Author: tonihei <tonihei@google.com>
Date:   Thu Apr 13 08:01:20 2017 -0700

    Less memory allocations for repeated calls to SubtitleView.draw()
    
    The draw method checks if all inputs are the same as in the previous call.
    The options to strip the subtitle of its styles were applied each time,
    in order to check if the final CharSequence is still the same.
    
    This additional computation (and memory allocations) can be prevented by
    checking if the original CharSequence (including all styles) and the
    flags to remove those styles are the same. The actual style removal is now
    part of setupTextlayout().
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=153061064

commit 12433ad146693b3d0816a1f9bd88437196bb0c73
Author: olly <olly@google.com>
Date:   Wed Apr 12 08:06:31 2017 -0700

    Support intercepting setPlayWhenReady calls
    
    Issue: #2454
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152938743

commit 0a7011b3904abb2cb8d4d8834d1086da45b8d687
Author: tonihei <tonihei@google.com>
Date:   Wed Apr 12 06:11:27 2017 -0700

    Support default style in Tx3g decoder.
    
    The track initialization data of Tx3g includes default style values for
    font styles, colour, and font family. Additionally the decoder now supports
    vertical subtitle placements other than the Tx3g default of 85% video height.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152930057

commit 1a22a4be5f9f77f0eb8bdc40f5ffb9da23ad1b63
Author: sxp <sxp@google.com>
Date:   Tue Apr 11 16:37:18 2017 -0700

    Automated g4 rollback of changelist 152815185.
    
    *** Reason for rollback ***
    
    The force submit broke GVR: []
    
    *** Original change description ***
    
    Add DashDownloaderService which downloads DASH streams at the background
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152877808

commit 5a6a1af4412c3c48ac05a5498a2b1b53a29b1e0c
Author: eguven <eguven@google.com>
Date:   Tue Apr 11 08:30:22 2017 -0700

    Add DashDownloaderService which downloads DASH streams at the background
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152815185

commit 85adecf948a7c30c149e2cf0de8267c30c73f8d4
Author: olly <olly@google.com>
Date:   Tue Apr 11 07:36:03 2017 -0700

    Remove reflection + make it easy to set extractor flags
    
    The idea of using reflection was so that a developer could
    delete a package they didn't want and have everything else
    still compile. However, a developer doing this is likely
    building from source, in which case editing the factories
    too is pretty trivial.
    
    Removing the reflection makes specifying extractor flags
    via the default factory easy, and removes the need for
    special proguard config.
    
    Issue: #2657
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152810423

commit 1dc8bb5bb17f1a627546eb7e8b4af8fb0cf31697
Author: tonihei <tonihei@google.com>
Date:   Tue Apr 11 03:35:33 2017 -0700

    Support 'styl' in Tx3g decoder.
    
    Extended Tx3gDecoder to read additional information after subtitle text.
    Currently parses font face, font size, and foreground colour.
    
    Font identifier and other information provided in subtitle sample description
    not yet supported.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152793774

commit 3b4d981891ca23b16a9d46666ef1b84256456d4a
Author: Tyler Roach <tylerjroach@gmail.com>
Date:   Tue Apr 18 09:32:40 2017 -0400

    If hasOutputFormat is true, nalUnitLengthFieldLengthDiff will never be 0

commit 329b8910cac6684ea4f67327fe434b182bff5e30
Author: Rohit Krishnan <rohitkrishnan101@gmail.com>
Date:   Mon Apr 17 22:07:33 2017 -0400

    Remove unnecessary check. sampleRateIndex is masked with 0x03 so it is constrained to be between 0 and 3.

commit 896f63a3c38f92b34c0df0fb6eb9379eb83580e8
Author: Rohit Krishnan <rohitkrishnan101@gmail.com>
Date:   Fri Apr 14 12:11:04 2017 -0400

    Fixes OOM that can occur from reading first NAL packet before sequence header

commit d27d6426c472ad296a45b5217024ab8f48833cc7
Author: Gleb Pinigin <gpinigin@gmail.com>
Date:   Fri Apr 14 14:23:23 2017 +0700

    Simplify cross-compiling on Mac OS X host machine by copy-paste commands

commit 59c44af4cb391a7bfd223f36b357cf74274fbd9d
Author: Tyler Roach <tylerjroach@gmail.com>
Date:   Thu Apr 13 14:56:22 2017 -0400

    Added mp3 support to FLV extractor

commit f36500c20079dd965e4946ada18d936233ef0857
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 10 11:06:32 2017 -0700

    Add support for audio adaptation
    
    When no video tracks or renderers are present, attempt audio adaptation.
    
    Issue:#1975
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152708422

commit 2a4df60b0167a9a4ea42afeaaf123dc7903600ea
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 10 11:06:06 2017 -0700

    Add pattern information to ExoPlayer's CryptoInfo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152708351

commit 0aee235e0aa2a9733ec22b77085961751bdc3b30
Author: olly <olly@google.com>
Date:   Mon Apr 10 09:41:54 2017 -0700

    Make ID3 parser more robust (again)
    
    I've also removed unnecessary "empty" cases, since to add them
    everywhere would bloat the code quite a lot. Note that
    new String(new byte[0], 0, 0, encoding) is valid and will produce
    and empty string.
    
    Issue: #2663
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152697288

commit c185963355d619b33579748f4bfed65b7dbeec87
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 10 05:05:22 2017 -0700

    Add IntDef to reader internal state and default branch
    
    Adding the default branch prevents linting warnings.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152675789

commit 8da2e2c8d535db53a527fc8d6e16f6c51b684aee
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 10 04:13:12 2017 -0700

    Track format changes in (E-)AC-3 syncframes
    
    This allows propagating format changes to the track output.
    
    Issue:#2552
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152672983

commit 147020f81610bb59088be5970ba44424aab92f45
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 10 02:17:35 2017 -0700

    Hide player controls when an ad is playing
    
    Also fix an issue where ad timelines with unknown ad period durations
    would not be shown in multi-window mode. (The time bar doesn't use the
    duration of ad periods, but shows a fix-size indicator instead.)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152666055

commit d8c71df255352b45c4a0354b0830f3d75ac890cc
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Apr 7 07:05:27 2017 -0700

    On re-preparation, suppress source info refresh until ack'ed
    
    ExoPlayerImpl.prepare() replaces the timeline with an empty timeline. After this
    happens, MSG_SOURCE_INFO_REFRESHED could be handled on the main thread and
    could relate to the old source, so the player could expose a stale timeline.
    
    Count pending prepares in ExoPlayerImpl so that source info refreshes can be
    suppressed until preparation actually completes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152496255

commit cf4358b8fa6f843997ba67ad2a40741a66b21bd6
Author: olly <olly@google.com>
Date:   Fri Apr 7 06:38:09 2017 -0700

    Fix VP9 extension surface attach/detach + make it seamless
    
    Issue: #2582
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152494408

commit 4b948774767305499fcc4a95e213e02752de1149
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Apr 7 06:00:16 2017 -0700

    Fix DefaultTimeBar vertical positioning in the demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152492104

commit ac0a4353dacd5deff660dbba10c0a63e354fe29b
Author: tonihei <tonihei@google.com>
Date:   Fri Apr 7 03:38:00 2017 -0700

    SubtitleView - New method setApplyEmbeddedFontSizes
    
    When option is set to false, SubtitlePainter strips all absolute
    and relative font size spans from the cue text.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152484724

commit 156bc52c8f73154bd847c352acb9227324ff7301
Author: Oliver Woodman <olly@google.com>
Date:   Thu Apr 6 19:05:59 2017 +0100

    Clean up DVB support
    
    - Removed the PES_STRIPPED flag. It's unnecessary. We can strip
      PES in the TS extractor instead.
    - Made nearly all of the object classes in DvbParser immutable.
      Else it's non-obvious that none of this state can be mutated.
    - Made a a lot of the methods in DvbParser static for the same
      reason.
    - Removed unnecessary null checks, code that was never executed,
      unused fields etc.
    - Add proper flushing of DvbParser, to prevent corrupt output
      following a seek.

commit 8c05b5b168e46000d235074f0865943e4e5ecada
Merge: 6caa3e7 538e71c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Apr 6 19:03:06 2017 +0100

    Merge branch 'tresvecesseis-dev-v2-dvbsubs' into dev-v2

commit 538e71c0902c22e199f9dc7eec965d7f08c9fcdf
Merge: 6caa3e7 38779de
Author: Oliver Woodman <olly@google.com>
Date:   Thu Apr 6 19:02:51 2017 +0100

    Merge branch 'dev-v2-dvbsubs' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev-v2-dvbsubs

commit 6caa3e795f527328ef873c344399241c861f0cfb
Author: tonihei <tonihei@google.com>
Date:   Wed Apr 5 04:29:26 2017 -0700

    Demo app repeatedly shows "audio/video not playable" toast
    
    Solved by adding saving reference to previous TrackGroup. Toast only displayed
    after TrackGroup changed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152242954

commit 9bbc6d107188e4cb4b425933296d2e5a866fc71e
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 4 09:34:45 2017 -0700

    Clean up FFmpeg extension instructions.
    
    Also add instructions for building arm64-v8a and x86.
    
    Issue: #2561
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152141270

commit 8208a75f0a840f2b666ed2c8f1d4029d582d0d4f
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 4 03:53:03 2017 -0700

    Improve multi-window playback controls behavior.
    
    Only enable multi-window mode when the duration of every period in the timeline
    is known. Also, remove the warning logged when there are too many windows as it
    doesn't add much.
    
    The player's current period index was not masked while there were
    unacknowledged seeks. This led to the displayed position jumping, between when
    seekTo was called (after which the position would be masked but not the period
    index) and the seek being acknowledged (at which point the time bar's position
    would jump back to the seek position, due to the period index being resolved).
    Mask the period index, like the window index, to fix this behavior.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152116040

commit 6a7db4b1ec4bf4864197bf5e9cabb0b744abebba
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 4 01:31:33 2017 -0700

    Remove unused variable and parameter.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152107538

commit dd2914f5809bcfa519b64c19668f6583c13e8b39
Author: eguven <eguven@google.com>
Date:   Mon Apr 3 07:03:38 2017 -0700

    Generalize manifest parser parameters in DASH and SmoothStreaming MediaSources
    
    This allows custom parsers to be used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152005477

commit 107e0ebc467612d216bb8b46f66b352ffd6bb254
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 3 06:35:56 2017 -0700

    Fix scrubbing in timeline with too many windows.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=152003529

commit 5ee122cac88b2340daf9e86d73642c038e42556e
Author: olly <olly@google.com>
Date:   Mon Apr 3 04:06:46 2017 -0700

    Add VERSION_SLASHY to ExoPlayerLibraryInfo
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151994281

commit 38779de22593e3acf40ab6f7b4906021a59a0804
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Tue Apr 4 15:04:47 2017 +0200

    Add support for multiple subtitle tracks per PID and for naming hearing impaired subtitles

commit 757999758b7f77e6d3553d6b50e7ca87215355c5
Author: Oliver Woodman <olly@google.com>
Date:   Fri Mar 31 19:38:41 2017 +0100

    Cleanup for merged pull requests

commit b127e162b6a1713ae43a8f77bf2448ead9514681
Merge: c3fa6d8 2cf8553
Author: ojw28 <olly@google.com>
Date:   Fri Mar 31 19:32:32 2017 +0100

    Merge pull request #2329 from supercairos/dev-v2
    
    Opus: use fixed max size in Opus decoding

commit c3fa6d894336424e9e88474b43ca3a9f22609472
Merge: 9a06b77 d84733c
Author: ojw28 <olly@google.com>
Date:   Fri Mar 31 19:32:17 2017 +0100

    Merge pull request #2612 from dessatel/dev-v2
    
    Disables codecIsAdaptive for Odroid-XU4

commit 9a06b77b8a454db4950bac7a20b6fd12190b2721
Author: Oliver Woodman <olly@google.com>
Date:   Fri Mar 31 19:25:57 2017 +0100

    Delete stray test

commit 8e7679082380897af3eade77242cffbafe39995c
Author: olly <olly@google.com>
Date:   Fri Mar 31 10:49:09 2017 -0700

    Remove deprecated readSource method
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151840862

commit 64188748f436283766369bf9dfaead5eefebc1e2
Author: eguven <eguven@google.com>
Date:   Fri Mar 31 06:48:40 2017 -0700

    Move cache related generic methods from DashDownloader to CacheUtil
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151818564

commit 77e6d75bddfa29e812eba4905e7535b03146da0c
Author: olly <olly@google.com>
Date:   Fri Mar 31 06:18:13 2017 -0700

    Fix FLV parser to skip metadata we're not interested in
    
    Issue: #2634
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151816597

commit f7fff0d5835b42f6d6db7e46c7b1e546f84f545a
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Mar 31 01:26:19 2017 -0700

    Apply parameter adjustments with resetting.
    
    Start draining the audio processors when the playback parameters change,
    and when draining completes use the written frame count and next input
    buffer presentation timestamp as an offset for applying the new playback
    speed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151800074

commit a473e7300c3fb678763f5ac91f1b1d9466f3e468
Author: eguven <eguven@google.com>
Date:   Thu Mar 30 08:44:19 2017 -0700

    Move utility methods to DemoUtil from TrackSelectionHelper
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151706338

commit cc1a8f40341703db077329b2d1803401a278108c
Author: olly <olly@google.com>
Date:   Thu Mar 30 06:47:35 2017 -0700

    Make playlist samples a little more interesting
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151696298

commit 035fab225da7570f320d0fb7f93b46532c072485
Author: olly <olly@google.com>
Date:   Wed Mar 29 12:11:57 2017 -0700

    Rename skipToKeyframeBefore -> skipData and allow skipping to EOS
    
    This change also ensures that format changes are read whilst the
    renderer is enabled but without a codec. This is necessary to
    ensure the drm session is updated (or replaced).
    
    Updating the format is also needed so that the up-to-date format is
    used in the case that the codec is initialized later due to the
    surface being set. Previously, if an ABR change occurred between
    the format being read and the surface being attached, we would
    instantiate the codec and then immediately have to reconfigure it
    when as a result of reading the up-to-date format. For a non-adaptive
    codec this resulted in the codec being immediately released and
    instantiated again!
    
    Issue: #2582
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151608096

commit 9bc20d23a89c073c9d1052fd382b6bbb5a419c8f
Author: olly <olly@google.com>
Date:   Wed Mar 29 05:08:02 2017 -0700

    Print when frame is rendered in EventLogger + tidying
    
    This is the boring part of a larger change that fixes
    how video renderers behave when surfaces are attached and
    detached whilst they're enabled or started.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151563031

commit 68b8a5e54201221cb765e57e41585c855d08550a
Author: eguven <eguven@google.com>
Date:   Wed Mar 29 02:41:19 2017 -0700

    Downgrade jacoco to 0.7.4.201502262128 as a workaround for 'stuck in endless loop' issue
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151554130

commit 103c3b631b1e8cba0b6d9d5fc959c73c5f66de22
Author: eguven <eguven@google.com>
Date:   Tue Mar 28 09:06:21 2017 -0700

    Add DashDownloader helper class to download dash streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151456161

commit 2f9e082fe13226af043330b22fa2f9ae1fc3ac63
Author: eguven <eguven@google.com>
Date:   Tue Mar 28 07:47:17 2017 -0700

    Enable gradle test code coverage for the library modules that aren't affected by 'stuck in endless loop' issue
    
    'library-core' is still affected by https://code.google.com/p/android/issues/detail?id=226070
    
    Code coverage report can be generated for the rest of the modules by:
    ./gradlew :[module name]:createDebugCoverageReport
    Report is generated under:
    [module folder]/buildout/reports/coverage/debug
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151448536

commit e7a4c28ddeb6649745823a385cd0ee7cb208f19c
Author: olly <olly@google.com>
Date:   Tue Mar 28 05:55:12 2017 -0700

    Fix missing NonNull annotations for overriding methods
    
    If the super method has the annotation on an argument, then
    the overriding method should have it too.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151440313

commit 1dcfae452a51ba84d50649d9717d0bb4d75039b4
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 28 03:27:32 2017 -0700

    Avoid input/output copies in SonicAudioProcessor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151431376

commit 422c2d0ab7f5edb90aa2dba29df5a2d3fc71dd6f
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 28 00:09:10 2017 -0700

    Support escaped AAC AOTs.
    
    Issue: #2514
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151418949

commit 21eecb679d396370ec41c5acf1d47d07c6a1a459
Author: olly <olly@google.com>
Date:   Mon Mar 27 11:44:32 2017 -0700

    Make ID3 parsing more robust
    
    - Validate frames for majorVersion 2 and 3 as well as 4
    - Don't throw if top bit of frameSize is non-zero.
    
    Issue: #2604
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151348836

commit 1888bd291b21778b389e90ab701bc1e5f048cd2b
Author: eguven <eguven@google.com>
Date:   Mon Mar 27 09:42:37 2017 -0700

    Make FakeDataSource FakeDataSet and FakeData structures accessible publicly for comparision in tests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151331819

commit 5ebb3d44812322ee9788feec5ebf5a49b51cccd5
Author: olly <olly@google.com>
Date:   Mon Mar 27 06:52:34 2017 -0700

    Correct allowTimeBeyondBuffer values for skipToKeyframeBefore calls
    
    The only case where we should pass false is if we want to know
    whether the passed time is within the buffered media. This is
    relevant within seekTo implementations only.
    
    This is related to (but does not fix) issue #2582
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151315676

commit abcd177e8a940f5fe89288cd720abc7744e9416a
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Mar 27 04:39:54 2017 -0700

    Remove some unused Sonic functionality.
    
    Also move it closer to the ExoPlayer code style.
    
    Note: This change is intended to be purely cosmetic.
    
    Issue: #26
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151307575

commit 9d20a8d41c0cc6cd01b20bd72f3bbfcf11e49cae
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Mar 24 05:23:02 2017 -0700

    Add a custom time bar view.
    
    Also add an isAd flag to Timeline.Period so that periods can be declared as
    containing ads. The times of these periods are indicated using ad markers in
    the new TimeBar.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151116208

commit d84733c9cf73b9a2ab39cbef660fe6801c973045
Author: Alex Telitsine <alex@streambox.com>
Date:   Thu Mar 30 19:53:19 2017 -0700

    Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders

commit 96f56716ce11115fd01fce14512ec4e67cdf957a
Author: Alex Telitsine <alex@streambox.com>
Date:   Thu Mar 30 19:52:15 2017 -0700

    Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders

commit 42f3dcf0da5ad2b3e352346647d630ac4f8684c6
Author: Alex Telitsine <alex@streambox.com>
Date:   Thu Mar 30 19:50:09 2017 -0700

    Disables Adaptive workaround for Odroid-XU4 up to SDK 19 in Samsung's Exynos AVC and AVC secure decoders

commit d34d3f76be7cb4b7423b61cf03d85f2ad1df9dd4
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Fri Mar 31 01:48:29 2017 +0200

    Pull request review fixes

commit 6c9656dc9a42f3977a9bf013d722810806114ee5
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Wed Mar 29 00:14:32 2017 +0200

    some cleaning and class/method documentation

commit 9aee406c8ef2755f23b7dc9aa12ad21f6c22ae70
Author: Alex Telitsine <alex@streambox.com>
Date:   Mon Mar 27 04:10:53 2017 -0700

    Disables codecIsAdaptive for Odroid-XU4, comment updated

commit c40b8156e9946fe95f321a33859f4932292f501f
Author: Alex Telitsine <alex@streambox.com>
Date:   Mon Mar 27 03:58:04 2017 -0700

    Disables codecIsAdaptive for Odroid-XU4

commit 7e0ea5a65b818a2985c05f1fd9c86acfe22565c4
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Thu Mar 23 17:44:33 2017 +0100

    Optimization of memory and draw operations, and proper treatment of filled regions (as far as we can infer from the specs)

commit f4c33daf77fadd207a8e195242619fbaa06ac1c5
Author: olly <olly@google.com>
Date:   Thu Mar 23 11:17:09 2017 -0700

    Bump version for bugfix release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151028565

commit 0e6ef0edf69862e6c2ad4d4824b65bd331aa6145
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Mar 23 11:08:11 2017 -0700

    Add Sonic library for audio speed adjustment.
    
    Add methods to ExoPlayer for setting/getting the playback speed, using
    SonicAudioProcessor.
    
    Remove PlaybackParams support, as the AudioTrack timestamp does not work
    reliably on Marshmallow. The platform also uses Sonic and performance
    should be comparable between the Java and native versions on recent Android
    runtimes.
    
    In a later change, SonicAudioProcessor will be made public so it can
    be used in conjunction with other processors.
    
    Issue: #26
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151027121

commit 6faf566344622a437dc24118b8682547e66f0f41
Author: olly <olly@google.com>
Date:   Thu Mar 23 09:38:01 2017 -0700

    Fix NullPointerException enabling WebVtt subtitles in DASH
    
    Issue: #2596
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151013802

commit 14f1b33fcf0f40df4614571591fb9ea19b5754c9
Author: eguven <eguven@google.com>
Date:   Tue Feb 7 08:32:45 2017 +0000

    Make CacheDataSource.open() throw exception if resolved range doesn't cover position
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151006826

commit 7aff624477851485cddb9bb95fbb877355dc6ac4
Author: olly <olly@google.com>
Date:   Thu Mar 23 08:03:58 2017 -0700

    Fix typo on CEA-708 decoder
    
    Issue: #2595
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151004198

commit 255523b4323b94b2e9fa0873f80b2f5873192cc5
Author: olly <olly@google.com>
Date:   Thu Mar 23 08:01:41 2017 -0700

    Call DrmSession methods on the session not the manager
    
    The way it was before worked, but it's not really documented
    that DrmSession methods implemented by DefaultDrmSessionManager
    can be called after the session has been released, and it feels
    wrong to do this.
    
    At some point we should probably consider moving the DrmSession
    part of DefaultDrmSessionManager into an inner class, to force
    usage in the "normal" way.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=151003855

commit 65770131994368c7cf04f62ee27266ed5afb3349
Merge: 569cec7 6503f01
Author: ojw28 <olly@google.com>
Date:   Thu Mar 23 18:07:21 2017 +0000

    Merge pull request #2598 from google/dev-v2-r2.3.1
    
    r2.3.1

commit 6503f016e9b54b6818f04d364727f5d6d3407443
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 23 17:59:20 2017 +0000

    Update release notes + bump versions

commit c96f18f5ce4264752c39482a4b2a3b996663fc22
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 23 17:46:43 2017 +0000

    Fix skipping to keyframe to use correct position
    
    Issue: #2575

commit 23b5921b828be728a345bcf4088edcd736f52ade
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 23 17:46:12 2017 +0000

    Fix typo on CEA-708 decoder
    
    Issue: #2595

commit 646f6a74c94e4ffb228ea018b61fff1eeb59e966
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 23 17:44:47 2017 +0000

    Fix NullPointerException enabling WebVtt subtitles in DASH
    
    Issue: #2596

commit 0c49b81b48c83c906d009c1165fbe6b25e66f693
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Thu Mar 23 08:55:20 2017 +0100

    add DVB subtitle support, based in the TVHeadend spec, to the MatroskaExtractor

commit 937675d1dbeb8fcaf31f2e7c67fe576115c204cc
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Thu Mar 23 08:54:07 2017 +0100

    Add DVB sustitles support to the TsExtractor

commit d8f61ad7e7090496a1d43e7a5cd31feb3abc478c
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Thu Mar 23 08:51:41 2017 +0100

    Add DVB subtitles support

commit 42629701f84645448d9f4b1c171018fec1281394
Author: olly <olly@google.com>
Date:   Wed Mar 22 13:05:33 2017 -0700

    Work around broken VP8 decoder on Note 2
    
    Issue: #1355
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150916986

commit e0a00502a72a6a1b8fe3d7143bba38b49dd7c776
Author: sammon <sammon@google.com>
Date:   Wed Mar 22 12:01:06 2017 -0700

    Avoid exception when creating ChunkIndex with length = 0.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150908893

commit 8f636991ad152bca610562b2374e1064ebfbc34b
Author: eguven <eguven@google.com>
Date:   Wed Mar 22 05:47:00 2017 -0700

    Add DummyDataSource
    
    A dummy DataSource which provides no data.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150868950

commit 382ba7ecf0907d07765e3c14d45692845a6e7621
Author: olly <olly@google.com>
Date:   Wed Mar 22 04:48:09 2017 -0700

    Generate combined Javadoc
    
    Notes:
    - Now only generating a single module Javadoc task for the
      release variant.
    - Combined Javadoc now includes extensions. VP9 is excluded
      for now since it's failing for an unknown reason.
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150865589

commit 88e74ef381d109b0ac0ba4193335704cf59d8f01
Author: olly <olly@google.com>
Date:   Wed Mar 22 04:21:16 2017 -0700

    Generate Javadoc for each module individually
    
    Notes:
    - The VP9 one is failing claiming that the util package
      doesn't exist and that LibraryLoader cannot be found.
      Unsure why, since it appears to be setup exactly like
      other extensions (e.g. Opus) that does work.
    - @link across modules will not work when generating
      Javadoc for a single module. This is WAI. I subsequent
      change will add an aggregated Javadoc generator that
      will generate Javadoc for all modules together and
      apply cross module @link correctly.
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150864273

commit 7ce8125194bffbc177008bdca2bfe2bc264961b6
Author: olly <olly@google.com>
Date:   Tue Mar 21 09:34:35 2017 -0700

    Split DASH into a separate module
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150762237

commit b1a2ae1856d3637b3a852258e1828cc91eb808b6
Author: olly <olly@google.com>
Date:   Tue Mar 21 08:10:42 2017 -0700

    Remove DRM->DASH dependency in prep for DASH module split
    
    Also renamed releaseResources->release to be consistent with the
    rest of the library, and added some synchronization to ensure
    correct usage.
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150753414

commit 065d3dc5233f5291f56eee06d54c8ea3ccfe6f78
Author: eguven <eguven@google.com>
Date:   Tue Mar 21 07:05:53 2017 -0700

    Make FakeDataSource able to serve multiple fake files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150748155

commit c32533cad8294c8f217340f796aaf226d0f58000
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Mar 21 04:52:43 2017 -0700

    Fixed the edit mode view for SimpleExoPlayerView
    
    This CL makes SimpleExoPlayerView show a mock representation
    when in the layout editor of AndroidStudio.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150739442

commit f2e5c3b4c9677d902dd967de89bbb933129e7a56
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 21 03:01:16 2017 -0700

    Fix imports.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150732864

commit b6a1d0a55dc036d20aa67822b44e2955d73930ce
Author: vigneshv <vigneshv@google.com>
Date:   Tue Mar 21 01:39:52 2017 -0700

    extensions/vp9: Update filter & remove sort in libvpx.mk
    
    Update the filter that selects %.asm.[sS] and remove the
    "remove duplicates" step in the android makefile.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150728021

commit c8b9c7fe68588d72495ba01265c26d0a779b3c24
Author: vigneshv <vigneshv@google.com>
Date:   Mon Mar 20 11:08:53 2017 -0700

    extensions/vp9: Control symbol visibility with libvpx.ver
    
    This change reduces the final .so size by ~9% for armv7/arm64.
    
    Arch : Size_before : Size_after
    armeabi-v7a : 300548 : 271876
    arm64-v8a : 247632 : 223056
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150648668

commit 25a093b37c75ecd1853ede3570df6e3cbfac038e
Author: olly <olly@google.com>
Date:   Mon Mar 20 10:34:26 2017 -0700

    Split HLS into a separate module
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150643456

commit a9aca8dbf057a03f06292223f723c40b0f1fbded
Author: olly <olly@google.com>
Date:   Mon Mar 20 09:33:02 2017 -0700

    Split SmoothStreaming into a separate module
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150634794

commit 58ac5720242e3893cecc66f476a862ba164da059
Author: olly <olly@google.com>
Date:   Mon Mar 20 07:56:36 2017 -0700

    Tell Moe about new UI module + update external settings.gradle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150625313

commit 7b08e972e4de657b4b26cafe5bc6296403b36fbd
Author: olly <olly@google.com>
Date:   Mon Mar 20 07:30:14 2017 -0700

    Split UI components into separate module
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150623215

commit de6e47f7e65fb4f7b59a14d3d934da119271d484
Author: olly <olly@google.com>
Date:   Mon Mar 20 07:20:39 2017 -0700

    Fix skipping to keyframe to use correct position
    
    Issue: #2575
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150622487

commit f9767940cc982c8ce43609a13bd9e5cf17db4a80
Author: olly <olly@google.com>
Date:   Mon Mar 20 03:56:53 2017 -0700

    Fix misc issues
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150610549

commit ce55d1a712f686ba1749804302eca141d952a6dc
Author: olly <olly@google.com>
Date:   Fri Mar 17 10:36:15 2017 -0700

    Modularize ExoPlayer steps 1 + 2.
    
    1. Move entire library from v2/library/ to v2/library/core
    2. Add v2/library/all that depends on v2/library/core
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150455693

commit f2de393d8395a42f3513b7a96fa76541f588d705
Author: olly <olly@google.com>
Date:   Fri Mar 17 07:20:17 2017 -0700

    Correctly handle stream replacement in text renderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150436867

commit 569cec7fe81250db8a7aa49447c5b96ddd57d7a2
Author: ojw28 <olly@google.com>
Date:   Fri Mar 17 21:00:45 2017 +0000

    Cleanup RELEASENOTES.md

commit 2966ea71f050347152ca0f8a52e4186e5a5892f9
Author: ojw28 <olly@google.com>
Date:   Fri Mar 17 20:55:45 2017 +0000

    Fix RELEASENOTES.md nesting.

commit 3c447130a5aeb323fcf0c76816b02e2ae6777283
Author: ojw28 <olly@google.com>
Date:   Fri Mar 17 20:53:09 2017 +0000

    Update RELEASENOTES.md

commit 86230c451007534623c68ea9eedb6d15b8ef709a
Merge: aaaa23e c8059e5
Author: ojw28 <olly@google.com>
Date:   Fri Mar 17 20:42:16 2017 +0000

    Merge pull request #2570 from google/dev-v2
    
    r2.3.0

commit c8059e5969372113f3249455e32c85d2ee6fbf49
Author: olly <olly@google.com>
Date:   Thu Mar 16 13:08:58 2017 -0700

    Update release notes + bump versions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150358346

commit b98de975f18712de850ac43d742b248699e95b16
Author: olly <olly@google.com>
Date:   Thu Mar 16 05:53:58 2017 -0700

    Make Util.inferContentType marginally smarter
    
    Issue: #2513
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150310349

commit 2fe478ad6a4034ce661a94b7166d981c6efddf3d
Author: eguven <eguven@google.com>
Date:   Thu Mar 16 05:13:51 2017 -0700

    Invert DashHostedTest and inner class Builder to make the design more natural
    
    Builder class was renamed to DashTestRunner and DashHostedTest moved
    into it as an inner class.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150307988

commit 9b0d24c909bc73f9410fa6f1a50064bf6f350548
Author: olly <olly@google.com>
Date:   Thu Mar 16 04:34:22 2017 -0700

    Fix stuck-buffering state when playing merged media
    
    Also added a TODO to track clarifying SequenceableLoader
    more accurately and auditing existing implementations.
    
    Issue: #2396
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150305685

commit ce5c0c18f952caa19b863345252fd267804d7e83
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Mar 16 03:36:02 2017 -0700

    Rename AdaptiveVideoTrackSelection to AdaptiveTrackSelection
    
    This will allow us to use the same class for Audio adaptation.
    
    Issue:#1975
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150302561

commit cadce0ef3f539a36dd8257189301538c050c5964
Author: adrianv <adrianv@google.com>
Date:   Wed Mar 15 20:23:51 2017 -0700

    Add @Nullable annotation for an optional field in CacheDataSource's constructor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150278031

commit 8cad99ba98304eaaf689dabf2a9eac66300fa320
Author: anjalibh <anjalibh@google.com>
Date:   Wed Mar 15 15:59:46 2017 -0700

    Add lightweight dithering to 10->8 bit conversion.
    Also optimize / 4 and % 4. I assumed the compiler would do this automatically but the performance bump implies it's not doing that.
    
               Before | Optimized
    No dither: 4.8 ms | 3.5 ms
    Dither   : 9.6 ms | 4.2 ms
    
    Before: https://drive.google.com[]file/d/0B07DogHRdEHcaXVobi1wZ2wxeUE/view?usp=sharing
    After: https://drive.google.com[]file/d/0B07DogHRdEHcVS1PN05kaU1odm8/view?usp=sharing
    
    Known issue: The remainder from the last Y pixel will leak into the first U pixel. Also U and V remainders leak into each other but I don't think it causes any perceptual difference.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150255151

commit 7c9b771ec890bfdfd76859e53a83311d2edc564e
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Mar 15 13:17:07 2017 -0700

    Create HlsMediaSource.Manifest to hold playlist information
    
    This allows the user to get the HlsMasterPlaylist through
    Exoplayer.getCurrentManifest().
    
    Issue:#2537
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150232455

commit a6cea62c1b78d0fef48cdb73b8f41714cf43cd6e
Author: olly <olly@google.com>
Date:   Wed Mar 15 10:28:50 2017 -0700

    Add gradle instructions to GVR readme + clean up FFMPEG readme
    
    Note: Depending on the GVR extension via gradle wont work until
    we actually push a release
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150208524

commit ccc5e472b0a4c0e07cbf5760b017b9dd720e5d80
Author: vigneshv <vigneshv@google.com>
Date:   Wed Mar 15 10:28:49 2017 -0700

    extensions/vp9: Fix open source build scripts
    
    Fixes github issue #2339 [https://github.com/google/ExoPlayer/issues/2339]
    Fixes github issue #2551 [https://github.com/google/ExoPlayer/issues/2551]
    
    * Update the instructions to check out specific versions of libvpx and
      libyuv that are known to work with our build scripts.
    * Forcing a particular version of libyuv because recent versions of
      libyuv are dependent on libjpeg (which isn't needed for the purpose
      of this extension).
    * Going forward, let's keep generate_libvpx_android_configs.sh in sync
      with whatever version is specifed in the instructions in README.md
      (as of now it is v1.6.1).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150208517

commit 76c9968211c704fa7b8811bbc1a4f8362f6cf32b
Author: eguven <eguven@google.com>
Date:   Wed Mar 15 08:47:48 2017 -0700

    Add RepresentationKey and DashManifest copy method
    
    RepresentationKey defines a representation location in a DashManifest.
    DashManifest copy method creates a copy of the manifest which includes
    only the representations pointed by the given RepresentationKeys.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150195990

commit f092c4446f5f2d2c81a904070ab773857e99fa88
Author: eguven <eguven@google.com>
Date:   Wed Mar 15 07:49:51 2017 -0700

    Move TestUtil.createTempFolder and TestUtil.recursiveDelete to Util class
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150190520

commit d6db5066cda2872afe9b6c0bd6f2906b01a176ec
Author: olly <olly@google.com>
Date:   Wed Mar 15 06:47:35 2017 -0700

    Improve publishing to Bintray
    
    - Update bintray-release version
    - Publish to exoplayer-test unless -PpublicRepo=true
    - Publish GVR extension
    - Minimize duplication with new publish.gradle
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150185740

commit a9617af29c2c760c8e439d390ef02f0b4e055a6b
Author: olly <olly@google.com>
Date:   Wed Mar 15 06:44:11 2017 -0700

    Use fast surface switching on API level 23+ when possible
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150185483

commit 7c5f0b7d3b39ef2b1776e4bdb588289750580a31
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Mar 15 06:37:02 2017 -0700

    Make Video track selections before others
    
    This will allow us to make a single adaptive selection prioritizing
    video selections.
    
    Issue:#1975
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150185086

commit db5f81ecfd9310adf4daf0875662be4dcc3f7652
Author: olly <olly@google.com>
Date:   Wed Mar 15 06:32:47 2017 -0700

    Allow disabling ID3 metadata parsing if not required
    
    Issue: #2553
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150184824

commit d077e23daa730c8d5a85ce84fb301a41de439f1e
Author: olly <olly@google.com>
Date:   Wed Mar 15 06:24:12 2017 -0700

    Improve DefaultExtractorInput's peek buffer sizing.
    
    - Don't resize the peek buffer to be twice as large as a
      large amount!
    - Trim the peek buffer, to allow large peek buffer allocations
      to be reclaimed.
    
    Issue: #2553
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150184291

commit 70926057c5a5006b835f7c8921b649013cde2e43
Author: olly <olly@google.com>
Date:   Tue Mar 14 10:12:28 2017 -0700

    Fix some more incorrect playback test stream IDs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150080957

commit 8a411c310dfdaf37d03cd9ed612af6848175af46
Author: olly <olly@google.com>
Date:   Tue Mar 14 09:51:13 2017 -0700

    Suppress some lint errors
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150078703

commit a26cb9cc3caf4556fdb6bf99848a109d53506367
Author: olly <olly@google.com>
Date:   Tue Mar 14 05:27:03 2017 -0700

    No-op fix for playback tests
    
    super.onQueueInputBuffer is no longer a no-op in all
    configurations. It doesn't make any difference in practice
    for these tests, but for completeness we should call up.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150056224

commit 7c587c6b8290966eeb6893eaf98bc044bb545578
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Mar 14 05:07:11 2017 -0700

    Prevent playlist loading if refresh is already scheduled
    
    This greatly reduces the amount of server requests issued by
    the playlist tracker.
    
    Issue:#2548
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150055046

commit 204537ed40e85134a1c5c91f0dd1e5453775043a
Author: olly <olly@google.com>
Date:   Tue Mar 14 03:47:26 2017 -0700

    Pre-modularization cleanup
    
    - Use a variable for the (default) minSdkVersion. There will
      be more modules that need it, and it'll be easier to manage
      if it's in one place.
    
    Issue: #2139
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=150050663

commit 4b1410bced49b8075d928f07a8b6ee62c54a86dd
Author: olly <olly@google.com>
Date:   Mon Mar 13 14:48:32 2017 -0700

    Simplify + Fix WV encrypted playback tests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149993442

commit 139252c9d3921d26748aa1e04f9ef525eb3dc468
Author: Oliver Woodman <olly@google.com>
Date:   Mon Mar 13 16:25:44 2017 +0000

    Propagate defaultRequestProperties + make getDefaultRequestProperties final

commit 3131074338568291e5142d88fdd76b4bbd3c94b5
Author: olly <olly@google.com>
Date:   Mon Mar 13 08:21:11 2017 -0700

    Upgrade dependencies
    
    Issue: #2516
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149942409

commit 343a7302bd04d3bd99700188144937e74042bbb2
Author: olly <olly@google.com>
Date:   Mon Mar 13 08:08:38 2017 -0700

    Update gradle version
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149941369

commit aede0f894d4060379aa34308a7f8d18ba0050000
Author: bachinger <bachinger@google.com>
Date:   Fri Mar 10 11:38:51 2017 -0800

    Propagate updates of default header fields of the HttpDataSource.BaseFactory to HttpDataSource instances.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149780233

commit 952bde700b9c8f0a4181f727e165a1633515e72d
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Mar 10 09:19:54 2017 -0800

    Ensure only timestamp adjustment masters set first sample timestamps
    
    Without this, it is possible that a non timestamp master instances
    the adjuster with its own chunk start time. When chunks are not
    aligned, this breaks adjustment.
    
    Issue:#2424
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149764488

commit 15aad266b6cab6c7ec8f69972d90f7ae1ec024fc
Author: mishragaurav <mishragaurav@google.com>
Date:   Fri Mar 10 09:15:10 2017 -0800

    Use separate Widevine license keys to package test audio for Exoplayer GTS.
    
    Android doesn't support secure decoding for audio. Hence use Audio keys that always require L3 support only.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149764063

commit 6d61519421d8287001840a0825a43ca265836340
Merge: f21cdcb 578b954
Author: ojw28 <olly@google.com>
Date:   Mon Mar 13 10:00:35 2017 +0000

    Merge pull request #2547 from LiveLike/program-date-time-regex
    
    Support comma separators in ISO-8601 date/time format for milliseconds

commit 578b9545f0c03483db51d253b04af89a5dcb79e9
Author: Ben Wilber <benwilber@gmail.com>
Date:   Thu Mar 9 19:46:24 2017 -0500

    Support commas in ISO-8601 date/time format for millis

commit f21cdcb9c5ea49c603f1ac3189604ff1cb0af1c7
Author: eguven <eguven@google.com>
Date:   Fri Mar 10 05:54:25 2017 -0800

    Allow null DataSink.Factory in CacheDataSourceFactory
    
    CacheDataSource allows null DataSink. Do the same in CacheDataSourceFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149750696

commit cb0187959cd23b138d923aee106b3395163a72af
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Mar 10 05:32:52 2017 -0800

    Fix NPE in HLS playback of non-muxed streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149749504

commit 0cb9802e1bc16ec73bf63c0aacaad9bf6ef050b1
Author: cdrolle <cdrolle@google.com>
Date:   Thu Mar 9 12:10:30 2017 -0800

    Fixed CEA-708 issues
    
    Caption characters weren't being assigned to the correct window and the lack of
    pen location support was causing multiple lines (and words) to be concatenated.
    
    As per the CEA-708-B specification, section 8.10.5, when we encounter a DefineWindow
    command, we're also supposed to update the current window to the newly defined one.
    We were not doing this previously, resulting in text that should have been in separate
    windows being combined into one. Furthermore, some content uses the SetPenLocation
    command to move the cursor down a line instead of appending a new line. As we don't
    currently support SetPenLocation, this resulted in multiple lines (and words) being
    concatenated together, potentially causing the text to extend past the edge of the
    window/screen. This change implements a workaround (until SetPenLocation is properly
    supported) for this issue in which setting the pen location to a new row will append
    a new-line to that window.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149679613

commit b84c84cc765cd6b2d27e20330735b2d866d310b2
Author: cdrolle <cdrolle@google.com>
Date:   Thu Mar 9 11:18:15 2017 -0800

    Fixed CEA-708 issue where cues weren't updated at the appropriate times
    
    As per the CEA-708-B specification, section 8.10.4, cues don't necessarily
    need either an ETX command or any of the C1 commands before being updated
    with the latest buffered content. While those commands do indicate that the
    cues should be updated immediately, the cues can also be updated after a
    service block has been processed if it appended text to the buffer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149673162

commit b6773dba051e79f7791c80aff2396e8fa1886188
Author: eguven <eguven@google.com>
Date:   Wed Mar 8 08:57:26 2017 -0800

    Add PriorityDataSourceFactory
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149543747

commit 3be4451e13d604b9a036bd90e8fcefd77c62c5a8
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Mar 8 07:51:13 2017 -0800

    Allow injection of DataSource's per type of data
    
    This allows the client to define what data source is used for
    media chunks, encryption chunks and playlists.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149537766

commit 78e7c3c5104b146e7a8ff9ee68c5ea66dcb4287e
Author: eguven <eguven@google.com>
Date:   Wed Mar 8 06:55:02 2017 -0800

    Make CacheDataSourceFactory createDataSource return specific type
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149533820

commit 45c7fe9b00e0cc9068c245ba001dd67c420f12ab
Author: olly <olly@google.com>
Date:   Wed Mar 8 04:37:47 2017 -0800

    Drain embedded track sample queues when not enabled.
    
    I think it's likely we'll revert back to discarding media
    in sync with the playback position for ExtractorMediaSource
    and HlsMediaSource too, where the tracks are muxed with ones
    we're requesting anyway.
    
    Note: discardBuffer is named as it is because it'll also be
    used to discard for enabled tracks soon, as a result of the
    remaining TODO in ChunkSampleStream. For enabled tracks the
    discard will also be conditional on the samples having been
    consumed, obviously.
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149525857

commit 09471defd72e7416f7560a926a335421f6378b40
Author: olly <olly@google.com>
Date:   Wed Mar 8 04:09:05 2017 -0800

    Enabled EMSG and CEA-608 embedded streams for DASH
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149524412

commit 99e19a92af8641c24470a01031652f40eef80253
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 7 10:06:42 2017 -0800

    Fix SampleStream javadoc.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149431794

commit cda1b7b42b3c2bd5ea7bb5ccbd55234f7523cf57
Author: olly <olly@google.com>
Date:   Tue Mar 7 07:15:55 2017 -0800

    Try and get people to stop ignoring the issue template. Again.
    
    I'm also going to propose some canned responses that we can
    copy/paste into issues that ignore the template, so that we
    can be consistent about how we handle them.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149415502

commit e7462f05f5b5d4fe71ac328ef526d08242d2154c
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Mar 3 03:24:42 2017 -0800

    Add maxVideoBitrate to DefaultTrackSelector.Parameters
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149097876

commit 8e9711e8aacda21932cc9a9eabd424bab3cfb41b
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Mar 2 08:19:41 2017 -0800

    Allow packed audio without PRIV timestamps
    
    We use the segments' start time when the timestmap is not present.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149006252

commit e40bba2852da6efb9e2141da0b237fe23900f393
Author: eguven <eguven@google.com>
Date:   Thu Mar 2 08:12:01 2017 -0800

    Add Cache.getCachedBytes() which returns the length of the cached or not data block length
    
    This method can be used to determine not cached parts of a content.
    The 'length' parameter allows quicker responses without going through all adjacent spans.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149005688

commit 247da48e9dfd2366720bfdc58723e5d3dc8b3a98
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Mar 2 07:52:10 2017 -0800

    Make ElementaryStreamReader's public
    
    This allows building a TsPayloadReader.Factory without
    having to wrap the default one.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=149004102

commit 0dee4aec70411ecf1f9db31bc096fe16609ddecc
Author: sxp <sxp@google.com>
Date:   Tue Feb 28 13:28:09 2017 -0800

    Deprecate instead of delete BaseRender.readSource(FormatHolder, DecoderInputBuffer)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148808381

commit 5b98ff724626bc2390ddc329082bc364b1e170b1
Merge: a9079f6 5b0192a
Author: Santiago Seifert <AquilesCanta@users.noreply.github.com>
Date:   Thu Mar 9 12:16:54 2017 +0000

    Merge pull request #2538 from mofneko/dev-v2-fix-unused-variable
    
    Replace list access with local variable

commit 5b0192a3ddfb819145396cafb94023322c363413
Author: mofneko <mofneko@users.noreply.github.com>
Date:   Wed Mar 8 03:20:34 2017 +0900

    Update HlsPlaylistTracker.java
    
    Fix unused variable.

commit aaaa23e5e4a6771b06067bd28d728781990bd454
Author: ojw28 <olly@google.com>
Date:   Tue Mar 7 15:11:51 2017 +0000

    Update ISSUE_TEMPLATE

commit c50b570d463a2214e252ebca4b8840cd15d16768
Author: ojw28 <olly@google.com>
Date:   Tue Mar 7 15:03:01 2017 +0000

    Update ISSUE_TEMPLATE

commit 2ca14b025fc1bea3b5db6d9e23a259db02c4bf0b
Author: ojw28 <olly@google.com>
Date:   Tue Mar 7 15:02:52 2017 +0000

    Update ISSUE_TEMPLATE

commit a9079f67aa031649edfa7427e0fa96bf65efa1ac
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Feb 28 09:09:01 2017 -0800

    Fix some documentation nits.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148776593

commit ab8fd14724b0ee38e74b53cc5c9fed1c38c512b6
Author: olly <olly@google.com>
Date:   Tue Feb 28 06:54:27 2017 -0800

    Support multiple track outputs from BaseMediaChunk
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148764237

commit d58008eeb7055fedde8a059b41cb3876a6048d32
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Feb 28 06:46:51 2017 -0800

    Rename BufferProcessor to AudioProcessor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148763781

commit 91639b26cd40d25094e1539417268fd14214d0d8
Author: olly <olly@google.com>
Date:   Tue Feb 28 05:59:49 2017 -0800

    Add some pipelining in MetadataRenderer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148760782

commit 1120e1027315687b3cca0de024c0d59fce2793a4
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Feb 27 09:42:03 2017 -0800

    Add GVR spatial audio rendering extension.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148658631

commit b3cfeaa17b6203c738df8e85b0868ddaebcfe3cb
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Feb 27 09:00:48 2017 -0800

    Discard extra silent channels on Samsung Galaxy S6/S7.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148654495

commit 2411d0fc7697e53897bb74c6575a46277a7e2788
Author: eguven <eguven@google.com>
Date:   Mon Feb 27 08:25:54 2017 -0800

    Move and rename PRIORITY_PLAYBACK to C constants class
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148651265

commit 98f4fb85c210b2704a66e00c8477d4a41a234e9c
Author: eguven <eguven@google.com>
Date:   Mon Feb 27 07:36:11 2017 -0800

    Move utility methods to DashUtil class
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148647040

commit e26723cdc7cce0bbe0363db02525d5dfbeeb0011
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Feb 27 04:40:48 2017 -0800

    Add MODE_SINGLE_PMT to TsExtractor
    
    This mode allows the extractor to support streams with multiple
    programs declared in the PAT, but only one PMT. This is necessary
    to support tuner-obtained media.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148636312

commit 35988395d2aa7331be9b4d5640156bac28b4c83a
Author: olly <olly@google.com>
Date:   Mon Feb 27 03:49:44 2017 -0800

    Fix incorrect Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148633347

commit ad857852e52972d6686b7020922f338374b07a63
Author: olly <olly@google.com>
Date:   Fri Feb 24 11:19:42 2017 -0800

    Discard subtitles with invalid positions
    
    textWidth can be negative if textLeft extends parentRight (i.e.
    the subtitle is positioned entirely off the screen to the RHS).
    We should just discard and log a warning in this case.
    
    Issue: #2497
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148481310

commit 129334d2a0b292d9e6fcca3471453ce8a2d84c6d
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Feb 24 03:07:48 2017 -0800

    Clean up method ordering in ResamplingBufferProcessor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148444806

commit 5985f28e1baf121572d51ec954aa865e088cc0b6
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Feb 24 02:18:22 2017 -0800

    Add GVR extension and GvrBufferProcessor.
    
    A GvrBufferProcessor can be passed to the player by overriding SimpleExoPlayer's
    buildBufferProcessors method.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148442114

commit 84def0d0480f4413c28836e1b0af97ecb5d92706
Author: anjalibh <anjalibh@google.com>
Date:   Thu Feb 23 15:59:00 2017 -0800

    Implement VP9 profile 2 - 10 bit BT2020 support with libvpx. This code truncates the 10 bits to 8. We'll later update this to upload half-float or 16 bit short textures.
    
    Pending: Convert BT2020 to DCI-P3 before render.
    
    I'll add the same code to V2 after initial review.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148403349

commit 88fc337db0dfcb606f414a35739b011cbce85fb1
Author: olly <olly@google.com>
Date:   Thu Feb 23 14:20:34 2017 -0800

    Expose empty CEA-608 and EMSG tracks for DASH
    
    This change exposes declared CEA-608 and EMSG tracks. The
    tracks currently provide no samples.
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148390849

commit d99cb28e6a987f47e6dfc33cd8e6f120bd3b369d
Author: olly <olly@google.com>
Date:   Thu Feb 23 13:30:19 2017 -0800

    Correctly handle a SampleStream ending without providing a format
    
    I'm going to introduce an EmptySampleStream that will be used in
    some cases in conjunction as part of 608/EMSG support. This change
    avoids EmptySampleStream having to provide a dummy format.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148383831

commit ef2541e654edf74d21fa30dcefab324e6901c9aa
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Feb 23 08:50:47 2017 -0800

    Fix negative start time values
    
    Issue:#2495
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148348663

commit e3a57146d232eac6485ea3effd8f804339a6a7e2
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Feb 23 08:03:59 2017 -0800

    Fix BufferProcessor.queueEndOfStream javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148344328

commit 563a3972840885f26c96c3206df693534797ab2b
Author: olly <olly@google.com>
Date:   Thu Feb 23 08:02:24 2017 -0800

    Merge remainder of https://github.com/google/ExoPlayer/pull/2372
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148344124

commit 82d33cde689fdd5888e1dcd2af877c1328cf8c01
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Feb 23 06:54:20 2017 -0800

    Add support for draining audio output.
    
    At the end of playback, BufferProcessors need to be drained to process all
    remaining data, then the output needs to be written to the AudioTrack before
    stop() is called.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148339194

commit 69bd956bd7e49f0667ff36b7a123d894d6ff357f
Merge: 5fe5076 dc17163
Author: ojw28 <olly@google.com>
Date:   Thu Feb 23 15:48:36 2017 +0000

    Merge pull request #2496 from wasabeef/dev-v2-naming-for-clearkey
    
    Clarify naming for ClearKey DRM support

commit dc17163351f0a05ce180b0acec484eecf1fee5ff
Author: wasabeef <dadadada.chop@gmail.com>
Date:   Fri Feb 24 00:47:09 2017 +0900

    Clarify naming for ClearKey DRM support

commit 5fe5076c8686a09608bbef8797e1c16fa8d80fd8
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 23 14:51:58 2017 +0000

    Clarify naming for ClearKey DRM support

commit 3bb08e58f68ee1cc5a288b601c5fec3068cd83da
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 23 14:27:23 2017 +0000

    Cleanup of CENC support

commit 7e02e58e16a48c62e2686dbacb391750475b408f
Merge: 3fc3349 e0f7a12
Author: ojw28 <olly@google.com>
Date:   Thu Feb 23 14:17:11 2017 +0000

    Merge pull request #2372 from wasabeef/dev-v2-cenc-clearkey
    
    Added support for CENC ClearKey

commit 3fc3349e9535d8763f9a4c34c1d9a9e2ce7024a3
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Feb 23 01:55:56 2017 -0800

    Add support for Caption Format Descriptor
    
    This allows the TsExtractor to automatically determine the
    closed caption tracks to expose by parsing available
    descriptors.
    
    Issue:#2161
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148321380

commit 698e081edab82c4293de0ada171d6bcb3eacd3fc
Author: olly <olly@google.com>
Date:   Wed Feb 22 07:39:05 2017 -0800

    Handle empty PRIV frames
    
    Issue: #2486
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148217936

commit ddbced73174404bf6c177c03d5927fad72e1d031
Author: olly <olly@google.com>
Date:   Wed Feb 22 07:21:49 2017 -0800

    Conditionally enable EMSG/608 based on manifest declarations
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148216614

commit 682987a0cf077f9964c7cc79bf09b31d79de6b0e
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Feb 22 06:25:29 2017 -0800

    Separate input/output handling in BufferProcessors.
    
    This allows BufferProcessors to partially and/or asynchronously handle
    input/output. Document contract for queueInput and getOutput.
    
    Update ResamplingBufferProcessor to use the new interface.
    
    Separate submitting bytes vs. writing data to the AudioTrack.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148212269

commit 896550883f6d183e3ef46351eb3e494df8eaefba
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Feb 22 04:11:55 2017 -0800

    Add support for multiple CC channels in HLS
    
    Issue:#2161
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148203980

commit e86629ef3ae29145f99e488f4e08441f5bb82cfc
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Feb 20 10:11:19 2017 -0800

    Allow exposing multiple CEA608 tracks for Transport Streams
    
    This CL allows passing multiple formats describing CC channels to the
    TS payload reader factory. As a simple usecase, ATSC can expose both
    608 channels by passing a two element list with the corresponding
    accessibility channels. The HLS media source can construct this list
    from the EXT-X-MEDIA:TYPE="CLOSED-CAPTIONS" tags, including language
    and selection flags. The interface extends without modification to
    708.
    
    Pending work:
    * Multiple CC channels in HLS.
    * caption_service_descriptor parsing for overriding the user's selection.
    * 708 support in SEI reader.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148030293

commit a84216c3a975d9abadfd4868186d23bad131d068
Author: olly <olly@google.com>
Date:   Mon Feb 20 09:19:34 2017 -0800

    Allow enabling of EMSG/608 outputs on DefaultDashChunkSource
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148027655

commit 72e1eae6f55580ecae06f649078d051e7f6f1f0f
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Feb 20 08:45:13 2017 -0800

    Discard preparation chunk if track selection does not include it
    
    This avoids breaking the player if the first variant is not
    supported by the device.
    
    Issue:#2353
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148025791

commit 55a3fca6f990d3b6d0097d018daac4ec4cd7bcab
Author: olly <olly@google.com>
Date:   Mon Feb 20 08:15:52 2017 -0800

    Clean up position restoration logic in demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148024082

commit 17762ebaa2f96ddb7709fb04aa740d538657583d
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Feb 20 06:33:23 2017 -0800

    Reformat @IntDef field/return type annotations.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=148018580

commit e0f7a124889f340f6b9db58efd3d4f577cb12126
Author: wasabeef <dadadada.chop@gmail.com>
Date:   Wed Feb 22 16:01:43 2017 +0900

    Added support for CENC ClearKey

commit 402c985aec5a0dd1a8a5d2cfd073fe18ade52c93
Merge: d8746c3 11c16d8
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Tue Feb 21 08:57:49 2017 +0000

    Merge branch 'dev-v2' of https://github.com/google/ExoPlayer into dev-v2

commit d8746c3deed2f9433edf1ed062fcd805a3258db6
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Tue Feb 21 08:38:30 2017 +0000

    remove unneeded local variable

commit b0c39a12950cf95481168bc5668ba11870d9bcd0
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Tue Feb 21 08:22:47 2017 +0000

    back out unneeded imports

commit 11c16d83fdf65c6f35d8852e08baa7b75ffe1a47
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 13:13:13 2017 +0000

    Final nit fixes for Cue/SubtitlePainter

commit 539072dbf4236610be56224c836b6b0d1677fdb3
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 13:09:40 2017 +0000

    Remove useless Cue constructor

commit 5fbf10969453d823ebe85e39573712669695ef41
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 13:03:03 2017 +0000

    Use Math.round instead of floor.

commit 31513202df8c186764ad5d2d1d14a8a7fa49a7f6
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 13:01:00 2017 +0000

    Fix subtitle painter issues

commit 21923ae1faa1db85256a016721bc238a20d2d2b8
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 12:55:07 2017 +0000

    m

commit f16058422df7f42f7a4a20ec9fa4a4128f55fd88
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 12:51:56 2017 +0000

    Fix import order

commit 276788bc50e2ab943f081b45da9b37b80bfbdb22
Merge: edae29d e27a6ec
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 12:47:00 2017 +0000

    Merge branch 'drhill-dev-v2_imagesubs' into dev-v2

commit e27a6eca890a4c58eff9c3d1441179a071582746
Merge: edae29d 0468a80
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 12:46:51 2017 +0000

    Merge branch 'dev-v2_imagesubs' of git://github.com/drhill/ExoPlayer into drhill-dev-v2_imagesubs

commit edae29dff754fe4bd410fdb6fcedd60ed2266b9c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 11:35:06 2017 +0000

    Fix import order

commit 37c15e7ceeeddeadf9d8b7afba991fa074f9f94c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 20 11:33:43 2017 +0000

    Minor stylistic tweaks

commit bf120cac617278ff812a4422e1b97430b5850bce
Merge: ba0aad4 636eecf
Author: ojw28 <olly@google.com>
Date:   Mon Feb 20 11:26:32 2017 +0000

    Merge pull request #2444 from twisstosin/dev-v2
    
    Updated Gradle, Compile and Build Tools Version

commit ba0aad4b77df63a3405e46a85094c6cc9691f4d6
Merge: c3d7eec e9399f8
Author: ojw28 <olly@google.com>
Date:   Mon Feb 20 11:21:24 2017 +0000

    Merge pull request #2468 from danysantiago/dev-v2
    
    Add Flags to MP3 Extractor to force CBR Seeker

commit e9399f8684363cf0fc7e2a425513341b9d0b77f0
Author: Daniel Santiago <danyboricua91@gmail.com>
Date:   Fri Feb 17 12:44:13 2017 -0800

    Added flags to the mp3 extractor to control behavior of the extractor. Added FLAG_ENABLE_CONSTANT_BITRATE_SEEKING to let the extractor know that the CBR seeker is desired in the case where the seeker has determine the track is not seekable For example, in the case where the track has a Xing Header but no content table.

commit c3d7eecd1f64ae6cdb120cb543d4994a10c2d02c
Author: eguven <eguven@google.com>
Date:   Fri Feb 17 07:57:49 2017 -0800

    Fix ChunkExtractorWrapper.init(TrackOutput) calls with null TrackOutput after extractor initialized
    
    InitializationChunk calls init(null). When the initialization and index data is separate they need to
    be loaded separately which results to two init(null) calls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147837985

commit 14507c45036bb4057f4c3d35bb5beb790cdfee22
Author: olly <olly@google.com>
Date:   Fri Feb 17 06:51:29 2017 -0800

    Fix NPE parsing ContentProtection element
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147833328

commit bc9dfa813911a5e9ffd4309c3cfb8bfdeac3a166
Author: olly <olly@google.com>
Date:   Thu Feb 16 19:00:00 2017 -0800

    Fix build
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147796398

commit ba9a82e9823ce55bd0f1e5492556a06862657d16
Author: olly <olly@google.com>
Date:   Thu Feb 16 18:26:32 2017 -0800

    Use execute instead of submit
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147794314

commit 636eecf4e78f78323206375443934db40966d7a1
Author: twisstosin <twisstosin@outlook.com>
Date:   Thu Feb 16 21:30:37 2017 +0100

    Reverted Font Size Change

commit 4cca2f2d0a7edc4b05d94fa6c71559bfa2a910e1
Author: olly <olly@google.com>
Date:   Thu Feb 16 09:49:27 2017 -0800

    Remove unnecessary null check.
    
    Issue #2462
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147731351

commit fccaa07be3ff871fb424d077c8c5844a8782ac2f
Merge: 26f4e52 e74b729
Author: ojw28 <olly@google.com>
Date:   Thu Feb 16 17:22:25 2017 +0000

    Merge pull request #2463 from purpleblues/dev-v2
    
    Fixed a typing error

commit 26f4e528d55428d99795658014a4cc55d639c1ae
Merge: 0d468ca f8bb329
Author: ojw28 <olly@google.com>
Date:   Thu Feb 16 17:22:01 2017 +0000

    Merge pull request #2464 from jschamburger/dev-v2
    
    Make DrmSessionException constructor public to enable creating custom DrmSessionManager implementations.

commit 0d468ca7bf7382537f5540854dc268e8d1a4fa1b
Author: olly <olly@google.com>
Date:   Thu Feb 16 08:52:50 2017 -0800

    DASH: Support mspr:pro element
    
    Issue: #2386
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147725616

commit f8bb329ef2a668498262111157e90ebc91a82519
Author: Johannes Schamburger <johannes.schamburger@inovex.de>
Date:   Thu Feb 16 17:05:12 2017 +0100

    Make DrmSessionException constructor public to enable creating custom DrmSessionManager implementations.

commit e74b729952a9b3018ee63f7dc4a8320ab8578de4
Author: Sungmin Kim <purpleblues568@gmail.com>
Date:   Thu Feb 16 21:23:28 2017 +0900

    fixed a typing error

commit 65d4b1cf5c75bf6416acb4836564745f5f57048e
Author: olly <olly@google.com>
Date:   Wed Feb 15 10:33:16 2017 -0800

    Make CeaUtil robust against malformed SEI data
    
    I've also added a TODO to not even bother trying to parse CEA from
    SEI NAL units if they're fully or partially encrypted, which it's
    possible to determine in the FMP4 extractor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147613979

commit ec98bd9ea1d230c8b641c1d0dcff405b5677dfbd
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Feb 15 10:30:40 2017 -0800

    Work around broken AAC decoder EoS handling on L.
    
    SoftAAC2 would cause an exception to be thrown from
    dequeueOutputBuffer/releaseOutputBuffer after queueing an end-of-stream buffer
    for certain streams.
    
    The bug was introduced in L and fixed in L MR1, so the workaround is targeted to
    API 21.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147613659

commit d6e15b79538b39c6ddf976bf18a951394816819c
Author: olly <olly@google.com>
Date:   Wed Feb 15 10:27:26 2017 -0800

    DASH: Correctly handle empty segment indices
    
    Issue: #1865
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147613244

commit 5c571e6e9d24086abede757f5be5d275cd67a515
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Feb 15 09:58:44 2017 -0800

    Handle H.265/HEVC SEI NAL units in FragmentedMp4Extractor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147609330

commit fd6012a72722a42c78cf0742c3986feaf76a8829
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Feb 14 17:04:48 2017 -0800

    Remove outputBuffer assertion in ResamplingBufferProcessor.
    
    The outputBuffer is not necessarily empty after a flush, so the assertion could
    fail in normal usage. The assertion can just be removed as the output buffer is
    rewritten in full on every call to handleBuffer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147541016

commit 3691454b82506e23d0663e84becd6faa1265c772
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Feb 14 05:22:09 2017 -0800

    Fix resuming after error for CEA-608 SEI in fMP4.
    
    Also test SEI parsing in FragmentedMp4ExtractorTest.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147460699

commit 7625c1b862db7a0dc860832214a2beba79c22c17
Author: olly <olly@google.com>
Date:   Mon Feb 13 13:27:17 2017 -0800

    Remove unnecessary configuration parameter.
    
    - It's always fine to prefer the manifest drm init data. In
      DASH we always do this anyway. In SS the manifest and sample
      formats are identical.
    - Optimized the case where the manifest and sample formats are
      identical by avoiding the format copy.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147385282

commit 8cb3b6ed07ba95cd2f9297b9c351d02c090e9dda
Author: olly <olly@google.com>
Date:   Mon Feb 13 10:03:50 2017 -0800

    SmoothStreaming: Replace variant bitrate/start_time placeholders
    
    Issue: #2447
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147358615

commit 0316ab80dfbab737283c6a38b4f7dfd98d1747e1
Author: olly <olly@google.com>
Date:   Mon Feb 13 09:35:24 2017 -0800

    Fix broken Javadoc
    
    Issue: #2433
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147355544

commit 3bc320faaf2991913a838b881bf59069543e351e
Author: olly <olly@google.com>
Date:   Mon Feb 13 02:44:00 2017 -0800

    Fix misleading method names.
    
    Issue: #2414
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147325759

commit 5bfad5d99b86a43fe70357b12fbe94aa185906f0
Author: cdrolle <cdrolle@google.com>
Date:   Sun Feb 12 19:22:20 2017 -0800

    Added sample mime type to the track list descriptions.
    
    The addition of sample mime types can make it easier to identify tracks in the case of mixed media (e.g. CEA-608 and CEA-708 caption tracks). This change appends the mime type to the end of the track description for all media types.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147303187

commit f7fbbe993e90ffe60c6a3ec151529bd32bf8bd55
Author: eguven <eguven@google.com>
Date:   Fri Feb 10 09:49:15 2017 -0800

    Fix ArrayIndexOutOfBoundsException while reading SEI NAL unit
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147165453

commit ef475eb9c9c8c1224043a61504f296c39db38778
Author: cdrolle <cdrolle@google.com>
Date:   Thu Feb 9 12:31:16 2017 -0800

    Fixed potential bug in which old paint-on captions could be drawn overtop by pop-on captions as they weren't being cleared properly.
    
    This fix was taken from YouTube's Cea608Decoder ([]
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147066662

commit 9e07cf7c73ad70ec9d5c2fea56c58ef8871d2142
Author: maxjulian <maxjulian@google.com>
Date:   Thu Feb 9 11:41:20 2017 -0800

    Update exoplayer 1 and 2 to support stereo mesh layout.
    
    Reference spec:
    https://github.com/google/spatial-media/blob/master/docs/spherical-video-v2-rfc.md#semantics
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=147060701

commit ef41303a04077dd323014ec3295950490a4ba635
Author: eguven <eguven@google.com>
Date:   Wed Feb 8 06:57:39 2017 -0800

    Keep FlacStreamInfo unobfuscated as it is accessed from native methods
    
    Issue: #2427
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146905629

commit de46ed7fb90f9ec421c77e5888bb8ae4572bff83
Author: cdrolle <cdrolle@google.com>
Date:   Tue Feb 7 07:15:39 2017 -0800

    Fixed an issue with Cea608Decoder in which tab commands were not being used correctly.
    
    Tab commands were being used cumulatively (i.e. moving the cursor farther and farther over) resulting in the text eventually trying to write beyond the bounds of the screen and throwing an exception.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146783284

commit 7c8a3d006d7192bc69084972396327409c28ee94
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Feb 3 09:01:31 2017 -0800

    Flexibilize mp4 extensions detection for HLS chunks
    
    This CL adds support  mp4 extensions of the form .m4_.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146479870

commit d3f4da749c8313b78d0526cacdf4ad593a774506
Author: olly <olly@google.com>
Date:   Fri Feb 3 07:06:58 2017 -0800

    Propagate track type through ExtractorOutput.track
    
    This allows binding by track type in ChunkExtractorWrapper, which
    allows the EMSG and 608 tracks to be enabled on FragmentedMp4Extractor
    in DefaultDashChunkSource. ChunkExtractorWrapper currently binds these
    to DummyTrackOutputs.
    
    Note: I wanted to pass the mimeType instead, since it's a more specific,
    but unfortunately there's at least one place where it's not known at the
    point of invoking track() (FlvExtractor).
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146471082

commit ebc5e327e679c94ed46e17d06b63514227df79cc
Author: eguven <eguven@google.com>
Date:   Fri Feb 3 06:45:17 2017 -0800

    Fix FLAC extension native part compilation issues
    
    Issue: #2352
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146469547

commit f2d3af7deaf914957cf30f36b2e01821b609cac9
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Feb 3 05:50:22 2017 -0800

    Delete dead code and fix javadocs from hls
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146466389

commit c82319332fc6acb03a041fa2faf2b1b9486ea1b7
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Feb 2 11:53:28 2017 -0800

    Omit clipped samples when applying edits for audio tracks.
    
    Issue: #2408
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146389955

commit 537a3ab5be3fcf285b17505ac64c28b5f68c8fbb
Author: cdrolle <cdrolle@google.com>
Date:   Thu Feb 2 09:40:28 2017 -0800

    Fixed 2 issues with Cea708Decoder.
    
    The first issue occurs when we attempt to process a DtvCcPacket that hasn't been completely filled. In this case we attempted to extract data beyond the length of the packet, instead of dropping the packet as we should have. The other issue occurs when we encountered an invalid cc_data_pkt. In that case we were finalizing the entire DtvCcPacket, instead of just ignoring that particular cc_data_pkt as we should have.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146373074

commit 0402191ace91a783010370249ca017b634518bc0
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Feb 1 08:01:34 2017 -0800

    Make SeiReader injectable to H26xReaders
    
    This CL is a no-op refactor but allows defining the outputted
    channels through the TsPayloadReaderFactory.
    
    Issue:#2161
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146243736

commit ee3c5f875fe4b09346084b9648f9896cbb7d5329
Author: olly <olly@google.com>
Date:   Wed Feb 1 08:00:48 2017 -0800

    Simplify chunk package ahead of EMSG/608 piping
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146243681

commit 025a67cae950f4a8d11b2648b570e2e458bb90e8
Author: eguven <eguven@google.com>
Date:   Wed Feb 1 02:53:32 2017 -0800

    Enable buffering for CacheDataSink by default
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146221487

commit 74acbe04e35a029b570b2476fbee4135febf110e
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Feb 1 01:25:34 2017 -0800

    Pass an array of BufferProcessors to the AudioTrack.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146215966

commit feeec77407f8c5878ce4294039520d788be45c9d
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jan 31 12:33:43 2017 -0800

    Add support for multiple programs in a single TS
    
    * Prevents calling endTracks() before all PMTs have been
      processed.
    * Adds a unique ID to the format of each track. This allows
      the track selector to identify which track belongs to
      each program. The format of each id is
      "<program number>/<track output id>".
    
    Note: This CL will break malformed TS files whose PAT
    declares more PMTs than it actually contains, which
    previously were supported. This does not apply for HLS
    mode.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146151642

commit 4301606200d63462a109a94233b304839bbcc8b0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jan 31 09:29:09 2017 -0800

    Add a BufferProcessor for resampling.
    
    This initial version of the BufferProcessor interface assumes that buffers are
    handled in their entirety on each invocation.
    
    Move PCM resampling out of AudioTrack into a BufferProcessor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146128411

commit 3edeec2495d9ca2c7f60b9edb212ecf5e6b40103
Author: eguven <eguven@google.com>
Date:   Tue Jan 31 09:28:16 2017 -0800

    Document passing null cacheWriteDataSink to CacheDataSource constructor
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146128328

commit 7c1b2beb84f6f706490b3e7a241dce87d22ed370
Author: olly <olly@google.com>
Date:   Tue Jan 31 08:13:15 2017 -0800

    Support dyanmically setting key request headers
    
    Issue: #1924
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146120465

commit af98ca661a43c3ef4ee52e57e5d592549e406eb6
Author: eguven <eguven@google.com>
Date:   Tue Jan 31 07:47:28 2017 -0800

    Refactor DashTest class
    
    Moved DashHostedTest to top level classes. Added DashHostedTest.Builder. Move widevine offline tests to separate class with custom setUp and tearDown methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146118310

commit 8f482cb2ed99b49826b2140aaa53b270422560ed
Author: olly <olly@google.com>
Date:   Tue Jan 31 07:45:03 2017 -0800

    Fixing some Javadoc errors
    
    - Cea708 Javadoc references private internals with @link. Doc
      about device accessibility settings doesn't relate to the
      decoder, either.
    - Creator Javadoc unnecessary.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146118092

commit 87e790f44d842b04bba9e107ee4c9327bf04b916
Author: cdrolle <cdrolle@google.com>
Date:   Mon Jan 30 12:55:35 2017 -0800

    Fixed issue with TextRenderer and RawCC 608/708 captions in which all the captions prior to the playback position would be rendered in [] succession when a VOD stream starts.
    
    Instead of clearing the DECODE_ONLY flag for all input buffers in TextRenderer (i.e. for all caption types), we now only clear it on the output buffer in SimpleSubtitleDecoder. The number if input buffers in CeaDecoder has also been increased to reduce the delay before captions appear for playback sessions that start far ahead into the content.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146028680

commit 460dc2561a07eca9e5bffaf334a0c9d6858581e9
Author: twisstosin <twisstosin@outlook.com>
Date:   Tue Feb 14 19:23:08 2017 +0100

    Changed Text Size

commit 933b7faadd97d57c0b1de625c2600aa0caa2347a
Author: twisstosin <twisstosin@outlook.com>
Date:   Sun Feb 12 23:06:51 2017 +0100

    Updated Gradle, Compile and Build Tools Version

commit 25a966dc2300161448fa74dee5ee98322ff65604
Merge: 0cacd38 6a844eb
Author: ojw28 <olly@google.com>
Date:   Tue Jan 31 14:04:01 2017 +0000

    Merge pull request #2402 from google/dev-v2
    
    r2.2.0

commit 6a844ebce434aedb08879a2fca6b92fe76a085f8
Merge: 2e7f9fb 0cacd38
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 31 13:11:30 2017 +0000

    Merge branch 'release-v2' into dev-v2

commit 2e7f9fb6cbc12f0ac8b09e289cddc9bf3d9d4713
Author: cblay <cblay@google.com>
Date:   Mon Jan 30 11:04:29 2017 -0800

    Don't setContentLength() in CacheDataSource if the current request ignores cache.
    
    Otherwise an empty cache span is created.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146014081

commit a7dd0f7609150f0c4a77424501d51ee55bb1509c
Merge: 4b8a657 6becba8
Author: ojw28 <olly@google.com>
Date:   Mon Jan 30 18:44:47 2017 +0000

    Merge pull request #2326 from devint1/alac-dev
    
    Apple Lossless (ALAC) support

commit 4b8a6572fd3dac9ead1b7b016fc07893fb065f0d
Author: olly <olly@google.com>
Date:   Mon Jan 30 09:32:57 2017 -0800

    Fix resume position if user seeks whilst in error state
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=146001900

commit 8ddfc12f05a2a0d0d5547dcd77a5b5cb0a572b6c
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 30 09:00:28 2017 -0800

    Avoid resetting the tracks on BLWE media source reinitialization
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145998158

commit 615b707b1680c09185b23c3045413c629bf6c4df
Author: olly <olly@google.com>
Date:   Mon Jan 30 08:20:29 2017 -0800

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145994313

commit e6bbd397d55f46a95bfdacdc7051ee6ac992ff4d
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 30 07:47:31 2017 -0800

    Add support for HLS's #EXT-X-PLAYLIST-TYPE
    
    Issue:#805
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145991145

commit 7ee8567f4a80b2ec9018cb0761fca41ac9ff9c9e
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 30 07:00:28 2017 -0800

    Fix demo app to avoid seeking if resume position is clear
    
    This fixed the resume live window issue by modifying the demo app.
    
    Issue:#2344
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145987470

commit 9a90795041c20aa40c99de30fa188788b3c65f2a
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 30 05:38:43 2017 -0800

    Resume from playback position by default when media source changes
    
    Issue:#2369
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145982198

commit c49d142981ae1498840d6cd2b4f5be4461f037a3
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jan 26 08:55:42 2017 -0800

    Prevent old playlist snapshots from being used on live HLS streams
    
    This aims to replace InvalidCodeResponse's with BLWE's caused by trying to
    load chunks that have been removed from the server.
    
    Issue:#2344
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145679171

commit 6becba8c42ae87b715b822a01781eed6301ca2fb
Author: Devin Tuchsen <devin.tuchsen@gmail.com>
Date:   Sat Jan 28 15:15:41 2017 -0600

    Only use ALAC workaround if sample rate is 0
    
    This prevents the workaround from occuring once FFmpeg has the bug
    patched.

commit f7b2452d46365f092f83102a543d23609d85b0fc
Author: Devin Tuchsen <devin.tuchsen@gmail.com>
Date:   Sun Jan 22 13:41:29 2017 -0600

    Reference ALAC sample rate bug

commit 25c18ca1b461870a0aaad15c339a522a38226627
Author: olly <olly@google.com>
Date:   Wed Jan 25 12:41:38 2017 -0800

    Re-add playback tests to Moe migration
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145583193

commit ed69749957487fe5208f9cfe7eaa0e4b1eaed073
Author: olly <olly@google.com>
Date:   Wed Jan 25 11:09:10 2017 -0800

    Update logo assets + shorten name
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145570392

commit 63e6bf5cf2d2be41eff2725ce241f9f523beaee6
Author: olly <olly@google.com>
Date:   Wed Jan 25 11:06:56 2017 -0800

    Consolidate UnrecognizedInputFormatException
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145570097

commit 6f5c7b38a7077d81fe0fd9ff216ce8b5dd34ad09
Author: olly <olly@google.com>
Date:   Wed Jan 25 10:11:58 2017 -0800

    Wait for first sync frame in MediaCodecRenderer
    
    For the video renderer, it's not true that the source always
    provides from a sync frame specifically in the case where
    the surface has been replaced on the renderer. In this case
    the source doesn't know that it should be providing from a
    sync frame.
    
    Issue: #2093
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145562222

commit 98db14e7e5e28ef409e23b0f8977727d2263eee6
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jan 25 09:00:50 2017 -0800

    Fix some documentation nits in AudioTrack.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145554504

commit e9ab71a28060e152e2d900956b155a69dfa619be
Author: cdrolle <cdrolle@google.com>
Date:   Wed Jan 25 08:36:36 2017 -0800

    Modified CeaDecoder and CeaSubtitle so that it's correctly setting the subsampleOffset and making proper use of it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145552166

commit 0a8dc41632fa4c95ff78bd33ccb06b586b09bbdb
Author: olly <olly@google.com>
Date:   Wed Jan 25 06:56:26 2017 -0800

    Set max resolution from codec capabilities for ABR where resolutions are unknown
    
    Issue: #2096
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145542983

commit 953c6855ec8cae75d962fadd56ea7812d4c80754
Author: olly <olly@google.com>
Date:   Wed Jan 25 05:54:30 2017 -0800

    FMP4 EMSG/CEA608 output bug fix + tweaks
    
    - Fix to use different track ids for EMSG + CEA608, so they can
      both be enabled at once.
    - Tweaked extractor to output formats prior to endTracks() when
      parsing the initial moov box. This makes it easier to handle
      multiple tracks through the chunk package. It may or may not
      be made a requirement (it's already true for the MKV extractor).
    
    Issue: #2362
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145538757

commit 8970e80b25ad0e91c44d7089d46185829da896b6
Author: eguven <eguven@google.com>
Date:   Wed Jan 25 04:39:12 2017 -0800

    Don't use the returned key set id if the request wasn't for an offline license key
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145533961

commit 0e992370752e8570c330f70d83d5dd34a09e4228
Author: zhihuichen <zhihuichen@google.com>
Date:   Tue Jan 24 13:14:46 2017 -0800

    Allow duplicate tracks in WebM/MKV extractor
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145457836

commit c01c2c34f731cf96baf1022e6cdbb68a9f0aca40
Author: olly <olly@google.com>
Date:   Tue Jan 24 04:41:43 2017 -0800

    Store full accessibility descriptors in parsed DASH manifest
    
    Issue: #2362
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145402640

commit 4efdd14c659c151d5fddadb0280c26f1e69c2800
Author: olly <olly@google.com>
Date:   Tue Jan 24 04:24:29 2017 -0800

    Allow FMP4 extractor to output CEA-608
    
    Issue: #2362
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145401668

commit b1ec5e3a2505140f3189d130993398cdc95ea557
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 23 09:30:54 2017 -0800

    Move TimestampAdjuster from extractor to util
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145295850

commit 497651c7b9b70ea4d84568506b88a9c682845fe6
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 23 08:30:39 2017 -0800

    Ignore file extension for HLS Subtitle Renditions
    
    According to the spec, subtitle renditions must be Webvtt media
    segments.
    
    Issue:#2025
    Issue:#2355
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145289266

commit 18d7cdf39f4d13270a23d06a4a51b24b6ec05fdb
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 23 07:01:26 2017 -0800

    Add pts adjustment in SpliceInfoDecoder
    
    This allows the user to interpret PTSs in the playback timebase.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145280921

commit 5debf5a14a95016f955f47658d4bc6390a6c2381
Author: olly <olly@google.com>
Date:   Mon Jan 23 04:19:28 2017 -0800

    Use bitrate as fixed track selection tie breaker
    
    If we don't have resolutions (and therefore cannot determine
    pixel counts) then use bitrate as a tie breaker instead. Also
    use pixel count as a tie breaker if pixel counts are known
    but equal. Streams with known pixel counts will always be
    preferred over streams without.
    
    Issue: #2343
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145269968

commit 9ac0add4be89c91b46acce28e579a08249ce67d5
Author: eguven <eguven@google.com>
Date:   Mon Jan 23 03:38:33 2017 -0800

    Add a BUILD file with mobile harness target to playbacktests/src/androidTest folder
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145267137

commit d303db975ed770528e5b51a243c5023a54c8ec6e
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 23 03:13:35 2017 -0800

    Re-initialize the DemoApp player on BLWE
    
    This CL shows a de facto way to solve BLWEs until an in-player
    solution is implemented.
    
    Issue:#1782
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145265895

commit 24724158b1622955c3af2cfcefeb19248deced1e
Author: Devin Tuchsen <devin.tuchsen@gmail.com>
Date:   Sun Jan 22 13:05:00 2017 -0600

    Use ParseableByteArray to get ALAC sample rate

commit 440aeea66ce5987bdbf69ccf7455759d81f0da91
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Sun Jan 22 17:53:14 2017 +0000

    working but still with stateful decoder. Sample subtitle <span> encoder but this doesn't seem to be how webvtt does it so not being used.

commit 141568ab0e2a4b18620cfcee46dd649dbc9bb1fa
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Sun Jan 22 15:13:29 2017 +0000

    better merge

commit 6ec840cc804bb759233a66757bbe32ced8d91831
Merge: 94a3640 55ca323
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Sun Jan 22 15:07:03 2017 +0000

    Merge remote-tracking branch 'upstream/dev-v2' into dev-v2

commit 94a36402f1fbaed8207115db64715f85c03b9f74
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Sun Jan 22 15:02:40 2017 +0000

    possible conflict resolution

commit 55ca323cee1906e499e65acfdbb32a027f1e1376
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 20 20:50:02 2017 +0000

    Add upstream.crypto package (and friends).

commit 52d47aa244f677bf32ba8c3b7c284f61e44b66db
Author: olly <olly@google.com>
Date:   Fri Jan 20 11:17:37 2017 -0800

    Fix possible track selection NPE
    
    If no tracks are selected at the start of playback, TrackSelectorResult
    isEquivalent(null) returned true, meaning we were keeping the old result
    (i.e. null), which we then tried to de-reference.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145105702

commit 63604493b41d232602eca3f658dacd4d6690ec9e
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jan 20 08:40:37 2017 -0800

    Fix memory leak in HlsMediaChunk's
    
    Issue:#2319
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145089668

commit 26b303a4496b89a96aeea7e758174b7c80aa0f9e
Author: olly <olly@google.com>
Date:   Fri Jan 20 07:31:51 2017 -0800

    Pull assertion and layer of indirection out from ChunkExtractorWrapper
    
    It should be possible to remove ChunkExtractorWrapper from the track
    output side as well (currently all extractor output is funneled via
    ChunkExtractorWrapper just so it can adjust the format, which is kind
    of unnecessary).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145083620

commit 5407c98526f6ce96c9725577cc56f8c827349717
Author: tap-prod <tap-prod@google.com>
Date:   Fri Jan 20 06:10:32 2017 -0800

    Automated rollback
    
    *** Original change description ***
    
    Pull assertion and layer of indirection out from ChunkExtractorWrapper
    
    It should be possible to remove ChunkExtractorWrapper from the track
    output side as well (currently all extractor output is funneled via
    ChunkExtractorWrapper just so it can adjust the format, which is kind
    of unnecessary).
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145078094

commit 6e18c97c209f6635813787f028a6335a04811671
Author: olly <olly@google.com>
Date:   Fri Jan 20 05:55:41 2017 -0800

    Pull assertion and layer of indirection out from ChunkExtractorWrapper
    
    It should be possible to remove ChunkExtractorWrapper from the track
    output side as well (currently all extractor output is funneled via
    ChunkExtractorWrapper just so it can adjust the format, which is kind
    of unnecessary).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=145076891

commit 7abc34c6ae29e1a3f349563a2a00bd30ea3e5fa4
Author: olly <olly@google.com>
Date:   Thu Jan 19 13:14:03 2017 -0800

    Respect decode-only flag in MetadataRenderer
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144999973

commit 9617986538dc9ec637efcdaaf14af5369ce3b2c6
Author: olly <olly@google.com>
Date:   Thu Jan 19 13:11:44 2017 -0800

    Remove redundant MetadataDecoder.canDecode method
    
    This is no longer needed as MetadataDecoderFactory
    figures out which decoder should be used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144999613

commit 641597d7086a16f9ebcb7e69094c04990c1108bc
Author: olly <olly@google.com>
Date:   Thu Jan 19 13:09:05 2017 -0800

    Add a flag to enable EMSG output from FMP4 extractor
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144999302

commit e3b3c8b69ca641ac4d8827ca8b65eb594692a158
Author: olly <olly@google.com>
Date:   Thu Jan 19 13:05:07 2017 -0800

    Display EMSG metadata events in EventLogger
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144998826

commit 430d8e8a7a376545649e0de5f4aff4d2cc8c1d88
Author: olly <olly@google.com>
Date:   Thu Jan 19 09:14:50 2017 -0800

    Rename SingleTrackMetadataOutput ahead of real metadata support
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144969838

commit ae01c1a6fd01302941677d8233e2afde601389d2
Author: olly <olly@google.com>
Date:   Thu Jan 19 08:59:42 2017 -0800

    Move inband event streams to Representation
    
    This is more consistent with our handling of DRM init data,
    and is more correct. It'll be up to whoever's using the
    manifest to look one layer deeper and figure out what event
    streams are defined on all representations, if they wish to
    do so.
    
    Issue #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144968183

commit d9be650b3be2a7d8c6c61af43f04fe2d91de60e3
Author: olly <olly@google.com>
Date:   Thu Jan 19 06:45:31 2017 -0800

    DASH: Fix propagation of language from manifest
    
    Issue: #2335
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144956177

commit 4b957cce47e0a7eab92f4f02635a31c5110984bd
Author: eguven <eguven@google.com>
Date:   Wed Jan 18 09:28:17 2017 -0800

    Fix streaming license renew error
    
    When the first streaming license request response provided to mediaDrm it might return an empty array instead of null.
    This was set to offlineLicenseKeySetId which made the work like there is a valid offline license.
    Simplified the code and made it to set offlineLicenseKeySetId only if there is sensible data in keySetId.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144843144

commit 51f96374d46110438ec6ca2e0ba9bac4061299bd
Author: olly <olly@google.com>
Date:   Wed Jan 18 06:11:15 2017 -0800

    Make headers consisting across build.gradle files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144826116

commit bc4dc591f560f9c829eb1dd07a8ca62e8af452aa
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jan 18 03:22:04 2017 -0800

    Fix some style nits in ID3 chapter support.
    
    Issue: #2316
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144815010

commit 877c7f4e30ae23401d5856ff2e41a44ea6413b98
Author: olly <olly@google.com>
Date:   Wed Jan 18 02:51:14 2017 -0800

    Some misc file rearrangement.
    
    - Move .graffle files out of third_party
    - Add logo .ai file
    - Remove logo .svg files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144812776

commit 18a24a1fde68753737030bac9c7d56e6e7c292e4
Author: cdrolle <cdrolle@google.com>
Date:   Tue Jan 17 10:35:18 2017 -0800

    Added the CEA-708 support to the open-source project.
    
    Issue: #1807
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144726542

commit 1ffe7753c644a166cd6395e4b63a3394f6545943
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 17:37:33 2017 +0000

    Another ID3 bug fix

commit f1e3d3f244ff90db6ea53a168c99fb710860e722
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 17:21:10 2017 +0000

    Enable tunneling end-to-end
    
    - Tunneling can be enabled by calling:
      trackSelector.setTunnelingAudioSessionId(
          C.generateAudioSessionIdV21(this));
    
    - If enabled, tunneling is automatically used when the renderers
      and track selection combination support it. Tunneling is
      automatically turned on and off through playlists if the support
      changes.
    
    Issue: #1688

commit c828d9b0bf13e430b442a4a0bf801fe7b6e808b5
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 15:49:51 2017 +0000

    Some ID3 bug fixes

commit 48099ee52eeaa871ddc9c65d2898790b8e35a728
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 15:33:35 2017 +0000

    Fix comments

commit 27b8c31b85ab89cd74d6010e73a06313e7330a81
Merge: 7f967f3 5aff31c
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 15:29:30 2017 +0000

    Merge branch 'geekygecko-dev-v2' into dev-v2

commit 5aff31c0615dd05cabb4a92b17d658aeff742da7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 15:29:07 2017 +0000

    Further improve ID3 parsing

commit 31602af3e6ccbfd9d26f3234cafb3274e1d20026
Merge: 7f967f3 f6ecadd
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 17 13:53:50 2017 +0000

    Merge branch 'dev-v2' of git://github.com/geekygecko/ExoPlayer into geekygecko-dev-v2

commit 7f967f305718bc2c9ee679fdd7d014eccef0356b
Author: olly <olly@google.com>
Date:   Tue Jan 17 04:06:14 2017 -0800

    DASH: Parse Role elements to select default audio/text tracks
    
    Issue: #2058
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144693705

commit 6e481178eaee66fca53cd98452b0153845083c1b
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jan 17 03:58:15 2017 -0800

    Track HLS discontinuities when playlist does not declare sequence
    
    This is an initial version that does not handle cross-playlists
    adjustment in an ideal way.
    
    Issue:#1789
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144692969

commit 7d7a15919556a3e6b7a0c3c61c532ffd7f8571e0
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jan 17 03:57:51 2017 -0800

    Provide sample timestamps and subsample offset for Splice info
    
    This will allow recreating timestamp adjustment on the decoding side.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144692956

commit 0e0b23f11efae99cf380ea064567df80d5f5582e
Author: olly <olly@google.com>
Date:   Tue Jan 17 03:08:04 2017 -0800

    Update getTrackType for completeness
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144690284

commit 79a08991241340860ee40fd8155c87eb301daa07
Author: olly <olly@google.com>
Date:   Mon Jan 16 07:59:32 2017 -0800

    Always re-send format if sample buffer is null
    
    Also clear the playingPeriodHolder in the case the renderers
    are being disabled. This is required to ensure that
    setPlayingPeriodHolder isn't turned into a no-op, which will
    break the seek.
    
    Issue: #2330
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144635220

commit f6ecaddc881b6b7765cc19a93507d17e4f810443
Author: Philip Simpson <philip@shiftyjelly.com>
Date:   Tue Jan 17 12:03:18 2017 +1030

    Improved ID3 chapter parsing code from feedback given.

commit 5153e9e977e1425558a4135859c0f17621d534fd
Author: Philip Simpson <philip@shiftyjelly.com>
Date:   Tue Jan 17 12:00:48 2017 +1030

    Improved ID3 chapter parsing code from feedback given.

commit 60a3eda1e02e53b8ef8b977b70da4168695541fa
Author: olly <olly@google.com>
Date:   Mon Jan 16 03:29:56 2017 -0800

    Support tunneling in video renderer
    
    At this point the renderers all have TODOs in enable(),
    and turning on tunneling is reduced to the problem of
    propagating a tunneling ID to these points.
    
    Issue: #1688
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144619393

commit 5742c877558693fc6cceb99b9166d08f0dda04ec
Merge: 41c4295 24a0061
Author: ojw28 <olly@google.com>
Date:   Mon Jan 16 09:44:59 2017 +0000

    Merge pull request #2327 from pipelka/audio-seek-fix
    
    reconfigure audiotrack on format change

commit f2f1058066af4f9160ad56a9724288afaa350a16
Author: Philip Simpson <philip@shiftyjelly.com>
Date:   Mon Jan 16 17:40:02 2017 +1030

    Added ID3 chapter support.

commit 41c4295aeea33e2f1bb1fb5347742217405f9381
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Mon Jan 16 00:20:51 2017 +0000

    Fix build break + cleanup

commit a418b132d901ef48a9383cf9c461e22c862a916b
Merge: bd744fc 2214a4c
Author: ojw28 <olly@google.com>
Date:   Mon Jan 16 00:02:44 2017 +0000

    Merge pull request #2318 from WeiChungChang/far_seek_improvement
    
    Improve far seek performance of chunkSampleStream

commit bd744fc50855ce74b94872e4af7ebf4f0ff9263c
Merge: 418cd9e 28e221f
Author: ojw28 <olly@google.com>
Date:   Mon Jan 16 00:01:13 2017 +0000

    Merge pull request #2314 from meteoorkip/vector-drawables
    
    Fix vector drawable usage on API level 21 or above

commit 418cd9e7e3c6b983a887288fe5f1eb569b0c4c43
Author: eguven <eguven@google.com>
Date:   Fri Jan 13 09:01:59 2017 -0800

    Make DefaultLoadControl use PriorityTaskManager if one is given
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144448491

commit 2cf8553049888d4fac70fba3777fb8a35cd8f5e9
Author: Romain Caire <romain.caire@blade-group.com>
Date:   Sat Jan 14 14:47:21 2017 +0100

    opus: use fixed max size in Opus decoding as per documentation: If this is less than the maximum packet duration (120 ms; 5760 for 48kHz), this function will not be capable of decoding some packets.

commit 24a0061caacc83685939441d4a956f140aee2ed4
Author: Alexander Pipelka <alexander.pipelka@gmail.com>
Date:   Sat Jan 14 12:14:37 2017 +0100

    reconfigure audiotrack on format change
    
    under certain circumstances (e.g. seek to a position where the input format
    changed) the audio track needs a reconfigure even if there aren't any
    pending buffers

commit 2214a4c152fab862c928875f8265e77676d3652b
Author: WeiChungChang <r97922153@gmail.com>
Date:   Sat Jan 14 10:22:27 2017 +0800

    'refine_to_make_flow_simpler'

commit 30c59c7a3f93387bbf2edd66a2089d54705dddf8
Author: Devin Tuchsen <devin.tuchsen@gmail.com>
Date:   Fri Jan 13 19:45:36 2017 -0600

    Apple Lossless (ALAC) support

commit 5a16aee2c9c5ab73626a92da01c25bad03b8f969
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 13 08:39:30 2017 -0800

    Use stereo for mono audio passthrough on fugu.
    
    Also backport the Shield workaround to v1.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144446498

commit 270f68a95e5fb570cce0cfeeb09f3fb89076e471
Author: olly <olly@google.com>
Date:   Fri Jan 13 08:11:08 2017 -0800

    Add convenience methods to query current window
    
    - Support querying whether the current window is dynamic
      and seekable. The new methods are similar to getDuration,
      which is also a convenience method for the current window.
    - Improve demo app to restore positions in VOD items within
      playlists where the last item is live. Also restore the
      position within the window for live items unless the player
      failed with BehindLiveWindowException.
    
    Issue: #2320
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144443898

commit ca7febe442797c0c07b2b5db2be3686f255c3c7f
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 13 08:02:59 2017 -0800

    Remove unused local variable in AudioTrack.java.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144443010

commit 28e117d25fb211b18a815b961135b78e7a18abdb
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jan 13 06:07:04 2017 -0800

    Add support for #EXT-X-START tag
    
    This overrides the start position relative to the window.
    
    Issue:#1544
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144434903

commit 63123f455c405d3828eba67bd5db7b4375175d3d
Author: eguven <eguven@google.com>
Date:   Fri Jan 13 05:03:00 2017 -0800

    Add SimpleCache tests for encrypted index file
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144431191

commit 5f4d6506e0918405324dea20664a64485208ebe4
Author: eguven <eguven@google.com>
Date:   Fri Jan 13 04:46:18 2017 -0800

    Add argument checks and some javadoc to CachedContentIndex
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144430372

commit 0c53a4e9131b0c16413badedad24a4b0d05e29a4
Author: olly <olly@google.com>
Date:   Fri Jan 13 04:16:45 2017 -0800

    Add TrackSelectorResult
    
    This class can accommodate extra information that may potentially
    be specified by TrackSelectors in the future (e.g. configuration
    for renderers). Even if we don't do this, it's cleaner to have a
    proper class and an info field to refer to, as opposed to using a
    Pair.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144428963

commit 060f2a5d6f97185d9a21cf2bb3735293d9219a8a
Author: eguven <eguven@google.com>
Date:   Fri Jan 13 03:47:06 2017 -0800

    Remove unnecessary parameter and local variables
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144427132

commit f194df114967e7f2a1dd42bd54d6a060b436dc2e
Author: eguven <eguven@google.com>
Date:   Fri Jan 13 03:00:10 2017 -0800

    Close InputStream after read
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144424329

commit 1eede5d5bb9c0271592b05dbd0db320214d09b18
Author: olly <olly@google.com>
Date:   Thu Jan 12 11:38:42 2017 -0800

    Fix gradle/proguard setup
    
    - Add proguard rules for libraries/extensions into .aar files
    - Add proguard rules to retain CEA608/708 decoder constructors
    - Remove lots of default config from gradle files
    - Remove disabling of abort on lint error
    - Enable optimizations on release builds of demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144350233

commit 264ba8cfcff8452bbcb4a6761f816e179bba604b
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jan 12 09:28:20 2017 -0800

    Change MetadataDecoder interface to receive a MetadataInputBuffer
    
    This allows passing a subsampleOffsetUs as in Text decoding.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144334172

commit 4a6a8553e901af72c35edc0fa39f4ffca31ffc9d
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jan 12 09:27:11 2017 -0800

    Check #EXTM3U header is present in HLS playlists
    
    Issue:#2301
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144334062

commit 706a6b83a94ff6adec1ca29627ff537f0194d11a
Author: cdrolle <cdrolle@google.com>
Date:   Thu Jan 12 08:45:59 2017 -0800

    Removed the direct-referencing of the Cea608Decoder and Cea708Decoder classes from SubtitleDecoderFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144329795

commit e125ed705e0f9e33f54a6e397a2a443abedff0f7
Author: olly <olly@google.com>
Date:   Thu Jan 12 05:46:08 2017 -0800

    Report tunneling support via RendererCapabilities API
    
    Also revert ability to query for a decoder that explicitly
    supports tunneling, since in the new design we'll just be
    querying the first decoder provided by the MediaCodecSelector
    and then reporting what it supports. This is in line with
    what we do when reporting support for adaptive switching.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144315746

commit 5752524442232ff9b4e86adccbf8eef5d7017842
Author: mdoucleff <mdoucleff@google.com>
Date:   Wed Jan 11 13:03:50 2017 -0800

    Allow extension of SlidingPercentile
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144240101

commit cd42434719bb79017be975d9048797267ee4ec4a
Author: olly <olly@google.com>
Date:   Wed Jan 11 10:45:29 2017 -0800

    Plumbing to enable tunneling on AudioTrack from renderers
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144223539

commit 3547c9034e563828fcd72e2a5e752effe0ace5de
Author: olly <olly@google.com>
Date:   Wed Jan 11 10:12:42 2017 -0800

    Report audio decoder adaptation support correctly
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144219518

commit 2906a2ea0924243a414497753644dc4c5e026df4
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jan 11 07:02:27 2017 -0800

    Simplify AudioTrack.handleBuffer's return value.
    
    Position discontinuities are notified via AudioTrack.Listener.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144202048

commit 444811c0105673bd04c46afce40484898b661a2f
Author: olly <olly@google.com>
Date:   Wed Jan 11 02:28:03 2017 -0800

    Don't overflow when dealing with large segment numbers
    
    Issue: #2311
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144182445

commit ce03b8c246dec3c4728848b21d9adb337f24a5c2
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jan 10 04:01:35 2017 -0800

    Move AudioTrack initialization into handleBuffer.
    
    Move initialization code from the audio renderers into handleBuffer. The audio
    session id and tunneling enabled state can be altered using new setters.
    
    This change is not intended to change the behavior of the audio renderers.
    Before this change, the AudioTrack would always be reinitialized by the
    renderers before calling handleBuffer.
    
    Add a protected onAudioTrackUnderrun method for custom renderers that want to
    implement custom handling of underruns.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144067149

commit 5c89bbedb74ab8b5d7d1d5217f83a271accfd163
Author: eguven <eguven@google.com>
Date:   Tue Jan 10 02:53:21 2017 -0800

    Fix leftover bytes in cached content index file
    
    Extra calls to CipherOutputStream.close() causes each time extra 16 bytes written to the
    underlying OutputStream. Prevented close() is called more than once and also discarded any
    data in ReusableBufferedOutputStream buffer on reset().
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144063120

commit 121486738bf8e1ddde60290e46453926ab9f6937
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Fri Jan 13 08:48:53 2017 +0000

    10* was an experiment, not wanted.

commit ff64d2b382e68327db69c4e6df4e82be0c1884bc
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Fri Jan 13 08:04:23 2017 +0000

    move Matroska specific code back to the Matroska extractor

commit cb0394b9cf469b5ac0092ab178dd8763f2a11566
Author: WeiChungChang <r97922153@gmail.com>
Date:   Thu Jan 12 10:49:37 2017 +0800

    'improve_far_seek_of_chunkSampleStream'

commit d71707f22009929032348acf2cdc34a2caa54afa
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Wed Jan 11 23:11:32 2017 +0000

    Make constructor clearer

commit 28e221f92ee045ac4a8d4583c5ba7e0559784498
Author: meteoorkip <svenkonings@live.nl>
Date:   Wed Jan 11 17:36:10 2017 +0100

    Fix vector drawable usage on API level 21 or above

commit 8ae8ac79bc59795df5a16b7552c13bc83dbddf86
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Wed Jan 11 08:13:43 2017 +0000

    move Matroska specific things to the MatroskaExtractor

commit deefe50abc205579de21c8be892cd1d89255ddee
Author: olly <olly@google.com>
Date:   Tue Jan 10 02:27:41 2017 -0800

    Handle ID3 frames that end with empty text field
    
    Issue: #2309
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144061654

commit bf65df1b356ed3e48410061cc499da57763eb7d0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jan 10 01:08:26 2017 -0800

    Allow ClippingMediaPeriod to be used on its own.
    
    ClippingMediaPeriod may be a useful component for other MediaSources too so
    remove its dependency on ClippingMediaSource.
    
    Also allow the clipping end point to be TIME_END_OF_SOURCE, in which case
    the clipping window extends to the end of the wrapped period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=144056285

commit 59ab0fa9f1e5f09d1e9182383184c7ab2acf6cfc
Author: olly <olly@google.com>
Date:   Mon Jan 9 04:15:00 2017 -0800

    Introduce MetadataDecoderFactory
    
    This is analogous to what we do for text/subtitles, and
    adds support for playlists where the type of metadata
    changes from one playlist item to the next.
    
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143948307

commit ac98874021d752a57006a1955a71f31a50cf4b12
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 9 23:48:40 2017 +0000

    move header into track.output.format object and then use it in the decoder create method.
    This doesn't make a stateless decoder but it is a step in the right direction.
    Note that subtitles are not rendering. Is there something wrong with the timecodes?

commit ae2e84df35c777d7b03ea7fa59bb8e01d82b26ed
Author: olly <olly@google.com>
Date:   Fri Jan 6 08:25:00 2017 -0800

    Set HLS period duration when live stream ends
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143776633

commit 1da9e31d688053eb370d15637c4c75f0c1fb6882
Author: olly <olly@google.com>
Date:   Fri Jan 6 08:23:26 2017 -0800

    Parse EMSG boxes in FragmentedMp4Extractor
    
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143776526

commit f2634d11f5abb80bb06596419e9d7cfa502726ed
Author: olly <olly@google.com>
Date:   Fri Jan 6 08:07:15 2017 -0800

    Support emsg metadata decoding
    
    Note: End to end emsg support is still non-functional.
    There's some additional plumbing that still needs to
    be done.
    
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143775147

commit 9d5c750fe914cc7c51f8afa49bb113121352510f
Author: eguven <eguven@google.com>
Date:   Fri Jan 6 06:52:20 2017 -0800

    Support offline drm key downloading and restoring
    
    Renamed StreamingDrmSessionManager to DefaultDrmSessionManager and added functionality to download, restore, renew and release offline keys. Added a utility class, OfflineLicenseHelper, to facilitate use of DefaultDrmSessionManager for downloading, renewing and releasing offline keys.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143769955

commit b2a153d56815961f369988ba52364a0de4d577e3
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 6 04:17:07 2017 -0800

    Add a player test for renderers reading ahead.
    
    Also move timeline, manifest and format verifications into the test* methods.
    
    Issue: #2252
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143761969

commit 0468a80d4125af669c0dadf66bd53144db323423
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Jan 5 21:27:24 2017 -0500

    just use original plane width to calculate width proportion to use later as size and keep aspect ratio for height

commit 9d48d4e4865a98282300194afc995d9783109067
Author: olly <olly@google.com>
Date:   Thu Jan 5 13:40:23 2017 -0800

    Support setting default headers on HttpDataSource.Factory's
    
    Issue: #2166
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143703258

commit a77bc8d457dc2691625c5f56792f2786230a7b0e
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 5 09:11:50 2017 -0800

    Close DataSources quietly.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143672900

commit 01d22f8123e16880578d0e9352a033cd1fb2f42a
Author: cdrolle <cdrolle@google.com>
Date:   Thu Jan 5 08:15:29 2017 -0800

    Handle empty RawCC files.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143667717

commit 8a0e76ba32145b90e33fcf0c80f3c7e05a2a2b9d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jan 5 14:58:13 2017 +0000

    Make sure we don't read ahead of deferred enable/disable operations
    
    Issue: #2290

commit 037aeaf7646cdf08c6996f5cf438bbabf759979d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jan 5 14:57:31 2017 +0000

    Some minor cleanup

commit 0cacd388fdff22408b54e2b7de2021c5b11f2742
Merge: dbebaa8 75eb047
Author: ojw28 <olly@google.com>
Date:   Thu Jan 5 12:38:06 2017 +0000

    Merge pull request #2299 from hassanabidpk/rm--clippingtest
    
    remove ClippingMediaSourceTest from library

commit 75eb047e626ff5405c55cf1da382735124935c35
Author: Hassan Abid <hassanabidpk89@gmail.com>
Date:   Thu Jan 5 21:31:08 2017 +0900

    remove ClippingMediaSourceTest from library

commit 1d9d68dd12a424f528521f385294d31ca39d1f20
Author: olly <olly@google.com>
Date:   Wed Jan 4 12:38:52 2017 -0800

    Assume samples are at start of mdat when offset is negative
    
    We've seen this issue reported three times now, so it's
    obviously not an isolated problem. Do you think anything
    bad will happen to non-SmoothStreaming playback cases if
    I do this? I suspect not, but if you feel strongly I can
    easily add a FLAG_WORKAROUND_X flag for it, and enable
    it for SmoothStreaming only.
    
    https://github.com/google/ExoPlayer/issues/2292
    https://github.com/google/ExoPlayer/issues/2101
    https://github.com/google/ExoPlayer/issues/1152
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143583714

commit 4a0f224e1219d732eae3a4a4394d577974a119df
Author: eguven <eguven@google.com>
Date:   Wed Jan 4 09:12:02 2017 -0800

    Add a new flag to DataSpec which permits content to be cached even if its length can not be resolved
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143560360

commit 5082d1f28232d192084e5472a15e2a6275c691e2
Author: olly <olly@google.com>
Date:   Wed Jan 4 08:19:04 2017 -0800

    Some boilerplate for DASH EMSG support
    
    - Parse EMSG leaf atoms during FMP4 extraction (although
      currently they're just discarded).
    - Add readNullTerminatedString to ParsableByteArray.
    
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143555965

commit f735a86ebbb57b33dad2edfe4adb949ccb7f32ec
Author: olly <olly@google.com>
Date:   Wed Jan 4 08:13:05 2017 -0800

    Better handle inconsistent HLS timeline updates
    
    Issue: #2249
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143555467

commit 44d6b1a2710965225943d941cb3c4150f4fc82a9
Author: olly <olly@google.com>
Date:   Wed Jan 4 07:57:13 2017 -0800

    Add some initial plumbing for DASH EMSG support
    
    Issue: #2176
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143554094

commit 21762622ac3b892865b2c08340d4ec45e3b7021e
Author: olly <olly@google.com>
Date:   Wed Jan 4 07:10:54 2017 -0800

    Fix typo in release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143550913

commit ae30fe496aa11e5af28625953c7048975a2ef884
Author: olly <olly@google.com>
Date:   Wed Jan 4 06:59:38 2017 -0800

    Fix potential NPE if source is released without being prepared
    
    Issue: #2264
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143550088

commit 2512bd6e77fc53d46e29007963cd50ba64b21366
Author: olly <olly@google.com>
Date:   Wed Jan 4 06:54:12 2017 -0800

    Add test for decoding ID3 PRIV frame
    
    I wrote this whilst investigating a user issue. It looks like
    we don't need to do anything about the issue itself, but since
    I wrote the test we may as well keep it!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143549697

commit 9f81b72291bb0bbe274577387e0747bdbadd7ffa
Author: olly <olly@google.com>
Date:   Wed Jan 4 06:53:58 2017 -0800

    Fix GTS playback test timestamp verifications
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143549680

commit b7746609898ec9c7bfaa3590417f5db1efd4d07a
Author: olly <olly@google.com>
Date:   Tue Jan 3 12:57:18 2017 -0800

    Add multi-period ExoPlayer unit test
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143475824

commit dbfb187b6aa7bb427601ac2023bba63733121527
Author: mef <mef@google.com>
Date:   Tue Jan 3 12:55:20 2017 -0800

    [Cronet] Replace usage of deprecated UrlRequestException with CronetException.
    
    - Errors reported by native stack use org.chromium.net.NetworkException class.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143475649

commit 46245251e145e88cce22f5c0faf570109ad48566
Author: olly <olly@google.com>
Date:   Tue Jan 3 11:57:10 2017 -0800

    Fix bad indent + clean up Format formatting
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143469714

commit 361241f81cd494a9daae80b769ed6d7cd1c37d99
Author: olly <olly@google.com>
Date:   Tue Jan 3 07:01:38 2017 -0800

    Make SeekBar work properly with key events if focusable
    
    This isn't perfect because it performs seeks whilst the
    user is holding down L/R, rather than when they release
    it. Performing the seek on release properly looks non
    trivial, and would likely require extending SeekBar.
    
    Issue: #2278
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143440580

commit 04968a6da511374e393a6becd34ac473fa9f2370
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jan 3 05:06:01 2017 -0800

    Fix condition for re-enabling renderers to handle reading ahead.
    
    Issue: #2252
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143433510

commit faff5ec910d4f8bc8c1f7b2e709a325dc3ebe4a9
Author: olly <olly@google.com>
Date:   Tue Jan 3 05:02:01 2017 -0800

    Add masking to correctly select renderer
    
    Issue: #2269
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=143433012

commit 39827fad2781de4a5f3f3da0c6636b62f515f3fc
Author: eguven <eguven@google.com>
Date:   Thu Dec 22 09:27:20 2016 -0800

    Allow specifying a custom cacheKey to ExtractorMediaSource
    
    Issue: #2201
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142772885

commit 0b141aeeeec31d05d3e677e7dd66693cec83c482
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jan 4 22:32:28 2017 +0000

    Revert "Improving handling of atoms with size less than header in FragmentedMp4Extractor."
    
    This reverts commit 71186ef16ee2f3dc07a4f9d1d696c273b1c6ca87.

commit 71186ef16ee2f3dc07a4f9d1d696c273b1c6ca87
Author: cblay <cblay@google.com>
Date:   Wed Dec 14 17:37:27 2016 -0800

    Improving handling of atoms with size less than header in FragmentedMp4Extractor.
    
    These currently lead to cryptic ArrayIndexOutOfBoundsExceptions being thrown from System.arraycopy() so my proposal is to throw a more useful ParserException instead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142087132

commit dbebaa874f7943632291d736b32b08feb1cc69ff
Merge: 807e2db d816d26
Author: ojw28 <olly@google.com>
Date:   Wed Jan 4 14:55:36 2017 +0000

    Merge pull request #2288 from sakuna63/release-v2
    
    Fix RELEASENOTES.md

commit d816d26d83804339007806fca2ffd84316b2b975
Author: Ippei Nawate <saku.ni63@gmail.com>
Date:   Wed Jan 4 17:24:53 2017 +0900

    Fix RELEASENOTES.md

commit da9c10a1b4a2f5c79851501f0c66dfda5fd97351
Merge: 1d8302c b1ea187
Author: ojw28 <olly@google.com>
Date:   Tue Jan 3 19:43:34 2017 +0000

    Merge pull request #2285 from colinrtwhite/dev-v2
    
    Use vector drawables for the SimpleExoPlayer player control buttons.

commit b1ea1873d377b1c7fe539ee30b59c7fb790bf55e
Author: Colin White <colin@colinwhite.me>
Date:   Mon Jan 2 23:09:59 2017 -0500

    Use Material Design drawables for the SimpleExoPlayer player control buttons.

commit 1d8302c792ae818e29258566ca3a905095939861
Merge: 163a3a7 eda393b
Author: ojw28 <olly@google.com>
Date:   Tue Jan 3 14:59:37 2017 +0000

    Merge pull request #2273 from meteoorkip/default_artwork
    
    Add default artwork support to SimpleExoPlayerView

commit eda393ba824e3345cdef20f060377a71e54c1a18
Author: meteoorkip <svenkonings@live.nl>
Date:   Sat Dec 31 22:48:14 2016 +0100

    Add default artwork support to SimpleExoPlayerView
    
    Add support for a default artwork image that is displayed if no artwork can be found in the metadata.

commit ef2d7c7fd50334dbbfe70049a1be379f386533f4
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 15:49:30 2017 +0000

    tests pass.

commit b692d9fac5e54fabb1579f321d89a56eeda86d24
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 14:48:03 2017 +0000

    tidy and make compatible with test.

commit e99ad278471413514eca49727cb36f6ff2ac76b8
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 14:35:23 2017 +0000

    not needed

commit 1364e2337d509d13626a69465b6c2157560e736c
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 14:29:59 2017 +0000

    add test files for SSA.

commit 08e1d356adc5c257a6dbcb1037a3480654c69488
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 14:20:14 2017 +0000

    add changed files for SSA from branch

commit 246a0dc86ef4283a7d6d2efcfaf2b375c4c82cb2
Author: Julian Cable <julian.cable@yahoo.com>
Date:   Mon Jan 2 14:07:29 2017 +0000

    add SSA/ASS specific files from branch

commit 8804ecded40be1ef52328d8321fccb11b179fdcc
Author: drhill <drewhill80@gmail.com>
Date:   Wed Dec 21 07:54:23 2016 -0500

    remove unneeded changes

commit 44b21f2e3b65787aa6b5b547d5ac67e97a924a61
Author: Drew Hill <drewhill80@gmail.com>
Date:   Tue Dec 20 22:49:18 2016 -0500

    remove imagecue and add bitmap to cue with size_height, change to painter for displaying

commit 163a3a7bb876d309f5d28cc62473f093802d8aea
Author: ojw28 <olly@google.com>
Date:   Wed Dec 21 00:51:30 2016 +0000

    Delete HlsTest.java

commit 807e2db02617a324968a5c672e050261e7bbca0a
Author: ojw28 <olly@google.com>
Date:   Wed Dec 21 00:51:06 2016 +0000

    Delete HlsTest

commit 0d135d37b8e3d9118d80c3475aa08e2575efcf14
Author: Oliver Woodman <olly@google.com>
Date:   Tue Dec 20 12:33:04 2016 +0000

    Add comment for workaround

commit efc8f6fe4248a85d2ffac218e33426ee9b23f64e
Merge: a007d9a cc24c4e
Author: ojw28 <olly@google.com>
Date:   Tue Dec 20 12:26:20 2016 +0000

    Merge pull request #2134 from drhill/dev-v2_passthroughChannelFix
    
    fix 6.1 channel passthrough failing

commit 936f074e8e1d32106992dca8006ae668d6bbc8c6
Merge: 47ea5c9 cb3f349
Author: ojw28 <olly@google.com>
Date:   Tue Dec 20 12:00:59 2016 +0000

    Merge pull request #2231 from google/dev-v2-r2.1.1
    
    r2.1.1

commit cb3f3499265e5dbf50ac4544b5a3a8fe7fd0ad8c
Author: olly <olly@google.com>
Date:   Tue Dec 20 03:28:19 2016 -0800

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142539314

commit a007d9a2e73a5cac811f82c8f57ac84aed527c03
Author: olly <olly@google.com>
Date:   Tue Dec 20 03:28:19 2016 -0800

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142539314

commit f3d1065b5f26824535cea51dafa90daff13b90b4
Author: olly <olly@google.com>
Date:   Mon Dec 19 06:56:04 2016 -0800

    Fix large timestamps for HLS playbacks
    
    - If there's no program-date-time then this change is
      a no-op.
    - If there is a program-date-time this change considers
      the period as having started at the epoch rather than
      at the start of the content. The window is then set
      to start at the start of the content. This is a little
      weird, but is required so that the period sample
      timestamps match the start of the period. Note that
      this also brings the handling of on-demand in line
      with how the live case is handled, meaning there wont
      be weird changes if a live stream changes into an
      on-demand one.
    
    Issue: #2224
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142442719

commit ada19a25403ac11f4899624febfca8a2d17e17b2
Author: olly <olly@google.com>
Date:   Fri Dec 16 06:03:28 2016 -0800

    Correctly offset subsample timestamps.
    
    This has always been broken in V2, but the issue is now also
    visible for the very first period in the timeline because we
    offset if by 60s. Previously the issue would only have been
    visible from the start of the second period.
    
    Issue: #2208
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142252702

commit a6360ab6c05235302ae9a54c8dab7678fa880d5e
Author: olly <olly@google.com>
Date:   Thu Dec 15 03:31:18 2016 -0800

    Fix playback of media with >1MB preparation data
    
    Also clarify when getNextLoadPositionUs and continueLoading
    can be called.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142124497

commit fc3ed0bf31c7c55c89aae74844134316759e349d
Author: olly <olly@google.com>
Date:   Wed Dec 14 09:47:02 2016 -0800

    Add missing # chars to release notes!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142028608

commit ab88821614cd2762b4fb4f79234b8963c4deb11c
Author: olly <olly@google.com>
Date:   Mon Dec 19 06:56:04 2016 -0800

    Fix large timestamps for HLS playbacks
    
    - If there's no program-date-time then this change is
      a no-op.
    - If there is a program-date-time this change considers
      the period as having started at the epoch rather than
      at the start of the content. The window is then set
      to start at the start of the content. This is a little
      weird, but is required so that the period sample
      timestamps match the start of the period. Note that
      this also brings the handling of on-demand in line
      with how the live case is handled, meaning there wont
      be weird changes if a live stream changes into an
      on-demand one.
    
    Issue: #2224
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142442719

commit 47d8b7ff164ae2b162913ec9fea92bcc7fa58839
Author: Drew Hill <drewhill80@gmail.com>
Date:   Sun Dec 18 22:37:37 2016 -0500

    get source dimensions from plane stored in subs

commit 5d0501be8277201654152da3306dc98a4e55d86b
Author: Drew Hill <drewhill80@gmail.com>
Date:   Sat Dec 17 14:43:07 2016 -0500

    less interfacy.. more classy

commit 8277999b16894a5c54035d5b025d7c65bf9b35ec
Author: Drew Hill <drewhill80@gmail.com>
Date:   Sat Dec 17 13:39:47 2016 -0500

    add imageview into simpleexoplayerview to display subtitles that are image based

commit 4bb8793203ff280189d15849669304ebb138d814
Author: olly <olly@google.com>
Date:   Fri Dec 16 07:24:51 2016 -0800

    Deduplicate reported position discontinuities
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142257743

commit e0586a48f02131d66fa2988d29a5064e5836ea6f
Author: olly <olly@google.com>
Date:   Fri Dec 16 06:03:28 2016 -0800

    Correctly offset subsample timestamps.
    
    This has always been broken in V2, but the issue is now also
    visible for the very first period in the timeline because we
    offset if by 60s. Previously the issue would only have been
    visible from the start of the second period.
    
    Issue: #2208
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142252702

commit 6c4795b49631ba33d76b39f28c89deba150b9222
Author: anjalibh <anjalibh@google.com>
Date:   Thu Dec 15 14:42:37 2016 -0800

    Prevent frozen frames when the decoder is always late.
    
    Create a MediaCodecVideoTrackRenderer.shouldDropFrame function that can be overriden by a child class. The YouTube override prevents a frame drop if we haven't rendered anything in the last 35 ms.
    
    The YouTube override is off at the moment, I plan to use a server side flag to do a slow and controlled experiment.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142190774

commit 65490f52f8b5c5f7925ec121801b59e3ec958d40
Author: cdrolle <cdrolle@google.com>
Date:   Thu Dec 15 12:23:48 2016 -0800

    Added support for handling window/cue priority and fill color to Cue and SubtitlePainter.
    
    Cue has been modified to optionally accept a fill color and a toggle specifying when to use the fill color. When the fill color toggle is set, then SubtitlePainter will use the fill color value instead of the color specified by the device's Accessibility settings. Cea708Decoder has also been modified to propagate that value, as well as cleaned up (in terms of documentation) to prepare it for inclusion in the open-source project.
    
    There is also a new Cea708Cue, extending Cue, which holds the Cue's priority, which is used to sort potentially overlapping cues/windows.
    
    Note that I've left the @ClosedSource annotation and logging in this CL. I intend to start testing the 608 and 708 functionality in the Fiber app to ensure that it works as expected on a wide-range of channels (as opposed to the single channel in ExoPlayer Demo) before removing these.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142173264

commit 72097432bdf46804f1612c1b0a8b6a0ae41d729a
Author: kylealexander <kylealexander@google.com>
Date:   Thu Dec 15 11:02:37 2016 -0800

    Adding Widevine subsample VP9 clips
    
    These are the new subsample clips used by the android-drm-team.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142162918

commit 04992fdaac6e3c320d8640e84e771c4f67715fad
Author: olly <olly@google.com>
Date:   Tue Aug 30 10:28:31 2016 +0100

    Move AudioTrack.SESSION_ID_NOT_SET to C
    
    It's a nicer place for it to live once it starts being passed
    around more widely (e.g. through the video renderer, for
    tunneling)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142158460

commit 588124da766e1d9caaa1257d4e3b10721f990171
Author: olly <olly@google.com>
Date:   Thu Dec 15 10:23:06 2016 -0800

    Test playback of empty timeline completes successfully
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142157778

commit 5bb1d5dc99c8afc72b653cb19859470f4405a8e9
Author: olly <olly@google.com>
Date:   Thu Dec 15 07:09:45 2016 -0800

    Add tunneling functionality to AudioTrack
    
    Although the underlying platform AudioTrack is capable of
    writing the AV sync header from M onward, I've opted not
    to use the functionality since it appears to allocate an
    unnecessary (and large) number of ByteBuffers. We can swap
    over from O if this is addressed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142138988

commit 2c3ce7fee373e27bc11fa3f9f25bd1e028727a3a
Author: olly <olly@google.com>
Date:   Thu Dec 15 03:31:18 2016 -0800

    Fix playback of media with >1MB preparation data
    
    Also clarify when getNextLoadPositionUs and continueLoading
    can be called.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142124497

commit 37317520f48d8629eaf0012b61e42ec5cf011e00
Author: cblay <cblay@google.com>
Date:   Wed Dec 14 17:37:27 2016 -0800

    Improving handling of atoms with size less than header in FragmentedMp4Extractor.
    
    These currently lead to cryptic ArrayIndexOutOfBoundsExceptions being thrown from System.arraycopy() so my proposal is to throw a more useful ParserException instead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142087132

commit 47ea5c909a55261f58e0de3ebda1d633666e1d2c
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Wed Dec 14 23:01:51 2016 +0000

    Delete CS classes

commit 86adc6440330d8e05ac4e132b35c53a0bbd4e70a
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Wed Dec 14 23:00:10 2016 +0000

    Delete CS classes

commit b7d118fda45ebbc08bd8754a1363fe11873553b1
Merge: d422d2e fefef0f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 14 18:30:03 2016 +0000

    Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2

commit d422d2e6e606a213dd37aadb00bb71e4bf8e5a9d
Author: olly <olly@google.com>
Date:   Wed Dec 14 09:47:02 2016 -0800

    Add missing # chars to release notes!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142028608

commit fefef0f94195b448dd7c85a60457b3644dc07b9f
Merge: 42c7ea4 63966a3
Author: ojw28 <olly@google.com>
Date:   Wed Dec 14 18:06:52 2016 +0000

    Merge pull request #2183 from WeiChungChang/proposal-fix
    
    Fix the issue when the sequence of PTS is out of order by bidirectional prediction for skipToKeyframeBefore()

commit 10fa8e44af3bd11056b1f455881cd6fb44477eb1
Merge: e6778c9 867bc7c
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 14 17:08:41 2016 +0000

    Merge branch 'release-v2' of persistent-https://github.com/google/ExoPlayer into release-v2

commit e6778c90a1607da01feeba4d4bbf9a514655ed3c
Merge: d79f8f6 8853050
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 14 17:08:03 2016 +0000

    Merge branch 'dev-v2-r2.1.0' into release-v2

commit 8853050caa3d0a2cb1003aeeb1075fd84303c39d
Merge: e65110e d79f8f6
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 14 17:07:31 2016 +0000

    Merge branch 'release-v2' into dev-v2-r2.1.0

commit e65110e1ed06da1ab0b6dbbf252f7e49e4879ce8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 14 17:00:46 2016 +0000

    Remove ClippingMediaSource from release

commit 42c7ea422dc37934ab85b58f2771e0635b04d0ba
Author: olly <olly@google.com>
Date:   Wed Dec 14 07:45:11 2016 -0800

    Update SDK_INT
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142016285

commit 88d2a6a3484520e8b2955b5e1e1d2c39ec46ec3d
Author: olly <olly@google.com>
Date:   Wed Dec 14 07:28:58 2016 -0800

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142015031

commit d5ac93f426d0d215604555c53cc5b009f1dc5e15
Author: eguven <eguven@google.com>
Date:   Wed Dec 14 05:49:21 2016 -0800

    Move playback tests to androidTest folder
    
    This change makes Android Studio recognize tests as "android test" and run them on device by default.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142008012

commit 31e2fa8597df3aab1822d994f167517952eb8c85
Author: olly <olly@google.com>
Date:   Wed Dec 14 05:33:36 2016 -0800

    Add hook for modifying or cancelling a user invoked seek
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=142007001

commit fc93940463542b41aa748ba7f74a2978e7022c48
Author: eguven <eguven@google.com>
Date:   Wed Dec 14 02:54:04 2016 -0800

    Fix widevine playback tests
    
    Passes drmSessionManager to DebugMediaCodecVideoRenderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141997225

commit f276eb2ce74411cc9e4c38bbdd1664678451a5dc
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 29 01:27:59 2016 +0100

    Add ClippingMediaSource.
    
    ClippingMediaSource wraps a single period/window video-on-demand source and
    exposes a specified time range within it.
    
    Issue: #1988
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141991215

commit 8a7628cb26917e39d2591ca9741ec88c30562f45
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Dec 13 13:41:18 2016 -0800

    Remove playlist adjustment on chunk loads
    
    This is particularly problematic for subtitle tracks where adjustment
    can be broken. Now, the primary url can change when clients ask for a
    variant snapshot, instead of happening on chunk load as before.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141933689

commit 48072f21559ce5988e9dec0d58e505f843fd6897
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 13 08:00:28 2016 -0800

    Improve binary search functionality and javadoc.
    
    Define what element is returned if inclusive is true and there are multiple
    elements equal to the input value.
    
    Clarify/fix javadoc.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141891741

commit 41d078ca4bd83df32d13b89d55913053816752a2
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 13 02:54:02 2016 -0800

    Reset readEndOfStream in resetPosition.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141870244

commit 0b1a6fe9b14279e40a8334ad3c9b2afd2bacbbd7
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Dec 12 12:37:09 2016 -0800

    Ignore discontinuities in TSs for HLS
    
    Issue:#1921
    Issue:#1978
    Issue:#2163
    Issue:#2172
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141797474

commit 2a79931ec5892c751c629c800c019277d146752a
Author: olly <olly@google.com>
Date:   Mon Dec 12 11:36:20 2016 -0800

    Fix onTimelineChanged call (timeline should never be null).
    
    Issue: #2186
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141790023

commit ac9813729f79922e66970edd4189221005bb5519
Merge: 759cb32 7e66ec5
Author: ojw28 <olly@google.com>
Date:   Tue Dec 13 19:37:30 2016 +0000

    Merge pull request #2193 from luoser/patch-1
    
    Change Sink to Source in license header

commit 7e66ec5841c7f6072128fcb4daf27a7fc869fb49
Author: Lisa Luo <luoser@users.noreply.github.com>
Date:   Tue Dec 13 14:29:15 2016 -0500

    Change Sink to Source in license header

commit 759cb3231545f3bc4cceae43ed77fdf007b28c5f
Author: olly <olly@google.com>
Date:   Mon Dec 12 06:13:07 2016 -0800

    Try exceeding renderer capabilities by default
    
    Not sure what I think about this, but we're getting quite
    a lot of issues reported where streams play fine but capabilities
    indicate they wont. It's probably best just to cross our fingers
    and hope for the best in such cases, as was the case in V1 when
    using ExtractorSampleSource.
    
    Issue: #2157
    Issue: #2034
    Issue: #2007
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141758070

commit 1055c520cca0346d6d65c764cca21684f404bf6a
Author: olly <olly@google.com>
Date:   Thu Dec 8 10:00:04 2016 -0800

    Remove side effects from SeekMap.getPosition implementations
    
    Issue: #2167
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141451444

commit f45751872d1d49ff0f0fdd13c136d0656d9c22b9
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Dec 8 06:33:53 2016 -0800

    Move track sample index updates out of getPosition(long).
    
    This requires knowing the seek time in Extractor.seek, so that it's possible to
    pick the latest synchronization sample at/before the seek time for each track
    (rather than the earliest synchronization sample after the seek position).
    
    Also remove the STATE_AFTER_SEEK state which should no longer be needed.
    
    Issue: #2167
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141432598

commit 2fce364936921e87b5fb1fbc3fd7b3e54a8ffcf5
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Dec 7 11:39:01 2016 -0800

    Ignore Splice Info in HLS TS media chunks
    
    Issue:#2070
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141335458

commit 1518927e12a75bde636d9321a8f5b27db3120ed2
Author: olly <olly@google.com>
Date:   Thu Aug 25 05:59:28 2016 +0100

    Fix seeking backward from end of last period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141299172

commit 1cbc0fc678d73c1807a89cc8a1a50ea6fe685a83
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Dec 7 03:58:59 2016 -0800

    Allow HlsPlaylistTracker to change the primaryHlsUrl
    
    When the primary url is blacklisted (due to a 404, for example) or
    the selected variant is different from primary url, allow the tracker
    to change the url.
    
    Issue:#87
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141291435

commit 63966a373696adc13ff7fbd420911db05fc2cb77
Author: WeiChungChang <r97922153@gmail.com>
Date:   Mon Dec 12 20:34:09 2016 +0800

    Fix the issue when the sequence of PTS is out of order by bidirectional prediction for skipToKeyframeBefore()

commit 8765b1981ccda99f1b9f0cce8e40b3841a1b2318
Author: Oliver Woodman <olly@google.com>
Date:   Tue Dec 6 21:09:44 2016 +0000

    Revert: Rm newline

commit 847e371ae740216d9f979e719da2f73096332a5a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Dec 6 21:08:14 2016 +0000

    Rm newline

commit a66b4a9badf58487dd46ecefb4c6c2d001cda2d4
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Dec 6 08:33:30 2016 -0800

    Parse ID3 sample timestamp for HLS audio chunks
    
    Pending improvement:
    
    * Peek just the required priv frame. Avoid decoding all id3 information.
    * Sniff the used container format instead of using the extension.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141181781

commit e5bc00ea94268fcb1ed11294c56bfa79167c36ed
Author: olly <olly@google.com>
Date:   Tue Dec 6 07:52:27 2016 -0800

    Fix DataSourceInputStream + add unit test
    
    Issue: #2162
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141177715

commit 2db7c50d7c0aad8359d85d579d49ab3ca42b5c0d
Author: olly <olly@google.com>
Date:   Sun Aug 14 05:37:05 2016 +0100

    Fix test.
    
    The definition of negative line indices was intentionally shifted
    by one because the way VTT defines them doesn't appear to allow for
    cues to be positioned at the very bottom of the screen in the case
    that ANCHOR_TYPE_END is used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141168028

commit 4db6f1e49534d299e19192c860d9c774ac88029a
Author: olly <olly@google.com>
Date:   Tue Dec 6 05:26:56 2016 -0800

    Expose whether decoders support tunneling
    
    This is a first step toward supporting tunneled playback
    
    Issue: #1688
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141167501

commit 99957bbae7be4385e064b57d0ae9e2c819dfb9c3
Author: olly <olly@google.com>
Date:   Tue Dec 6 05:21:07 2016 -0800

    Correctly handle dynamic playlist modifications
    
    - Fix bug where we'd try and call replaceStream having already
      notified the renderer that the current stream is final. This
      could occur if a period was added to the end of the playlist.
    - If the current period being played is removed and a new period
      to play cannot be resolved, assume we've gone off the end of
      the playlist and transition to the ended state. This allows
      the current source to be re-used (unlike the previous behavior
      of considering it an error). Treat valid seeks that cannot be
      resolved due to concurrent timeline update similarly.
    - Add seek sanity check back to ExoPlayerImpl. Meh. It's probably
      best to keep this, since it stops the exposed window index
      being invalid w.r.t the exposed timeline.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141167151

commit 9ea8b02083f4d1fd12abc7f9835a8f7a4a4b361e
Author: olly <olly@google.com>
Date:   Tue Dec 6 03:16:31 2016 -0800

    Correctly handle reading of an empty string without a terminating NUL byte
    
    Issue: #2152
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141159330

commit e86bfd6dbe71fc809b6e2c7d6ec0da3ddacef104
Author: olly <olly@google.com>
Date:   Tue Dec 6 02:28:57 2016 -0800

    Improvements for 608 positioning
    
    - Infer likely left/center/right alignment for pop-on captions.
      This makes the rendering much better in practice, particularly
      when the captions were intended to be center aligned.
    - Fix line anchoring.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141156222

commit 88c0695bd001501381c739018bd8f9d11a8a0cdd
Author: cdrolle <cdrolle@google.com>
Date:   Mon Dec 5 11:42:52 2016 -0800

    Added safe-area adjustment (i.e. padding) to CEA-608 captions and fixed minor issue with rollup.
    
    CEA-608 specifies a "safe-area" in which the captions should be rendered. This change adjusts all of the cue positions so they are within that safe area. It also fixes a minor issue in which roll up captions would drift towards the last row if a preamble address code had the "next row toggle" bit set.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141077433

commit 931670957fe29ec50f643db71c9bde053df2c076
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Dec 5 11:07:14 2016 -0800

    Add support for multiple table sections in PSI section
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141073182

commit db215ff156a6eb5e434a1b447fff6931b00560d1
Author: olly <olly@google.com>
Date:   Mon Dec 5 04:19:49 2016 -0800

    Make invalid seek positions fail on playback thread only
    
    Seeks are permitted when there's no timeline, and in this
    case playback necessarily fails on the playback thread when
    the timeline becomes known. Pushing failure to the same
    place when the timeline is known means there's only one
    failure path for this case. A later CL will likely introduce
    an InvalidSeekPositionException for this case.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141037708

commit 88fc682ddeaa1e0fc4bc3ed652f2d214fdb9f75e
Author: olly <olly@google.com>
Date:   Mon Dec 5 04:06:01 2016 -0800

    Expose manual playback control hiding from SimpleExoPlayerView
    
    Issue #2146
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141036866

commit 01acc0e20130551e6c3f04069cbc4180c7b16bb7
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Dec 5 02:48:27 2016 -0800

    Remove unnecessary final.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=141031900

commit cc24c4e38bd222f8b43efaba513c76d0a9effe4b
Author: drhill <drewhill80@gmail.com>
Date:   Tue Dec 6 08:08:58 2016 -0500

    change to switch to avoid changing 4.0 tracks

commit fda2d143e46ff5d2dc24419bce73f54f7c8f481b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 19:48:59 2016 +0000

    CEA 608 bugfix

commit 421dab433a1ee272e1af465828c6d3095ded6a1c
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 19:47:50 2016 +0000

    Restore accidentally clobbered SimpleExoPlayerView change

commit d6d59ef07ed9fcb6faaef64f28bd9ac73ff2e621
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 19:42:54 2016 +0000

    Restore accidentally clobbered MKV change

commit bbbd61e31949ec3807903f20227a32d8b457302f
Author: olly <olly@google.com>
Date:   Fri Dec 2 10:49:26 2016 -0800

    Skip negative SubRip timecodes
    
    Issue: #2145
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140868079

commit e0649db513395d829da8db55f6bbd7f546148d46
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Dec 2 10:23:28 2016 -0800

    Handle input format changes in SimpleDecoderAudioRenderer.
    
    This is implemented in the same way as in MediaCodecRenderer.
    
    Move codec != null guard into feedInputBuffer to handle the case of an input
    format change with no dequeued buffers where the codec can't be reinitialized
    immediately.
    
    Issue: #2111
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140864942

commit 7ea16a6ae2264ba40127de8c23ed09c47c5be955
Author: eguven <eguven@google.com>
Date:   Fri Dec 2 07:17:29 2016 -0800

    Remove unused parameter
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140847027

commit 164b406e23cd10747686b1559b7a02a716a3d6a6
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Dec 2 06:17:04 2016 -0800

    Clean up loading period update.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140843106

commit 45bc4a0374e14c9f3231f95ca6c58c131a8d2edf
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Dec 2 01:56:10 2016 -0800

    Pass player and isTopLevelSource to MediaSource.prepareSource.
    
    These additions are useful for sources that need to track the playback position
    and control playback.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140828310

commit 0a52e823deef9593d0e7154b197a204fa2be30d8
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 16:29:11 2016 +0000

    Use constant for MPEG max frame size

commit b5437907cfcd3a0068159ced6f39066631221ddb
Merge: 4c427f5 3884641
Author: ojw28 <olly@google.com>
Date:   Fri Dec 2 16:28:35 2016 +0000

    Merge pull request #2135 from drhill/dev-v2_mp2
    
    add mp2 audio

commit 4c427f5b1361eaa3ad560326cc0925ab567fe382
Merge: e803bff a7736e1
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 16:27:36 2016 +0000

    Merge branch 'drhill-dev-v2_subtitles_view' into dev-v2

commit a7736e101ff7a5d5810e5be1bef50b4e3d5887a6
Merge: e803bff 8fcc8c6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 2 16:27:29 2016 +0000

    Merge branch 'dev-v2_subtitles_view' of git://github.com/drhill/ExoPlayer into drhill-dev-v2_subtitles_view

commit e22c42c7c22bcc4fa10d8282163ce1f6f5100c60
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Dec 1 19:30:27 2016 -0500

    requested changes for simplicity

commit 3884641464ea5520f3e96b24292214524e13e2eb
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Dec 1 16:41:23 2016 -0500

    switch to proper mimetype

commit 8fcc8c63efaaa3b37abaca13b6ba1d4c28311c1f
Author: Drew Hill <drewhill80@gmail.com>
Date:   Thu Dec 1 16:25:49 2016 -0500

    change to getview call instead of set property

commit e803bff2b1438af13717065c0c037a64c406b252
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 1 19:29:07 2016 +0000

    Don't log FileNotFoundException while reading cache index file

commit 0cc874dd01b0c0830618cc6b80f25d6541a2de23
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 1 18:35:14 2016 +0000

    Fix indentation

commit 54b4df703a3faa77d378c88dabdaac97ab3bf44e
Merge: 7a18738 a6ccedf
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 1 18:31:49 2016 +0000

    Merge branch 'RikHeijdens-eia-608-improvements' into dev-v2

commit a6ccedf741a90f53744d8e71b45855ef6a122bf8
Merge: 7a18738 98a5e19
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 1 18:31:39 2016 +0000

    Merge branch 'eia-608-improvements' of git://github.com/RikHeijdens/ExoPlayer into RikHeijdens-eia-608-improvements

commit 7a18738dfaf3d5c99b195b7020ca56b2cb41fe48
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 1 16:51:55 2016 +0000

    Clean up AudioTagPayloadReader

commit 6e6f912ed11955cdf0a8327ff17c073fe5563932
Merge: 53dcb82 2d1f151
Author: ojw28 <olly@google.com>
Date:   Thu Dec 1 16:38:17 2016 +0000

    Merge pull request #2140 from EENCloud/FLV_PCM_LAW_Support
    
    Added FLV PCM law support

commit 2d1f151cb9eef4f26ce4b78e330550e56396a13e
Author: Greg Slomin <gslomin@eagleeyenetworks.com>
Date:   Tue Nov 29 11:36:34 2016 -0600

    Added support for PCM u/a-law audio in FLV containers

commit 867bc7cb05d1d39680b4af371ee0d7cd6cded977
Merge: 8601cd8 17cd73d
Author: ojw28 <olly@google.com>
Date:   Thu Dec 1 14:54:36 2016 +0000

    Merge pull request #2138 from google/revert-2127-FLV_PCM_LAW_Support
    
    Revert "Added support for PCM u/a-law audio in FLV containers"

commit 17cd73d8ed55bacccd1f567b9bd30c882311168e
Author: ojw28 <olly@google.com>
Date:   Thu Dec 1 14:54:27 2016 +0000

    Revert "Added support for PCM u/a-law audio in FLV containers"

commit 8601cd87665845aafa85699719e8705b39b93781
Merge: a3ca5c4 4f2cced
Author: ojw28 <olly@google.com>
Date:   Thu Dec 1 14:54:20 2016 +0000

    Merge pull request #2127 from EENCloud/FLV_PCM_LAW_Support
    
    Added support for PCM u/a-law audio in FLV containers

commit 53dcb82862e406d571c8a07c2db99419a7733655
Author: olly <olly@google.com>
Date:   Thu Dec 1 05:28:35 2016 -0800

    Merge pull request #2131
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140720011

commit f3dbb746134b0eb2d56b7fdb721d9f5e810e2707
Author: eguven <eguven@google.com>
Date:   Thu Dec 1 03:55:01 2016 -0800

    Fix unnecessary rewrite of cache index file after CachedContentIndex.readFile()
    
    Prevented readFile() setting "changed" boolean to true every time. It's set only if encryption key is set but the index file isn't encrypted.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140714173

commit 214c55b6657596a0e2c814b58f7a9688652e4f35
Author: Drew Hill <drewhill80@gmail.com>
Date:   Wed Nov 30 19:44:47 2016 -0500

    add function to change subtitles style

commit db4b478cc0a6ff34d25e5c60882000babf0a4b0a
Author: Drew Hill <drewhill80@gmail.com>
Date:   Wed Nov 30 18:47:36 2016 -0500

    fix 6.1 channel passthrough failing

commit 0752f790c7aeca82768217ffa21a06e96942607e
Author: Drew Hill <drewhill80@gmail.com>
Date:   Fri Nov 11 19:08:17 2016 -0500

    add mp2 audio

commit 836cefcdd6a0e7b8cfcfadcd5479619461bde575
Author: olly <olly@google.com>
Date:   Wed Nov 30 13:14:07 2016 -0800

    Remove CC validity checks in SeiReader (now performed in decoder)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140642357

commit 8bc7da5681386c52ce1415420b37719809ee8849
Author: olly <olly@google.com>
Date:   Wed Nov 30 12:20:38 2016 -0800

    Finish fixing playback control focus
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140635851

commit 195a93e5af12715c4d92b376fb6f40d8fd8885d8
Author: olly <olly@google.com>
Date:   Wed Nov 30 10:46:18 2016 -0800

    Fix playback control focus
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140623107

commit 8dc810405964770fe227a333b1b4d0f3fdfef0a3
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Nov 30 09:33:32 2016 -0800

    Load the next period only if its start point is known.
    
    If a period has no enabled tracks it is considered to be fully buffered, even
    if its duration is unknown. This would cause the offset of the next loading
    period to be set based on the unset duration of the preceding period, in turn
    causing the from of the player to expose a position based on an unset value.
    
    Only load the next period when the current one has a known duration. If a
    period has no enabled tracks and an unknown duration this causes the player to
    play the period indefinitely.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140613858

commit 45c68a2fd55663addce79889c4a068b1f04983cf
Author: olly <olly@google.com>
Date:   Wed Nov 30 08:46:49 2016 -0800

    Use separate mimeType for CEA-608 embedded in MP4
    
    When CEA-608 is embedded in MP4 each packet consists of
    cc_data_1 and cc_data_2 only. The marker_bits, cc_valid
    and cc_type are implicit. As a result playback of CEA-608
    embedded in MP4 broke when we started passing the extra
    byte for the TS case (and adjusted the decoder to assume
    the byte was present).
    
    This change introduces a special mimeType for the case
    where the byte is implicit (!). An alternative option
    was to insert the extra byte every 2 bytes in the MP4
    extractor, but this is really quite fiddly to get right.
    
    Also made the loops in the 608/708 decoders robust against
    input of the wrong length.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140609304

commit f702568776895531ebbe3dc8a49c0f4cf8fce122
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Nov 30 08:17:10 2016 -0800

    Skip tables with unexpected table_id for PAT and PMT readers
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140606435

commit 289ae3ff38280f56d5af3371024d21ecb2f9758c
Author: olly <olly@google.com>
Date:   Wed Nov 30 08:04:25 2016 -0800

    Make demo app visible in AndroidTV launcher
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140605251

commit 257671467f6c97762f473c42709aecdd28d149bc
Author: eguven <eguven@google.com>
Date:   Wed Nov 30 06:23:47 2016 -0800

    Fix possible failure in CachedContentIndex encrypted cache index file read.
    
    Encryption key in index file is read by DataInputStream.read() which may return less bytes than required. Replaced it with readFully() which should read full length of data.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140597693

commit 501f54a8a640ce799353ab001d67ed761834345e
Author: aquilescanta <aquilescanta@google.com>
Date:   Sat Oct 8 14:16:37 2016 +0100

    Add #EXT-X-PROGRAM-DATE-TIME support for HLS media playlists
    
    Issue:#747
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140525595

commit 91c58627be09cb0bc779d43778a55cd5ce76484f
Author: olly <olly@google.com>
Date:   Tue Nov 29 09:33:10 2016 -0800

    Fix lint errors
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140488486

commit bfc2faa269aba3e006b5da547e7d0fbfc1033b6d
Author: olly <olly@google.com>
Date:   Tue Nov 29 07:59:49 2016 -0800

    Enable focus highlighting in track selection dialogs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140479099

commit 7bbe213e578a3f2de8bc7e9b4886c8d5e74a8dda
Author: olly <olly@google.com>
Date:   Tue Nov 29 07:41:58 2016 -0800

    Add option to select track that exceeds renderer capabilities
    
    Leaving disabled by default for now, but we may want to consider
    enabling it by default. Note that in V1 for ExtractorSampleSource
    the behaviour was equivalent to this option being enabled, since
    we didn't perform capabilities checks. For DASH/SS/HLS the V1
    behaviour was equivalent to this option being disabled.
    
    The type in PlayerActivity has been changed just to make it
    easier to add a line that calls setParameters.
    
    Issue: #2034
    Issue: #2007
    Issue: #2078
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140477568

commit 2753664c6bc7427511d6f1b812008610e2732a23
Author: cdrolle <cdrolle@google.com>
Date:   Mon Nov 28 14:14:26 2016 -0800

    Fixed an error in the date and time parser's handling of time zones.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140400905

commit 2550362fa2f47b57ca710beeefbb48113b7c9156
Author: olly <olly@google.com>
Date:   Mon Nov 28 10:35:56 2016 -0800

    Clean up playback controls xml a little
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140374149

commit eb81da7f2d503fa06f26fe4aed5d617d1f9177e2
Author: olly <olly@google.com>
Date:   Mon Nov 28 09:59:05 2016 -0800

    Remove unnecessary layer in view hierarchy
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140369506

commit 73220be19b95a27f16096b3e907aec86be758038
Author: olly <olly@google.com>
Date:   Mon Nov 28 03:15:20 2016 -0800

    drainOutputBuffer return false on EOS
    
    I can't see how this would ever make a difference, but there's no
    point in returning true. Either we've really reached EOS (in which
    case outputStreamEnded will be true and the next drainOutputBuffer
    will be turned into a no-op) or we've re-initialized the codec (in
    which case there wont be anything to drain since we wont have fed
    anything to the codec yet).
    
    This change should also prevent the hypothetical NPE described in
    issue #2096, although we're unsure how that NPE would occur unless
    MediaCodecRenderer has been extended in an unusual way.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140338581

commit f7132a7a7393668b32d657efb374db7e05ba4ca1
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Nov 28 01:57:13 2016 -0800

    Fix compiler warning about assignment in conditional.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140332890

commit f9c7343e767df93f4ec3f7ef5997e5c235241e0e
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Nov 28 00:45:12 2016 -0800

    Add basic unit test for ExoPlayer/ExoPlayerImplInternal.
    
    The simple verifications in this test may be useful for smoke testing, but the
    coverage of ExoPlayerImplInternal is low. The intention is to add tests for
    more complex logic in ExoPlayerImplInternal in later changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140327358

commit 4f2cced4da4b6c42f2da51f38516a17a415e13c3
Author: Greg Slomin <gslomin@eagleeyenetworks.com>
Date:   Tue Nov 29 11:36:34 2016 -0600

    Added support for PCM u/a-law audio in FLV containers

commit e56cf4903828c9144bcd75502b203ecd93930ca8
Author: olly <olly@google.com>
Date:   Fri Nov 25 10:43:02 2016 -0800

    Fix BuildConfig generation for internal builds
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140210128

commit c3c176d93c03fe9578161d35f4552d453a3a314e
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 25 10:26:05 2016 -0800

    Move HLS extractor construction to HlsMediaChunk
    
    This allows ID3 PRIV timestamp extraction and Extractor Sniffing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140209568

commit 2e3ffe1e94a16d6ca1e5c09f818969cbcd531abe
Author: olly <olly@google.com>
Date:   Fri Nov 25 10:17:55 2016 -0800

    Assume support for vertical video if rotated resolution supported
    
    Issue: #2034
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140209306

commit ee9b7be2fa68d15ec505be1fd69740144fd61b46
Author: olly <olly@google.com>
Date:   Fri Nov 25 08:18:15 2016 -0800

    Fix issue with seeking before timeline available
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140204054

commit 76c58a34d32d06832f625115fae7df432b30b811
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Nov 25 08:02:45 2016 -0800

    Clarify createPeriod javadoc.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140202942

commit 9c612f94c5f8aee93b36365dc9d495eeb38a3502
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 25 07:30:23 2016 -0800

    Chose timestamp adjustment master based on track selection
    
    Select the timestamp master depending on track availability. If
    a variant is being loaded, then that is the timestmap master.
    Otherwise, if an audio track is being loaded, then the responsible
    chunk source is the timestmap master. If no variant or audio
    rendition is enabled, then a subtitle chunk source is selected as
    timestamp master. This CL will become specially relevant once
    ID3 PRIV timestamps are used for audio renditions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140201385

commit ce9ec79e5977e76512162dae355a596727e02b45
Author: olly <olly@google.com>
Date:   Fri Nov 25 07:21:51 2016 -0800

    Make Timeline always non-null from ExoPlayer
    
    Note that we still have null timelines in ExoPlayerImplInternal.
    This is deliberate; and is likely necessary to distinguish between
    the no-timeline-yet and timeline-is-empty cases (we want to try
    and process a pending seek for the latter, but not the former).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140200980

commit 97a23ce5726757d82eba0b64cc2cb5d0cfd011f4
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 25 06:13:35 2016 -0800

    Fix main thread playlist refreshes in HlsPlaylistTracker
    
    The refresh handler in HlsPlaylistTracker was being instantiated in the
    same thread as the MediaSource (i.e. Main thread).
    
    Issue:#2108
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140197553

commit 894ae1a310cc2e1fe5ba59eb56c7fbeb751036d5
Author: olly <olly@google.com>
Date:   Thu Nov 24 09:08:10 2016 -0800

    Improve SimpleExoPlayer flexibility
    
    - Allow extension and overriding of renderer creation.
      Several developers have asked for this, so that they
      can use their own renderers (typically extensions to
      the core ones) without losing the ability to use
      SimpleExoPlayer.
    - Add option to not attempt extension renderer creation,
      for efficiency.
    - Align build variants for internal and external demo
      apps. This is slightly unfortunate, but convergence
      seems necessary for useExtensionRenderers.
    - Fix DASH playback tests to use the debug video
      renderer.
    
    Issue #2102
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140140915

commit cbf5988803c658a911803f8f86d3900dc75bfffa
Author: mgersh <mgersh@google.com>
Date:   Wed Nov 23 14:47:22 2016 -0800

    Switch to Cronet 56_0_2924_0
    
    This is the second CL in the 3 CL process to switch Cronet versions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140074017

commit ba49f513802dc6412719d52e20f684dcd667ef95
Author: cchiappini <cchiappini@google.com>
Date:   Wed Nov 23 10:00:33 2016 -0800

    Cronet README fix
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140043801

commit 62bdb1b93a3f7344b669587d1108ca41e83ad418
Author: olly <olly@google.com>
Date:   Wed Nov 23 07:34:00 2016 -0800

    Fix failure when a seek is performed with no enabled tracks
    
    This issue affects ExtractorMediaSource only. We shouldn't
    start loading in the case that we're prepared and have no
    enabled tracks, since there's nothing that we need to load.
    This was causing an assertion failure in startLoading.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140030650

commit a7dff14d3c14bd999bca7cb05fa8edf853b93362
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Nov 23 07:13:36 2016 -0800

    Keep TS packets with no continuity counter increase and no payload
    
    This behavior is defined in ISO-13818-1, section 2.4.3.3(continuity_counter).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140029161

commit eb62d00ea40957931e02fe30929eaf938d87a955
Author: olly <olly@google.com>
Date:   Wed Nov 23 03:36:05 2016 -0800

    ExoPlayerImplInternal cleanup
    
    - Fix handling of the currently playing period being
      removed. This didn't do the right thing at all.
    - Relax rule on seekToPeriodPosition re-using an
      existing holder.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140014791

commit b3726cf7619b95e2c011b74bc99283aea956805f
Author: olly <olly@google.com>
Date:   Wed Nov 23 03:00:16 2016 -0800

    Support DASH multi-segment fetches
    
    Note that multi-segment fetching is only possible in the
    case that segments in a representation are defined to have
    the same Uri and adjacent ranges (this is very rarely true
    for live streams, but is quite often true for on-demand).
    In the case that merging is requested but not possible,
    the implementation will request one at a time.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140012443

commit b29ff0cf517cbb361c90edf208e855306999b7c7
Author: eguven <eguven@google.com>
Date:   Wed Nov 23 02:35:22 2016 -0800

    Make CacheDataSink use ReusableBufferedOutputStream
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=140010664

commit fa3d129b1468c58569e6c1c450a1486e9149ab84
Author: eguven <eguven@google.com>
Date:   Tue Nov 22 09:03:03 2016 -0800

    Fix some of the issues pointed by android lint tool
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139915885

commit 6101450302b96d27a5464f262bffc349fab6bfa5
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Nov 22 09:01:44 2016 -0800

    Merge initialization chunk into HlsMediaChunk
    
    This will allow creating the extractor in the HlsMediaChunk.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139915713

commit 9ac7f64c8448551e5a5c3d69b40bb2d9e13c90f2
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Nov 22 07:24:51 2016 -0800

    Fix search to end of stream in HLS
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139905590

commit 77715fbfbe715721d48a0483cf045fa258118c80
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Nov 22 06:30:14 2016 -0800

    Fix some analysis warnings.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139901449

commit e84fa5835d0e6595646ded0857d59ba2dab4029c
Author: eguven <eguven@google.com>
Date:   Tue Nov 8 03:27:52 2016 +0000

    Use ReusableBufferedOutputStream for cache index file write operation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139889957

commit 42fadfe083335f1de0f342e68dc5469c3ed41b39
Author: olly <olly@google.com>
Date:   Mon Nov 21 11:56:38 2016 -0800

    Allow SsMediaSource to take an optional SsManifest
    
    Also allow custom SsManifestParser injection.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139813660

commit 81ce6bba7a69063a6c8059b0597873cddc06dc0e
Author: olly <olly@google.com>
Date:   Mon Nov 21 11:51:59 2016 -0800

    Allow DashMediaSource to take an optional DashManifest
    
    Also allow custom DashManifestParser injection, to
    support parsing of custom elements and attributes that
    service providers may wish to include in their manifests
    (e.g. #2058).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139813108

commit 90e0919d09a9dd85ab3a03a74091d43a35ad360e
Author: ojw28 <olly@google.com>
Date:   Thu Nov 24 19:30:15 2016 +0000

    Update ISSUE_TEMPLATE

commit 971bf768ffbcab5d39a4e40c89b6c7b16bc69e3e
Author: ojw28 <olly@google.com>
Date:   Thu Nov 24 19:29:15 2016 +0000

    Update ISSUE_TEMPLATE

commit a3ca5c48b388cdcce89b016d0c635b31ec1f88e7
Author: ojw28 <olly@google.com>
Date:   Thu Nov 24 19:28:24 2016 +0000

    Update ISSUE_TEMPLATE

commit 4f3ab7b22d0a8863907012da4be84fb705f2ed3a
Author: olly <olly@google.com>
Date:   Mon Nov 21 10:50:30 2016 -0800

    ExoPlayerImplInternal: Some more minor cleanup
    
    - This should be a no-op change
    - Inline attemptRestart
    - Clean up processing of pending seeks
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139804630

commit 9d7d8adc9c1cb9a683efac1ea06288fd393f9bfb
Author: olly <olly@google.com>
Date:   Mon Nov 21 10:45:25 2016 -0800

    Allow changing of video scaling mode
    
    Issue #2016
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139803888

commit 4846146827a99eb99c529aeab34c81248ffa3c5d
Author: olly <olly@google.com>
Date:   Mon Nov 21 10:43:46 2016 -0800

    Fix internal build to use new Cronet jars
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139803684

commit ae0ac55b8db4d4aebbc15fa599c806d00e6b8be5
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Nov 21 09:55:55 2016 -0800

    Add support for resetting the AudioTrack stream type.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139797714

commit 060ca4aecc11c850ccfbbfea7cef7f1bff9a8859
Author: olly <olly@google.com>
Date:   Tue Mar 8 05:35:48 2016 +0000

    ExoPlayerImplInternal cleanup
    
    - Make handleSourceInfoRefreshed clearer.
    - Remove bufferAheadPeriodCount. Seems error prone.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139774580

commit adc9dd1c75e18f0dc59c32169609090bcd3737a8
Author: dsantoro <dsantoro@google.com>
Date:   Sun Nov 20 18:12:32 2016 -0800

    Add null checks to closeQuietly calls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139738429

commit 6dbfdecbe00c8a09f97935889b530697074ea7cb
Author: ccwu <ccwu@google.com>
Date:   Fri Nov 18 14:56:39 2016 -0800

    Let the mp4 extractor support "camm" metadata tracks.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139626848

commit 4a30dff5241c759934ca287fb0838c35df0ed5b3
Author: olly <olly@google.com>
Date:   Fri Nov 18 04:07:20 2016 -0800

    Fix NPE in TextTrackRenderer
    
    Issue: #2081
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139566990

commit cafe603694b47b4e4096648681dfe01721eedbaf
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 18 03:30:44 2016 -0800

    Allow regressing media sequence numbers in HLS media playlists
    
    This is techically not allowed by the spec[1] but might still occur in
    certain scenarios. New playlists with older media sequence numbers are
    ignored.
    
    [1]: HLS draft version 20, section-6.2.1
    
    Issue:#2059
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139564889

commit d890c2f48f1ed541781872b3df12abe36a41db6a
Author: olly <olly@google.com>
Date:   Fri Nov 18 02:07:17 2016 -0800

    Fix infinite loop -> ANR at end of HLS playbacks
    
    continueLoading shouldn't return true unless it's done
    something. Always returning true if endOfStream was
    causing CompositeSequenceableLoader.continueLoading to
    loop forever.
    
    It looks like the same issue exists in ChunkSampleStream
    as well, although I can't seem to provoke DASH or SS
    playbacks into doing anything bad as a result.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139559834

commit 35054f8f7ca65d9060e1b4924140c7addf12743d
Author: eguven <eguven@google.com>
Date:   Thu Nov 17 14:15:45 2016 -0800

    Added ReusableBufferedOutputStream.
    
    ReusableBufferedOutputStream is a subclass of BufferedOutputStream with a reset(OutputStream) that allows an instance to be re-used with another underlying output stream.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139505999

commit 1a62dad98065b9b3418c82c552a5ac8e66891c53
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Nov 17 06:32:08 2016 -0800

    Remove TODO in ffmpeg extension README.md.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139453745

commit f57434006f49bc5dd5dfb620e292287f4cce89da
Author: olly <olly@google.com>
Date:   Thu Nov 17 06:02:39 2016 -0800

    Fix potential NPE in ExoPlayerImplInternal
    
    I'll have a more thorough refactor of some of this class
    fairly soon!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139451693

commit 61c9c169542204fde21a11cc479cd7a80c4fc71c
Author: olly <olly@google.com>
Date:   Thu Nov 17 05:59:32 2016 -0800

    Make sure we report video size after Surface is set
    
    Issue: #2077
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139451511

commit 051be5c588b25b2d9d899ae89b195455007e3bb3
Author: eguven <eguven@google.com>
Date:   Thu Nov 17 04:35:54 2016 -0800

    Use buffers to speed up cache index file io.
    
    Use BufferedOutputStream and BufferedInputStream while writing / reading.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139446039

commit a8a2ef4a24a5e5bdd86309195a0ede904ef5e0e2
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Nov 17 03:58:01 2016 -0800

    Blacklist HLS media playlists that return 4xx error codes
    
    Issue:#87
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139443476

commit 2add12d5f78e7ffe96f376fa4ae0516413175f97
Author: yutingtseng <yutingtseng@google.com>
Date:   Wed Nov 16 14:49:20 2016 -0800

    Update CacheDataSink to optionally use a BufferedOutputStream for writing
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139381958

commit 92d34cd877ea30a912ebc10531ffdd8d747815cc
Author: cblay <cblay@google.com>
Date:   Wed Nov 16 14:14:12 2016 -0800

    Add flag to CacheDataSource to disable caching unset length requests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139377417

commit d6eb9cb79f8dead17a789b688664794aba2290ef
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Nov 16 08:04:53 2016 -0800

    Allow playlists of different size in HlsPlaylistTracker playlist adjustment
    
    Issue:#2059
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139331670

commit 0effffb89fa02ac711eadcf3e167c9ea65783ab1
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Nov 15 09:31:24 2016 -0800

    Add support for reading .mp3 boxes in stsd.
    
    This is used by Quicktime for MP3 tracks.
    
    Issue: #2066
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139209989

commit 21e3361dfe8fea5b82be3656af29d032dbab7c33
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Nov 15 08:30:17 2016 -0800

    Move 3 private methods to the end of the class
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139204000

commit 348b58021ddd7af22c4d1886994f3bafd1eca930
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Nov 15 04:49:34 2016 -0800

    Move underrun detection into AudioTrack.
    
    This removes duplication from SimpleDecoderAudioRenderer and
    MediaCodecAudioRenderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139187254

commit 74383716a6f6844f25898c0310dfe4dc708775b3
Author: hoangtc <hoangtc@google.com>
Date:   Mon Nov 14 11:47:43 2016 -0800

    Update exoplayerv2 vp9 extension.
    
    Reset RenderedFirstFrame when setting OuputBufferRenderer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139100783

commit 6d5d054b45796162f135645539f96b2181bb38a9
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Nov 14 05:56:05 2016 -0800

    Fix lint in FlacExtractor
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=139064912

commit bcc6c9ef43d0cde391204b8c1f20bb2de8686f9d
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Nov 11 06:43:26 2016 -0800

    Fix a typo.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138871293

commit ff1a008817db3e3bab93cf78f1b17dcaaf540688
Author: eguven <eguven@google.com>
Date:   Sat Oct 8 03:06:24 2016 +0100

    Delete temporary test folders on test exit.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138860196

commit 92a98d1ce2a27266fa69927235929f45678aac40
Author: eguven <eguven@google.com>
Date:   Thu Nov 10 10:54:13 2016 -0800

    Encrypt SimpleCache index file.
    
    Clean up AtomicFile and make it return a custom FileOutputStream
    for writing which handles IOException automatically during write
    operations.
    
    It also syncs the file descriptor and deletes the backup file on
    close() call. This fixes the order of flush and close operations
    when the fileoutputstream is wrapped by another OutputStream.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138779187

commit 16ddc84d937100d991b05461c03165275bd945af
Author: cblay <cblay@google.com>
Date:   Thu Nov 10 07:39:58 2016 -0800

    Make PriorityTaskManager constructor public.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138759164

commit 8cc7dfda7dfae000e41aeb50840786547241ecf0
Author: olly <olly@google.com>
Date:   Thu Nov 10 07:34:29 2016 -0800

    Fix threading issues between ExoPlayerImpl/ExoPlayerImplInternal
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138758739

commit 7ac1cab2d5c5c7b9d32e77555570209eb4b1442a
Author: olly <olly@google.com>
Date:   Thu Nov 10 07:31:12 2016 -0800

    Set language to null unless explicitly defined as "und" in container
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138758504

commit 2620045b0dc0b6777c5cc7651c9430e1d3decf08
Author: olly <olly@google.com>
Date:   Wed Nov 9 16:07:55 2016 -0800

    Add debug logging when codec support checks fail
    
    Issue: #2034
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138698239

commit aefc5165fd8363bf62487c37dc4f743d4ed17208
Author: olly <olly@google.com>
Date:   Wed Nov 9 14:41:22 2016 -0800

    Fix cache upgrade
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138687623

commit ee8a7f17ff9c81db1cbe665c99eaa9de78f14233
Author: vigneshv <vigneshv@google.com>
Date:   Wed Nov 9 10:06:23 2016 -0800

    vp9_extension: Fix potential integer overflows
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138652561

commit b1fe274df39a9f964e9616f55f935fe4d309602a
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Nov 9 05:36:37 2016 -0800

    Replace java.text.ParseException for ExoPlayer's ParserException
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138628300

commit 8236efe6a544fc81b151fb42d7adf140e93902fc
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Nov 9 00:59:00 2016 -0800

    Provide an overlay FrameLayout in SimpleExoPlayerView.
    
    This can be used by the app for showing arbitrary UI on top of the player (for
    example, UI elements associated with an ad).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138610733

commit d5cbb101ed291cadc574f83f3d09e4f7efe2dfd2
Author: olly <olly@google.com>
Date:   Tue Nov 8 09:41:45 2016 -0800

    SimpleExoPlayerView: Remove a bit of dead code
    
    These variables are never read, since the underlying control
    view reads them directly from the attrs.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138528246

commit 7b0effc2d0558ded401cf40ec7fe55f10bdb0624
Author: olly <olly@google.com>
Date:   Tue Nov 8 02:12:59 2016 -0800

    Project default start pos to fix VOD->Live transitions
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138493584

commit 89ad5e6db3cbb1f09e38e6f68d0f590f7ae0e101
Author: olly <olly@google.com>
Date:   Mon Nov 7 10:22:47 2016 -0800

    Fix ExoPlayerImplInternal timestamp conversions
    
    This fixes VOD->Live transitions, with the caveat that
    the Live portion still ends up further behind the live
    edge than intended. This will be fixed in a following
    change.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138407066

commit 3c8db3b9cbf85038b7df0b1a084f3b625e3a781e
Author: olly <olly@google.com>
Date:   Mon Nov 7 09:43:02 2016 -0800

    Pass Timeline back with seek position
    
    This change fixes the race condition where the internal
    timeline is different to the externally visible timeline
    when a seek is performed. We now resolve the seek position
    using the externally visible timeline, then adjust the
    period index as required for the internal timeline. If the
    period is missing we follow similar logic for the existing
    case where the playing period is removed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138402076

commit a4935a9ba0a632febcbe7a6b95e5875c2b1a4996
Author: cdrolle <cdrolle@google.com>
Date:   Mon Nov 7 08:11:12 2016 -0800

    Added support for multiple RawCC (CEA-608/CEA-708) tracks in DASH.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138392065

commit 0354ef24d4bf0c19c9bc42b3a6485457c955100a
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Nov 7 07:47:30 2016 -0800

    Add support for splice info section reading in TS
    
    This CL adds a SpliceInfoDecoder for the most common SCTE35 commands for splcing.
    So far, it only includes TransportStreams, but porting it to HLS and DASH should be
    fairly easy.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138389807

commit 4cd8c77053bc3bde32133b7c9e196c68bffafc51
Author: hoangtc <hoangtc@google.com>
Date:   Mon Nov 7 06:27:48 2016 -0800

    Add layer of indirection for DRM.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138383979

commit a6e277011617ff0b466925d08a4f98c14143d09d
Author: eguven <eguven@google.com>
Date:   Mon Nov 7 05:14:38 2016 -0800

    Upgrade SimpleCacheSpan files during createCacheEntry call.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138379386

commit ff77d1e72cc3836abf0a724b1791fa39176b7472
Author: eguven <eguven@google.com>
Date:   Mon Nov 7 03:39:15 2016 -0800

    Add index file to hold header information for cached content.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138373878

commit 992cfdecc250d20129516a922536e007fe371a4b
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Nov 4 10:48:14 2016 -0700

    Feed timestamps from loaded chunks back to the playlist tracker
    
    This is the first step towards allowing discontinuities in the
    playlist tracking. Also changed durationSecs for durationUs in
    MediaPlaylist.Segment.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138207732

commit a5a2bc89f48a6ceff49f6a52ca93b5cfe8360cab
Author: olly <olly@google.com>
Date:   Fri Nov 4 07:03:51 2016 -0700

    Push window->period seekTo conversions into ExoPlayerImplInternal
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138185910

commit 3e2cb9f89ab5061b6cc1e67fceedbdb3075eafe3
Author: olly <olly@google.com>
Date:   Fri Nov 4 04:07:57 2016 -0700

    Fix incorrect renderer reset enable position
    
    handlePeriodPrepared
    ->setPlayingPeriodHolder
    ->enableRenderers
    
    passes rendererPositionUs to renderer.enable(), but
    this value is not set correctly.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138176114

commit e2081f40fb01657ec32a023cae6dcfb8b29bcb00
Author: zhihuichen <zhihuichen@google.com>
Date:   Mon Jul 18 16:51:25 2016 +0100

    move baseUrl from segments to representations: V2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138136090

commit 6c7ead5d0cadb81dc46d221a66ff9e68fd150a76
Author: olly <olly@google.com>
Date:   Thu Nov 3 10:00:24 2016 -0700

    Document all the ways our new UI components can be customised.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138082864

commit d9421f4fb9d91aab39e5b5ac908e1bac8f241297
Author: cdrolle <cdrolle@google.com>
Date:   Thu Nov 3 08:47:24 2016 -0700

    Fixed issue when VOD-style period is present in a dynamic manifest
    
    A VOD-style period in a dynamic manifest would result in a NullPointerException.
    Also fix another issue in which an unrecognized mime type would also result in
    NullPointerException.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138075137

commit aaf38adc26e2d2333c67e5989c2d36a7b6627414
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Nov 3 03:55:12 2016 -0700

    Add support for HLS live seeking
    
    In order to expose the live window, it is necessary (unlike before) to refresh
    the live playlists being played periodically so as to know where the user can
    seek to. For this, the HlsPlaylistTracker is added, which is basically a map
    from HlsUrl's to playlist. One of the playlists involved in the playback will
    be chosen to define the live window. The playlist tracker it periodically.
    The rest of the playilst will be loaded lazily. N.B: This means that for VOD,
    playlists are not refreshed at all. There are three important features missing
    in this CL(that will be added in later CLs):
    
    * Blacklisting HlsUrls that point to resources that return 4xx response codes.
        As per [Internal: b/18948961].
    * Allow loaded chunks to feed timestamps back to the tracker, to fix any
        drifting in live playlists.
    * Dinamically choose the HlsUrl that points to the playlist that defines the
        live window.
    
    Other features:
    --------------
    
    The tracker can also be used for keeping track of discontinuities. In the case
    of single variant playlists, this is particularly useful. Might also work if
    there is a that the live playlists are aligned (but this is more like working
    around the issue, than actually solving it). For this, see [Internal: b/32166568]
    and [Internal: b/28985320].
    
    Issue:#87
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=138054302

commit 7b3690a0a62793f75ade69c484bb2d975362026e
Author: olly <olly@google.com>
Date:   Wed Jul 20 04:28:30 2016 +0100

    Fix onLoad* event media times for multi-period case
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137932100

commit 488c2d82708fcd547a5a0b19bd56160914ed8567
Author: olly <olly@google.com>
Date:   Mon Oct 31 07:10:31 2016 -0700

    Fixes for Issue #1962
    
    - Use A/V tracks only for buffering position when available
      in ExtractorMediaPeriod.
    - Fix layering of exo_simple_player_view so that subtitles
      are above album art. The test stream provided has both.
    - Make album art in SimpleExoPlayer view respect the resize
      mode, like we do for video.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137698473

commit daf7b948a113a1a5981de99f06a16810c73e4f14
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Oct 31 06:49:53 2016 -0700

    Fix buffering state when selecting VTT track with no cues
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137697023

commit ee969b738e30f29bdd8fcdbaf5fe382b9c843eea
Author: olly <olly@google.com>
Date:   Thu Oct 27 09:58:51 2016 -0700

    Load all exolist.json asset files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137406773

commit 70cc98bb99e81d60ce691f1a4676e148af201347
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 27 07:29:39 2016 -0700

    Fix broken log call
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137392736

commit ced03e9ad56f572de967b220e78887815bee457c
Merge: 2c54363 c4b4e84
Author: ojw28 <olly@google.com>
Date:   Thu Oct 27 15:05:06 2016 +0100

    Merge pull request #2008 from google/dev-v2-id3
    
    Merge ID3 support into dev-v2

commit c4b4e8457929d3d5413537f3c32226c996811422
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 27 12:47:26 2016 +0100

    Add artwork support to SimpleExoPlayerView + misc improvements

commit 0c8f3c7270c465cbce27fb9194ad5b9f5ed6185c
Merge: 8caaf0b 8a89abc
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 27 12:37:29 2016 +0100

    Merge branch 'dev-v2' into dev-v2-id3

commit 8a89abcbf1d72793d4ed370fe7e15dae78575e34
Merge: 2c54363 8caaf0b
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 27 12:37:22 2016 +0100

    Merge branch 'dev-v2-id3' into dev-v2

commit 2c54363204b04bfd58375f30eb6ccc214ef818c3
Author: olly <olly@google.com>
Date:   Tue Oct 25 11:46:55 2016 -0700

    Report track groups and selections through ExoPlayer
    
    TrackSelector no longer has a listener. Instead, tracks
    change events are reported through ExoPlayer.EventListener.
    Applications interested in retrieving the selection info
    should retrieve it directly from the TrackSelector by
    calling an exposed getter.
    
    Pretty sure the ref'd issue is fixed as a side effect of
    this change.
    
    Issue: #1942
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137183073

commit 0b8e9754ca7a8b2634aa3ebaa85681b51b540743
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Oct 25 09:00:19 2016 -0700

    Pass initialization parameters to section readers
    
    Unlike with PesReaders, sections don't have a standard way
    of providing timestmaps or even generating tracks. We need
    to pass this information so that readers decide what to do
    with it.
    
    Issue:#726
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137162494

commit 1809836c2171b4452f57ab938fcc35d6d4826f38
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Oct 25 06:37:41 2016 -0700

    Provide a method for creating a reader for a particular PID
    
    This allows the user to create section readers(usually) for reserved pids,
    like SDT, EIT, CAT, etc.
    
    Issue:#726
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137150853

commit 8b3025d450278572a3e0f1da09fe039d7b918678
Author: []inger <[]inger@google.com>
Date:   Tue Oct 25 05:10:42 2016 -0700

    Make control view layout resource customizable.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137145209

commit ba6368a07a36109fc3fa027705e6ab40258f8144
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 21 02:08:21 2016 +0100

    Don't try to access the caption manager when in edit mode.
    
    Issue: #1991
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137131819

commit 8caaf0b5d992d5a31e7771ca49ec76ff5232e84b
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 26 23:45:50 2016 +0100

    Big cleanup of mp4 metadata extraction

commit 1b39d21ed41ebaaac47fe4a5f61ba40b77bee1dc
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 24 19:22:41 2016 +0100

    Fix indentation and missing javadoc

commit 6dbce8810294c628c22c013ac9cacfbb3bd20e34
Merge: 00f9fc6 929620c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 24 18:50:35 2016 +0100

    Merge branch 'dev-v2-id3' of persistent-https://github.com/google/ExoPlayer into dev-v2-id3

commit 929620c189c746cc8a3c3c0124683cbce5c270a9
Merge: 6673483 99503e6
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 24 18:49:43 2016 +0100

    Merge branch 'dev-v2' into dev-v2-id3

commit 99503e6e3a671160f4bfca078ae20c288ee515d7
Author: olly <olly@google.com>
Date:   Mon Oct 24 09:55:45 2016 -0700

    Fix playback of OGG with only a single payload page
    
    Issue: #1976
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137044583

commit 5c83c28a1fa7c0b2c04eb5d38390484adc4c7e5b
Author: olly <olly@google.com>
Date:   Mon Oct 24 08:48:17 2016 -0700

    Blacklist another non-OMX decoder
    
    Issue: #1986
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137035576

commit 790e5fd2a1110e9440db40447e564ac393cb99b5
Author: olly <olly@google.com>
Date:   Mon Oct 24 08:24:41 2016 -0700

    Update gradle wrapper
    
    Code coverage is disabled in V2 to workaround
    https://code.google.com/p/android/issues/detail?id=226070
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137032839

commit 819ebf703abb61b1ac3f4a60359a45266ac49cb4
Author: olly <olly@google.com>
Date:   Mon Oct 24 04:04:55 2016 -0700

    Assign track type TEXT for CEA708
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=137011920

commit 00f9fc6728f961dc55fcfff1db880811b5252966
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 24 18:01:48 2016 +0100

    Don't propagate GaplessInfoHolder when parsing mp4 metadata

commit 6e69b985175afcc692ae4b4f1ed89ab3f993712c
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jul 18 08:49:41 2016 +0100

    Avoid throwing an exception when an ID3 header is not found
    
    Issue:#1966
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136836332

commit eeb37d73e7436a9f9be4fb53d36d843b82338a4e
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Oct 21 03:46:41 2016 -0700

    Create the SectionPayloadReader interface
    
    SectionPayloadReaders are provided to a SectionReader to
    get whole sections(crc checked). This allows the injection
    of custom section readers. E.G: SCTE35 messages.
    
    Issue:#726
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136816612

commit a0fe258e8d70a93ed8fd9cd296be44625ea03669
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Oct 20 07:08:38 2016 -0700

    Fix/suppress some analysis warnings.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136710546

commit 862552c2edf0f1acdebb55a67ae9bd79fe455a08
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 20 06:29:45 2016 -0700

    Convert ElementaryStreamReaderFactory into TsPayloadReaderFactory
    
    In this CL:
    
    * PesReader moves out of TsExtractor and becomes public.
    * ElementaryStreamReaderFactory becomes TsPayloadReaderFactory and is
        moved to TsPayloadReader.
    * The TsPayloadReaderFactory is in charge of wrapping any
        ElementaryStreamReaders with a PesReader.
    
    Incoming:
    * Extract SectionReader supperclass (analog to PesReader, but for
        sections) from Pat and Pmt readers.
    * Add a ScteReader, wrapped by a section reader, and include it in
        the DefaultTsPayloadReaderFactory.
    
    Issue:#726
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136707706

commit 0cff74dc704fa1d7fa6fd7d969398e7831384c24
Author: olly <olly@google.com>
Date:   Thu Oct 20 05:04:12 2016 -0700

    Clean up okhttp extension Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136702598

commit e4bafd964dffed35a60f82604d50e241d980932c
Merge: 924a041 b2222f8
Author: Santiago Seifert <AquilesCanta@users.noreply.github.com>
Date:   Fri Oct 21 11:45:21 2016 +0100

    Merge pull request #1979 from vitekn/dev-v2
    
    Fix NPE in TsExtractor when ElementaryStreamReaderFactory returns null

commit b2222f8cb7bc44d2f69c6037a015923623b7d46a
Author: vitekn <vitek1982@inbox.ru>
Date:   Fri Oct 21 13:07:08 2016 +0300

    Null pointer exception fixed
    
    pesPayloadReader can be null here because DefaultStreamReader.init() can return null on unknown streamId. If we have a junk transport stream in our content an exception will be thrown.

commit 6673483aca83e83445f3ca4ca61056af48d47cab
Merge: 3e3248d 924a041
Author: ojw28 <olly@google.com>
Date:   Thu Oct 20 12:43:38 2016 +0100

    Merge pull request #1971 from google/dev-v2
    
    Update dev-v2-id3

commit d79f8f64de5d57d053a857be89006d44d756df2d
Merge: 08256ee c7824c4
Author: ojw28 <olly@google.com>
Date:   Thu Oct 20 12:33:44 2016 +0100

    Merge pull request #1970 from google/dev-v2-r2.0.4
    
    r2.0.4

commit c7824c4660d2958ea331d23dbcca9cc74d39ad98
Author: olly <olly@google.com>
Date:   Thu Oct 20 03:35:32 2016 -0700

    Bump version to r2.0.4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136697697

commit 8e0e0ca0dd56ecc5d32f9508014a001d7cb94c3c
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Oct 19 09:58:41 2016 -0700

    Fix NPE when trying to play H265 in Ts files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136607848

commit 924a0417438ed9bc3bc8cb899e40122478d4e101
Merge: f56b05f aa660ac
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 20 12:20:45 2016 +0100

    Merge branch 'dev-v2' of persistent-https://github.com/google/ExoPlayer into dev-v2

commit f56b05f0d73f6ff0b646002c2a8d0acfd21fe723
Author: olly <olly@google.com>
Date:   Thu Oct 20 03:35:32 2016 -0700

    Bump version to r2.0.4
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136697697

commit bebbf29a786f98f5ffd37f072c9b44974ae60e5d
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Oct 19 09:58:41 2016 -0700

    Fix NPE when trying to play H265 in Ts files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136607848

commit aa660acf0300d0ac22f54bd3ba80ceab77f4b21e
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 20 12:00:35 2016 +0100

    Fix typo in comments

commit 75b00753403487ed30baaa10d874659171a36fee
Author: olly <olly@google.com>
Date:   Wed Oct 19 08:18:48 2016 -0700

    Add explicit TargetApi annotation to remove lint error
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136597149

commit 0d679dad0d2fb8b5749f342b2cacaf961bbd6832
Author: olly <olly@google.com>
Date:   Wed Oct 19 07:59:35 2016 -0700

    Fix use of API level 19 method
    
    Issue: #1965
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136595233

commit 3e3248d712cffabd203c5547cdfff80b636feb69
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 19 17:18:17 2016 +0100

    Yet more misc ID3 improvements

commit 586e6257cd009d137e1fd9250f45036d3f06145a
Author: olly <olly@google.com>
Date:   Wed Oct 19 08:18:48 2016 -0700

    Add explicit TargetApi annotation to remove lint error
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136597149

commit 3a5cb435412d6acce4407e7b6fae170b006cb00e
Author: olly <olly@google.com>
Date:   Wed Oct 19 07:59:35 2016 -0700

    Fix use of API level 19 method
    
    Issue: #1965
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136595233

commit aa1002a0d616b2ce50ce52d2d18e5c223a1365cd
Author: olly <olly@google.com>
Date:   Wed Oct 19 05:16:36 2016 -0700

    Rollback "Add REQUIRE_HTTPS flag"
    
    *** Reason for rollback ***
    
    Flag doesn't enforce what it says it enforces, due to redirects
    
    *** Original change description ***
    
    Add REQUIRE_HTTPS flag
    
    Note that it's not possible for the library to enforce that
    the flag is adhered to, since it's possible for applications
    to inject custom implementations of DataSource (there's no
    requirement they even extend HttpDataSource for network
    requesting implementations). It's possible for applications
    to replace pretty much anything in the library, so there's
    no other place we could put the flag where we could make
    this guarantee. Hence this is a best-effort that will work
    when...
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136583459

commit aecbbdd36c669f1c98facac91b92eb07850bf38c
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Oct 18 11:55:47 2016 -0700

    Replace IndexOutOfBounds Exception for BehindLiveWindowException
    
    This is a problem when two invocations of getNextChunk that retrieve
    chunks (i.e. not playlists) occur too apart in time. In that case
    the last loaded chunk has a media sequence that is behind the current
    playlist.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136501291

commit 1cfc432bb8a9db2feaf72b226a6cc0efceb881a6
Author: olly <olly@google.com>
Date:   Tue Oct 18 11:53:00 2016 -0700

    Add REQUIRE_HTTPS flag
    
    Note that it's not possible for the library to enforce that
    the flag is adhered to, since it's possible for applications
    to inject custom implementations of DataSource (there's no
    requirement they even extend HttpDataSource for network
    requesting implementations). It's possible for applications
    to replace pretty much anything in the library, so there's
    no other place we could put the flag where we could make
    this guarantee. Hence this is a best-effort that will work
    when using HttpDataSource implementations that we provide.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136500947

commit d3f78e48081d71b75bedeeeee870972a7f9a24a5
Author: kapishnikov <kapishnikov@google.com>
Date:   Mon Oct 17 14:54:17 2016 -0700

    Deprecate call to new UrlRequest.Builder(...)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136399474

commit 06fb29c939e74f7198a12bcece7b668df05ee52f
Author: eguven <eguven@google.com>
Date:   Mon Oct 17 08:13:33 2016 -0700

    Support caching of multi segment DASH, HLS and Smooth Streaming.
    
    Use sha1 of content uri if a custom cache key or content id isn't provided.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136351830

commit 7e352295d7f966b6e5b2b7520bd766840be8423d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 18 15:17:01 2016 +0100

    Propagate ID3 data for MP3

commit 7594f5b78ba216f6085675972f830b2ebfe230ee
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 18 15:02:35 2016 +0100

    Further enhance ID3 decoder + support

commit e2ff401ea1e50dc76ec50ad274a3f927388ec16a
Merge: 66652f6 cecb1f5
Author: ojw28 <olly@google.com>
Date:   Mon Oct 17 22:52:12 2016 +0100

    Merge pull request #1958 from google/dev-v2
    
    Merge dev-v2 into dev-v2-id3

commit 66652f65bbad83df8b6bef20a7d24943e7f6a17a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 17 22:47:03 2016 +0100

    Make Id3Util final

commit 4391014a7af98b227377b0f4bf75cac245914f33
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 17 22:45:09 2016 +0100

    Split genres into separate util class

commit 110c8f6f1f4459b05e9943fd6f5c8521735bbfbe
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 17 22:35:21 2016 +0100

    Improvements to ID3 decoder

commit 08256eee325bc6839da36235986c58354ae20a9d
Merge: f94218a cecb1f5
Author: ojw28 <olly@google.com>
Date:   Mon Oct 17 15:55:12 2016 +0100

    Merge pull request #1955 from google/dev-v2
    
    r2.0.3

commit cecb1f5f765bc834a307d9f65315c880bf7844cd
Author: olly <olly@google.com>
Date:   Mon Oct 17 05:03:25 2016 -0700

    Bump version + update release notes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136339035

commit e873b4b6abf4827b04fcf7074c7c00cd3e5073c4
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Oct 14 11:16:16 2016 -0700

    Change prepare() for maybePrepare() in HlsSampleStreamWrapper
    
    This will allow asynchronous preparation.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136176854

commit 50aeb20cc2f58ef6f5a0ad9ef52093b4be328ec3
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 17 14:38:56 2016 +0100

    Make Id3Decoder stateless again
    
    One issue with the previous implementation was that
    isUnsynchronized would not be set back to false if
    previously set to true and if the next header has
    majorVersion >= 4. In general, having the decoder be
    stateless is clearer (and thread safe, albeit that
    this property is not required).

commit dca4d16bef3526168a8c24db14ffcbd66ff9f0c4
Author: klampert <klampert@google.com>
Date:   Fri Oct 14 09:15:13 2016 -0700

    Release surfaces created to wrap SurfaceTextures
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136163292

commit 6acf59c4fc12bfca9c77bdea3f69cf3b33d66d45
Author: olly <olly@google.com>
Date:   Thu Oct 13 08:23:39 2016 -0700

    Fix Widevine L3 provisioning in V2
    
    1. HttpMediaDrmCallback.executeProvisionRequest needs to specify
       an empty byte[], else we do a GET instead of a POST.
    2. Content-Type should not be set when making the provision
       request, since there's no body.
    3. DataSource implementations must correctly handle a non-null
       body with zero length. CronetDataSource was not handling this
       case. DefaultHttpDataSource was, but made a code modification
       to make it a little clearer. OkHttpDataSource seems to handle
       the case correctly, and it doens't look like the code can be
       made clearer.
    
    Issue #1925
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136042641

commit a22390c29b253694dd4db326bd5bb77c06b7e703
Author: olly <olly@google.com>
Date:   Thu Oct 13 07:35:32 2016 -0700

    Parse CEA-708 codec for rawCC
    
    Note that actually handling CEA-708 is not yet implemented,
    and so this is a no-op change from a behavior point of view.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136038439

commit e685edc179837f658bd551992c720dd8dc7bff9f
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 13 04:54:13 2016 -0700

    Make interface implementation consistent among ExtractorOutputs
    
    The method track(int id) currently has different behaviours across
    implementations. This CL maps ids to track outputs, which means
    that successive calls with the same id will return the same
    TrackOutput instance. Also fixes TsExtractor inconsistent behavior
    after a seek.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136026721

commit ff712aead598515a6c9d47bf3050f185c226774c
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Oct 13 04:40:44 2016 -0700

    Try not adapting before failing with BehindLiveWindowException in Hls
    
    Issue:#1782
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=136025847

commit 64262085a71f822741b65d78c0e883abaa15d8c1
Author: olly <olly@google.com>
Date:   Wed Oct 12 08:48:37 2016 -0700

    Block when surface being replaced is non-null
    
    A blocking call is necessary where we want to guarantee that
    the player wont access the surface after the method call has
    returned. We currently only do this for the case:
    
    Surface->Null
    
    But we should also do it for the case:
    
    SurfaceA->SurfaceB
    
    Since the caller may reasonably do something like destroy
    SurfaceA immediately after it's been replaced.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135921296

commit f18373eeb23b67e46cbc84e1467beba79eebd67b
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Oct 12 06:18:06 2016 -0700

    Decouple TsExtractor's readers from TrackOutputs
    
    This allows the injectable reader factory to be a stateless factory, allows
    the seeking to be consistent and will allow multiple CC channel support later
    on.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135909712

commit 94c7ee72527d219a54e90281dab8c1d9cd994eb4
Author: olly <olly@google.com>
Date:   Tue Oct 11 11:27:27 2016 -0700

    Cronet - Skip if server doesn't support range requests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135819142

commit bffffb0fac093d7fb6934d266f48c59b4ecb6264
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 12 17:27:54 2016 +0100

    Minor ID3 tweaks

commit f4b8d9490a276e96bf5dbde308a5a3bc654ba206
Merge: 97e7fb8 996fe47
Author: ojw28 <olly@google.com>
Date:   Wed Oct 12 17:05:09 2016 +0100

    Merge pull request #1935 from google/dev-v2
    
    Update dev-v2-id3 with dev-v2

commit 996fe47f8cbafd3a9e6a0b2025a036414bd70a04
Author: olly <olly@google.com>
Date:   Tue Oct 11 08:29:55 2016 -0700

    Fix NPE releasing HlsMediaPeriod
    
    Issue: #1907
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135798950

commit 29f3eb5e5a0f720d55f73992c0817ac4f7c3b9b7
Author: olly <olly@google.com>
Date:   Sat May 7 08:13:17 2016 +0100

    Fixes for retries
    
    - Fix issue in ExoPlayerImpl where the timeline was null'd
      but onTimelineChanged was not fired.
    - Add the ability to not reset the timeline. This is useful
      for retries where you know the timeline will be the same
      as it was previously.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135797577

commit 83107cc25d402a5b405d67cdf4b3687d472d4f53
Author: olly <olly@google.com>
Date:   Tue Oct 11 07:20:44 2016 -0700

    Fix missing release calls on loadingPeriodHolder
    
    playingPeriodHolder can be null in the case that the first
    period is still being prepared. We need to make sure we
    release the period that's being prepared in such cases,
    which is loadingPeriodHolder.
    
    Issue: #1914
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135793472

commit 907b9bf4f65aef81ee12cb06840fd3fac555ed77
Author: olly <olly@google.com>
Date:   Mon Oct 10 11:55:09 2016 -0700

    Sanitize threading in CronetDataSource
    
    - Move nearly all logic onto the calling thread (i.e. the thread
      calling open/read/close), to make threading correctness more
      obvious.
    - Document which variables are read/written from which thread, and
      why the call sequences are safe.
    - Fix thread safety issue that I think could probably cause data
      corruption in the case of a read timeout followed by another
      request into the DataSource.
    
    Also:
    
    - Relaxed content length checking to be consistent with the other
      http DataSource implementations, and avoided parsing the headers
      where they're not used.
    - Fixed missing generics in CronetDataSourceFactory.
    - Added TODO to work with servers that don't support partial range
      requests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135702217

commit 4fab402274c8bc9e8f495493868842cce05d0eff
Author: olly <olly@google.com>
Date:   Mon Oct 10 11:40:08 2016 -0700

    Fix missing generics
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135700280

commit d922a21160ebd8edd351e1d15e1b727e1768e0b2
Author: olly <olly@google.com>
Date:   Mon Oct 10 10:44:13 2016 -0700

    Select the cenc sinf atom explicitly
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135692709

commit 1b81cfdb56b4ca1a56d8ca0427e6be6ed7068a62
Author: eguven <eguven@google.com>
Date:   Mon Oct 10 09:09:47 2016 -0700

    Rename build flavors and remove pre hashing of DataSpec key values.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135682130

commit 91f8328a5f1675a25d6546d4c79bcfdc175a535c
Author: olly <olly@google.com>
Date:   Thu Jul 28 08:48:37 2016 +0100

    UI component improvements
    
    - Make sure no events are posted on PlaybackControlView
      if it's not attached to a window. This can cause leaks.
      The target hide time is recorded if necessary and
      processed when the view is re-attached.
    - Deduplicated PlaybackControlView.VisibilityListener
      invocations.
    - Fixed timeouts to be more intuitive (I think).
    - Fixed initial visibility of PlaybackControlView when
      used as part of SimpleExoPlayerView.
    - Made some more attributes configurable from layout xml.
    
    Issue: #1908
    Issue: #1919
    Issue: #1923
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135679988

commit 97020e0bab87d8f7321c3f29ba4041904e227426
Author: olly <olly@google.com>
Date:   Thu Oct 6 10:55:09 2016 -0700

    CronetDataSource: Fix getContentLength logging
    
    This is a minor cleanup. The main thing it fixes is that
    the "Inconsistent headers" and "Unexpected Content-Range"
    log messages were printing List<String> objects, rather
    than the actual headers they are supposed to print.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135378074

commit d95baa3ee95121b227497d0fe63a0481b7b8b0e8
Author: olly <olly@google.com>
Date:   Thu Oct 6 10:46:38 2016 -0700

    CronetDataSource: Fix thread safety issue with requestProperties
    
    The access in fillCurrentRequestPostBody wasn't protected with
    synchronization. Furthermore, just synchronizing it wouldn't be
    sufficient, since what we really need to check is whether the
    Content-Type header has been added to the UrlRequest.Builder.
    The contents of requestProperties may have changed between the
    headers being added to UrlRequest.Builder and the call to
    fillCurrentRequestPostBody.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135376904

commit 661b14020e02210f1bff436bc145c2c38663f115
Author: olly <olly@google.com>
Date:   Thu Oct 6 10:32:54 2016 -0700

    Partial cleanup of CronetDataSource II
    
    - Allow null Content-Type in response headers.
    - Inline validateResponse, just because it makes it clearer
      what thread it's being executed on when inlined.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135375063

commit ba56f9165cd7feae9a6039779de0bc311d8736d7
Author: olly <olly@google.com>
Date:   Thu Oct 6 10:20:55 2016 -0700

    Partial cleanup of CronetDataSource
    
    - Fix bug in getCurrentRequestStatus where we weren't
      blocking on the condition variable.
    - Make methods static where possible.
    - Clean up getUri implementation.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135373586

commit 5803b2538d4f6a8ef45e95ec73b6c42cc974dcd9
Author: olly <olly@google.com>
Date:   Thu Oct 6 10:13:27 2016 -0700

    No-op reorder of CronetDataSource methods
    
    This change is a no-op reodering, as a precursor to
    further cleanup. The public methods are grouped by
    the class/interface they implement. The private methods
    are ordered with things that will become static in
    a subsequent change at the bottom.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135372629

commit 97e7fb85a7eeec52f343c8e8f2934f82ff90e10c
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 18:00:59 2016 +0100

    ID3: Clean up logging + only add to audio track for MP4

commit ba1da140c6e3bf6573688fc52c058f3bfe4b22b4
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 16:27:58 2016 +0100

    Further modifications to ID3 support
    
    - Lots of misc cleanup
    - Remove GaplessInfo from Metadata. IMO it doesn't quite belong there,
      and means it ends up being represented twice inside Format.
    - Note: Changes untested, but will be tested in due course!

commit 3b34f850f25389d1a4fc240e883e872ede0308c0
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 14:58:12 2016 +0100

    Clean up ID3 frame implementations

commit 6a3b66987a064119981c88c268c10a9ef5a19d85
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 14:52:38 2016 +0100

    Revert unrelated ContentDataSource change

commit 5a72ca6b365559e6a7076774b2d0272cc709d3b6
Merge: 93c2133 5a097a4
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 14:48:06 2016 +0100

    Merge branch 'cbfiddle-albumMetadataV2.1' into dev-v2-id3

commit 5a097a4c9db07f0c7effecf9d497472121c2692a
Merge: 93c2133 776da10
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Sun Oct 9 14:47:48 2016 +0100

    Merge branch 'albumMetadataV2.1' of git://github.com/cbfiddle/ExoPlayer into cbfiddle-albumMetadataV2.1

commit 93c2133f2945f9cb7a9dd6bbcc714874bc5567ba
Merge: 6c12ec6 880bdc1
Author: ojw28 <olly@google.com>
Date:   Sun Oct 9 14:41:46 2016 +0100

    Merge pull request #1909 from kaorimatz/okhttp-call-factory
    
    Use Call.Factory instead of OkHttpClient

commit 880bdc181adf9805ec984b7d77687499d73c598f
Author: Satoshi Matsumoto <kaorimatz@gmail.com>
Date:   Fri Oct 7 21:00:27 2016 +0900

    Use Call.Factory instead of OkHttpClient
    
    This allows using alternate implementation of an HTTP client. We can use
    OkHttpClient as before as it implements Call.Factory.

commit f94218a758bf6810520b5392521818b8c1b5e604
Merge: f8a8302 6c12ec6
Author: ojw28 <olly@google.com>
Date:   Thu Oct 6 17:40:16 2016 +0100

    Merge pull request #1905 from google/dev-v2
    
    r2.0.2

commit 6c12ec629a30bbf42ab9cc53096647cb12998607
Author: olly <olly@google.com>
Date:   Thu Oct 6 06:52:12 2016 -0700

    Some minor UI refinements
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135353593

commit 08965c03d096a55c57cd010129fa4885a1160b6e
Author: []inger <[]inger@google.com>
Date:   Wed Oct 5 15:57:08 2016 -0700

    Avoid memory leaks by removing callbacks from surface when SimpleExoPlayer is released.
    
    Without this developers which reuse a SurfaceHolder with multiple instances of
    SimpleExoPlayer need to call simpleExoPlayer.setVideoSurfaceHolder(null) to get
    the SimpleExoPlayer.ComponentListener removed from the surface holder. If they
    don't, the component listener is still registered and as a member class leaks
    an instance of simpleExoPlayer.
    
    Issue #1855
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135292439

commit d334dfdcba1eb676ff9c8708a263b0279afb4720
Author: olly <olly@google.com>
Date:   Wed Oct 5 13:16:58 2016 -0700

    Fix merging of selected streams.
    
    Playback would fail if a renderer is toggled from consuming from
    one child to another in a single step.
    
    Issue: #1900
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135270356

commit 053dc27a3ebd88c85cbdafe0ca3c8e6db4e79758
Author: []inger <[]inger@google.com>
Date:   Wed Oct 5 12:31:32 2016 -0700

    Introduce resize mode for AspectRatioFrameLayout.
    https://github.com/google/ExoPlayer/issues/1827
    
    Three different modes available: fit (default), fixed_width, fixed_height
    Developers need to use wrap_content for the dimension which is not fixed:
    
    app:resize_mode="fixed_width"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135264861

commit 2cf339e0953fd00bbd2b664ff1770464f33bebc8
Author: olly <olly@google.com>
Date:   Wed Oct 5 11:56:24 2016 -0700

    Bump version to 2.0.2 + document inclusion of OkHttp extension
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135260806

commit 89c438078e54bc6426d294c2ddc94436a5901a05
Author: olly <olly@google.com>
Date:   Wed Oct 5 07:15:41 2016 -0700

    Fix retry crash in edge case
    
    Configuration of retry currently fails if all of the
    following are true, which is highly unlikely but does
    occur in the ref'd issue.
    
    1. Loading/extraction fails
    2. Neither length of stream of a seek map is known
    3. At least one track has been output by the extractor
    
    Issue: #1899
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135228687

commit 1b90b7c12cfe0931134182d983609228df93fd12
Author: olly <olly@google.com>
Date:   Wed Oct 5 03:39:19 2016 -0700

    Factor out common variables for publishing
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135215320

commit 7c3fe15426e8150c92ee7589acf011872b0beb07
Author: olly <olly@google.com>
Date:   Wed Oct 5 02:40:52 2016 -0700

    Add convenience getPlayer methods to UI components
    
    Issue: #1895
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135211179

commit 85d749d2d53cd7253dcd1e8b28ee64949946c717
Author: olly <olly@google.com>
Date:   Wed Oct 5 02:39:02 2016 -0700

    Change mavenCentral -> jcenter
    
    Ref: https://blog.bintray.com/2015/02/09/android-studio-migration-from-maven-central-to-jcenter/
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135211072

commit b3c6f1caae9f67c66f1abb2a43d57788b4c0510b
Author: olly <olly@google.com>
Date:   Tue Oct 4 12:30:50 2016 -0700

    Finish cleaning DataSource implementations.
    
    - Enfroce read returns 0 if readLength==0 everywhere.
    - Fixes and simplifications for CronetDataSource.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135138232

commit f8ed4cfdeeac04c6119b246bbaadb4907c3f79b7
Author: olly <olly@google.com>
Date:   Tue Oct 4 12:15:28 2016 -0700

    Clean up some DataSource implementations
    
    - Make read return 0 if readLength==0
    - Return RESULT_END_OF_INPUT properly in the case that
      bytesRemaining is unset (this was broken previously,
      but only applies for assets > 2^31 bytes, so it's
      unlikely anyone ever hit this issue)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135136541

commit 7838a16dd8448efca76cf3b44e28e5b8f05a1f24
Author: olly <olly@google.com>
Date:   Tue Oct 4 07:17:09 2016 -0700

    Publish OkHttp extension to Bintray.
    
    It'll be a TODO to clean up some of the commonality between
    publishing this and the core library (e.g. the version number
    should really be spec'd in one place only). Just getting this
    submitted for now so that we don't lose track of how I created
    https://bintray.com/google/exoplayer/extension-okhttp
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135102459

commit e288880aaf1e952312141471326c5cd3aa22fed5
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Oct 4 06:57:20 2016 -0700

    Fix Ac3 extractor sniff
    
    Issue:#1875
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135100986

commit f2beec4c82d0d3ba303b16fece61d02768037c1d
Author: olly <olly@google.com>
Date:   Tue Oct 4 06:49:50 2016 -0700

    Fix playback tests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135100455

commit b29b4f7e1a66d78faedb468d3edba527e96ff0d3
Author: olly <olly@google.com>
Date:   Tue Oct 4 04:16:05 2016 -0700

    MergingMediaPeriod + subtitle fixes
    
    - Correctly null out streams[j] in the case that a renderer
      is being disabled.
    - Read discontinuities from all children, not just enabled
      ones. This fixes a failure when reading a discontinuity
      with all renderers disabled.
    - Add in some assertions to make incorrect stream selection
      failures obvious and immediate.
    - Relocate subtitles so they're above the shutter (needed so
      they continue to be visible when video is disabled but
      text is still enabled).
    
    Issue: #1854
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=135089944

commit 6306c269885475c0a6f947245ed19b60a010ccfd
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Oct 3 10:21:24 2016 -0700

    Add support for fragmented MP4 in HLS
    
    This CL adds support for initialization segments in HLS. This is required mainly for(but not limited to) usage of fMP4. The fMP4 support only consists in creating the required extractor if the extension is .mp4, provided the initialization segment is correctly
    loaded and passed to the extractor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134997636

commit 69af3897309efababfe4d7bacc03497c9fb9ede8
Author: olly <olly@google.com>
Date:   Mon Oct 3 09:38:40 2016 -0700

    Trim allocator on stop/reset by default
    
    This prevents a large amount of memory from being held
    in the case that a player instance is released, but the
    application is holding dangling references to the player
    that are preventing it from being garbage collected.
    
    Issue: #1855
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134992945

commit f75f3d75b26c8638c56e37cded54f3ac5fa58e0c
Author: olly <olly@google.com>
Date:   Mon Oct 3 06:55:41 2016 -0700

    Fix sideloaded subtitles
    
    - Fix NPE issue in SingleSampleMediaPeriod.
    - Delay handling of EOS in TextRenderer until the last
      subtitle is fully played out.
    
    Issue: #1882
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134979286

commit 37806ee792eb595d8524899a0386548d4600a56b
Author: cdrolle <cdrolle@google.com>
Date:   Fri Sep 30 07:33:10 2016 -0700

    Added Basic CEA-708 caption support to ExoPlayer V2, roughly equivalent to the current state of CEA-608. It's still missing window (and the associated positioning and formatting) support, emulating a 3-line rollup.
    
    Currently this has only been tested with the RawCC container, though it should work with anything that makes use of SeiReader (i.e. MPEG2-TS) with minimal changes to SeiReader.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134781660

commit f8a8302f7bbcb47997095bd97b086eb633e49972
Merge: 7d991ce c381093
Author: ojw28 <olly@google.com>
Date:   Fri Sep 30 15:08:06 2016 +0100

    Merge pull request #1879 from google/dev-v2
    
    r2.0.1

commit c381093a485d956562bb824fa55ef67f38646929
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 30 06:21:26 2016 -0700

    Update variable name in comment.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134776852

commit ee4d297f22a3b6775a13a64cf9a97e229be21f00
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 30 05:46:14 2016 -0700

    Fix seeking in the last period.
    
    When reading the last period, the readingPeriodHolder was set to null in
    updatePeriods if it was the last period. (This would occur almost immediately
    when playing a single-period source.) seekToPeriodPosition suppresses reusing a
    loaded/prepared period if the reading period and playing period did not match,
    which meant that the whole timeline was recreated when seeking in the last
    period.
    
    Leave readingPeriodHolder non-null. This means that at all times either
    playingPeriodHolder == readingPeriodHolder (and they could be null or
    non-null), or playingPeriodHolder and readingPeriodHolder differ and are both
    non-null.
    
    Also fix an issue where streams were never forced to be recreated during track
    reselection when reading ahead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134774238

commit 7971a18a836fe6bbb95fcd4f0ff994fd31836048
Author: olly <olly@google.com>
Date:   Thu Sep 29 09:57:45 2016 -0700

    Revert back to default cue parameters until we support positioning
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134673236

commit 21626c417e3545d767d4fac8661589489f87097b
Author: olly <olly@google.com>
Date:   Thu Sep 29 08:08:51 2016 -0700

    Bump version to 2.0.1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134662367

commit 8bf0243daf3f20d421cc17d87f5fb9b51d30ef4b
Author: olly <olly@google.com>
Date:   Thu Sep 29 07:42:48 2016 -0700

    Fix mp3 extraction failure for short frames
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134660133

commit 040fe3b194572f680081fce3effb6c87d06ba9f8
Author: cdrolle <cdrolle@google.com>
Date:   Wed Sep 28 08:30:50 2016 -0700

    Refactored the text.eia608 package to text.cea.
    
    All of the classes in the text.eia608 package have been moved to
    text.cea, and renamed with the "cea" prefix instead of "eia". All of
    the buffering logic has been extracted from Cea608Decoder (formerly
    Eia608Decoder) into the abstract CeaDecoder, which Cea608Decoder
    extends. Cea608Decoder also now expects a 3-byte sample (i.e. the
    entire cc_data_pkt instead of just the cc_data_1 and cc_data_2 bytes).
    Classes like RawCcExtractor and SeiReader, responsible for creating
    these samples, have also been updated accordingly.
    
    This change is a necessary precursor to adding support for multi
    -channel CEA-608 and CEA-708 captions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134537482

commit 825ec70d319b9aba7dbe488f8139eb5392859cc9
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Sep 28 00:37:42 2016 -0700

    Move preparation from MediaPeriod constructors to prepare().
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134504088

commit c7b5c967ff44e1c39b22a3509479c3431cdff5ac
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 27 12:00:42 2016 -0700

    Remove duplicate methods in DefaultTrackSelector
    
    This encourages a single invalidation when setting different parameters.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134436136

commit ed5decfafc2a88216d0e05fbf71960a00c0e8698
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 27 11:36:54 2016 -0700

    Add ElementaryStreamReader's factory to inject custom readers in TSExtractor
    
    Issue:#726
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134433012

commit c82fd859becef278df2397eaf72551daa4f6010e
Author: eguven <eguven@google.com>
Date:   Tue Sep 27 09:23:53 2016 -0700

    Move build*DataSourceFactory methods to the DemoApplication class for easy customization.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134414869

commit 4a62b2688cf8c22545e54088c520bedcf4ba6764
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Sep 27 08:32:41 2016 -0700

    Post onPrepared so it runs after createPeriod has finished.
    
    Issue: #1853
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134409897

commit 85b61adb32cfc9a5b4cae83ce924994d0e9c020d
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Sep 27 08:05:22 2016 -0700

    Call onPrepared/onSourceInfoRefreshed on the playback thread.
    
    HlsSampleStreamWrapper and ExtractorMediaPeriod would call
    onPrepared/onSourceInfoRefreshed from their loading threads. That was
    problematic for ConcatenatingMediaSource and MergingMediaSource, which assume
    that their callbacks are called on the same thread (iterating through timelines
    from all sources and updating pendingTimelineSources respectively). This change
    makes them post calls to the callbacks on the playback thread.
    
    Generally, implementing a composite MediaSource is easier if
    MediaPeriod.Callback's methods are all called on the same (playback) thread, so
    this change makes that part of its contract.
    
    Also post onContinueLoadingRequested from ExtractingLoadable because
    MergingMediaPeriod.onContinueLoadingRequested reads trackGroups written on the
    playback thread.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134407280

commit eaf8218855940ea636212859ae6c7c5c9d493841
Author: olly <olly@google.com>
Date:   Tue Sep 27 04:12:23 2016 -0700

    Fix shutter open/close behavior
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134389619

commit d74166cd355a6ae3b2d71382b234cf40606e984c
Author: anjalibh <anjalibh@google.com>
Date:   Mon Sep 26 11:20:58 2016 -0700

    Parse Projection, ProjectionPrivate
    
    As described in https://github.com/google/spatial-media/blob/master/docs/spherical-video-v2-rfc.md.
    Also parse StereoMode as per standard matroska spec.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134302208

commit f5ebcb8d043292e3e9aad190900e9bcfc2f52296
Author: cdrolle <cdrolle@google.com>
Date:   Mon Sep 26 11:03:37 2016 -0700

    Modified the default position parameters of the Cue objects created by
    Eia608Decoder.
    
    Full preamble positioning will be provided in a subsequent CL. This CL
    also contains some minor cleanup in Eia608Decoder and adds some TODOs
    to handle the second channel.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134299337

commit 7273237b28e17cacc9fe9e58fff5ce9783026a65
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Sep 26 09:43:40 2016 -0700

    Add an immutable holder for track selection parameters
    
    This solves the thread unsafety issue of the default track selector and
    allows atomic configuration changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134288525

commit 65eda1d105c894b6d359702587943dce9f35b77f
Author: olly <olly@google.com>
Date:   Fri Sep 23 11:43:07 2016 -0700

    Add missing generic types
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134099118

commit 88b9e8c615914d96e639c372115e7025ba641104
Author: olly <olly@google.com>
Date:   Fri Sep 23 08:49:04 2016 -0700

    Clear the selection override even if renderer is disabled
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134078455

commit 94cc606091799b4a03593582528a600494979b15
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 23 07:56:25 2016 -0700

    Export variant codecs in HLS
    
    Issue:#1772
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134073672

commit 8cf107408d2b6d15373dc8a6b938bfbec03e8b83
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 23 07:49:27 2016 -0700

    Replace stbl consistency assertions with a warning.
    
    Issue: #1850
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134073096

commit 654d914bb65c8458d0c9713ac94f77164f7bee65
Author: olly <olly@google.com>
Date:   Fri Sep 23 05:35:42 2016 -0700

    Fix DefaultHttpDataSource read when requested length is 0
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134063990

commit 669cf6804a8c44455bfb9b0899c5be3273e5081b
Author: []inger <[]inger@google.com>
Date:   Fri Sep 23 03:15:38 2016 -0700

    Mention jcenter and gradle dependency in dev guide and Github readme.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134056007

commit f2cf086d760dfc3c0ccdc41edb628c97110075d7
Author: falhassen <falhassen@google.com>
Date:   Thu Sep 22 16:00:43 2016 -0700

    Fix content length calculation for gzipped files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=134011959

commit 57a2749a9d78c2c88a0b4da5e62dca8ff1c504d4
Author: olly <olly@google.com>
Date:   Thu Sep 22 05:57:00 2016 -0700

    Fix playback of short duration content
    
    Issue #1837
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133944552

commit e1ab1e3256c0c26ae2ea95b796a4f251dbf4826a
Author: []inger <[]inger@google.com>
Date:   Thu Sep 22 05:50:39 2016 -0700

    Update test vectors
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133944105

commit a7d5f4b0694a07bd5c5d0f9e78ead86d3270f795
Author: olly <olly@google.com>
Date:   Thu Sep 22 04:32:11 2016 -0700

    Automated rollback of "Upgrade gradle to 2.14.1"
    
    *** Reason for rollback ***
    
    2.14.1 not compatible with 2.1.2. Oops.
    
    *** Original change description ***
    
    Upgrade gradle to 2.14.1
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133939282

commit 06b96bfa8e32ed57ba6c7eac4c23ce63a8b69ccd
Author: olly <olly@google.com>
Date:   Thu Sep 22 04:17:36 2016 -0700

    Upgrade gradle to 2.14.1
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133938559

commit 57e486a44afd4d029fa9f9f2e360e1f6f9fca6ca
Author: []inger <[]inger@google.com>
Date:   Thu Sep 22 03:19:40 2016 -0700

    Reorganize test vectors
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133935070

commit 1546da899bcba212fc269ad823802528e5f20eb5
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 22 02:53:01 2016 -0700

    Use @IntDef where possible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133932812

commit e20d7034c710cc3470bc483ffc7fa514cce97b36
Author: mgersh <mgersh@google.com>
Date:   Wed Sep 21 11:00:38 2016 -0700

    Switch to Cronet 55_0_2860_0
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133850026

commit 59ee4341c59c78c48bed0548af7694554fbaa68b
Author: olly <olly@google.com>
Date:   Fri Sep 16 10:47:19 2016 -0700

    Fix buffering issue for live streams
    
    Issue: #1825
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133401980

commit 22728d9ae44c09a23a59c4ccc5e7453ce1e23ef5
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Sep 16 07:55:34 2016 -0700

    Use new ParsableByteArray.reset where possible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133384105

commit c17190319b6faf0583fb65b973e8924420498c11
Author: olly <olly@google.com>
Date:   Thu Sep 15 09:01:30 2016 -0700

    Rename assets to avoid naming conflicts
    
    Issue #1823
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133267642

commit 70351bfae2ef13f35c0aa7629e50ea26f028afd5
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 15 03:56:08 2016 -0700

    Create one HlsSampleStreamWrapper per track group
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133243031

commit 6a099f1c5706642d407fa317a201776057820779
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 15 03:37:47 2016 -0700

    Clean up MP3 synchronization and fix handling < 4 frames.
    
    Also add a test MP3 stream with one frame.
    
    Make FakeExtractorInput's end of input detection to apply also for peekFully, and
    make its skip and read methods read at least one byte.
    
    Issue: #1732
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133241641

commit b1f9798b892a1285675d0f900dab3efd869f91d5
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Sep 15 03:21:00 2016 -0700

    Fix peeking the end of the stream then reading it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133240502

commit 7d991cef305e95cae5cd2a9feadf4af8858b284b
Merge: 5512aae ab49425
Author: ojw28 <olly@google.com>
Date:   Wed Sep 14 20:19:39 2016 +0100

    Merge pull request #1822 from google/dev-v2
    
    Fix crash on pre-api-21 devices.

commit ab49425e4360bef5e520a3fb554e03383aa15b58
Author: olly <olly@google.com>
Date:   Wed Sep 14 12:13:32 2016 -0700

    Fix crash on pre-api-21 devices.
    
    The four-arg constructor didn't exist in ViewGroup for
    earlier API levels. I think it can probably be safely
    omitted, unless you know otherwise?
    
    Issue: #1820
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133156975

commit 5512aae4518ed563d645eea3ed9b5f3be4dbb964
Author: eguven <eguven@google.com>
Date:   Wed Sep 14 07:05:15 2016 -0700

    Revert CacheSpan EOS changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133123235

commit 80d08a6e254b26bcb7093af94d47701c0edfe6de
Author: olly <olly@google.com>
Date:   Wed Sep 14 06:37:13 2016 -0700

    Fix the build
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133120924

commit bf0d398ba86669be223994ec77412e2aeebf2335
Author: olly <olly@google.com>
Date:   Wed Sep 14 06:29:47 2016 -0700

    Fix RawResourceDataSource remaining length
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133120449

commit e4cc2d6acdf2a846a3e62a2c22ee20eb3da58e1f
Author: olly <olly@google.com>
Date:   Wed Sep 14 02:30:45 2016 -0700

    Set allowedVideoJoiningTimeMs to 0 to fix playback test failures
    
    It defaults to 5000, which allows frames to be dropped in an
    attempt to seamlessly rejoin when re-enabling video during an
    ongoing playback. This causes performance failures when running
    the test*AdaptiveWithRendererDisabling playback tests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133105110

commit 98a5e199f9580a6a0d67096597e74388c064e587
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Sep 14 09:47:07 2016 -0400

    Corrected vertical positioning

commit b87463a85791e1e1600413cedf4c9adfd8615a64
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Sep 14 09:32:53 2016 -0400

    Fixed an off by one error and fixed iterating through the cues

commit 560071683ffa19c2906b75353fd72569e3606f27
Author: olly <olly@google.com>
Date:   Tue Sep 13 11:11:01 2016 -0700

    Guide V2 + a few related code tweaks
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133022058

commit 2ebabc54ebd2ae01e12266157e24b16b1f29ce9b
Author: benm <benm@google.com>
Date:   Tue Sep 13 10:05:40 2016 -0700

    Support raw resources inside the APK as a DataSource.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=133013132

commit 76a05ce30fced43914c0a6713f96a1ed4d990be8
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 13 04:48:34 2016 -0700

    Fix race condition in timestamp adjustment for HLS
    
    If a Webvtt HlsChunkSource got to schedule its chunk load before the
    master HlsChunkSource (the one that downloads the TS or the fMP4
    chunks), the player would never get past the buffering state.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132985792

commit 20757a1980c6f2cd7e2cd439c80292b2d7546574
Author: olly <olly@google.com>
Date:   Tue Sep 13 04:44:38 2016 -0700

    Update some documentation for V2 + Rm extra blank line
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132985566

commit f4248410d90ccdda227103a15445e3b6c7d4b5c7
Author: olly <olly@google.com>
Date:   Tue Sep 13 03:43:42 2016 -0700

    PlaybackControlView improvements
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132981908

commit f2229d920bd9611cb3daf48a37455c008cdce9e9
Author: olly <olly@google.com>
Date:   Mon Sep 12 12:31:21 2016 -0700

    Move FlacJni to FlacDecoderJni
    
    If/when we add the ability to query version information,
    such methods will go into FlacLibrary for consistency with
    the other extensions. The difference for Flac is that
    since the decoder JNI is used by the extractor too, it
    needs splitting into a separate from from FlacDecoder.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132904665

commit de67fa5017d609dbd526468e3b84cc5169b0e51a
Author: olly <olly@google.com>
Date:   Mon Sep 12 11:52:41 2016 -0700

    Allow replacement of libraries for Opus/Flac/Ffmpeg too
    
    - Also make some of the naming more concise + misc style cleanup.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132899979

commit c46c6f18c22487e649249d713edf9e682b22707a
Author: olly <olly@google.com>
Date:   Mon Sep 12 10:48:46 2016 -0700

    Add DRM request headers to exolist.json format
    
    Plus misc fixes related to the added samples.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132891534

commit 26e1306639c7f98825972cdcc4e573050a1f4ea8
Author: olly <olly@google.com>
Date:   Mon Sep 12 09:28:46 2016 -0700

    Fix HLS Timeline.isDynamic
    
    - Also fix an issue that allowed blacklisting of all tracks,
    due to incorrect index being used.
    - Also fix an issue with track deselection for HLS.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132882151

commit 2da35769ff69eb4dba69d8b74d1d8f5873316438
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Sep 12 08:30:42 2016 -0700

    Fix some typos/consistency nits.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132876946

commit 45a5331e308e71bda47181affc14fe40b222c9a4
Author: benm <benm@google.com>
Date:   Mon Sep 12 08:03:48 2016 -0700

    Add support to VP9 extension for overriding the native library names
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132874777

commit 383966b3074343ee0b679a0587e3d33c530dffc7
Author: olly <olly@google.com>
Date:   Mon Sep 12 04:40:44 2016 -0700

    No-op cleanup for playback controls II
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132862043

commit 625bb4ed48c9d70a44f9207c6604369b0c9b3c70
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Sep 12 04:40:12 2016 -0700

    Fix PMT descriptors parsing bug
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132862014

commit bcec5970231d7159afbfc2939ef215fe32326864
Author: olly <olly@google.com>
Date:   Mon Sep 12 03:57:08 2016 -0700

    No-op cleanup for playback controls
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132859943

commit 8190089b32ff56a4e176056c41e012f3bc1c5523
Author: olly <olly@google.com>
Date:   Mon Sep 12 03:35:29 2016 -0700

    Rename defaultStartPosition -> defaultPosition
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132858669

commit 94983675c2541d69613fff5404cd42f5580e50c9
Author: olly <olly@google.com>
Date:   Mon Sep 12 03:26:37 2016 -0700

    Expose an unknown mimeType video track rather throwing in parser
    
    Issue: #631
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132858217

commit 67597ffc5aac66bdfa00c4c412c55763a6e356ea
Author: olly <olly@google.com>
Date:   Mon Sep 12 03:16:37 2016 -0700

    Keep player paused if it was paused when backgrounded
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132857692

commit f2ddfb086786d9f26abd4d5a7cc0c954d85ee480
Author: olly <olly@google.com>
Date:   Mon Sep 12 03:06:32 2016 -0700

    Expose getPhysicalDisplaySize for non-primary display
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132856997

commit 7925342fa0d8f7604592d1b5e6231261364b5633
Author: []inger <[]inger@google.com>
Date:   Mon Sep 12 02:46:25 2016 -0700

    Provide a VideoView for simple use cases.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132855091

commit da034da5d2ced6b2b0b42182f41eee15c4843de0
Author: olly <olly@google.com>
Date:   Fri Sep 9 11:13:14 2016 -0700

    Release notes for 2.0.0 (and 1.5.11)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132694632

commit 7e51c3af7402edf85b22a6d2a2aee4bf356c0b43
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 9 09:50:37 2016 -0700

    Add continuity counter support in Transport Streams
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132684574

commit 3bad28ac91ba7394254c89f226c14144ee559d40
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 8 09:06:43 2016 -0700

    Fix TsExtractor tests
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132561841

commit c78010c21210ea8b5f59fdf2ce9dc491c073b628
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 8 08:44:12 2016 -0700

    Add support for language descriptors in MPEG-2 TS
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132559667

commit 26466679dff3a9194ccc7b56618430e8de064376
Author: eguven <eguven@google.com>
Date:   Thu Sep 8 08:12:22 2016 -0700

    Added CacheDataSourceFactory, FileDataSourceFactory and CacheDataSinkFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132556806

commit cab02289f5798ef330d8d8e15329c66791c66529
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 8 06:04:15 2016 -0700

    Generalize the PtsTimestampAdjuster
    
    This allows the adjustment of timestamps in microseconds along with
    TS timestamps. This is useful for containers that include the
    timestamps in microseconds format, like fMP4 and WebVTT.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132547521

commit 04c28c6d7dcd49091578dcc1953c3e8eb14a4d84
Author: olly <olly@google.com>
Date:   Wed Sep 7 12:44:28 2016 -0700

    Minimal change to fix seeking before prepare + finalize API
    
    - This change fixes seeking before the prepare (or more
      accurately, before the timeline is set). The fix a minimal
      one to fix the behavior. It's inefficient compared to
      posting the pending seek onto the playback thread, which
      will be the long term solution.
    - As of this change, I think we can call V2 "done". There are
      some loose ends to tie up, but the API is effectively
      finalized and the implementation is in a state where you
      can take it, use it and expect it to work.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132468107

commit 36df5bcd84d22eebf4279ea49cded617b2d37bf3
Author: benm <benm@google.com>
Date:   Wed Sep 7 11:43:14 2016 -0700

    Fix a warning in libvpxJNI
    
    v2/extensions/vp9/src/main/jni/vpx_jni.cc:63:31: warning: missing field 'w' initializer [-Wmissing-field-initializers]
      vpx_codec_dec_cfg_t cfg = {0};
                                  ^
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132461351

commit 8f7084563182e2a1d5d5d9091e6b95ea8ae03ae5
Author: olly <olly@google.com>
Date:   Wed Sep 7 07:27:39 2016 -0700

    Tweak VideoListener doc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132433848

commit 651f5fafa7acb59ca392aca21b2a68bc96f4da2c
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Sep 7 03:22:41 2016 -0700

    HLS: Instantiate an AC3 extractor for .ec3 files
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132417755

commit 45d5d308b4a21fee32e0ae631ad9cfb495425d8c
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 6 05:13:44 2016 -0700

    Add transport error indicator support to TsExtractor
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132307448

commit 7c48028fe715adb681e543dc24412a679d148c39
Author: []inger <[]inger@google.com>
Date:   Tue Sep 6 05:06:08 2016 -0700

    Add support to render video onto a TextureView with SimpleExoPlayer.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132306954

commit 12b7bbf80302785cee00cf252ecb6b84d75dccb6
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Sep 6 04:39:45 2016 -0700

    Improve HLS master playlist parsing
    
    Adds a few unused fields to HlsUrl and moves things towards the Hls
    reimplementation we are looking for. Also fixes a bug related to
    asuming every getNextChunk().loadable == null being related to
    reaching the live edge.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132305206

commit 5f39b93d304e77b5d44f8f9c46a688bd0c8dc28c
Author: olly <olly@google.com>
Date:   Tue Sep 6 03:31:09 2016 -0700

    Properly release sample streams for DASH
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132301223

commit e296d10c3fc21a43b4ca0ea96d2cec43bd0b29b4
Author: olly <olly@google.com>
Date:   Mon Sep 5 08:28:35 2016 -0700

    Start moving ExoPlayerImpl to use windows not periods
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132248872

commit 32867217a309545715c10bace285dd03f52643ac
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 2 10:35:13 2016 -0700

    Improve profile/level check support for AVC
    
    Issue:#1772
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132078273

commit da0bc3325109405230b0b7fa53326cad8ab19412
Merge: 520e6ca 127ebbe
Author: Santiago Seifert <aquilescanta@google.com>
Date:   Thu Sep 8 14:49:57 2016 +0100

    Merge branch 'dev-v2' of https://github.com/google/ExoPlayer into pr_1803

commit 127ebbe0f9c87e8c3990e6f111f833283e5cd0fe
Merge: c54169c e2722de
Author: Santiago Seifert <AquilesCanta@users.noreply.github.com>
Date:   Thu Sep 8 14:45:01 2016 +0100

    Merge pull request #1803 from tresvecesseis/dev-v2-track_names
    
    TsExtractor support for language code in the audio tracks.

commit 520e6caa60b06a06a114ab89a9d095dcb6773b9f
Author: Santiago Seifert <aquilescanta@google.com>
Date:   Thu Sep 8 12:59:21 2016 +0100

    Fixed style things from pull request

commit e2722dee39b20747b537de542135c3fb22e65e97
Author: Sergio Moreno Mozota <tresvecesseis@gmail.com>
Date:   Wed Sep 7 07:43:23 2016 +0200

    TsExtractor support for language code in the audio tracks.

commit 776da107251e2e51f12d23986b7e83a2c39a2bdd
Author: Alan Snyder <ranchlens@cbfiddle.com>
Date:   Mon Sep 5 15:39:40 2016 -0700

    Fix merge issue

commit 18ab96349eda2030ec295e92d5ffbe8ab3104e61
Author: Alan Snyder <ranchlens@cbfiddle.com>
Date:   Fri Sep 2 20:11:26 2016 -0700

    Support ID3/Apple metadata parsing in MP3 and MP4 files

commit c54169c192f02bdcbcb9095ee0618aea3d789171
Author: olly <olly@google.com>
Date:   Fri Sep 2 08:03:46 2016 -0700

    Move back to gradle version + plugin that doesn't hang.
    
    New version hangs when running:
    ./gradlew :library:assembleAndroidTest --debug
    
    Android Studio "strongly recommends" we upgrade to the
    hanging version, but I guess we'll just have to ignore
    that until the latest version works again!
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132063280

commit f8c05ebd93728840f74d16f91110a3f03044c778
Author: olly <olly@google.com>
Date:   Fri Sep 2 05:55:46 2016 -0700

    Better selection of default start position for live
    
    If the live window has a small duration, we currently
    end up setting the default start position to be right
    at the start of the window. This increases the chance
    of a BehindLiveWindowException.
    
    With this change we impose a minimum 5s gap between
    the start of the window and the default start position.
    If the window is *really* small (<10s) then doing this
    would push the default start position too close to the
    end of the window. We don't have much time to play with
    in either direction in this case, so we put the default
    start position in the middle of the window and hope for
    the best.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132054802

commit 06a644eccd95fb2c67ac87ef96b9eff83bfe3644
Author: eguven <eguven@google.com>
Date:   Fri Sep 2 05:36:49 2016 -0700

    DataSourceException: Used to specify a DataSource error.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132053698

commit 884bcb649e61c2bfec302aecae681aa530146c31
Author: olly <olly@google.com>
Date:   Fri Sep 2 04:19:04 2016 -0700

    Support looping with LoopingMediaSource
    
    Now you can do cool things (if you really want to!) like
    play a video twice, then play a second video, then loop
    the whole thing, all seamlessly.
    
    new LoopingMediaSource(
      new LoopingMediaSource(firstVideoSource, 2),
      secondVideoSource));
    
    You can also just loop, which is probably more useful :).
    
    Issue: #490
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132049599

commit fa500791c54a75552bbfee7878cf518954d0de04
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Sep 2 04:17:57 2016 -0700

    Rename Variant to HlsUrl and move into HlsMasterPlaylist
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132049545

commit bd76ec8b13cfdd1007510eaf46d2c11bd3399a19
Author: olly <olly@google.com>
Date:   Fri Sep 2 03:39:00 2016 -0700

    Support duplicate entries in ConcatenatingMediaSource
    
    People will inevitably try and do it, and it's pretty
    easy to handle properly, so why not...
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=132047019

commit d48bf94145e403838a8e3dada8a909602635b362
Author: olly <olly@google.com>
Date:   Thu Sep 1 09:43:54 2016 -0700

    MergingMediaSource fixes
    
    - Don't send a timeline to the listener until all children
      have reported their timelines.
    - Propagate a proper merge error if merging fails.
    - The PlayerActivity hack is necessary due to the way Andorid's
      MediaController widget attaches to the window :(. It'll go
      away once we get our own player controls.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131958169

commit a964da79224c0a7f96145d1819e1989bc1f6a75a
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 1 07:42:13 2016 -0700

    Add support for PATs spread across multiple packets
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131946543

commit a671ebd019b7895e0a4e05b1792f657b3468fa33
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Sep 1 04:05:58 2016 -0700

    Add live media playlist refresh requests when live edge is reached
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131931868

commit 860c6588c0eefad27c024a98a0118154b1f21c72
Author: eguven <eguven@google.com>
Date:   Thu Sep 1 04:03:47 2016 -0700

    created DefaultHttpDataSourceFactory
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131931668

commit ceebb4c561032b11fa356715b9637dde935d4e38
Author: olly <olly@google.com>
Date:   Thu Sep 1 04:01:57 2016 -0700

    Fix incorrect index in DefaultAllocator.trim
    
    This could cause us to "lose" allocations backed by an
    initial block, meaning they became unavailable for use
    despite still being allocated.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131931465

commit 894376fbe63544c18e13bb420b19993933b4509f
Author: olly <olly@google.com>
Date:   Thu Sep 1 03:59:42 2016 -0700

    Fix third_party Android Studio / Gradle config
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131931329

commit a779eabdc5d4c8aa362479bf7085c1dd579e8a48
Author: olly <olly@google.com>
Date:   Thu Sep 1 03:27:04 2016 -0700

    Update SDK / Tools.
    
    - Centralise compileSdkVersion, targetSdkVersion and
      buildToolsVersion in a single place for gradle.
    - Bump compileSdkVersion and targetSdkVersion to 24.
    - Bump com.android.tools.build version to re-enable
      instant start.
    - Bump targetSdkVersion in manifests (needed for
      internal builds).
    - Use standard expandable_list_item from Android in
      the demo app, since ours doesn't look right when
      targeting API level 24. We were also setting the
      theme on the wrong element in the manifest, so I'm
      removing that line.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131929216

commit c5114575feeb1588728ed88ff76f10b62c6c24bc
Author: olly <olly@google.com>
Date:   Wed Aug 31 11:35:43 2016 -0700

    Fix demo app when built using ASWB
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131853683

commit 962b5940c2f6c8d30abd2bfc0cb629b9e229c04a
Author: olly <olly@google.com>
Date:   Wed Aug 31 10:17:41 2016 -0700

    Update ExoPlayer documentation + tweak method naming
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131843222

commit 9adce6b0071e5c3cb73151f39859a956af201893
Author: olly <olly@google.com>
Date:   Wed Aug 31 07:07:39 2016 -0700

    Make sure Cronet extension/tests are pushed to GitHub
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131825185

commit 26fe1dc2384902ba3f3b5c36afca03162fc0dc0d
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Thu Sep 1 15:01:17 2016 +0200

    Removed unnecessary member variable

commit 50527c0a7df296a78d0f6da096622d98cca03926
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Aug 31 03:48:39 2016 -0700

    Add profile/level check support for AVC
    
    Issue:#1772
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131812670

commit d65feb682b7f98033027db76b1c200d269379e36
Author: olly <olly@google.com>
Date:   Wed Aug 31 03:08:14 2016 -0700

    Make public util method to get physical display size
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131810070

commit f0c0b3efbf85728cb9ecde19977137e94177fb59
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Aug 30 11:10:28 2016 -0700

    Decouple HlsSampleStream from HlsSampleStreamWrapper
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131731376

commit 797cd46e89cdb9c5788458c34e50581839ba02d7
Author: olly <olly@google.com>
Date:   Tue Aug 30 08:59:11 2016 -0700

    Detailed Javadoc for Timeline, Period and Window
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131715194

commit b88a5e1b12e3b3a2c53a79ab99a6a7108f3b33f0
Author: eguven <eguven@google.com>
Date:   Tue Aug 30 08:45:59 2016 -0700

    Fix generateReleaseJavadoc "unmappable character for encoding ASCII" error.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131714051

commit bd7be1b5e7cc41a59ebbc348d394820fc857db92
Author: eguven <eguven@google.com>
Date:   Tue Aug 30 04:58:44 2016 -0700

    Cache support unbounded requests.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131696858

commit dfad7451ca8039be6773f7e401e26e5076e218b1
Author: olly <olly@google.com>
Date:   Tue Aug 30 04:06:18 2016 -0700

    Rename media samples asset
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131693969

commit 98919fe7099f136e45a81939488a858235fa95e3
Author: olly <olly@google.com>
Date:   Sun Feb 7 03:58:34 2016 +0000

    Add ExoMediaDrm/ExoMediaCrypto to V2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131693379

commit 1fbe62c662ca271eb5715dd6049644adbe8ddd19
Author: olly <olly@google.com>
Date:   Tue Aug 30 03:42:27 2016 -0700

    Update Opus decoder, move init ouput buffer to native code
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131692317

commit cf363f9e97a3fab647e1b9806a0f36c9717f7637
Author: sharjeel <sharjeel@google.com>
Date:   Sun Aug 28 11:13:28 2016 -0700

    PSSH in MOOF support in Exo V2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131534334

commit f8311a48ede0f9b5e0bdb416b19a839454205c5a
Author: olly <olly@google.com>
Date:   Fri Aug 26 08:32:51 2016 -0700

    Add some convenience constructors for Cronet in V2
    
    - The need to pass a Clock is pretty much only for testing, so
      make the constructor that takes one package private + use
      the system clock for public constructors.
    - Add default timeout values.
    - Also make sure we set Content-Type in all license requests,
      since when using Cronet the stack requires it to be set.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131404298

commit 4f670addd20a4b5c336b8250e970a42e7d7f060c
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 26 07:19:24 2016 -0700

    Add support for AC-3 streams in HLS
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131398594

commit e48462d56431ebdec625c0c42e182116dd7716ac
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 26 07:12:42 2016 -0700

    Add codecs argument to createContainerFormat
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131398162

commit d72e26ff35326673ba375d31c8d59252d1241dab
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 26 06:20:18 2016 -0700

    Add CRC check for PMT
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131394778

commit 6528aef2bb48f165f5a519e590104f60055fefe1
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 26 06:00:31 2016 -0700

    Add automatic E-AC-3 detection to the Ac3Reader
    
    This is done through the bitstream id field and allows removing
    the isEac3 parameter from the constructor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131393477

commit 4df63314d487c34908f15f3d48df71376f51e066
Author: cchiappini <cchiappini@google.com>
Date:   Fri Aug 26 05:58:54 2016 -0700

    Create Cronet extension in v2
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131393395

commit b53fa245ce1791247a340e008b419773a1183165
Author: olly <olly@google.com>
Date:   Fri Aug 26 04:47:15 2016 -0700

    Fix ID3 EOS detection for two-byte encodings
    
    Issue: #1774
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131389528

commit 09c58004dc9c86771e7891fa6a16568531e1053c
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 25 08:57:50 2016 -0700

    Add an AC3 bitstream extractor
    
    Defined in ATSC Standard: Digital Audio Compression (AC-3, E-AC-3).
    Link: http://atsc.org/wp-content/uploads/2015/03/A52-201212-17.pdf.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131294260

commit af2b8fb7a61e4c49ecea652ed5324e5016b9cd4b
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 25 08:55:30 2016 -0700

    Add CRC32 check for PAT section
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131294029

commit b6b6a3cbc346d39a4920681f3d220d78f8e3a2f1
Author: eguven <eguven@google.com>
Date:   Thu Aug 25 08:28:39 2016 -0700

    Merge build*DataSourceFactory methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131291816

commit 8b3f489bc989fe71aab027fd295b3de631cdc420
Author: eguven <eguven@google.com>
Date:   Thu Aug 25 07:53:50 2016 -0700

    Tweak Demo app code to facilitate overriding Application methods and change the used DataSourceFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131288634

commit 0b6a93b468431bc5064d727471fdf9c57e8ff8cc
Author: olly <olly@google.com>
Date:   Wed Aug 24 10:57:44 2016 -0700

    Workaround missing data offsets in FMP4
    
    If they're omitted, it's reasonable to assume it's because
    they were uninteresting (i.e. sample data always tightly
    packed at the start of the mdat). This is an issue for some
    SmoothStreaming streams.
    
    We actually already play such streams successfully, but
    that's only due to another bug to be fixed in a following CL.
    The same is true for V1, but given the low impact nature,
    the fix will be V2 only.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131191975

commit abaa4f1aad4db31ada9bf8d98dcf41073af3344a
Author: olly <olly@google.com>
Date:   Wed Aug 24 10:51:48 2016 -0700

    Don't update currentTrackBundle until end of block
    
    If currentTrackBundle is updated at the start of the
    block and then something goes wrong in the middle (e.g.
    one of the skipFully calls) then the extractor wont
    resume from the correct place.
    
    This would be caught by our extractor tests if we had
    a test sample that requires skipping to the sample data.
    I'll try and construct one of those.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131191174

commit 42efb5413a095080f69a8b82e307f0d931a92f40
Author: olly <olly@google.com>
Date:   Wed Aug 24 10:50:18 2016 -0700

    SmoothStreaming fixes
    
    - The -1 needs to be a 0. My bad.
    - Create AAC CSD if not defined in manifest, like in V1.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131190995

commit fd3d7be9c08461b97d984eb59dbae12f035be2ac
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Aug 24 09:49:28 2016 -0700

    Fix data_offset not present bug in FragmentedMp4Extractor
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131183033

commit ef7dd697b15e8b6b76992ba1516f831f3af1ad30
Author: olly <olly@google.com>
Date:   Wed Aug 24 08:05:38 2016 -0700

    Fix ContentDataSource handling of AssetFileDescriptor
    
    Also tweak how the null checks happen in a few DataSource
    implementations (should be no-op changes, but allow you
    to look at close() and be happy it does the right thing
    without having to loop at the open() implementations).
    
    Issue: #1759
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131172427

commit 5f1a2c71f0de78f2cd1ce61e3e105a0901bcca93
Author: olly <olly@google.com>
Date:   Wed Aug 24 07:54:34 2016 -0700

    Finalize V2 ExoPlayer API
    
    There's still some internal to clean up to do, and in particular
    it remains a TODO to be able to handle seek calls before the
    timeline is set (for this CL, such calls are dropped). This change
    does however finalize the API.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131171318

commit 298464ebe7e10867ec85b57d166c5438d52607ee
Author: olly <olly@google.com>
Date:   Wed Aug 24 06:26:27 2016 -0700

    Fix broken documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131164881

commit 85915f2ac1b301cb055814348b0627c1ad82e4a1
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 23 07:21:23 2016 -0700

    Fix live window calculation and transition from VOD.
    
    Fix the calculation of the seek window for multi-period DASH.
    
    Snap the default initial position back to the start of its segment, to ensure
    that the first sample provided when transitioning to a DASH live source is a
    key-frame.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131052912

commit 458c7bfc05564e7a83bc8d66aab6ac6c0d5a214f
Author: olly <olly@google.com>
Date:   Tue Aug 23 00:55:21 2016 -0700

    Simplify ExoPlayerImplInternal
    
    - Remove playingPeriodEndPositionUs. It doesn't look like it's
      required.
    - Rename time variables to make it clearer what they are.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=131027164

commit 94c908e89c40d1522d478f06a0993cea2521b96f
Author: olly <olly@google.com>
Date:   Mon Aug 22 07:51:23 2016 -0700

    Rename Window->MediaWindow, Timline->MediaTimeline
    
    Window is potentially confusing with Android's Window class.
    Once Window is renamed, it makes sense to rename Timeline too.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130938392

commit fb55254f900f7f195cc0ab327f9d159184930cb6
Author: olly <olly@google.com>
Date:   Mon Aug 22 06:55:36 2016 -0700

    Fix a bunch more Javadoc
    
    Also inline a few methods/classes where they can be made
    private and therefore be removed from the public API.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130935090

commit e003c5b6dcd4c8529713b2ce1c29a66e3d3a77aa
Author: eguven <eguven@google.com>
Date:   Mon Aug 22 06:32:00 2016 -0700

    Javadoc for FakeExtractorOutput.assertOutput()
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130933435

commit abdb8ddb6ebf1b785f3b17ae462c9542c08bb1d4
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Aug 22 05:07:42 2016 -0700

    Remove 1 track per type limitation in TsExtractor
    
    Mainly, this allows the extractor to expose multiple audio tracks.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130928152

commit d5607cfc47027944679356c398c49d6fbc3e8964
Author: olly <olly@google.com>
Date:   Mon Aug 22 03:22:04 2016 -0700

    Make Javadoc compile with Java8
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130922558

commit 9f1fc274c9affc4630ea0a0ca0148f8a44216bb8
Author: olly <olly@google.com>
Date:   Fri Aug 19 12:38:27 2016 -0700

    Add SimpleExoPlayer.getVolume API
    
    Issue: #1754
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130780466

commit 2c84f016fe12f220dc3da248f9c462286255f6d3
Author: olly <olly@google.com>
Date:   Fri Aug 19 11:57:46 2016 -0700

    Parse and expose proj and st3d/stereo_mode
    
    As described in:
    https://github.com/google/spatial-media/blob/master/docs/spherical-video-v2-rfc.md.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130776689

commit 1579b68cf63c0c3c2be310ce3c9e8caf933c7a99
Author: olly <olly@google.com>
Date:   Fri Aug 19 11:46:55 2016 -0700

    Sanitize constants
    
    - Use a single constant for unset/unknown times across
      all time bases. Note also that this moves away from
      use of -1 for unset/unknown times in ms, which was a
      bad choice (it might conflict with real times, such
      as a time representing being just behind the start
      of a live window).
    - Add a few other unset constants, and use them.
    - Fix some hardcoding of -1 where existing constants
      should have been used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130775594

commit 725337dab3e0ece0b5d128fd42cad6b0062f0e05
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 19 08:36:11 2016 -0700

    Fix VOD to live transitions.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130755346

commit f2ee7ef07bc4061b1b93d6677714351db3ae30e0
Author: olly <olly@google.com>
Date:   Thu Aug 18 11:25:01 2016 -0700

    Fix formatting
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130662159

commit 83e466d1290923e2cdec75cdccda0be72b658b46
Author: olly <olly@google.com>
Date:   Thu Aug 18 11:07:57 2016 -0700

    Toward API finalization
    
    - Remove getNewPlayingPeriodIndex from MediaSource
    - Remove all absolute references to period indices from
      Window. Their existence prevents ConcatenatingMediaSource
      from being able to efficiently handle children with
      large numbers of entries (e.g. a cursor backed source),
      since it would copy all windows into its merged timeline.
    - Fix ExoPlayerImplInternal to attempt a restart in the
      case that the loading (but not yet prepared) period is
      removed, in absence of a playing period.
    - Implement logic for finding the "next" period in the old
      timeline when attempting a retry.
    
    Removing some of the nasty US<->MS conversions left as a
    virtual TODO.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130659973

commit eff82e920ecf023afce7128b251d40184d5269e8
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 18 04:39:59 2016 -0700

    Fix DASH multi-period transitions and manifest updates.
    
    Period transitions can either be to new windows (in which case the default
    position for the new window should be loaded) or to the next period of the
    current window (in which case the the new period should be played from zero).
    Fix the logic for calculating the new period index to load to implement this.
    
    In processManifest, periodsById may contain periods that have been removed from
    the manifest, which are still being used by the player (it releases periods on
    receiving the source info refresh after processManifest returns). Ignore
    periods that have been removed from the manifest when calling updateManifest.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130626441

commit c009028dad1dcd8581ba6f4d077b120934f42051
Author: olly <olly@google.com>
Date:   Thu Aug 18 01:49:50 2016 -0700

    Prepare for removal of period based ExoPlayer methods
    
    - This change marks the methods that will be removed, and
      renames the Window methods to remove "Window" from their
      names.
    - The Window methods need to be made to work (rather than
      throw exceptions) when the timeline isn't set. Once that
      gets done in a subsequent CL, the deprecated methods will
      be removed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130612979

commit 1695e2ac48a1e523637267301d959bdd30a1b08e
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 18 01:49:09 2016 -0700

    Fix DASH period index calculation.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130612920

commit b2a28a140c1eb8349e50649b6687fe18b835eeb9
Author: olly <olly@google.com>
Date:   Thu Aug 18 01:11:10 2016 -0700

    Move default start position into Window
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130610236

commit 3e0bae616f2f4881cb3611e147592b14702d8251
Author: olly <olly@google.com>
Date:   Wed Aug 17 12:06:29 2016 -0700

    Minor ExoPlayerImplInternal cleanup
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130547431

commit 0d2dbb165dbefe9bab91d1b10111c34d354ec31f
Author: olly <olly@google.com>
Date:   Wed Aug 17 09:27:51 2016 -0700

    Demo app bug fixes
    
    - Restore position to start of period if period is not
      seekable, rather than not at all.
    - Get the correct window when saving position.
    - Disable position restore in onNewIntent.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130527704

commit cdb0ef13c81cbaa4bc6e5e89842582da475f821a
Author: cdrolle <cdrolle@google.com>
Date:   Wed Aug 17 08:38:40 2016 -0700

    Expose timeout values in DefaultDataSourceFactory.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130522990

commit b35648eafb28767e2e2bbeec2533131de483b675
Author: olly <olly@google.com>
Date:   Sat Jul 23 07:06:16 2016 +0100

    Add window based methods to ExoPlayer
    
    - This change also enables seeking in live windows in the
      ExoPlayer demo app.
    - The added playlist doesn't transition properly by itself,
      but for manual transitions it works correctly, and
      demonstrates seeking into a default position.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130515880

commit 76bb10428b993d12490e9543a038e618d85f4d9e
Author: olly <olly@google.com>
Date:   Wed Aug 17 06:16:21 2016 -0700

    Fix broken link
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130512224

commit fa84aa2123b30e06c26cc84df0885167303fbb76
Author: olly <olly@google.com>
Date:   Wed Aug 17 05:24:36 2016 -0700

    Incremental step toward correct event propagation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130509123

commit 317a8ef19b153d038ecff5796442dbb2f0b52e66
Author: olly <olly@google.com>
Date:   Wed Aug 17 04:58:55 2016 -0700

    Simplify DashMediaSource and simulate manifest refreshes
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130507478

commit 5296d5b19870d089d3b931c04afd5e3da318aaf3
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 17 03:33:49 2016 -0700

    Move isFinal flag to the Window.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130503190

commit 671a15badff712b6f08e439f6b36ee5018f3d98d
Author: eguven <eguven@google.com>
Date:   Tue Aug 16 11:06:48 2016 -0700

    ExtractorMediaPeriod: Use URI sha1 hash as the DataSpec key.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130422264

commit 7bed85950e92308dbe76f3c1cc71427330213f89
Author: olly <olly@google.com>
Date:   Thu Jul 14 09:46:29 2016 +0100

    Fix/improve SmoothStreaming live window
    
    - Add missing callback call.
    - Allow injection of live edge offset.
    - Refine calculation of live window size to correctly
      handle just-started streams where the DVR window
      hasn't yet grown to full size.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130412465

commit e0773f705f7959798b7476bcdd68e03eebb51ab2
Author: olly <olly@google.com>
Date:   Tue Aug 16 09:22:18 2016 -0700

    Allow applications to specify the live edge offset.
    
    Also allow use of suggestedPresentationDelay taken from the
    manifest, and enable this by default.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130409924

commit 76f7fffb8d276b3d0545beddfd68f2b0c6dd7308
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 16 04:18:41 2016 -0700

    Clean up period identifiers.
    
    SinglePeriodTimelines can all use the same identifier, as their identifier is
    wrapped in a pair with the (fixed) source index when they are concatenated with
    other sources' timelines.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130386297

commit bb8cbbfbe8358c7372d8f2e5f639a8cb4d74dd65
Author: olly <olly@google.com>
Date:   Tue Aug 16 01:45:42 2016 -0700

    Allow mapping of period->window
    
    This is a 1:1 mapping. This change formalises the fact,
    and makes it possible to easily query the mapping.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130375111

commit e35f9addaf148b46d1a25fdae7e8de4c9a6e14f1
Author: olly <olly@google.com>
Date:   Tue Aug 16 01:23:22 2016 -0700

    Remove playWhenReadyCommitted.
    
    This was always a bit of a hack; for Play Movies. It may well
    no longer be necessary, and if not I'd like to think of a nicer
    or more general way of doing it. We can always bring it back
    if needed.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130373433

commit 18a86553434eea56fb1377c50a03cea1d8c43a06
Author: olly <olly@google.com>
Date:   Tue Aug 16 00:34:08 2016 -0700

    Javadoc cleanup: ExoPlayer#x -> #x
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130369177

commit 096f85202e41a145599d5cc34c3ec340f0492763
Author: eguven <eguven@google.com>
Date:   Mon Aug 15 10:17:01 2016 -0700

    Use manifest URL sha1 hash as the content id.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130293908

commit 63ab601d7545c4073be88c23aee5ea78e5314543
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 15 10:07:22 2016 -0700

    Use consistent identifiers for extractor periods.
    
    Also, fix clearing the timeline for source info changes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130292700

commit 80227840f61e68ce0a0da9b74c1c69224905b802
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 15 09:36:42 2016 -0700

    Post source info refreshes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130289294

commit 1a909fd1632c963ad855fbc198ddc659c88581a2
Author: olly <olly@google.com>
Date:   Mon Aug 15 07:20:50 2016 -0700

    Change SeekWindow -> Window, and add window duration.
    
    - This avoids the need to have to use the timeline to
      calculate a window duration, which can be awkward.
    - Window now represents a window of availability with
      an isSeekable flag, rather than a window of
      seekability.
    - Promoted Timeline and Window to top package; they're
      pretty important :).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130278509

commit b120bea029a2d1fc8fbcf6058726f5d7e41316be
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 15 03:32:19 2016 -0700

    Don't reuse MediaPeriods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130266483

commit b5e41a903dd3f1d1ef83a69efce48fb3f8378746
Author: olly <olly@google.com>
Date:   Mon Aug 15 03:18:59 2016 -0700

    Remove buffered position edge case.
    
    It's no longer safe to convert END_OF_SOURCE -> duration on
    the main therad, since the Timeline from which the duration
    is obtained is posted to the main thread, where-as the
    buffered position is passed by updating a volatile. Hence
    an update to the latter might become visible to the main
    thread before the corresponding Timeline.
    
    This change moves the conversion to the playback thread.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130265893

commit 6e24372414b6e38dec54d23644b913b3a654c694
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Aug 12 10:22:51 2016 -0700

    Use integers as identifiers for DASH periods.
    
    This is in preparation for making it so that periods aren't reused.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130113382

commit 0ca81b1a4c595811586a29040ac0b55ac3acc25b
Author: olly <olly@google.com>
Date:   Fri Aug 12 10:03:50 2016 -0700

    Make sure TrackSelections refer to the correct TrackGroups
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130111048

commit fc5df6312d8abbf3d2aec91eef7acb2e724ede33
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Aug 12 06:38:16 2016 -0700

    Add support for multiple truns in a single traf
    
    This kind of mp4 files has been seen in Hls+fMp4 samples.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130094845

commit d04fde1a53a891a0fef9025c7e0ca016af327235
Author: olly <olly@google.com>
Date:   Fri Aug 12 06:27:17 2016 -0700

    Distinguish dense vs sparse tracks for buffering purposes
    
    - For audio/video, we should report the minimum largest
      queued timestamp. This ensures that buffering continues
      rather than stops in the case of bad sample interleaving.
    - If there are "sparse" tracks then they should be ignored
      for this calculation, otherwise the buffered position can
      end up getting stuck at some small value (e.g. if there's
      a text track containing a single sample with a small
      timestamp).
    - In the edge case that there are only "sparse" tracks, we
      probably want to take the maximum largest queued time
      instead.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130094266

commit c380ba2dc1ce891b6e82708cb994ef55aaf1e30d
Author: eguven <eguven@google.com>
Date:   Fri Aug 12 03:15:41 2016 -0700

    CacheSpan.isEOS (is end of stream) field shows whether the {@link CacheSpan} contains the end of the original stream.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130084365

commit cc28aeadd8d81365480e924a5bb520e0ea6e982c
Author: olly <olly@google.com>
Date:   Fri Aug 12 03:07:49 2016 -0700

    Automated rollback
    
    *** Reason for rollback ***
    
    Referential equality was probably the right thing to do, since using .equals
    breaks track selection in the case that a source exposes two or more tracks
    whose formats are equal. We should fix the way overrides work instead.
    
    *** Original change description ***
    
    Fix multi-period transitions with track selection overrides
    
    An override applies across periods provided they expose the
    same track groups according to .equals, but the formats in
    the override are then compared against the period's formats
    according to ==. Use .equals consistently to fix.
    
    ***
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=130083840

commit 1811b01b0749c55abb3d6ce363001fff5ea94fdf
Author: olly <olly@google.com>
Date:   Thu Aug 11 10:06:43 2016 -0700

    Report duration only via Timeline
    
    It's error prone (and more code) to report two ways
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129999117

commit d8ffafea658609f46fc91853e25321742250e7a3
Author: olly <olly@google.com>
Date:   Thu Aug 11 09:15:11 2016 -0700

    Simplify Timeline classes a bit
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129993536

commit 56bfa78f0a3ccf16bb9f9c2f0099e8bc34c6206b
Author: eguven <eguven@google.com>
Date:   Thu Aug 11 08:51:49 2016 -0700

    Enable test coverage report generation for library project.
    
    To generate the reports, under 'v2' folder run:
    ./gradlew createDebugCoverageReport
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129991223

commit 5deb948d1448b5380df41ce6f90a4351dc81f345
Author: olly <olly@google.com>
Date:   Thu Aug 11 08:16:29 2016 -0700

    Bugfix: If no renderers enabled, we don't need buffer
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129987973

commit f9005c7a784ce7c27ac86fe285c2bd7f4096cbc5
Author: olly <olly@google.com>
Date:   Thu Aug 11 08:14:02 2016 -0700

    Bugfix: Allow discontinuity on selectTracks
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129987709

commit 153c0aef2b01312c531835870cdd2a5f74a0b29d
Author: olly <olly@google.com>
Date:   Thu Aug 11 04:10:10 2016 -0700

    Rework MediaPeriod track selection
    
    This change allows MediaPeriod instances to replace
    SampleStream instances when the selection isn't changing.
    It also allows MediaPeriod instances to retain a
    SampleStream but indicate that the renderer consuming
    from it needs to be reset.
    
    The change is used to fix the ref'd bug, and is used to
    do the same thing in HLS without the need for the source
    to report a discontinuity. Note that reporting discontinuity
    could cause unnecessary failure when used as a child of
    MergingMediaSource.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129971782

commit 9092c5665bf8d09fc74abd78d7377e8c08f69e92
Author: olly <olly@google.com>
Date:   Thu Aug 11 02:49:13 2016 -0700

    Bump V1 to 1.5.10 + Fix incorrect Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129966073

commit a2dfc62e0825d9167e295476a1f595914dd4da81
Author: vigneshv <vigneshv@google.com>
Date:   Wed Aug 10 14:06:47 2016 -0700

    MatroskaExtractor: Implement subsample encryption
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129908648

commit 4d18e623d602c54e2e4d60518627f926ce5402f0
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 31 11:55:41 2016 +0200

    Split Cue Rendering up into 3 phases
    
    Split Cue Rendering up into a layout, background drawing and foreground
    drawing phase so that issues with overlapping 608 captions are being prevented.

commit ad9f76eb62d9f2ee99466de965fc2c6a7eb4f746
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 31 11:13:32 2016 +0200

    Return a copy of the SpannableStringBuilder when building Cues
    
    In order to force the SubtitlePainter to redraw cues

commit 35fa5e2ef7d230f5704f562ec5a48d096ec9385f
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 31 10:57:04 2016 +0200

    Fixed foreground color midrow codes being handled as background colors

commit 71d83f3e8478f05271845eb36a0a3f1bfec98808
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Mon Aug 29 11:33:55 2016 +0200

    Caption lines as separate cues

commit 7cd94819c7a4a0222022cbfd49a1d77f30aa5812
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Thu Aug 25 11:23:03 2016 +0200

    Took care of caption styling priorities

commit 176ce485696cfda8418e7426dc6a7e25999096f5
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Thu Aug 25 10:07:05 2016 +0200

    Improved line and tab offset mapping

commit ce55587db48ae0f7be24a4817af26a444f69cc8d
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 24 16:27:23 2016 +0200

    Fixed comment
    
    Alpha is stored in the first byte of an integer

commit 8b2af1244725b8d600c3f5ea2cceb4504728c7d9
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 24 14:58:08 2016 +0200

    Discard spans after seeking
    
    Discard any spans that should not be applied because they don't belong
    to what's in the current CC buffer.

commit 43e6e16168a7b7bc6e07e46396da1c26e524dc47
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Aug 24 14:08:37 2016 +0200

    Implemented PAC and Midrow code handling for EIA-608 captions

commit f6fdcee9b3b2d1ea5500b149c6cf4b50cf8a48f2
Author: olly <olly@google.com>
Date:   Wed Aug 10 11:48:43 2016 -0700

    Parse stz2 Atoms during mp4 extraction.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129892143

commit e883b7c2704e42ba92f20176da60cc8c2b9c3429
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 10 11:39:24 2016 -0700

    Clear the timeline on seeking if renderers are reading ahead.
    
    If a renderer is reading ahead of the playing period, seeking within the
    playing period would fail, because renderers would not be disabled but then try
    to read from SampleStreams that have a released period.
    
    Also, in the same circumstances, seeking within the reading period would fail,
    because all renderers would be disabled, but their sample streams have already
    been read. When they are reenabled they expect to see a format but don't
    receive one.
    
    In both cases, seeking can just clear the timeline. This only occurs in rare
    circumstances when the player is reading ahead, so the cost of re-preparing
    will not be incurred often, and allows the seeking logic to be simpler.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129891060

commit 932574a3cb38e554137c757873d2e435ad6169b0
Author: olly <olly@google.com>
Date:   Wed Jul 27 09:03:01 2016 +0100

    Fix us/ms conversion error.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129871792

commit 91c7551cc30328c4719a886daa97a92d57ab76e2
Author: olly <olly@google.com>
Date:   Wed Aug 10 08:45:53 2016 -0700

    Remove Timeline.UNKNOWN_PERIOD_COUNT
    
    It's no longer used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129870115

commit d10c811bd8a3e1a280d09b57321c5389649db9e2
Author: olly <olly@google.com>
Date:   Wed Aug 10 08:44:14 2016 -0700

    Fix Tx3g decoding
    
    Issue #1712
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129869936

commit cd4cc1dc140e8b368b59a42289126ffe26339371
Author: olly <olly@google.com>
Date:   Wed Aug 10 08:41:38 2016 -0700

    Add absolute start time to Timeline
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129869741

commit 4502a464dd416923fdf648d93ff4a67360a13e86
Author: olly <olly@google.com>
Date:   Wed Aug 10 08:22:51 2016 -0700

    Use ms for SeekWindow, for consistency with Timeline
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129868070

commit c5a2f9b010e65bc71a5356d65083074997ca8ee5
Author: olly <olly@google.com>
Date:   Wed Aug 10 08:21:50 2016 -0700

    Expose seek window + start position for SmoothStreaming
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129867969

commit 2a15480102e753ae33bf4ef05da2853dd79b31f7
Author: olly <olly@google.com>
Date:   Wed Aug 10 04:22:26 2016 -0700

    Fix SmoothStreaming
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129851843

commit 23981a6fc46281bd23815d7c9d22b64d837d3aee
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Aug 10 03:44:22 2016 -0700

    Hide the shutter view when no video is being rendered.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129849825

commit aab4e36d1ad6b7895afe8c11b81cfcd72cb01d0d
Author: olly <olly@google.com>
Date:   Wed Aug 10 01:45:08 2016 -0700

    Don't reuse SampleStream instance in SingleSampleMediaSource
    
    Referential equality is going to become important for detecting
    whether a SampleStream has been replaced, so we need to create
    new instances as we do elsewhere.
    
    This also enables multiple SampleStreams to be provided for a
    single TrackGroup, as is also true for DASH and SmoothStreaming.
    It's forbidden to ask for multiple SampleStreams from a single
    TrackGroup currently, but we may choose to relax that at some
    point (and indicate whether it's allowed as a flag on each
    TrackGroup).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129842336

commit 665c9fc14cea5cbf5e92832ef4620f121b5f7a63
Author: olly <olly@google.com>
Date:   Tue Aug 9 13:35:18 2016 -0700

    Fix DASH period duration reporting
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129787235

commit cdb706bac80058ec5ca866cb74da2f2fface2656
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 9 07:56:06 2016 -0700

    Fix period durations for single period and concatenated timelines.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129748865

commit 88bf1d0739ebf83da6853d4ad46d5fb3fa326fb2
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Aug 9 07:34:55 2016 -0700

    Expose the seekable window.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129747377

commit 39482f244b0f5a5308d4f06ffa76dfe767a50895
Author: olly <olly@google.com>
Date:   Tue Aug 9 03:53:04 2016 -0700

    Fix broken Javadoc
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129733571

commit 300ddc2aeff60b1b06d66f86bc91ee5c10dc08ce
Author: olly <olly@google.com>
Date:   Tue Aug 9 03:51:36 2016 -0700

    Cronet extension project setup
    
    - Add build test to [] so it runs in presubmit
    - Tweak README.md instructions
    - Use symlinks to make the extension usable in Android
      Studio internally, without taking any special action
    - Remove unnecessary dependencies
    - Simplify setup instructions in README.md
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129733466

commit bd37216902528011138f6b265ad85309dc1d44ac
Author: eguven <eguven@google.com>
Date:   Mon Aug 8 08:20:59 2016 -0700

    CacheSpan and Util.un/escapeFileName tests.
    
    Fixed CacheSpan regexp for line breaks characters in key.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129631446

commit b15ceba7807f60228281a5e5ae66c3af0d35e994
Author: olly <olly@google.com>
Date:   Mon Aug 8 07:16:49 2016 -0700

    Enhance DefaultTrackSelector part 2
    
    - Support specifying a preferred text language.
    - Score based selection for text/audio/other tracks.
    - Prefer default tracks to non-default ones.
    - Allow overriding of base select*Track methods.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129626994

commit 95f41134569f22e5c0fe9a058a5fec14b8c9fd1e
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 8 06:55:32 2016 -0700

    Fix seeking into a different period that has been prepared.
    
    When seekToPeriodPosition found that the seek destination period was already
    prepared, it would not disable/re-enable renderers. This was fine if the
    playing period wasn't changing, but in other cases the renderers would be left
    reading the incorrect streams (and the underlying periods may have been
    released).
    
    Also, transition to the buffering state before re-enabling renderers, so that
    the renderers are not started until leaving the buffering state.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129625632

commit 57832724444b06ab7d3c316fd1ebce6890c1f39d
Author: olly <olly@google.com>
Date:   Mon Aug 8 06:38:08 2016 -0700

    Fix missing generics
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129624395

commit a7cb98d99110f46bd819c4c0838668b1f9bf1293
Author: olly <olly@google.com>
Date:   Mon Aug 8 06:05:29 2016 -0700

    Pass source to TransferListener events
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129622239

commit 3ef837341ef24b6cc7162b4f5e7e325bdd11f40c
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun Aug 7 23:59:23 2016 -0700

    Don't use OMX.qcom.audio.decoder.mp3 on LGE Optimus API 16.
    
    Issue: #1714
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129600348

commit 52d95398789a26ba29f1c501ad3e151329809e09
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Aug 4 09:14:23 2016 -0700

    Fix NPE in track selection view
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129336905

commit c2c41558e5f893991c2e2270b8ae29b84b6864e3
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Aug 4 06:51:17 2016 -0700

    Merge the internal timeline into ExoPlayerImplInternal.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129325922

commit ee565300cb3d68f76bd04599bce0b8c8b56faa0c
Author: olly <olly@google.com>
Date:   Wed Aug 3 10:05:19 2016 -0700

    Enhance DefaultTrackSelector part 1
    
    - Enforce viewport constraints for fixed video track selection.
    - Select best fixed video track, not the first one.
    - Better handling of video tracks with unknown dimensions.
    - Mini bug fix.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129226593

commit 2395f13682085c1098f3e513674ce96f8e8d7aae
Author: olly <olly@google.com>
Date:   Wed Aug 3 07:41:04 2016 -0700

    Tweak project structure
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129212987

commit e26f72d4546658a814b9dc9b2be2c36f9602e080
Author: olly <olly@google.com>
Date:   Wed Aug 3 04:34:08 2016 -0700

    Update @return to Returns where appropriate
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129201483

commit 490c5fea7836f743cd7ddbe09b0447a7a49a9705
Author: olly <olly@google.com>
Date:   Tue Aug 2 05:30:12 2016 -0700

    Further improve codec reconfiguration
    
    - Only setup a codec to allow adaptation to other compatible
      formats in the stream. If something like the mimeType is
      changing adaptation will never be possible, so there's no
      point.
    - Incorporate maxInputSize into the reconfiguration logic.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129088464

commit bd7c8fed1b0c662aa951f4a47d08a65759f8ea27
Author: eguven <eguven@google.com>
Date:   Tue Aug 2 04:26:33 2016 -0700

    While buffering check for errors even if renderes are ready.
    
    On an edge case, player may get stuck when the renderers are ready but the buffer doesn't get full enough because of a fatal error in data source. An example state can be created by starting a live DASH stream and switching between normal and slow network connections.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129084824

commit 9a272068b461d2fee463143d64c0608e7daa1794
Author: olly <olly@google.com>
Date:   Tue Aug 2 03:56:34 2016 -0700

    Allow resetting of position when setting source
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129083335

commit 90ceade08f23914de667572714fe76c14b628850
Author: olly <olly@google.com>
Date:   Tue Aug 2 03:29:33 2016 -0700

    Add option to manually replace manifest URI
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129081694

commit af8f1b8387c1c05c31f4ae68b12823edd4110f2b
Author: olly <olly@google.com>
Date:   Tue Aug 2 03:27:22 2016 -0700

    Fix multi-period transitions with track selection overrides
    
    An override applies across periods provided they expose the
    same track groups according to .equals, but the formats in
    the override are then compared against the period's formats
    according to ==. Use .equals consistently to fix.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129081591

commit 1bea48f2495f0853b2ac8096a8ca3cbd55d0c670
Author: olly <olly@google.com>
Date:   Tue Aug 2 03:27:16 2016 -0700

    Suppress noop format changes
    
    For self-initializing segments, DefaultTrackOutput receives
    a null format and then the actual format. This broke the
    deduplication logic in InfoQueue.format, since there were
    two transitions: FormatX->Null and Null->FormatX. This CL
    allows deduplication to succeed in this case.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129081583

commit 5345702ec574c8766aa0b3ba7dc19cfcf5e6d2b8
Author: olly <olly@google.com>
Date:   Tue Aug 2 03:13:45 2016 -0700

    Improve formatting in demo app track selector
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129080823

commit 02a79f8c5123cfb5c2ebe165d471e323c07e7afe
Author: olly <olly@google.com>
Date:   Mon Aug 1 11:06:57 2016 -0700

    Improve video canReconfigureCodec accuracy
    
    The codec cannot be reconfigured if the format rotation
    changes, or if the format dimensions exceed the current
    decoder's configured maximum dimensions.
    
    Issue #1707
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=129004187

commit ced790673776cde535c7833f3f5e6b7df28fbc18
Author: olly <olly@google.com>
Date:   Mon Aug 1 08:51:03 2016 -0700

    Make track selection dialog d-pad friendly
    
    This wont help much until the buttons to get the dialogs
    to display are focusable! Use of MediaController seems to
    make that tricky (to be continued...).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128989328

commit 17014e6264d2b0aba62f6746e4de8ab3382f70b8
Author: olly <olly@google.com>
Date:   Mon Aug 1 08:23:48 2016 -0700

    Fix concat media source premature listener invocation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128987095

commit c1729b640cca5cb40806986be2f0dabbf281052b
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Aug 1 07:43:05 2016 -0700

    Allow seeking to a default position in a period.
    
    When seeking to the default position in a period, the containing source may
    actually return a position in another period. Multi-period live sources can do
    this to seek the player to the live edge.
    
    ExoPlayerImplInternal uses the same functionality when the playback position
    reaches the end of a period to determine what period/position to play next.
    This means that when playback transitions to a multi-period live source from
    some other source (playing a concatenation of those two sources), the player
    will play the live edge rather than the beginning of the earliest period.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128984355

commit abd5653dc42be99066d3320cbdcb99262d01ad55
Author: olly <olly@google.com>
Date:   Mon Aug 1 06:31:45 2016 -0700

    Add Util.getUtf8Bytes to avoid warnings
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128980489

commit 3604d589c1ffb3399dcd867ee57591fc0f4fad47
Author: olly <olly@google.com>
Date:   Mon Aug 1 06:15:21 2016 -0700

    Deduplication AVC/HEVC config parsing + other TODOs
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128979671

commit 8d122a101d86071e6edb45cd859a93b25b7c3c5e
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 12 02:09:35 2016 +0100

    Use new import ordering.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128967776

commit f89e1700546dc46310b1ea542ee3796c4bfb0ccb
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 29 06:19:15 2016 -0700

    Remove --disable-vp10 from vp9 extension configuration.
    
    The option was removed in
    https://chromium.googlesource.com/webm/libvpx/+/67edc5e83be285004804c67c5348bbc81503a04d%5E%21/#F2.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128801977

commit 846f8e1d4685822d4816504127be1b3f4656b886
Author: olly <olly@google.com>
Date:   Thu Jul 28 11:25:00 2016 -0700

    Enable track blacklisting for DASH and SmoothStreaming
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128721068

commit f66b90e34b92c442015f736750df6c4890781f8d
Author: olly <olly@google.com>
Date:   Thu Jul 28 10:33:08 2016 -0700

    Eliminate cruft from the demo apps's PlayerActivity
    
    Useful functionality promoted to core library:
    
    1. Management of SurfaceHolder.Callback lifecycle
       promoted to SimpleExoPlayer
    2. Ability to determine whether audio/video tracks
       exist but are all unsupported promoted to
       MappingTrackSelector.TrackInfo
    3. Read external storage permissions check promoted
       to Util
    4. SubtitleView given ability to act directly as a
       TextRenderer.Output to remove layer of indirection
    5. SubtitleView given ability to configure itself to
       user's platform wide caption styling
    6. KeyCompatibleMediaController promoted to library's
       UI package.
    
    Relocation of boring stuff:
    
    1. ID3 frame logging moved to EventLogger.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128714230

commit 3501332dd3ac8221c17db6f99d9c757136a1da7c
Author: olly <olly@google.com>
Date:   Thu Jul 28 09:33:15 2016 -0700

    Converge track selection to a single place.
    
    This change merges the duties of FormatEvaluator into
    TrackSelection classes, so that both the static and
    dynamic parts of track selection are implemented in a
    single place.
    
    New feature: Demo app now allows you to enable random
    adaptation in the track selection dialog.
    
    Notes:
    
    - It should be quite easy to allow application side
    track blacklisting in addition to source side, as an
    extension to this. That would effectively allow
    applications to do seamless/deferred track selection
    by creating a TrackSelection with all tracks enabled,
    and then toggling the blacklist flags to select the
    ones they want to be active.
    
    - It should be trivial to implement format blacklisting
    for DASH and SS as an extension to this. Will do in a
    follow up CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128707517

commit 5eb6190682cae5831bed5154ec4bb0eca457661a
Author: olly <olly@google.com>
Date:   Thu Jul 28 09:28:21 2016 -0700

    Fix branch documentation
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128707067

commit 2040615cc80c40b1776c515a5237345f5173cd49
Author: eguven <eguven@google.com>
Date:   Thu Jul 28 09:24:09 2016 -0700

    Support for added and removed DASH periods.
    
    Logic and some code is copied from V1.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128706688

commit c82a3db5ac00941c91b01069125990069dabb0b6
Author: olly <olly@google.com>
Date:   Thu Jul 28 03:32:37 2016 -0700

    Enable next/prev seeking in demo app
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128682992

commit 2f20fd7c03db771f4437e892d3fca59dbe96ffae
Author: olly <olly@google.com>
Date:   Thu Jul 28 02:27:52 2016 -0700

    Simple language + Javadoc consistency
    
    - Invoked --> Called
    - Gets --> Returns
    - "True if X. False otherwise." --> "Whether X."
    - Removed some @returns where the Javadoc is in "Returns X" form
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128678638

commit dfdb3bbc950f9994cba9a424f531d3157b39c5af
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 28 01:22:09 2016 -0700

    Count buffer ahead periods rather than using their indices.
    
    This is in preparation for allowing MediaSources to skip over periods when one
    period ends, which is needed for starting to play a multi-period live stream
    that is concatenated on to another period at the live edge.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128674659

commit 5818409f4ed8979c7e0d6f7ebe3b7d650cab5797
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Jul 27 08:55:09 2016 -0700

    Add viewport size filtering to the DefaultTrackSelector
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128590422

commit 242bdffc80a263f28776fab116e90f35c62dc3e3
Author: olly <olly@google.com>
Date:   Wed Jul 27 07:46:46 2016 -0700

    Fix a few warnings.
    
    - Suppress spurious resource type warnings.
    - Make AS happy by making private method non-final.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128584391

commit ac59bde2be43f045f827cc0a01f8affb577bc670
Author: olly <olly@google.com>
Date:   Wed Jul 27 02:47:14 2016 -0700

    Fix up a bunch more Javadoc.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128565942

commit 3cb58626212984c54f19f9d86e6e309076381ae7
Author: olly <olly@google.com>
Date:   Tue Jul 26 11:14:15 2016 -0700

    Only pass "throwing" part of Loader to MediaSource children
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128492613

commit 47346c39c17697201f8f1e6ff1c687a32c66cb45
Author: cdrolle <cdrolle@google.com>
Date:   Tue Jul 26 08:16:20 2016 -0700

    Fixed minor error that occurred when the manifest was updated.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128472884

commit dae87b66dd5a2c9d24df0314575868e59ea0342b
Author: olly <olly@google.com>
Date:   Tue Jul 26 07:55:41 2016 -0700

    MediaPeriod.getDurationUs must report duration when known.
    
    As per the spec of MediaPeriod.getDurationUs, when a live
    stream ends we need to start returning the correct final
    duration.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128471183

commit c5aa376bc41b4b02159b55e2a58a560061e94088
Author: olly <olly@google.com>
Date:   Tue Jul 26 07:54:26 2016 -0700

    Rename only part of FormatEvaluator/TrackSelection merge
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128471102

commit bf0bdd8d7ccc02765dd2f115a86c5f60a45b404a
Author: olly <olly@google.com>
Date:   Tue Jul 26 06:23:18 2016 -0700

    Move SsMediaPeriod in its own file
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128465118

commit 1722019e0c702db7e7e970639db8e810625c5f86
Author: olly <olly@google.com>
Date:   Tue Jul 26 05:30:23 2016 -0700

    Move SmoothStreaming manifest refresh to source level.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128461778

commit 1d79c26b3446ab921633419f29ea515319cb4c38
Author: cdrolle <cdrolle@google.com>
Date:   Mon Jul 25 14:08:33 2016 -0700

    Added support for RawCC (i.e. out-of-band EIA-608)
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128397367

commit 75e2aee92e24cb6dcf7b486057750b17a7412c2f
Author: olly <olly@google.com>
Date:   Mon Jul 25 13:16:40 2016 -0700

    Fix janky post-track-selection behavior for HLS
    
    We were forgetting to reset renderers during track
    selections where muxed media is used.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128391816

commit 0b4284d0602ba84163b27ba3b9c9258ee0c68ea0
Author: olly <olly@google.com>
Date:   Mon Jul 25 11:04:31 2016 -0700

    Remove TrackGroup.adaptive flag.
    
    It's only "needed" for HLS, and this requirement will
    go away soon. It's safe to remove the flag ahead of
    this because a TrackSelector can/should not attempt to
    adapt between multiple audio/text tracks.
    
    Also remove unnecessary restrictions on TrackGroups
    being non-empty and only of known types.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128376601

commit d657360341f55e0be36111ba5dfefbd512b4f182
Author: andrewlewis <andrewlewis@google.com>
Date:   Sat Jul 23 08:09:42 2016 +0100

    Expose period information from MediaSources.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128357449

commit 2a70a58f0ab7582f4bd32dd9ef50424deaa9f12d
Author: andrewlewis <andrewlewis@google.com>
Date:   Sun Jul 31 07:14:23 2016 +0100

    Fix non-DRM playback.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128353039

commit eca3edb9404f794dca2b9a3b0c7572fff434dc71
Author: olly <olly@google.com>
Date:   Mon Jul 25 06:55:45 2016 -0700

    Small cleanup of Util constants.
    
    - Remove null checks (never happens).
    - Use "const".equals(Util.CONST) where possible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128351654

commit 1624135c20f439f747181dd54dbffd3d839b20ce
Author: mishragaurav <mishragaurav@google.com>
Date:   Mon Jul 25 05:12:58 2016 -0700

    Parse widevine tag in manifest for secure decryption.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128345063

commit abcd10513a08bf45f9c13691f261d3c7450116f3
Author: olly <olly@google.com>
Date:   Fri Jul 22 11:00:22 2016 -0700

    Do TODO in HlsChunkSource
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128190311

commit 9e9634a1a26bd4338b548603513bd6ba8554d3a6
Author: olly <olly@google.com>
Date:   Fri Jul 22 10:49:13 2016 -0700

    Delete disabled tests
    
    The classes these tests are written for have changed
    so much we'll have to write them again. We can refer
    to V1 if we want to look at what the old tests did, so
    there's no need to keep this file in the V2 tree at
    the moment.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128189076

commit ba0a4235a0a3d988e4726cafc22bf30f50c6aad0
Author: olly <olly@google.com>
Date:   Fri Jul 22 03:57:19 2016 -0700

    Consistent Javadoc for text package
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128160177

commit f0b73e5d5bf3c36c635b0d274412e7ef0add3df3
Author: olly <olly@google.com>
Date:   Fri Jul 22 03:39:12 2016 -0700

    Consistent Javadoc for upstream package
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128159118

commit 692d756ee601b0952ff2eec00d8905fb339b4aa6
Author: olly <olly@google.com>
Date:   Fri Jul 22 03:38:13 2016 -0700

    Simplification: Move common logic to TrackSelection
    
    - TrackSelection now exposes the selected formats, ordered
      by decreasing bandwidth. This removes the need for DASH,
      SS and HLS to do the sorting individually.
    - The change also removes the need to reconstruct TrackSelection
      instances with a different group index in various places
      (e.g. MergingMediaPeriod).
    - This is also a step toward potentially packaging the
      FormatEvaluator inside of the TrackSelection (TBD).
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128159064

commit 6f1b24f10f4f89dbaceb23e7eacd348ba9dfd1e4
Author: olly <olly@google.com>
Date:   Thu Jul 21 11:35:38 2016 -0700

    Add some missing Javadoc from the drm package
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128085240

commit 0909446133e50e5bc111afe6a93ea8a7cb40d828
Author: eguven <eguven@google.com>
Date:   Thu Jul 21 11:14:43 2016 -0700

    Don't let renderer input buffer get too big if codec not available.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128082468

commit 68156ac7a40fa3610daab21a76b7188f6e9d51ef
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 21 10:00:52 2016 -0700

    Ignore sequence numbers when switching variants in HLS
    
    According to the spec, there is no mandatory relation between segments'
    sequence numbers of different variants. This CL ignores sequence numbers
    when switching variants:
    
    * In vod, the switching playback position is obtained by adding the
        duration of previous segments.
    * In live playback this is not possible. It is assumed that the
        different live media playlists do not drift apart too much, so
        the playback position is obtained by subtracting the duration
        in reverse order.
    
    In later CLs, the described mechanisms will become the fallback methods
    by replacing them with the use of EXT-X-PROGRAM-DATE-TIME information
    or more reliable sources.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128072663

commit 98c5b2b8d0b7534723a5521be2179898c49bde5e
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 21 09:51:08 2016 -0700

    Treat empty stss boxes as absent
    
    ISSUE: #1681
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128071668

commit 05187ad519758f732d8c295704e63b4c04e17018
Author: olly <olly@google.com>
Date:   Thu Jul 21 07:51:30 2016 -0700

    Add new buildout dirs to gitignore
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128060676

commit d785519ea0d597f9adfd52d22774526e91c82bdd
Author: eguven <eguven@google.com>
Date:   Thu Jul 21 03:56:12 2016 -0700

    Javadoc for FakeExtractorOutput.WRITE_DUMP.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128045581

commit 2569c561d4575ad0115b213d2a7da1460fa6fc55
Author: sharjeel <sharjeel@google.com>
Date:   Thu Jul 21 02:38:09 2016 -0700

    Make Android Studio on Mac OS X work
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=128040579

commit 5a7b046462c527f6a72384b8ac444e042c324fec
Author: cdrolle <cdrolle@google.com>
Date:   Wed Jul 20 09:09:07 2016 -0700

    Re-added call to schedule manifest refreshes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127951757

commit 48f666a0e3d34731d4465f4f745dbcfcfecba9e7
Author: olly <olly@google.com>
Date:   Wed Jul 20 03:01:14 2016 -0700

    Merge HlsParserUtil into HlsPlaylistParser
    
    It's the only place that uses it.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127927164

commit 722e05b8baced6e52b11b43fb8aeedc6a61b01ae
Author: olly <olly@google.com>
Date:   Wed Jul 20 02:41:11 2016 -0700

    Some brevity/consistency renaming in source package
    
    SmoothStreaming -> Ss
    MediaPresentationDescription -> DashManifest
    DashSingleSegmentIndex -> SingleSegmentIndex
    
    Moved DASH and Ss manifest classes to matching
    manifest packages for consistency. For Hls the
    package is called playlist still, since that's
    what they're widely known as.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127925961

commit fc457e4c1bf6d372852cbc0e3d8bfe86a235608f
Author: olly <olly@google.com>
Date:   Tue Jul 19 09:47:37 2016 -0700

    Move default DRM callback implementation to library
    
    This also removes direct use of HttpURLConnection and
    allows use of any HttpDataSource for license requests,
    which means those using OkHttp can finally use the
    same network stack for license requests as they're using
    for everything else, without having to implement their
    own callback.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127841045

commit a61828a67516d87798fbc203fecb26886e297d5b
Author: mishragaurav <mishragaurav@google.com>
Date:   Tue Jul 19 06:44:26 2016 -0700

    Merge widevine playback tests to v2.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127825954

commit 2ed55d97d1d56837d844abd09aa906e41d323b18
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 19 05:27:49 2016 -0700

    Work around broken VP8 decoders.
    
    Issue: #548
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127821150

commit 9304cb3f8fdeda394ce5a22968841de0e5e78117
Author: olly <olly@google.com>
Date:   Tue Jul 19 03:57:44 2016 -0700

    Plumb key-rotation and drm-playlist support
    
    With this change, MediaCodecRenderer acquires a session
    from its DrmSessionManager whenever the DrmInitData in
    the format changes. The DrmSessionManager is permitted
    to return the same session if it can be re-used.
    
    This plumbing adds support for:
    
    1. Key-rotation, in the case that a key-rotation-aware
       DrmSessionManager is used. Such an implementation will
       return the same DrmSession for every aquisition, but
       will be making use of multiple MediaDrm instances within
       that session to enable the rotation.
    
    2. Playlists with mixed clear and protected content. One
       final piece to this will be to have each MediaPeriod
       provide its own license URL. We could also allow each
       MediaPeriod to specify the DRM UUID, but switching from
       PlayReady to Widevine in a playlist seems like quite a
       hypothetical thing.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127816046

commit ba9a610ac239489640cd0ee2d6ea9e56a213f1b4
Author: olly <olly@google.com>
Date:   Tue Jul 19 02:51:43 2016 -0700

    Put additional Javadoc files under src
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127811486

commit 00224877464c4006f288884f236409d93cd3c61d
Author: cushon <cushon@google.com>
Date:   Mon Jul 18 19:29:32 2016 -0700

    Avoid "unnecessary boolean expression" warning
    
    This is a no-op change to avoid an error-prone unnecessary
    boolean expression warning.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127787709

commit 6c2a9677633d81ac4fc4a4b0a46eae4f94dcd6cf
Author: olly <olly@google.com>
Date:   Mon Jul 18 11:51:18 2016 -0700

    BandwidthMeter shouldn't extend TransferListener
    
    There may be other ways to estimate bandwidth that don't
    require listening to our own transfers.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127741651

commit 74b43e26bd38431ed93db9a222844c308d2e5013
Author: olly <olly@google.com>
Date:   Mon Jul 18 11:17:09 2016 -0700

    Allow injection of custom ChunkSources
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127737169

commit 5360ddc519392037c3af0887d5d0dafeafe4c110
Author: olly <olly@google.com>
Date:   Mon Jul 18 11:07:07 2016 -0700

    Allow injection of custom FormatEvaluators
    
    This was possible previously, but now we support things
    like multi-period DASH we need to do the injection in
    the form of factories rather than concrete instances.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127735816

commit e7d95aff34f27b4bfa08716fd48a0188797566ab
Author: olly <olly@google.com>
Date:   Mon Jul 18 10:30:38 2016 -0700

    Update Renderer documentation
    
    - Cleaned up documentation
    - Removed getIndex from Renderer interface
    - Renamed reset to be positionReset
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127731006

commit ff914afd7f9c488956a5164d863ef71a6916650f
Author: eguven <eguven@google.com>
Date:   Fri Jul 15 10:12:57 2016 -0700

    Propagate MediaSource loading errors to the player.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127551577

commit 98a0c5f05c6caf2c8238a855742b32076c742191
Author: olly <olly@google.com>
Date:   Fri Jul 15 09:53:44 2016 -0700

    Fix restoring of position.
    
    This change restores ExoPlayer to its previous behaviour.
    I think we'll want a "resetPosition" boolean parameter on
    setMediaSource at some point, but no need to add it right
    now. Note that this would not always reset to the start
    of the source. For a live playback it will reset to the
    desired position (normally somewhere slightly behind the
    live edge).
    
    Issue: #1667
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127549700

commit 15631e12a8b9175329ff452ea4d2f8e96c7de758
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 15 06:54:18 2016 -0700

    Fix seeking to a non-loaded period.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127536151

commit 8a36ce697e3bcec6f9a7a64e10a7a16850094110
Author: olly <olly@google.com>
Date:   Fri Jul 15 05:53:12 2016 -0700

    Add Renderer.getCapabilities
    
    Renderer no longer extends RendererCapabilities after this
    change. Capabilities are instead accessed via a getter.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127532634

commit dcc1ac56df877b0b90e28f4cb1bf03eb11c6c981
Author: olly <olly@google.com>
Date:   Fri Jul 15 04:16:23 2016 -0700

    Make Renderer an interface
    
    In V1 we received complaints that Renderer was too locked down.
    In particular, it wasn't possible to implement a Renderer that
    wrapped another Renderer, since most of the methods were package
    private and final (e.g. enable).
    
    This change defines Renderer as a proper interface, removing
    this limitation. A method-reordering-only change will follow
    this one, to get things into a nice consistent/sane order in
    each of the Renderer classes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127527995

commit 7c551081f511355048c044c1f371153fb681a4c3
Author: olly <olly@google.com>
Date:   Fri Jul 15 03:45:59 2016 -0700

    Only pass RendererCapabilities to TrackSelectors
    
    We should only give a TrackSelector access to what it
    needs, not the whole Renderer. This is particular true
    if [] happens, since more Renderer methods
    will become publicly visible.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127526473

commit 97d9c94c1a6e598108d2927013dd32ebbf1c1275
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jul 14 09:43:23 2016 -0700

    Fix a typo and variable declaration order in Period
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127441130

commit 553023e63fd03311190559d7967530a509cb18db
Author: olly <olly@google.com>
Date:   Thu Jul 14 09:31:47 2016 -0700

    Fix DASH periods mis-reporting their duration + cleanup
    
    DashMediaPeriod.releasePeriod resets duration to 0, but
    instances are currently being re-used through multiple
    prepare/release cycles. Hence the duration needs to be
    retained. This change fixes this issue, and also makes
    variables final in DashMediaPeriod where possible.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127440080

commit bc77c3eb8229f1bc9882c03edcdf49312658ecef
Author: eguven <eguven@google.com>
Date:   Thu Jul 14 08:54:27 2016 -0700

    Call MediaSource prepare/release methods in ExoPlayerImplInternal.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127436600

commit 2d8b51a709ad881328e8f693f961c57545d93149
Author: olly <olly@google.com>
Date:   Thu Jul 14 03:41:43 2016 -0700

    Convert extractor factory classes to static final objects
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127415273

commit f758082d400bbe42116cc319be16bc5eb2c25e7d
Author: olly <olly@google.com>
Date:   Wed Jul 13 09:43:42 2016 -0700

    Big (and hopefully near-final) rename.
    
    1. Rename "extensions" package to "decoder". It's used by both
       text and (should be used by) metadata, so it's no longer just
       for extensions.
    2. Move Buffer objects move into the decoder package.
    3. Rename SubtitleParser and MetadataParser to SubtitleDecoder
       and MetadataDecoder respectively, since they extend Decoder.
       Ditto for all subclasses.
    4. Subtitle and Metadata decoders now throw their own exception
       types rather than ParserException.
    5. Move MediaCodec classes into a mediacodec package, with the
       exception of the concrete audio and video renderers.
    6. Create an audio package to hold the two audio renderer classes
       plus related util classes.
    7. Create a video package to hold the one video renderer class
       plus related util classes.
    
    After this change the following nice properties hold:
    
    1. Want a video renderer? Look in the video package. Ditto for
       audio, text and metadata.
    2. All TrackRenderer implementations use a decoder of some kind
       to decode buffers received from the source, so we have
       consistent terminology there.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127326805

commit 4f718363b5914036e82ade50efc00bda71e6bd2e
Author: olly <olly@google.com>
Date:   Wed Jul 13 07:55:14 2016 -0700

    Remove BandwidthMeter from SimpleExoPlayer
    
    The BandwidthMeter should only be used by MediaSource
    instances and the objects they reference, so there's
    really no reason for the player to need to know about it.
    
    This change sacrifices DebugTextViewHelper showing the
    estimated bandwidth, but I think that's a price worth
    paying.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127316755

commit 4a5bb559206324ac663be162a7ba6686df135cff
Author: eguven <eguven@google.com>
Date:   Wed Jul 13 07:40:56 2016 -0700

    Split DashMediaSource MediaPeriod implementation into DashMediaPeriod and support multiple periods.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127315877

commit a0c15957259384f3fd4a8c893324c50b2c3f1ab2
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Jul 13 06:53:34 2016 -0700

    Add support for CEA608 in MP4 and fMP4
    
    Issue: #1658
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127312721

commit e4a3483d6faf7a84a5a34733764bff8c25d55299
Author: []inger <[]inger@google.com>
Date:   Wed Jul 13 03:14:25 2016 -0700

    Propagate audioSessionId.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127300225

commit 11e2e0e640075c168ab8e3c0ae13393e50df5e05
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jul 13 01:45:34 2016 -0700

    Release Extractors on the loader's thread.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127294338

commit 62ebcaf8539e0b7b32b3876031352976a7071665
Author: olly <olly@google.com>
Date:   Tue Jul 12 13:02:03 2016 -0700

    Remove unnecessary res placeholder files
    
    I think these were needed for Eclipse only.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127232262

commit ea0cfdeeb13b6172f1522479e62dbd5fff8b6fe6
Author: olly <olly@google.com>
Date:   Tue Jul 12 13:01:11 2016 -0700

    Remove dead code from SmoothStreamingChunkSource
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127232159

commit 6b4918fa9b29926cfe96e10376d313f968d245bd
Author: vigneshv <vigneshv@google.com>
Date:   Tue Jul 12 10:46:41 2016 -0700

    vp9: Expose libvpx build configuration
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127216536

commit acef34a6f3dab60eea8b837f29d118315f57ce5e
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 12 07:19:28 2016 -0700

    Set the output buffer position/limit only if it's non-null.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127196797

commit d4d1640808be2216a75afa57e3a085251e0034e7
Author: olly <olly@google.com>
Date:   Tue Jul 12 07:12:28 2016 -0700

    Use extension rather than composition for track selection
    
    It doesn't look like TrackSelectionPolicy is going to be
    useful other than with DefaultTrackSelector, and it's kinda
    confusing dealing with both "selector" and "policy"
    terminology. This change does the following:
    
    DefaultTrackSelector -> selector.MappingTrackSelector
    DefaultTrackSelectionPolicy -> selector.DefaultTrackSelector
    TrackSelectionPolicy -> [deleted]
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127196326

commit 67be677ddf21b079d2e8ccea13251d443346bd56
Author: olly <olly@google.com>
Date:   Tue Jul 12 06:57:25 2016 -0700

    Move more classes under source package
    
    - Chunk package is only useful to source packages.
    - BehindLiveWindowException is a source exception.
    - SequenceableLoader is related to sources.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127195307

commit e4b08117fc6b16a5037140edb4fc0921496109c1
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 12 06:13:56 2016 -0700

    Use adaptation workaround on N7v1.
    
    Also, only enable the workaround when the resolution isn't changing but the
    format is changing.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127192637

commit de27b2e0437aeb8d6eafcba33fb90537cdf91b98
Author: olly <olly@google.com>
Date:   Tue Jul 12 06:11:39 2016 -0700

    TrackStream -> source.SampleStream
    
    Also addded result constants to C to remove the dependency
    on TrackStream from extractor.DefaultTrackOutput.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127192488

commit be9d77c59cd25f8b48e3665c8b5db1a433a5fb38
Author: olly <olly@google.com>
Date:   Tue Jul 12 03:54:37 2016 -0700

    Add new UI package.
    
    There aren't really enough classes to justify it right
    now, but if we're going to do a VideoView equivalent and
    sensible player controls at some point, it's worth making
    now to get classes into the correct place.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127184374

commit 9385b4fdf478967a62d45d54fc7769830c6b2fb6
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jul 12 02:34:13 2016 -0700

    Add version to SampleChooserActivity for Exoplayer2
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127179274

commit c936aee4123e05844493d5415c9b3d76e98e18e0
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 11 10:45:24 2016 -0700

    Fix condition for working around broken decoders.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127102633

commit bcca373f5b1af3d151a51aad77302b7fd05068c8
Author: olly <olly@google.com>
Date:   Mon Jul 11 09:14:17 2016 -0700

    Rename DecoderInfo -> MediaCodecDecoderInfo
    
    All other MediaCodec specific classes are prefixed MediaCodec,
    and we now have other decoders that aren't not related to
    MediaCodec.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127093330

commit fdf26d6a1f10cb07a2e6301b7e4225e44b4b8825
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 11 08:55:59 2016 -0700

    Work around volantis adaptation issue.
    
    The volantis H.264/AVC decoder could get stuck when adapting between certain
    stream formats where there was no change in resolution.
    
    Queue a small Baseline profile SPS, PPS and IDR slice during adaptation on this
    device, to force reallocation of reference frames.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127091330

commit 464869cf5713b0e564eaafd1c94467655b5655ee
Author: eguven <eguven@google.com>
Date:   Mon Jul 11 08:02:57 2016 -0700

    Fix DASH duration.
    
    As multi period DASH isn't supported yet use the duration of the first period only.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127086808

commit 4e86c55361447c027a9ca0cff59075bceeb1e67a
Author: olly <olly@google.com>
Date:   Mon Jul 11 04:28:48 2016 -0700

    Introduce source package for sources
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127073630

commit b8fef7bf9933921557a08f1882ea9ffdf5dadd45
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jul 11 04:22:05 2016 -0700

    Delete Eclipse .cproject files.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127073328

commit a89bf3a4776b618e5debf1089fe51377a335e54e
Author: olly <olly@google.com>
Date:   Mon Jul 11 04:17:59 2016 -0700

    Allow merging of both periods and sources.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127073129

commit 9558a4cb997d9a4413417565eada24439831e823
Author: olly <olly@google.com>
Date:   Mon Jul 11 02:08:17 2016 -0700

    Rename TrackRenderer -> Renderer
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=127065122

commit 8e0354c0a638270bd213b1410fc9534addf8f685
Author: olly <olly@google.com>
Date:   Fri Jul 8 08:45:19 2016 -0700

    Finalize class naming
    
    SampleSourceProvider -> MediaSource
    SampleSource -> MediaPeriod
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126914964

commit c9ec7beb928591c00c106eea8bd9401f769f27db
Author: olly <olly@google.com>
Date:   Fri Jul 8 08:23:30 2016 -0700

    Add streamType/capabilities for extension audio renderers
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126913487

commit a845f1c4cc0880e6349865b436e9e63b4faa6d9e
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jul 8 05:49:47 2016 -0700

    Add soft video constrains to DefaultTrackSelectionPolicy
    
    Also make filterHdVideoTracks override setMaxVideoSize.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126904080

commit 08bd4546ca025abb94a9aae3e076be732b2e420e
Author: olly <olly@google.com>
Date:   Fri Jul 8 05:05:48 2016 -0700

    Blacklist mp3 decoder on HTC One S
    
    Issue: #377
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126901901

commit dbb43567a33a6cb3cb511a76c21d26f8d72ee8fe
Author: olly <olly@google.com>
Date:   Fri Jul 8 03:01:52 2016 -0700

    Finalize v2 directory + package name
    
    - The package is renamed to avoid conflicts with v1, should any
    app wish to include both v1 and v2 for a period of time. This is
    similar to the approach used by some other open source projects
    (e.g. okhttp).
    - Copyright year is updated everywhere for completeness.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126895326

commit af3452d231c904600bf9e2c08f3f59565b2683fe
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jul 8 00:57:45 2016 -0700

    Make SampleSources reusable and implement SampleSourceProvider.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126888556

commit 42d78b35590beb0fc39bd527bbc8259010793731
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jul 7 07:42:57 2016 -0700

    Fix seeking before a source is set.
    
    Before this change, calling seekTo then setPlayWhenReady would cause the player
    throw an error, due to using the sample source provider before it's set.
    
    Transition to the buffering state in seekToInternal only if we have a sample
    source provider.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126804528

commit e02ca775f3aa68acd59e780e1b1274d2bc8524ed
Author: olly <olly@google.com>
Date:   Thu Jul 7 06:25:07 2016 -0700

    Optimize release of multiple allocations.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126799524

commit 1a3de408ac0656ea140083fce420dc9b6da275b6
Author: olly <olly@google.com>
Date:   Thu Jul 7 05:04:15 2016 -0700

    A few bug fixes.
    
    1. Suppress onContinueLoadingRequested until a source is
       prepared (since such calls are not supposed to be made
       until after preparation has completed).
    2. Don't use the format evaluator in HlsChunkSource prior
       to prepration completing.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126794616

commit 8c0e0b690ea34415c633f7d352a3a6e92ea19b35
Author: olly <olly@google.com>
Date:   Thu Jul 7 04:24:28 2016 -0700

    Don't abbreviate String as Str
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126792706

commit 85741ff2d3235b43cbe42d39d7061af31b464f8e
Author: olly <olly@google.com>
Date:   Thu Jul 7 04:21:05 2016 -0700

    TTML: Parse and use frameRate/Multiplier + tickRate
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126792535

commit 2426907f34510ebff1d9b918fab901d4737da1fa
Author: olly <olly@google.com>
Date:   Thu Jul 7 03:49:58 2016 -0700

    Fix positioning issues with ttml regions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126790829

commit d3cd0c2ee45f3e12a053012d6f3f017c8984b850
Author: olly <olly@google.com>
Date:   Thu Jul 7 03:24:37 2016 -0700

    Fix another broken link (by removal).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126789395

commit b523ff8d818bb0fe6caa4aa5256a03fea64a14f9
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Jul 6 08:57:56 2016 -0700

    Added javadoc to DefaultTrackSelectionPolicy methods
    
    Also fixed language comparison using Locale's.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126703125

commit 19d65a7a9dcbbcbeed12a93e19f76aabbc2f0075
Author: olly <olly@google.com>
Date:   Wed Jul 6 06:47:29 2016 -0700

    Report loading on/off changes via ExoPlayer.
    
    Also attempt to clear up naming a little, using "buffering" to
    mean the user visible buffering state, and "loading" to mean a
    source being loaded.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126693592

commit f4239eb571ab09eb515c27141d744a90d60f52b6
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jul 6 06:20:08 2016 -0700

    Release Extractors when ExtractorSampleSource is released.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126691912

commit 660b26e3ad18c5d0be339c030b7255ec43835fcf
Author: olly <olly@google.com>
Date:   Wed Jul 6 03:22:52 2016 -0700

    Make NetworkLock non-static and less specific.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126682871

commit dd031691b0c9a8c97863d9e0dccec3b1dcb233ff
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jul 6 00:27:28 2016 -0700

    Pass an ExtractorsFactory to ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126672854

commit 06fd826a5c16f3ee8de4ba51a9281d3fde6ba1b5
Author: olly <olly@google.com>
Date:   Tue Jul 5 11:53:27 2016 -0700

    Restore injection of non-default retry count.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126646585

commit 49a93daf9e999df0a878be7e3c4f710e9a6ba104
Author: olly <olly@google.com>
Date:   Thu Jul 14 11:52:34 2016 +0100

    Restore HLS playback tests.
    
    This fixes HlsChunkSource to allow selection of variants
    other than the first one (as originally ordered in the
    master playlist) in the case that the first one is
    blacklisted. Having done this, the two disabled tests can
    be restored.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126646547

commit 8db06a332f356be38372ae50f47343722fb08ed4
Author: olly <olly@google.com>
Date:   Tue Jul 5 09:17:35 2016 -0700

    Fix HlsTrackStreamWrapper chunk queue updating
    
    Also fix possible repeat-preparation for HlsTrackStreamWrapper
    and ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126640380

commit 7b9e47ec6b9430c036504c65ccbc58780498b8fd
Author: olly <olly@google.com>
Date:   Tue Jul 5 06:53:35 2016 -0700

    Event based buffering.
    
    At a high level, everything that we need to load in sync
    with anything else now implements a new SequenceableLoader
    class. This includes ChunkTrackStream, since multiple
    demuxed tracks in DASH/SS need to be loaded in sync with
    one another. At a higher level, SampleSources are also
    SequenceableLoaders, which allows them to be kept in sync
    by MultiSampleSource.
    
    CompositeSequenceableLoader is able to load multiple
    instances SequenceableLoaders in sync with one another,
    and is used in various places where this is required.
    
    This change also removes LoadControl registration, which
    was complicated and error prone.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126632861

commit 7b673fe432d4871198a44399d1f1bdfe5d91c6b7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jul 5 06:25:21 2016 -0700

    Fix miscellaneous consistency/formatting things.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126631393

commit f0f25aef83a21446889706f9f4fb2648a997808e
Author: olly <olly@google.com>
Date:   Tue Jul 5 03:34:02 2016 -0700

    Support playlists in exolist.json.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126622342

commit 9f017d71ef96b02b7ea365221c254ad9ff633c5d
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jun 30 11:34:50 2016 -0700

    Add HD content filtering to DefaultTrackSelectionPolicy
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126324788

commit a476e090bcfd7dc79c6b40b08d3654fa994d03ac
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 30 08:44:39 2016 -0700

    Use getConstructor().newInstance() in ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126306436

commit 2e77f02e7e4b558f976d9757873d0a4ad413826d
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 30 03:41:46 2016 -0700

    Remove non-standard color constant.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126286809

commit 33fc6126a7829a3356db9ec14f6bd485a0e058a8
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 29 09:55:09 2016 -0700

    Improve track selection with renderers reading ahead (playlists #6)
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126202210

commit bd3574dfbad4ca43d2dada7099ef0bf0fab67277
Author: olly <olly@google.com>
Date:   Wed Jun 29 08:54:23 2016 -0700

    Allow SampleSourceProvider concatenation, simplify demo.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126196431

commit 5c2bb2a8520c4ad9dad978b884db4a330fe90d08
Author: olly <olly@google.com>
Date:   Wed Jun 29 07:28:59 2016 -0700

    Use the correct format for init segments loads.
    
    This is causing getTrackIndex to fail for live playbacks.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126189387

commit e33278436f5536df0e2eb2111245c4e7c42d0e18
Author: olly <olly@google.com>
Date:   Wed Jun 29 03:45:24 2016 -0700

    Misc bugfixes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126175948

commit ca81444f95437b754e6f807c85290f2a184fd4dc
Author: olly <olly@google.com>
Date:   Wed Jun 29 02:55:31 2016 -0700

    Event based preparation.
    
    - Removes the load delay that was previously present after
      source preparation.
    - Prevents premature failure in the case that the buffering
      source fails to prepare.
    - SampleSource.Callback will get a second method in a
      subsequent CL, approximately meaning "tell me if I can load
      more stuff". This will remove the need for LoadControl and
      the complexity that comes with it.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126172573

commit 76f426e9440c7cd199161998aab58cd4e4f0214d
Author: olly <olly@google.com>
Date:   Tue Jun 28 02:25:07 2016 -0700

    Introduce a global buffering policy.
    
    This is required for buffering to work properly across
    playlist transitions. It's also much simpler, since
    specifying the buffering policy becomes independent of
    the type of media being played (i.e. the source).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=126051755

commit fdd90256f4fe2d595e5a403a7fea5b666aa92eba
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jun 27 06:51:50 2016 -0700

    Allow renderers to read ahead further than the next source.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125951381

commit 6031f89fe96e20bbf4107a299acd4c40b42856e7
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 23 11:30:56 2016 -0700

    Limit the maximum number of sources to buffer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125698923

commit aa313f234d02ee8a3d25af46f70b629eb8eb30a7
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 23 10:27:49 2016 -0700

    Set TrackStreams to be final on renderers that will be disabled.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125691172

commit 494510d6adca2ac658ed96392ab0a6f397794682
Author: olly <olly@google.com>
Date:   Thu Jun 23 09:27:20 2016 -0700

    Fix ready and ended conditions.
    
    1. The readiness of the timeline is only relevant if there
       aren't any enabled renderers. It's also only ready if
       the source after the playing source is actually prepared
       (if not, we're waiting for preparation).
    2. Prevent early transition to the ENDED state when the
       playback position hits the duration, but we're not at the
       final entry in the playlist.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125685193

commit a8883baa69ab4309985aa913fcd83c79bbdeed02
Author: olly <olly@google.com>
Date:   Thu Jun 23 08:27:55 2016 -0700

    Start cleaning up buffering.
    
    - Always continue loading if we've got less than the minimum
      amount of media in the buffer.
    - Use LoadControl in ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125679669

commit 5055a4aa9173aeae14114aee7fe7d4629d3430a0
Author: olly <olly@google.com>
Date:   Thu Jun 23 07:50:58 2016 -0700

    Some restructing to make ExoPlayerImplInternal clearer.
    
    - Update playbackInfo duration/position/bufferedPosition in a
      single place.
    - Remove sampleSource variable, and remove side effects from
      getSampleSource. There was actually a subtle bug where
      getSampleSource wasn't called by anything where no renderers
      where enabled (meaning the source never transitioned).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125676540

commit 8eb1f3f57c260d75d020f65f290d81a45106e32d
Author: olly <olly@google.com>
Date:   Thu Jun 23 06:31:10 2016 -0700

    Remove resumeInternal from ExoPlayerImplInternal.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125670965

commit 291b210be37c79464005da851538a251aad6af70
Author: olly <olly@google.com>
Date:   Thu Jun 23 06:18:20 2016 -0700

    A source is fully buffered if it has no enabled tracks.
    
    Also, getBufferedPosition shouldn't be called if no tracks
    are selected.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125670213

commit 2746d59ea8cc26457a7e3fc1cdf69341d86867c1
Author: olly <olly@google.com>
Date:   Tue Jun 7 06:00:09 2016 +0100

    Handle TrackStream transitions in isSourceReady.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125669080

commit 79cbd390ab8397419cef1966465c256eccc65f6b
Author: olly <olly@google.com>
Date:   Thu Jun 23 04:01:01 2016 -0700

    bufferedPositionUs cannot be UNSET.
    
    Also do some naming cleanup + do ms->us seek conversion
    in ExoPlayerImpl, since that's where we now do all the
    conversions coming out of the player.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125662973

commit e1d3c932fad86761141a4347c21f133c34098862
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 23 03:29:07 2016 -0700

    Only update track streams in updateTrackStreams.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125661172

commit fc2cdef208b766991e35bbb3cbcde46babfdc9be
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 23 03:06:05 2016 -0700

    Don't return a TrackStream from TrackRenderer.disable.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125659817

commit adc7ecec098386fb75e217eea0484888a19d2484
Author: eguven <eguven@google.com>
Date:   Thu Jun 23 03:00:14 2016 -0700

    Support MPEG-TS streams that start/end with an incomplete TS packet or lost sync.
    
    Issue: #1332
    Issue: #1101
    Issue: #1083
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125659191

commit 762ec41f954bf06f6327aecaa365e62e77b7a13d
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jun 23 02:52:41 2016 -0700

    Add support for HLS track selection flags
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125658752

commit 3e6c0ced829814a7a527da5853e92486eecc7ef7
Author: olly <olly@google.com>
Date:   Wed Jun 22 10:42:45 2016 -0700

    A mini bit of Timeline simplification.
    
    Pretty sure this does the same thing.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125581858

commit 5eca6694741869d8331dd15a32ffc9d9f991381f
Author: olly <olly@google.com>
Date:   Wed Jun 22 10:26:37 2016 -0700

    Move renderers into Timeline.
    
    The outer class should only deal with the enabled renderers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125579652

commit 2073f3fce374d2af5152550cd7228f0772c518d5
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 22 10:21:07 2016 -0700

    Expose source indices via ExoPlayer (playlists #5).
    
    ExoPlayer.EventListener.onPositionDiscontinuity is notified during seeking and
    transitioning from one source to the next.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125578976

commit f9fa54cd5dd1c90da2ae1db95b78c4a4b222dd83
Author: olly <olly@google.com>
Date:   Tue Jun 21 11:43:51 2016 -0700

    Have seekTo return new position directly.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125476407

commit e71cdb1bad421bdec63572ab41f9a3da8de128d5
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 21 10:58:22 2016 -0700

    Filter track support by profile and level
    
    This CL only provides checks for HEVC codecs and adds codec information to Format
    instances in DASH. Right now, we check that the supported profiles are advertised
    individually and that the supported level is equal or higher than the requested codec
    level.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125470489

commit 0139f3f27699a777a56006adaf800374774b46da
Author: eguven <eguven@google.com>
Date:   Tue Jun 21 08:38:11 2016 -0700

    Remove unnecessary cloning.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125454697

commit 6376f3a898652d88bbddd7c40c29e253807d0eaa
Author: eguven <eguven@google.com>
Date:   Tue Jun 21 06:40:10 2016 -0700

    Upgrade gradle to benefit from instant run 'again'.
    
    Now it needs to be 2.1.2 to support instant run.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125445366

commit 52c534215839ab0dde87d2369f37db3eaf2dfba8
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 7 20:15:27 2016 +0100

    getBufferedPosition can't return unknown anymore

commit 4c434005d4be3dc3d9d114e75a2214e238f40e08
Author: olly <olly@google.com>
Date:   Mon Jun 20 06:16:40 2016 -0700

    Remove/simplify some extractor tests.
    
    We have our snazzy new file-based extractor tests now,
    and the other ones have historically proven way more
    hassle than they're worth (e.g. I spent a good few hours
    once just trying to work out how to fix the Mp4 extractor
    test, having established it was the test and not the
    code that was broken!).
    
    I think some more can go from the ogg package, but leaving
    in place for now because it's a bit less clear what to
    get rid of.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125330072

commit 53cc88e2dce417422256807b7e1de163a10f78ca
Author: eguven <eguven@google.com>
Date:   Fri Jun 17 02:27:26 2016 -0700

    DefaultOggSeeker small optimization.
    
    skipToNextPage() isn't necessary anymore.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=125147444

commit 4fe6e5d7552804a826e92d55cce2e247399306af
Author: olly <olly@google.com>
Date:   Wed Jun 15 12:19:43 2016 -0700

    Misc fixes for playback tests.
    
    - AllowedVideoJoiningTimeMs must be set to 0 for tests so
      that tests which disable/enable video renderers don't
      register a large number of dropped frames.
    - Fixed a threading issue that could cause occassional test
      failure.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124978843

commit aab551e90704c6481e4448334d9440376ef03035
Author: olly <olly@google.com>
Date:   Wed Jun 15 12:15:43 2016 -0700

    Add HlsTest to V2.
    
    The ones that are commented out are legitimately broken
    and will need a library fix.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124978438

commit e9f9df8faa2abeab53431cc979ae6e3e6852bc60
Author: olly <olly@google.com>
Date:   Wed Jun 15 12:01:46 2016 -0700

    Track selection UI needs to scroll.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124976833

commit ec4c7d3acf3fdd743a4b84ceeb09dd4d7d47dd29
Author: olly <olly@google.com>
Date:   Wed Jun 15 11:58:52 2016 -0700

    Remove Eclipse support. Simplify manifests.
    
    It looks like the manifests are essentially pointless,
    but various tools are unhappy if I delete them.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124976509

commit 66a5c96c5a3e2eb6b23d84cdf9c92f64d6faabc2
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jun 15 07:30:57 2016 -0700

    Calculate ExtractorSampleSource duration if unknown (playlists #4).
    
    When buffering playlist items after the currently-playing one,
    continueBuffering should take a position that is negative because the playback
    position is before the start of the source being buffered. This change makes
    sure that ExtractorSampleSources always have a known duration when they are
    fully buffered, which means that the correct (negative) source-relative
    position can be calculated.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124949409

commit e6267cd253fc8fa6571f636bfb06f716554f38fb
Author: eguven <eguven@google.com>
Date:   Wed Jun 15 02:22:30 2016 -0700

    DefaultOggSeeker: use skipFully() instead skip().
    
    skip() may skip less than what we want here.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124930478

commit c45a3959b680efa316dd0861a0b3583a60ba7d8c
Author: olly <olly@google.com>
Date:   Tue Jun 14 11:46:08 2016 -0700

    Bump version to 1.5.9.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124864123

commit 365812e820603b2229064724ad751b80e59ba371
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 14 10:00:31 2016 -0700

    Remove FrameworkSampleSource.
    
    ExtractorSampleSource covers almost all use cases (except for AMR, AVI and
    legacy Widevine). The FLAC extension must be compiled for support for FLAC
    extraction.
    
    FrameworkSampleSource has device-specific issues, makes blocking calls to the
    underlying MediaExtractor, and does not provide much control over buffering.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124850102

commit a6b7cfb5e4ab1fd4f227d54fb8ff7f86e80f6a69
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jun 14 07:45:45 2016 -0700

    Close ParsingLoadable input streams that fail to open.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124836804

commit bd248ffee577dbece6e817e94f920f5c1e8e39ab
Author: olly <olly@google.com>
Date:   Tue Jun 14 07:44:05 2016 -0700

    Ahem (fix bad constant value).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124836700

commit 61df9aeb26b3722b6b22c98811a22494a6c0226a
Author: eguven <eguven@google.com>
Date:   Tue Jun 14 06:41:43 2016 -0700

    DashChunkSource: Workaround for missing segment at the end of the period.
    
    Issue: #836
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124832221

commit 266c0dce40bc1bdaf3888560945a18bcd3d84542
Author: olly <olly@google.com>
Date:   Tue Jun 14 06:25:23 2016 -0700

    Add DashTest to V2
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124831095

commit f4e4fd51c62bfaa96ffc67778a5932787e8c84bb
Author: olly <olly@google.com>
Date:   Mon Jun 13 09:22:50 2016 -0700

    Clean up chunked media source event listeners.
    
    - Event listener is now at the SampleSource level, since the
      individual ChunkTrackStream instances are created internally.
    - Event listener receives events corresponding to loads made
      at the SampleSource level (e.g. manifest fetches) in addition
      to those made by the ChunkTrackStream instances.
    - Added ability for FormatEvaluators to propagate arbitrary
      information (as an Object) through to the listeners. This was
      a request from YouTube.
    - Added significantly more information to each event, for example
      the DataSpec that defines the load being made is now passed, as
      is timing information.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124732984

commit 172bc4e8d8ba3790a92233b022919b7efa156ab1
Author: eguven <eguven@google.com>
Date:   Mon Jun 13 07:31:01 2016 -0700

    Increase mkv test sample file seek granularity to have better seek results.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124724113

commit 5cd7deffe7d29bec67bb2108c4181f2181aa6310
Author: olly <olly@google.com>
Date:   Mon Jun 13 07:06:44 2016 -0700

    Add playback tests to V2.
    
    DashTest will be migrated separately, since it's a little
    more work.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124722462

commit 0978227a846f1802526c3a3ef7d0f1783f926c88
Author: olly <olly@google.com>
Date:   Mon Jun 13 06:47:22 2016 -0700

    Create a new CodecCounters on enable
    
    If the same instance is reset then rapidly re-enabling the
    renderer after disabling it can prevent an application from
    reading the final values at the time when the renderer was
    disabled. Hence we now instantiate a new CodecCounters each
    time. This is needed to migrate DashTest to V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124721106

commit 7ae9bf409bb10b5e84183d945754f527fcd0f216
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jun 13 04:36:06 2016 -0700

    Play a sequence of sources (playlists #3).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124713796

commit df4e4a72fa3a5e19f8486a0e40f23934483663b6
Author: olly <olly@google.com>
Date:   Mon Jun 13 04:10:30 2016 -0700

    Print the name of the decoder we failed to query.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124712775

commit 189a2502c58e765ab238d58e830226657b87fe0e
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jun 13 02:07:13 2016 -0700

    Fix order of arguments in Format.copyWithDrmInitData.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124705921

commit 41b86f660ce840683d45a106341a6e5c7547a21d
Author: sharjeel <sharjeel@google.com>
Date:   Sun Jun 12 14:59:50 2016 -0700

    sgpd support in ExoV2
    
    This is basically clone of [] for Exo V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124682237

commit 2a3b4f67800329853c7db30a2ecfda85c3eb6b5e
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 10 07:27:20 2016 -0700

    Don't flip() TextTrackRenderer EoS input buffers.
    
    TextTrackRenderer would unconditionally flip input buffers read from its
    source TrackStream, but the data could be null in the case where the buffer
    signaled end of stream. Only flip if the corresponding flag is not set.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124559077

commit 4279e221384579a096897eeb5269cfefe8dfdc54
Author: eguven <eguven@google.com>
Date:   Fri Jun 10 06:40:49 2016 -0700

    TestUtil.assertOutput() also tests seeking.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124556278

commit 461751b194fc81006a3b1582a2cbb519090f509e
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jun 10 04:45:40 2016 -0700

    Add codec profiles for video container/sample formats.
    
    This allows better decoding support checking.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124550351

commit ca9bd5e8e4665b2f72d91939a9db14b10bcecdea
Author: olly <olly@google.com>
Date:   Fri Jun 10 04:30:51 2016 -0700

    Define DATA_TYPE constants in C.
    
    Things like manifests are loaded not in the context of a Chunk,
    but we want to eventually be reporting all loading events. So
    it makes senes to define data types at a global level.
    
    Also added {@code} in a few places for consistency.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124549737

commit 1afe480a30485d51872fd81e4265b94bcaae2067
Author: eguven <eguven@google.com>
Date:   Thu Jun 9 07:27:47 2016 -0700

    FakeExtractorOutput: add option to write dump files to external storage.
    
    So dump files can be created easily.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124455709

commit b206cff98c07ebee1aa375c4f112ef947d2d7ee1
Author: eguven <eguven@google.com>
Date:   Thu Jun 9 04:28:40 2016 -0700

    FakeExtractorInput: Fix exception type
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124446331

commit b4746eddb3aa77f0357f36843b6a554cadd852a9
Author: tasnimsunny <tasnimsunny@google.com>
Date:   Wed Jun 8 11:29:37 2016 -0700

    Add cache initializtion signal to CacheEvictor
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124374161

commit 4b3c72c057c64fd835562fe93c4aebaa0b5454be
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 09:07:05 2016 -0700

    FlacExtractorTest
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124357946

commit 544d88ca56ea5c0e2a73d8cea16c5c3d842c7058
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 08:38:14 2016 -0700

    PsExtractorTest
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124355441

commit 110c819939f99b80e23c2b4781ed46e37cfcebcc
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 06:39:13 2016 -0700

    FragmentedMp4ExtractorTest
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124346810

commit 4a3980c71ee422a4ead9e5d89ac158874f0d10cd
Author: olly <olly@google.com>
Date:   Wed Jun 8 06:01:58 2016 -0700

    Add format change events to SimpleExoPlayer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124344637

commit 80b10b5fc1b7f85909271eb3aae3d3844980aa8f
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 03:14:51 2016 -0700

    TestUtil.consumeTestData(): Make sure extractor doesn't use the position holder out of purpose.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124335837

commit 98b7e7f4e20928f36396340e6763b4b4b0d94f92
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 03:11:53 2016 -0700

    AdtsExtractorTest
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124335597

commit 57d6c49e73065903417bb21484d5c4fbf7f737b6
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 02:47:02 2016 -0700

    TsExtractorTest: Speed up the test with a smaller test sample file.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124333753

commit b5a9e4181b1165824298c9e8a621da6a3f9a776b
Author: eguven <eguven@google.com>
Date:   Wed Jun 8 02:28:40 2016 -0700

    FlacJni: Add exceptions to jni methods' definitions.
    
    These methods call read(...) method which may throw these exceptions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124332828

commit cec658d573966fb21cb8cf57e393cebefdde0c8c
Author: eguven <eguven@google.com>
Date:   Tue Jun 7 07:30:34 2016 -0700

    ExtractorInput.setRetryPosition(): Called when reading fails and the required retry position is different from the last position.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124242428

commit 1a1a454d09ace7fbf1e8f3f95cd0182a82b66b0e
Author: olly <olly@google.com>
Date:   Tue Jun 7 02:33:20 2016 -0700

    Remove stray break from HLS playlist parser.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124225444

commit aa73e137d62705a1934b01dfcd483b412fa9704c
Author: olly <olly@google.com>
Date:   Tue Jun 7 02:27:51 2016 -0700

    Propagate manifest format info through to renderers.
    
    DASH and SS manifests define potentially useful information
    that isn't present in the actual media streams. Primarily
    the representation id, but bitrate, fps and language may
    also be defined only at the manifest leve. This change merges
    the information into the sample format that's propagated to
    the renderers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124225175

commit cb9a64da330e3c0cc5ac5ebc3f03a6bed089bcac
Author: olly <olly@google.com>
Date:   Sun Jun 5 06:23:41 2016 -0700

    Merge ID3 parsing improvements from GitHub.
    
    - Parse APIC and TextInformation frames.
    - In MPEG-TS, don't mind if packets contain end padding.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124079930

commit 444d21563c3d280d5c5435404b281a4521d5af26
Author: olly <olly@google.com>
Date:   Fri Jun 3 15:05:23 2016 -0700

    Fix MediaCodecUtil regression.
    
    On older devices getCapabilitiesForType calls fail for some
    secondary codecs. We didn't used to call getCapabilitiesForType
    on secondary codecs, and so avoided this issue.
    
    This change suppresses any exceptions encountered when
    querying secondary decoders on API levels prior to N, to
    restore previous behavior when a failure occurs.
    
    Issue: #1534
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=124010242

commit e684e42994dd94a7b3a88d6367367feec65d61ea
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 3 12:01:07 2016 -0700

    Clean up DefaultDataSources and add factory for okhttp DataSources.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123991352

commit c622483f798ebc6e82fef8893d3848845de0ef24
Author: olly <olly@google.com>
Date:   Fri Jun 3 10:39:39 2016 -0700

    Enable seamless rejoing for Vp9 extension.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123982330

commit afa1ad1a6a7fbfe0ff5df6987de3292113527150
Author: olly <olly@google.com>
Date:   Fri Jun 3 09:51:06 2016 -0700

    Keep playback position advancing when all renderers are disabled.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123977520

commit 69bd31f7c2a6d060ac991d3ee218e0c4dad98767
Author: olly <olly@google.com>
Date:   Fri Jun 3 09:40:45 2016 -0700

    Fix video renderer rejoining.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123976645

commit a100175b72eddaa774d7c8ce7a3a6999394ae1bf
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jun 3 09:16:59 2016 -0700

    Rename TrackRenderer.reset to TrackRenderer.onReset.
    
    This allows the TrackRenderer superclass to do things when the renderer is
    reset, and makes resetting consistent with other 'events' on renderers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123974633

commit ff745ac444968591b93a559d691b1cd17ba7cc85
Author: olly <olly@google.com>
Date:   Fri Jun 3 08:04:35 2016 -0700

    Make ExtractorSampleSource constructor consistent.
    
    The allocator and buffering policy (e.g. how large the buffer
    is) is moving to the top level as part of playlist support,
    so it no longer makes sense to inject these parameters as
    args into ExtractorSampleSource's constructor.
    
    Instantiating the allocator and buffer size inside of the
    source is temporary and only until they're moved up.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123968976

commit 6fd610fc5fa21ba79139da34202650c9be6d39d9
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jun 3 07:02:19 2016 -0700

    Added max video size selection to DefaultTrackSelectionPolicy.
    
    It is possible to add use of this feature in the demo app, restricting the selected
    tracks to the viewport size. But it should be added in a future CL.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123965232

commit ebd37cfb8e5e453468fc3ed79e24849657d3ff21
Author: eguven <eguven@google.com>
Date:   Fri Jun 3 06:52:55 2016 -0700

    Moved testutils package to a seperate module so it can be accessed by the tests in other modules.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123964784

commit 105ef1da2dea8ce71b118f4b6b6feac446518efe
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jun 3 06:32:46 2016 -0700

    Discard trailing ctts entries with 0 sample counts
    
    The bug this cl fixes is basically an uncaught case of []
    
    Issue: #1567
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123963779

commit 443a656ada46fe2c2c15d822d4f1b6c5edaff9ad
Author: olly <olly@google.com>
Date:   Fri Jun 3 04:52:52 2016 -0700

    Fix build.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123958609

commit 7ef028c67b657239810abe3200928070ec7319d0
Author: olly <olly@google.com>
Date:   Fri Jun 3 04:35:33 2016 -0700

    Fix delivery of onLoadCanceled to occur before thread dies.
    
    This removes "message sent on dead thread" warnings in nearly
    all cases, and guarantees delivery of load cancelation to event
    listeners.
    
    Issue: #426
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123957691

commit 8e717e2dee7efe06580458b9ee455202fc1c8884
Author: olly <olly@google.com>
Date:   Fri Jun 3 04:28:51 2016 -0700

    Properly disable sample queues when not selected.
    
    - The main goal of this change is to remove the need for
      discardSamplesForDisabledTracks() in continueBuffering
      in HlsTrackStreamWrapper and ExtractorSampleSource. As
      a result we'll also save one Allocation per disabled
      track.
    - Another benefit of this change is that Allocator.trim
      calls can no longer be dropped. This could previously
      happen on player release if the playback thread's
      Looper quit before delivery of onLoadCanceled which
      performed the trim in the case that a load needed to be
      canceled at the time of the release.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123957434

commit 14cb76a112818237a23e29d081241df379b17286
Author: olly <olly@google.com>
Date:   Thu Jun 2 11:23:06 2016 -0700

    Make ExoPlayer systrace consistent.
    
    Plus remove some unused util methods + make a few
    warnings go away.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123888046

commit 5cde3aa314ab689d62b51b37f401bb287dc8169f
Author: olly <olly@google.com>
Date:   Thu Jun 2 11:06:17 2016 -0700

    Show toast if media contains only unplayable audio/video.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123885817

commit 00aef6ddb70c15a8b67f5dffc0d648d4945ffa1c
Author: olly <olly@google.com>
Date:   Thu Jan 7 08:33:57 2016 +0000

    Always include extension renderers in SimplePlayer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123868547

commit 4888592c76be25d74378817451c1e7eba044ee54
Author: olly <olly@google.com>
Date:   Thu Jun 2 04:36:37 2016 -0700

    Fix HLS track selection.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123851448

commit 94fa2ecfe5edb3e7dfd7b07a03609b8f489b9287
Author: eguven <eguven@google.com>
Date:   Thu Jun 2 03:42:21 2016 -0700

    WavExtractorTest and TsExtractorTest
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123848524

commit ed19a582a7d390289e16a2c9403bf1242f865d71
Author: olly <olly@google.com>
Date:   Thu Jun 2 03:28:05 2016 -0700

    Suppress source release failures.
    
    This is similar to suppression of failures disabling the
    renderers (in the block above).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123847812

commit 0565d8e100e77cc48bcb6a54fae0c0d08b7aaa7a
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jun 2 03:21:52 2016 -0700

    Handle non-AAC/AVC encrypted audio/video sample entries.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123847497

commit ecad3bb3967fe23a5e8a88bf7d65b6a9f746c249
Author: eguven <eguven@google.com>
Date:   Thu Jun 2 03:14:11 2016 -0700

    MatroskaExtractorTest: removed unused local variables.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123847017

commit d99679a960e06ba828fa613c3f1aa3e7c97ffffe
Author: eguven <eguven@google.com>
Date:   Thu Jun 2 02:56:09 2016 -0700

    flv, mkv and mp4 extractor sample tests.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123845660

commit e652116806dfad861b52ed666e9f12fa755b4fd7
Author: olly <olly@google.com>
Date:   Thu Jun 2 02:49:59 2016 -0700

    Treat unchecking of all boxes as disabling, not default.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123845317

commit eb021cabd186794f4a7e2fb69f19892e422af6ca
Author: olly <olly@google.com>
Date:   Wed Jun 1 04:51:32 2016 -0700

    Small cleanup.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123739334

commit 53b50a61feb688a2e1b3455ada9dc44dc902c125
Author: olly <olly@google.com>
Date:   Wed Jun 1 03:26:45 2016 -0700

    Use manifest load start time to dictate refresh period.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123734239

commit 7f70ee911b88565d59bf155b262be0b89312f8d2
Author: olly <olly@google.com>
Date:   Wed Jun 1 03:07:37 2016 -0700

    Clean up chunked Sample/Chunk sources.
    
    - Remove need for SampleSources to ref ChunkSources.
    - Correctly propagate errors loading manifests through
      ChunkSource components.
    - Fix some misc warnings.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123732918

commit 7aae5805b837eefab8835de6bd488132d69fb890
Author: eguven <eguven@google.com>
Date:   Tue May 31 07:51:46 2016 -0700

    Added Mp3ExtractorTest and modified Mp3Extractor to pass the test.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123640738

commit 5a4d82c7c2fd5ceb7a78cc4af7227fcf69123e80
Author: eguven <eguven@google.com>
Date:   Tue May 31 07:22:11 2016 -0700

    TestUtil.assertOutput() uses "*.unklen.dump" file if only it exists and simulateUnknownLength is true.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123638992

commit 911d86bf2fc334396b8b801188b25f17d268438d
Author: olly <olly@google.com>
Date:   Tue May 31 06:13:38 2016 -0700

    Use Loader directly for manifest + utc timing loads.
    
    Aside from deleting code, this change (a) adds retry
    functionality for initial manifest fetches, (b) uses
    the same loader for the utc timing fetch as for the
    manifest.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123634812

commit b61b3ab011e0cdf3aed01c3b13b72c56457654a6
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 31 01:52:49 2016 -0700

    Fixed premature linebreak
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123620174

commit 430985322decaa11330f84a684ab35b7de5d0c96
Author: eguven <eguven@google.com>
Date:   Sat May 28 14:11:34 2016 -0700

    TestUtil.assertOutput() uses ExtractorFactory to create a new instance of the Extractor for each combination of simulation parameters.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123506162

commit 8322592ee8959eb509badea2ad4d9ff4e244dd81
Author: olly <olly@google.com>
Date:   Fri May 27 09:36:40 2016 -0700

    Fix flag issue causing corrupt output on DRM playbacks.
    
    The issue is visible for DRM playbacks because
    BUFFER_FLAG_ENCRYPTED is being cleared, which results
    in trying to play encrypted samples without decryption.
    The issue would have also incorrectly cleared key frame
    flags too, for both clear and encrypted playbacks, but
    I don't think we're using that flag downstream anywhere
    and so the issue wasn't visible.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123426582

commit 7bab9cabfb9fb7f882ff2578db7ce6b18719078c
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri May 27 08:16:25 2016 -0700

    Added support for video track selection
    
    We allow 2 configurations: Forcing seamless adaptiveness and allowing
    mixed mime types adaptation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123420364

commit 8744e8dce9e1e78fd121334bd2e264a0cdcf01b2
Author: olly <olly@google.com>
Date:   Fri May 27 07:26:22 2016 -0700

    Refactor #6.HLS.4
    
    Pull more logic up to HlsSampleSource. Somewhat regretfully,
    this also backs out the optimization work done toward the
    ref'd issue. I think that's one for another time perhaps...
    
    Issue: #551
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123417413

commit 6d62962ab038d447404a86083a59a836e113f195
Author: olly <olly@google.com>
Date:   Fri May 27 05:24:11 2016 -0700

    Bump version to 2.0.0.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123410989

commit 651237ac4f0cfa5506382e8f8ee5eda17355af0f
Author: eguven <eguven@google.com>
Date:   Fri May 27 05:12:59 2016 -0700

    Moved/renamed OggExtractorFileTests.parseFile(...) methods to TestUtil.assertOutput(...).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123410374

commit 800006d08d25651bdde2b19fec9b15a04797dca2
Author: olly <olly@google.com>
Date:   Fri May 27 05:11:14 2016 -0700

    Remove TODOs that we have little urge to actually do.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123410274

commit ccfb6beb3016c382f7aea27ffe2df5b8281ba345
Author: eguven <eguven@google.com>
Date:   Fri May 27 04:12:00 2016 -0700

    FakeExtractorOutput dump() and assertEquals(..., String dumpFile) methods to facilitate extractor test writing.
    
    Changed OggExtractorFileTests to use dump files.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123407516

commit abc5c41ff4b54a5090104e7401f7cef04848f0cd
Author: olly <olly@google.com>
Date:   Fri May 27 03:56:01 2016 -0700

    Provide setPlaybackParams convenience method.
    
    It's not a comprehensive solution for setting the
    playback speed because (a) it doesn't apply when
    audio is disabled, and (b) we do some timestamp
    interpolation in a few places where we assume real
    time. However in practice it works pretty well and
    most apps probably don't allow disabling of audio,
    so I think it makes sense to expose it.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123406605

commit 5cf7c2ecf41f245ba24e6a77970992423d904a00
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri May 27 00:13:40 2016 -0700

    Separate enabling/setting TrackStreams in renderers (playlists #1).
    
    This is in preparation for changing the TrackStream while keeping the renderer
    enabled, to give seamless transitions for playlists.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123394733

commit 17f8ac8adf6a22a177040bd2dcc77efff7371d3d
Author: eguven <eguven@google.com>
Date:   Thu May 26 08:16:16 2016 -0700

    Validate Extractor behavior when load position is reset to 0 following an error.
    
    Added a new method TestUtil.consumeTestData() to emulate
    the exact behaviour and modified OggExtractorFileTests to
    use it. Rest of the test will be fixed in follow up CLs.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123320538

commit c2b89d62859c67e4a589de1f6b6acfd605d5099f
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 26 06:13:04 2016 -0700

    Add SampleSourceProvider as a factory for SampleSources (playlists #2).
    
    Initially only the first source index is used. In a later change,
    ExoPlayerImplInternal will create SampleSources for different playlist item
    indices as necessary.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123312595

commit c650ab64bca0a7a0636772b4b73d1130ccdb6266
Author: olly <olly@google.com>
Date:   Thu May 26 05:43:04 2016 -0700

    Less silly generics for Loader.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123310694

commit 1ea149a4d2e45523d95f46a60459602a12c9797f
Author: olly <olly@google.com>
Date:   Thu May 26 04:00:31 2016 -0700

    Refactor #6.HLS.3
    
    - Pull loading of the initial manifest up to HlsSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123305312

commit e74fc80aab1b1b24a4e775152613068d9500dc33
Author: olly <olly@google.com>
Date:   Thu May 26 03:43:17 2016 -0700

    Loader improvements.
    
    This change moves generally useful functionality (load timing
    and fatal error propagation) inside of Loader, so that callers
    don't have to duplicate effort.
    
    The change also makes use of generics so that the callback
    receives a Loadable with a more specific type.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123304369

commit db79f7989f928bb2f16dd153500663eb88813d06
Author: olly <olly@google.com>
Date:   Thu May 26 03:09:16 2016 -0700

    Fix a few warnings.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123302488

commit 10329eb1114301b6ec8d200ee7da30046fa75aa3
Author: olly <olly@google.com>
Date:   Wed May 25 10:36:34 2016 -0700

    Allow delivery to multiple messages in a single message.
    
    Where multiple messages are required to be sent in order
    to perform a player reconfiguration, it will usually be
    desirable to process all messages in a single "transaction"
    (i.e. without any rendering happening when only some of
    the messages have been applied).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123228334

commit ff7819e86a50d2187eda852381d2af3c478d27f5
Author: olly <olly@google.com>
Date:   Wed May 25 09:21:23 2016 -0700

    Delete another class from the demo app.
    
    Merge the two MediaDrmCallback classes, since they're pretty
    much identical.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123220343

commit f995509448ae2c194374d29fd1b45cbc6cfa1a5a
Author: olly <olly@google.com>
Date:   Wed May 25 06:38:42 2016 -0700

    Give MSG constants different values.
    
    This should be a no-op change, but it seems sensible to
    have them not overlap.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123208140

commit 35d7dad047ce5f5f277be33ddec528b4b72c1455
Author: olly <olly@google.com>
Date:   Wed May 25 05:41:29 2016 -0700

    Clean up SimpleExoPlayer.
    
    - Simplify setSurface by always blocking when the surface
      is being cleared.
    - Add analogous setVolume API.
    - Support setting of playback params for extension audio
      decoders. We can probably use this to add a setPlaybackRate
      API to SimpleExoPlayer for API level 23 and above only,
      but we'd probably want to make sure it works properly when
      there's no audio track too, so some thought will be
      required.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123204581

commit 7d229003ad93382f2e783f6c7e3f2277bab5804d
Author: olly <olly@google.com>
Date:   Wed May 25 05:24:32 2016 -0700

    Add flexibility to DrmSessionManager.
    
    DrmSessionManager is now an actual manager. For each session
    request it may return a shared session (as things work now,
    and as is suitable for Widevine VOD) or a separate instance
    (e.g. for PlayReady where audio and video are protected with
    different keys).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123203664

commit da2cfd601d225cf4acb838a08a994ef6d30b64c8
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 25 05:20:08 2016 -0700

    Keep intermediate .so files inside the ffmpeg directory.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123203428

commit c0cad7f396891e67810c87a9debafa0c7b82fcff
Author: olly <olly@google.com>
Date:   Wed May 25 03:49:23 2016 -0700

    Load demo app samples from json.
    
    Also handle .exolist.json links. This lets you put a list of
    samples somewhere (e.g. on the web). Clicking it opens the
    app and displays the samples it defines.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123198928

commit b6755c145e0f06360f7852a9b1f9ad67cec47533
Author: eguven <eguven@google.com>
Date:   Wed May 25 01:50:02 2016 -0700

    DefaultOggSeeker loop fix.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123191416

commit 9609302b3d4e7272fe48752db5a79c5a06ef2354
Author: vigneshv <vigneshv@google.com>
Date:   Tue May 24 16:42:48 2016 -0700

    Support VPx in ISO-BMFF (MP4) Container
    
    Netflix created a spec to encapsulate VPx codecs in ISO-BMFF (MP4)
    Container [1]. This CL adds support for VP8 and VP9 video codecs
    in the MP4 container.
    
    [1] https://github.com/Netflix/vp9-dash/blob/master/Downloads/VPCodecISOMediaFileFormatBinding.pdf
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123160650

commit ced7de15a9f5a0d3f9b550dd941b2f3b3f1678b8
Author: olly <olly@google.com>
Date:   Tue May 24 03:38:51 2016 -0700

    Promote DemoPlayer to library as SimpleExoPlayer.
    
    DemoPlayer moves into core library as SimpleExoPlayer, which
    implements ExoPlayer.
    
    Issue: #383
    Issue: #592
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=123090184

commit 075e095cbae80c3ef62f51ef24995db379358ce0
Author: olly <olly@google.com>
Date:   Mon May 23 05:08:37 2016 -0700

    Assume AAC-LC (or HE-AAC) in MPEG-TS.
    
    Issue: #774
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122987179

commit c539db68ca4c03a3f3907f5d3086b1b0ea53a74c
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon May 23 04:27:15 2016 -0700

    Add first default track selection policies
    
    With this CL:
    * The first supported video track found is selected.
    * The first supported audio track with preferred language is selected.
      If none, we fallback to the first supported one.
    * For text, we only present a selection if one of the tracks has the
      preferred language and the track is flagged as forced.
    
    TODO list:
    * Add a selection policy for video (probably related with adaptiveness).
    * We should decide what to do with the default flag.
    * Perhaps, if no audio with the preferred language(assuming there is one)
      is found, we should fall back to a text track that has the preferred
      language.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122985006

commit 58953d370fd378b81102a2079f37e8c1350d1690
Author: olly <olly@google.com>
Date:   Mon May 23 03:10:45 2016 -0700

    Simplify DemoPlayer + misc surrounding components.
    
    1. Properly split out listening responsibilities so that
       DemoPlayer only listens to its own components.
    2. Revert StreamingDrmSessionManager UnsupportedDrmScheme
       exceptions back to how they worked in V1, and inject
       a DrmSessionManager rather than a MediaDrmCallback into
       DemoPlayer.
    
    This much better prepares DemoPlayer for promotion into
    the core ExoPlayer library, since it removes assumptions
    such as what SampleSource and DrmSessionManager impls
    might be used with it.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122980952

commit ddde6edb925f32cc0f126134ba6e072dfa7048e1
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 23 02:32:44 2016 -0700

    Add FFmpeg extension.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122978403

commit 9981a83c0512e5a29077d5df2f2b29911260dee1
Author: eguven <eguven@google.com>
Date:   Mon May 23 02:31:15 2016 -0700

    Fix Ogg/Flac sync exception.
    
    Restores input position after flac block size read.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122978325

commit 731d4283abf18acc9caa7d502998b9854022d522
Author: eguven <eguven@google.com>
Date:   Mon May 23 02:09:36 2016 -0700

    Ogg/Opus and Ogg/Flac search seeking
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122977123

commit 7465db2a22b6fcfcc7a97716c8aa4f1c1236b5ad
Author: olly <olly@google.com>
Date:   Thu May 19 10:16:44 2016 -0700

    Merge ID3 parsing improvements from GitHub.
    
    - Parse APIC and TextInformation frames.
    - In MPEG-TS, don't mind if packets contain end padding.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122743786

commit 83b43a6fe620f9ce74066f6b06c35e134b07d094
Author: olly <olly@google.com>
Date:   Thu May 19 10:05:21 2016 -0700

    Assume 360p 4:3 H264 is supported from JB.
    
    Issue: #1534
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122742666

commit fb3fdb34c7bf4f0f7a737f4af89c94953ccf96e2
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 19 07:42:47 2016 -0700

    Send H.265 parameter sets in TSs to the decoder.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122730598

commit 7d9541848e8d46722a7cd6fc5e680425d4aa2927
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 19 07:33:50 2016 -0700

    Rename mpdIntent to intent.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122730041

commit 7d4c786e2157328f82eed67273fd9003ea33c96f
Author: olly <olly@google.com>
Date:   Thu May 19 04:19:00 2016 -0700

    Make DRM work in ExoPlayer V2.
    
    Bigger changes will be coming, but this gets DRM back
    up and working again.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122719062

commit 80f67d908af4b741e26cfe8190f5071be20eb7ef
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed May 18 09:06:00 2016 -0700

    Add flagDefault and flagForced support for Matroska
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122636596

commit d43824710e09b1ee6e15af7a39b8bfbcaf76d994
Author: olly <olly@google.com>
Date:   Wed May 18 04:29:35 2016 -0700

    Fix seeking with WAV files.
    
    Previously, rounding down to the nearest frame wasn't
    being done correctly; seeking could seek into a sample.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122618668

commit 362ea1d7255f71626b41287084048f98084be3ce
Author: olly <olly@google.com>
Date:   Wed May 18 02:29:52 2016 -0700

    Update moe to include third_party jars.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122612016

commit fce17e7ffc399df66135e966f47c668414471aec
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 17 13:47:47 2016 -0700

    Added a trackSelectionFlags field to format.
    
    This field will allow us to flexibly add information provided by the container
    or streaming manifests related to the tracks that must be selected.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122559858

commit a16a333df2b99d2530363fb19c445ce8e6b834d3
Author: olly <olly@google.com>
Date:   Tue May 17 06:49:22 2016 -0700

    Clean up renderer event listeners.
    
    - Don't report errors to listeners if playback will immediately
      fail. Doing so is redundant, since such errors are immediately
      reported through ExoPlayer's listener as a result of playback
      failure. We were also reporting these errors inconsistently
      across renderers.
    - Reduce code duplication through EventDispatcher classes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122519976

commit bfee449ed8b6c2b138c74b4ee38588a3935045b2
Author: olly <olly@google.com>
Date:   Tue May 17 04:33:06 2016 -0700

    Fix FMP4 playback duration and absent tfdt handling.
    
    - Parse duration from mehd box for FMP4.
    - Handle absent tfdt boxes by accumulating decode time
      from one fragment to the next.
    
    Issue: #1529
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122512416

commit 9e65693e91efb59b978108fb1939dacbfa576295
Author: olly <olly@google.com>
Date:   Tue May 17 02:52:01 2016 -0700

    Misc cleanup.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122506577

commit a43144decf24b9df1e38a6f34feb011b53f1cdbb
Author: olly <olly@google.com>
Date:   Mon May 16 13:46:34 2016 -0700

    Don't require playback Looper to build DRM session manager.
    
    This is required because in V2 we'll be instantiating DRM
    session managers before the ExoPlayer instance (and hence
    we wont have the Looper). This logic will be further cleaned
    up in later CLs that overhaul DrmSessionManager in more
    depth.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122453765

commit 537f193c8877f6f1ddf05f177968a311bc37d2e0
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 16 09:55:40 2016 -0700

    Improve precision of fragmented/unfragmented MP4 sniffing.
    
    Search up to 4 KB for both fragmented and unfragmented files.
    
    Detect files with an mvex box in their moov box as fragmented.
    
    Fix reading of brands.
    
    Issue: #1523
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122429548

commit ecf50c4f9e54a4abf9ee541d9d7e8c7cc9ab3745
Author: olly <olly@google.com>
Date:   Mon May 16 09:23:38 2016 -0700

    Fix too-long TAG + remove unused methods.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122426685

commit 2e8e8aba9db9a30175b133e39012e73f70867e80
Author: olly <olly@google.com>
Date:   Mon May 16 09:00:53 2016 -0700

    Always inject loadable retry count.
    
    Now [DASH/SS]SampleSource instances are creating ChunkTrackStream
    instances dynamically, it makes sense to always require that the
    min retry count be injected from that level. The SampleSource
    implementations should also use the retry count when refreshing
    the manifest.
    
    The option to configure the retry count on the SampleSource classes
    will arrive in a later CL.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122424774

commit 6977c8f455f3a608e1c3c0c9cd53c17d374e668a
Author: olly <olly@google.com>
Date:   Mon May 16 08:40:14 2016 -0700

    Bit of naming/documentation cleanup.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122423250

commit 2f4bfc3f5fd49e3a356180869a81751dd301a0c5
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon May 16 08:24:58 2016 -0700

    Add the TrackSelectionPolicy to decouple track "assignment" and selection
    
    Allows the user to provide their own criteria for selecting one of the available tracks
    without having to reimplement the track assignment logic, i.e. linking type x tracks with
    type x renderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122422087

commit 23769fe82e66eb32a626acea4c3e7f54be170d2b
Author: olly <olly@google.com>
Date:   Mon May 16 08:13:19 2016 -0700

    Work around broken AAC decoder.
    
    Issue: #1528
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122421357

commit ebca7f9a212de04ba0c2e1bc14517ae628fdfcf2
Author: olly <olly@google.com>
Date:   Mon May 16 07:42:32 2016 -0700

    Add missing issue template.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122419424

commit ca49d6ff40fbe0a17367c30fc2da1dbf854b0243
Author: olly <olly@google.com>
Date:   Mon May 16 07:20:01 2016 -0700

    Refactor #6.HLS.2
    
    Rename HlsSampleSource2 -> HlsSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122418334

commit 770f2c2c58157e2e5e311c60ecc8bba73ae75d3d
Author: olly <olly@google.com>
Date:   Mon May 16 06:32:22 2016 -0700

    Refactor #6.HLS.1
    
    1. Merge HlsOutput and HlsSampleSource -> HlsTrackStreamWrapper.
    2. Rename HlsSource -> HlsSampleSource2. This will be renamed to
       HlsSampleSource in a subsequent CL.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122415970

commit 51cf8bed2992b3e64d5158173d1ca74eee4a2581
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon May 16 05:13:24 2016 -0700

    Fix UUID constant reference.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122412543

commit d70f4a8fc7610d0758fb2b2590d13911b3e18ace
Author: olly <olly@google.com>
Date:   Mon May 16 04:10:21 2016 -0700

    Update FMP4 samples.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122409929

commit d689a8fdfd0f7162f857229aa6d80a0d7f7b5b7c
Author: olly <olly@google.com>
Date:   Mon May 16 03:22:44 2016 -0700

    Make Format implement Parcelable.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122407769

commit efaea811941c009ed09ebd6556596e059afd7e9c
Author: olly <olly@google.com>
Date:   Fri May 13 07:47:40 2016 -0700

    Use CodecCounters consistently in all renderers.
    
    - Increment skippedBufferCount for VPX and ADTR.
    - Set maxConsecutiveDroppedOutputBufferCount count for VPX.
      Tweak its meaning to ignore skipped frames.
    - Remove outputFormat/outputBuffer changed counts. These add
      limited value. Also, MediaCodec is moving toward a model where
      you don't see the output buffers changing because you dequeue
      them one at a time (like how our extension decoders work).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122258530

commit 3760f514a9a4ab823b8416a1710bdd92993c2754
Author: olly <olly@google.com>
Date:   Fri May 13 04:59:12 2016 -0700

    Flesh out ExoPlayer extensions.
    
    1. AudioDecoderTrackRenderer now reports decoder initialization
       and AudioTrack underruns.
    2. AudioDecoderTrackRenderer can now render more than one output
       buffer per call to doSomeWork, to be consistent with
       MediaCodecAudioTrackRenderer. This may also prevent audio
       underruns in the case that audio is fragmented into many small
       buffers.
    3. AudioDecoderTrackRenderer now has an overridable method that
       receives the audio session id, to be consistent with
       MediaCodecAudioTrackRenderer.
    4. Fix unsafe event notification in LibvpxVideoTrackRenderer.
    5. Vpx and AudioDecoder extensions now increment the CodecCounter
       inputBufferCount field correctly.
    6. Decoders now have names :).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122250009

commit 97c633f128dce4f91132b317969fcf9269486981
Author: olly <olly@google.com>
Date:   Fri May 13 04:04:13 2016 -0700

    Advertise adaptive support in LibvpxVideoTrackRenderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122247836

commit 7e58f4cd9dbc62aa3ebbbeed3e4414354ecf06cd
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri May 13 03:58:23 2016 -0700

    Allow AudioDecoderTrackRenderers to override their output formats.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122247516

commit 403f164b75e1298e9a7a103202e538ca019f3fd7
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri May 13 03:39:50 2016 -0700

    Pass the sample Format to AudioDecoderTrackRenderer.createDecoder.
    
    The FFmpeg extension can support various different MIME types, so pass the
    whole format to configure the decoder.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122246589

commit ea8d0a7aef0749c3b4d3b1775ca41aad92bfc726
Author: olly <olly@google.com>
Date:   Fri May 13 02:20:52 2016 -0700

    Move UUID constants to C, and make C an interface.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122242006

commit b53a941ffdcbc0596acbc90fb6e0f273bc682ade
Author: olly <olly@google.com>
Date:   Thu May 12 08:27:36 2016 -0700

    Fix crash (by calling correct DecoderInfo constructor).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122159478

commit e29cb37403b7f100050fc0d155298171be884c9d
Author: olly <olly@google.com>
Date:   Thu May 12 08:03:28 2016 -0700

    Fix WavExtractor bug.
    
    When skipToData is called the peek position is not equal
    to the read position of the input. Hence peeking a chunk
    header and then skipping by that amount wont do the right
    thing :)!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122157603

commit 9bfe62a5a55c4f396c90a2a8675c2d54f3a5856c
Author: olly <olly@google.com>
Date:   Thu May 12 08:02:27 2016 -0700

    Support 32-bit WAV.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122157513

commit 7301b538290cccf1be73582e5c8376c8f6b90961
Author: olly <olly@google.com>
Date:   Thu May 12 08:01:36 2016 -0700

    Add MediaCodecSelector.getPassthroughDecoderInfo.
    
    Issue: #1518
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122157463

commit 180d10334a4735291f377ca92da08e420f9d1167
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 12 07:59:23 2016 -0700

    Add .cproject for FLAC Eclipse build.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122157285

commit 1dcd454477806d106cd627809b12702ae9c1e143
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu May 12 06:12:50 2016 -0700

    Rename util.extensions package to extensions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122151232

commit 68d39b51596b540d825ef633ac4091d5a32a063a
Author: olly <olly@google.com>
Date:   Thu May 12 04:38:03 2016 -0700

    Remove DecoderInputBuffer.size
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122146105

commit f9f95d638bbe23f7c9f584e7500a5d1f8c7c0feb
Author: olly <olly@google.com>
Date:   Wed May 11 13:12:41 2016 -0700

    Make ExtractorSampleSource amenable to proguarding.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122085277

commit 356288a0185dd96272f8cce6dbb45ec478a6d402
Author: olly <olly@google.com>
Date:   Wed May 11 12:19:17 2016 -0700

    Fix documentation.
    
    - Merge guide.md updates from GitHub.
    - Update Opus repository.
    - Fix missing link in Opus README.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122080285

commit af78ff849a868fbdbba1ecdc3c5b123840ff7d15
Author: olly <olly@google.com>
Date:   Wed May 11 12:17:01 2016 -0700

    Add MediaCodecSelector.getPassthroughDecoderInfo.
    
    Issue: #1518
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122080068

commit 7980e495a7e0d176e1bace5f2d3f706172f2167d
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed May 11 10:11:07 2016 -0700

    Remove an extra blank line in ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122065476

commit 5ca9f62753dffb2fd389d6750cc38950cad7d1fa
Author: olly <olly@google.com>
Date:   Wed May 11 08:07:38 2016 -0700

    Refactor #6.HLS.0
    
    Mechanical step to create a new HlsSource in the library.
    Note that naming is now confusing. This will be fixed in
    the next CL, when:
    
    HlsSource -> HlsSampleSource
    HlsSampleSource+HlsOutput -> HlsOutput
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=122054800

commit 9ee3030b791c907328fcfbc9a53d61b22ef33df3
Author: eguven <eguven@google.com>
Date:   Tue May 10 09:55:14 2016 -0700

    Opus initialization data should be in native order.
    
    http://developer.android.com/reference/android/media/MediaCodec.html#CSD
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121957004

commit 58c0ab1779aab9c7a07e22d268f37c57aac7f44e
Author: olly <olly@google.com>
Date:   Tue May 10 08:40:40 2016 -0700

    Broaden OMX.SEC.MP3.Decoder blacklisting.
    
    Issue: #398
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121949973

commit cba4d80277de3db06b0adf3f9c062a524f96ad26
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue May 10 06:53:46 2016 -0700

    Add extension renderers before library renderers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121942162

commit 19859eef96735c53304c7b357c80261c59e0b9f3
Author: eguven <eguven@google.com>
Date:   Tue May 10 06:39:09 2016 -0700

    Upgrade gradle to version 2.1.0 to benefit from instant run.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121941168

commit 73c90ca0bcbf93418a505a5ca5d904d7b1ffa982
Author: olly <olly@google.com>
Date:   Tue May 10 06:26:07 2016 -0700

    Enable FF/RW using Fugu remote.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121940474

commit 3674f9598e428ff2f0201d43479a141d439d1b48
Author: eguven <eguven@google.com>
Date:   Tue May 10 06:24:59 2016 -0700

    ogg't'opus reader
    
    Support for opus content in ogg container.
    TODO: Sample duration and seeking.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121940392

commit 30ab3bef9a6f28829d1c1ef2a59fb08129f874e7
Author: olly <olly@google.com>
Date:   Tue May 10 03:58:12 2016 -0700

    Bump version to 1.5.8.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121931978

commit 28eaa2cb248d54323e19e43cf1c7110d84163cd9
Author: []inger <[]inger@google.com>
Date:   Tue May 10 02:52:30 2016 -0700

    Support Ogg containers without a properly flagged last page.
    
    Such files are slightly off spec but easy to support.(https://github.com/google/ExoPlayer/issues/1506)
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121927762

commit b61e7cdbc42b5f8fb6f84eac26c2673f3cb0c279
Author: olly <olly@google.com>
Date:   Tue May 10 02:33:15 2016 -0700

    Support 8-bit and 24-bit PCM with re-sampling.
    
    This is a cleaned up version of the pull request below,
    which will be merged with this change then applied on top.
    
    https://github.com/google/ExoPlayer/pull/1490
    
    Issue: #1246
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121926682

commit d2c524d726ceb13c6d2a4f01eb5c24dfe443c1e5
Author: cblay <cblay@google.com>
Date:   Mon May 9 13:39:05 2016 -0700

    Add open/read http exception classes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121871799

commit 9f2707cfa326941cd4b1a9c184292a42113a068a
Author: olly <olly@google.com>
Date:   Mon May 9 03:44:08 2016 -0700

    Push DrmInitData into Format.
    
    - This means DrmInitData is propagated through sample queues (i.e.
      is effectively attached to every sample, so we can see when it
      changes when reading from the queue).
    - It also allows different DrmInitData per track, which is possible
      in muxed MKV/WebM, and per Representation for DASH, although we
      wont be able to seamlessly adapt in the latter case.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121821928

commit e284d6166a471e8724997b42fcd8b98efc298f42
Author: olly <olly@google.com>
Date:   Fri May 6 10:15:33 2016 -0700

    Remove AudioTrack API level 16 dependency.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121685491

commit 523f2662efb3d3b5cfe706368a0b6290c357c0c8
Author: olly <olly@google.com>
Date:   Fri May 6 09:45:30 2016 -0700

    Skip arbitrary chunks before WAV fmt chunk.
    
    I've seen a sample that has a LIST chunk prior to fmt. It
    seems best just to skip all chunks until the format is
    located. As per the RIFF spec:
    
    "Programs must expect (and ignore) any unknown chunks
    encountered, as with all RIFF forms."
    
    https://www.aelius.com/njh/wavemetatools/doc/riffmci.pdf
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121682470

commit 99c0ba005aa78b2efbd99436f3a4061a0a891859
Author: olly <olly@google.com>
Date:   Fri May 6 09:44:42 2016 -0700

    Add support for TTML Regions extent
    
    This allows limiting the horizontal extension of the cues.
    NOTE: So far, we only support percentages for size magnitudes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121682404

commit 642b2009f32dad6237393de599b538db2882ddfd
Author: eguven <eguven@google.com>
Date:   Fri May 6 08:08:46 2016 -0700

    Add extensions to v2 demo app.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121674924

commit cf0a31a7bb52d633f43e298df95732392390544e
Author: cdrolle <cdrolle@google.com>
Date:   Fri May 6 03:10:03 2016 -0700

    Fixed an NPE with self-initializing DASH segments.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121660680

commit 27132bb2da97d670cd9489d6d2dada2a9634026f
Author: olly <olly@google.com>
Date:   Thu May 5 03:16:00 2016 -0700

    Update MediaCodecUtil in V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121566154

commit 7f9888746878b8c7da714cb384553c2e2fb64f0e
Author: olly <olly@google.com>
Date:   Thu May 5 03:08:29 2016 -0700

    Add support for rechunking fixed-sample-size data.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121565738

commit 1fea3fe3c077395777e98922ee67ff2e28818b0a
Author: olly <olly@google.com>
Date:   Thu May 5 02:58:12 2016 -0700

    Add support for TTML regions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121564959

commit d978398faf941405aafeb29cec92c02ebbdbf61c
Author: cdrolle <cdrolle@google.com>
Date:   Wed May 4 14:23:51 2016 -0700

    Added SubtitleParser interface (extending Decoder)
    
    SubtitleParser includes a method updating the current
    playback position for parsers that need to be aware
    of the position in order to determine how to batch
    captions (i.e. Eia608Parser).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121519712

commit 6e86cafce0915d8be726de3f6d08191b52957d52
Author: olly <olly@google.com>
Date:   Wed May 4 11:17:34 2016 -0700

    Fix broken test.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121501144

commit 6e5ae4eddca8a364a1ba95544cc50b3412f2cad8
Author: olly <olly@google.com>
Date:   Wed May 4 05:41:06 2016 -0700

    Simplify DrmInitData.
    
    - This moves to a single DrmInitData implementation that supports
      both specific and universal UUID matching. You can also do a
      combination of the two, which was not previously possible.
    - The object model is simplified as a result. This is a precursor
      to a change where DrmInitData will be included directly in the
      Format to enable key rotation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121472592

commit 686816a610db27b95e42e05224e7010ce73979c2
Author: eguven <eguven@google.com>
Date:   Wed May 4 04:37:16 2016 -0700

    Fix format constructor parameter order.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121468904

commit 45a46c3e6eaa5c593cde1b230474c65255565cbb
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue May 3 06:15:06 2016 -0700

    Add getTrackType to allow track selection
    
    In order to apply track type specific policies in
    the track selection, we need to know the type of
    the track renderer, this method returns one of the
    constants defined in C.java of the form TRACK_TYPE_*
    to allow renderer classification.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121369021

commit 6b9c43e578c9440a2f0af72f8aee6173760283b7
Author: olly <olly@google.com>
Date:   Tue May 3 04:09:40 2016 -0700

    Avoid expensive equality checks in DefaultTrackOutput.
    
    If the media format changes from one Format object to another
    one that's is equal (but not the same object), readData would
    end up performing an expensive equality evaluation on every
    invocation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121362300

commit c2bd01a75654495c013bfb9cdb51142600bd035c
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Apr 29 03:06:12 2016 -0700

    Removed unused parameter.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121102072

commit f0e6fff011e0395ace1892e4ff4400b4cc6a223a
Author: olly <olly@google.com>
Date:   Fri Apr 29 02:53:52 2016 -0700

    Remove unused private constants.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121101188

commit a1299ea7221154f278063853233f35d93de9b35d
Author: olly <olly@google.com>
Date:   Thu Apr 28 07:46:19 2016 -0700

    Have DrmInitData classes implement hashCode/equals.
    
    This will be required for key rotation to work, since
    we'll need a way to determine whether or not the init
    data has changed.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121018211

commit 9b57487845251256ab26bbec0db9f8795005210b
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Apr 28 05:44:10 2016 -0700

    Handle gapless audio metadata in elst.
    
    Only edit lists that truncate the first/last sample are supported, which is
    sufficient to handle AAC encoder delay/padding.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121011278

commit 23cb9532c58b01035f2bc8c346bfa2b0b503703c
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:52:51 2016 -0700

    Refactor #6.5: Restore DASH UTC timing element support.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121002218

commit 0841d043b8eaf737065c031fa72e35af3f9817c0
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:45:07 2016 -0700

    Refactor #6.4: Create child source instances on demand.
    
    Dash/SS SampleSources now instantiate ChunkSource and
    ChunkSampleSource (renamed to ChunkTrackStream) instances
    on demand as tracks are enabled. The TrackGroups exposed
    by the DASH/SS SampleSources are now constructed at the
    top level.
    
    Note that this change resolves the TODOs at the top of the
    ChunkSource classes, allowing multiple adaptation sets of
    the same type.
    
    Next steps will include:
    
    - Bring back UTC timing element support for DASH, which
      will be an extra request during preparation in  the DASH
      SampleSource.
    - Simplification of manifest fetching to use a Loader directly
      in the two top level SampleSource classes. ManifestFetcher
      should eventually go away once HLS no longer needs it.
    - Eventually, some consolidation between DASH/SS. There's a
      lot of common code there now.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121001777

commit d82bb3f65753e08600a96f7fdd2c5a1cd846ba5a
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:37:43 2016 -0700

    Refactor #6.3: Pull drm parsing up to SS SampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121001478

commit eb3460b3aa8a198900f9604a9b038ae53ee19761
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:34:06 2016 -0700

    Refactor #6.2: Start to simplify components.
    
    Parse the duration of the media directly from the manifest
    in the DASH/SS SampleSource implementations.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121001296

commit b38d0045533a97b668b3d6de922d6afe1e942ff6
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:31:04 2016 -0700

    Refactor #6.1: Pull up manifest requests.
    
    This change pulls manifest refresh responsibility up to the
    top level Dash/SS SampleSource implementations. In following
    steps more of the manifest processing logic will be pulled
    up (e.g. extracting track groups from the initial manifest),
    which will allow ChunkSampleSource/ChunkSource instances to
    be further simplified and created on demand.
    
    I've avoided moving/renaming anything for now, so as to keep
    it fairly easy to review.
    
    Note that this change does the TODO related to releasing the
    manifest fetchers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121001139

commit 15a890c3cea91366195bc13d699c7796811542ff
Author: olly <olly@google.com>
Date:   Thu Apr 28 02:28:42 2016 -0700

    Refactor #6.0: Add SampleSources for DASH and SS.
    
    This is a mechanical change. The two new SampleSource classes
    are forked from MultiSampleSource, with the logic that previously
    was in the demo app's SourceBuilder methods copied into the
    corresponding constructors. Subsequent steps will:
    
    1. Pull the initial manifest processing from DashChunkSource and
    SmoothStreamingChunkSource into the new SampleSource classes.
    2. Remove the construction of ChunkSampleSource instances from
    the constructors, instead instantiating children only as needed
    when tracks are enabled.
    3. Simplify ChunkSampleSource down into a ChunkTrackStream object.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=121001021

commit 3d14c7242d3a3d260fb6734129d5aad94a21b0bd
Author: cdrolle <cdrolle@google.com>
Date:   Wed Apr 27 10:04:17 2016 -0700

    Refactored Eia608Parser so that it manipulates the caption string builder directly, avoiding unnecessary object allocation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120926283

commit ab3489efc1a8caf872058f390360bfd4c7d57b27
Author: eguven <eguven@google.com>
Date:   Wed Apr 27 03:53:26 2016 -0700

    Remove unnecessary reset() method.
    
    pageHeader.headerArray is only used in getNextSeekPosition()
    in which populatePageHeader() resets them both at the beginning
    anyway.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120902428

commit 784a18a188bb6e7258e6e952abf21d39abe66faf
Author: olly <olly@google.com>
Date:   Tue Apr 26 09:52:52 2016 -0700

    Use C constants as event source ids.
    
    The construction currently in SourceBuilder will be
    moving inside of the core lib, so it can't refer to
    DemoPlayer constants.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120822759

commit 845d250442bdac155ec56014f9121be1ac349c61
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 26 09:20:57 2016 -0700

    Restore renderer.isEnded check when updating the playback position.
    
    If rendererMediaClock is non-null, the rendererMediaClockSource is enabled or
    started, so remove the check in updatePositionUs.
    
    When disabling renderers for track selection, renderers with changing track
    selections always transition from started -> enabled.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120819483

commit e88eeba85985b0be1719760268ccaff3ba3941f5
Author: olly <olly@google.com>
Date:   Tue Apr 26 09:00:43 2016 -0700

    Fix compiler warnings.
    
    - You can't link to a generic type (apparently).
    - Suppress unchecked conversion warning.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120817601

commit 7313c26a56b85e810d6a69aa672c3eb51e0e3b97
Author: olly <olly@google.com>
Date:   Tue Apr 26 07:40:01 2016 -0700

    Properly document processOutputBuffer.
    
    Plus add processOutputBuffersChanged just for consistency
    with processOutputBuffer and processOutputFormat.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120811608

commit 0bd26b74b26141cf4e6007a1c426461e78c41589
Author: cdrolle <cdrolle@google.com>
Date:   Mon Apr 25 15:38:02 2016 -0700

    Remove Eia608TrackRenderer
    
    Functionality is moved into Eia608Parser, so that Eia608Parser
    can be used with TextTrackRenderer, similar to all the other
    text/subtitle formats. Modified some of the other
    text/subtitle-related classes to support the new behaviour.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120755145

commit 6c4523365354087419465ce0f1c29714ec387571
Author: olly <olly@google.com>
Date:   Mon Apr 25 10:51:12 2016 -0700

    Attempt to make drainOutputBuffer clearer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120722975

commit 81383f802251251ba62ce5d0a51d2e535b7647ff
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 25 10:02:38 2016 -0700

    Add full selector support to CSS in WebVTT
    
    This CL allows near-complete support to CSS selectors (I say near because not every
    CSS rule applies to WebVTT).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120717498

commit 5cbf75b619f3b3ab19ca30af383b10fdb98fd39e
Author: olly <olly@google.com>
Date:   Mon Apr 25 09:25:21 2016 -0700

    Make AudioTrack.handleBuffer more sane.
    
    Now uses buffer position + limit in both new and legacy modes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120713837

commit d1eb43ad62b24b6a78227480f9faf020111d9bc6
Author: eguven <eguven@google.com>
Date:   Mon Apr 25 05:53:11 2016 -0700

    V2 Extension fixes
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120699171

commit da5e4dbe921cdf1b9941189bc69027d02ab51b62
Author: olly <olly@google.com>
Date:   Mon Apr 25 04:18:23 2016 -0700

    Fix wrong-way-round-sign. Oops!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120694784

commit 50f5616266bf36a67af9a60638b0aa1546a0f643
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 25 03:52:08 2016 -0700

    Fix documentation and logging in LongArray.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120693278

commit c60470339befb06bbb289db742bbc9143cda04c3
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 25 03:26:02 2016 -0700

    Remove unused parameter from ChunkSource.continueBuffering.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120691990

commit ab615682b5c61617e19c85a6f71073cfd230b222
Author: olly <olly@google.com>
Date:   Mon Apr 25 02:53:38 2016 -0700

    Fix green screen problem when using VpxRenderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120689946

commit 854acaa1ac8a0a42d318fed3e724b4fcec9057b8
Author: olly <olly@google.com>
Date:   Fri Apr 22 09:15:55 2016 -0700

    Set decode only flag in DefaultTrackOutput.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120553402

commit 9a893e3003a0e1336d9ffc051a8524a11d79a5b4
Author: olly <olly@google.com>
Date:   Fri Apr 22 07:41:13 2016 -0700

    Fix thread-safety issue using DefaultTrackOutput.
    
    Reading the format and/or a sample needs to be done as a
    single operation. Else you can have a situation where the
    queue is initially empty, and this happens:
    
    1) Read downstream format X
    2) Read downstream format X (unchanged)
    3) Write format Y
    4) Write first sample
    5) Read first sample
    
    The first sample then appears to be format X rather than Y.
    
    Note that readData in the SampleSource implementations always
    looks roughly the same. readReset is identical in all cases.
    isReady is identical in all cases now I've fixed them to be
    that way. So it should be pretty easy to get DefaultTrackOutput
    to implement TrackStream directly, at which point a whole load
    of duplication will disappear.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120546377

commit 90b70818243bdd1a7758e50f08fcf445c6095d91
Author: olly <olly@google.com>
Date:   Fri Apr 22 03:06:30 2016 -0700

    Propagate resets at the source rather than track level.
    
    - Code is simpler. We only ever reset all tracks.
    - Allows the standalone media clock to be updated properly. This
      allows simpler recovery for live streams in ExtractorSampleSource.
    - Fixes #1285 and paves the way for a fix for #758.
    
    Issue: #1285
    Issue: #758
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120530682

commit 2b13165738df01ff21bb323966def95d7f4e0001
Author: olly <olly@google.com>
Date:   Fri Apr 22 03:02:05 2016 -0700

    Optimize HLS seeking.
    
    I think the concept of a sparse track might need formalizing
    in Format at some point. We should probably do a similar thing
    with sparse tracks in ExtractorSampleSource as well. WDYT?
    
    Issue: #551
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120530195

commit b1de997388a064d20200806523614f690dfe00b2
Author: olly <olly@google.com>
Date:   Thu Apr 21 08:50:24 2016 -0700

    Remove incorrect AudioTrack timestamp adjustment.
    
    This is just wrong. I think there used to be an off-by-one
    timestamp error in YouTube's fmp4 streams, and this code
    was initially designed exclusively to play such streams. I
    don't see this issue any more though, if it was ever there!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120447694

commit e390bdf98ce66a684d4ce656095bdbe4b43f553a
Author: olly <olly@google.com>
Date:   Thu Apr 21 04:09:55 2016 -0700

    Align Chunk/HLS sample sources.
    
    Having moved HLS to use single sample queues per track, these
    classes have become relatively similar. This CL aligns the two
    to make this more obvious. It remains unclear whether it'll
    ever be sensible to merge them; there are still some niggly
    complications for HLS.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120429618

commit ae8f95f64d7aa49b5a29388db61f11d01863907b
Author: []inger <[]inger@google.com>
Date:   Thu Apr 21 03:02:52 2016 -0700

    Added Ogg/Vorbis samples to internal samples for main and experimental.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120425278

commit c11fda04e500166a5da9d5a0a338fffcb2400f4b
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Apr 20 07:59:34 2016 -0700

    Add CSS Specificity score system to WebvttCssStyle
    
    This CL provides the necessary infrastructure to add styling by class. This was separated
    into two different CLs to ease reviewing.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120336976

commit 0fc53f6e370f44e3e7bb34e3a793bc92c20cdd73
Author: olly <olly@google.com>
Date:   Wed Apr 20 07:44:47 2016 -0700

    Fix Flac test + bring v2 fully in sync (I think!).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120335929

commit 6635dd0ef7fd461b5410b1b894bfcfd6e1db67a4
Author: olly <olly@google.com>
Date:   Wed Apr 20 07:19:11 2016 -0700

    Fix infinite loop in AdtsExtractor sniffing malformed or non-ADTS streams.
    
    Here is a WAV that exhibits this issue:
    https://storage.googleapis.com/courtside-public/dcower/reaper_16bit_nonbwf.wav
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120334203

commit 157f5ff886225608801a8b70c93ae1b211a02f6d
Author: olly <olly@google.com>
Date:   Wed Apr 20 07:18:18 2016 -0700

    Workaround for issue #1443
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120334164

commit 8f2e56d59b0d1de098987aa393dbbdca43072e06
Author: olly <olly@google.com>
Date:   Wed Apr 20 07:17:33 2016 -0700

    Add support for a bext chunk *before* the fmt chunk in WAV files.
    
    This can occur in some Broadcast Wave Format (BWF) files, such as those
    produced by the Zoom H2n. See the included sample for an example.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120334117

commit b3f732cd05037d0e3827e31ee0ddbb038f1846ff
Author: olly <olly@google.com>
Date:   Wed Apr 20 07:16:12 2016 -0700

    Fix parsing of QT sample desc version 2.
    
    Also support "lpcm" and "sowt" sample descriptors.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120334017

commit 2a37b02ee2642c1e74084962d96d6ebc4a3b98e1
Author: olly <olly@google.com>
Date:   Wed Apr 20 06:59:04 2016 -0700

    Merge updates from GitHub.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120332794

commit 7638bea016cf1b7743128f42b96c7c8f00d5e292
Author: olly <olly@google.com>
Date:   Wed Apr 20 06:57:41 2016 -0700

    Bring V2 ogg extractor up to date.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120332721

commit 6f32636f406d7b4c5ce122c3b9969dce2ac81e43
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Apr 20 06:43:06 2016 -0700

    Use long instead of int for MP3 sample counter.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120331805

commit 2e0518f47bf745db327495d34443bd6e1c0be156
Author: olly <olly@google.com>
Date:   Wed Apr 20 05:09:37 2016 -0700

    Apply Android studio code analysis suggestions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120326293

commit 48bc98f1ed243798128f9ae3c08de548d27d2706
Author: olly <olly@google.com>
Date:   Wed Apr 20 04:48:39 2016 -0700

    Naming cleanup.
    
    - RollingSampleBuffer -> DefaultTrackOutput
    - TsChunk -> HlsMediaChunk
    - Established hls.playlist package for HLS playlist things
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120325049

commit 69b431b8c2f0ba00d042b9d205e149eb294dfe79
Author: olly <olly@google.com>
Date:   Tue Apr 19 10:07:26 2016 -0700

    Stop using SparseArray where a regular array will do.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120240634

commit b5bdbedfd5027aade9d2265744401d2f3f5870de
Author: olly <olly@google.com>
Date:   Tue Apr 19 10:04:53 2016 -0700

    Move HLS to use a single RollingSampleBuffer per track.
    
    Notes:
    - RollingSampleBuffer will be renamed DefaultTrackOutput in a
      following CL, and variable naming will be sanitized.
    - TsChunk will also be renamed to HlsMediaChunk, since it can
      be used for non-TS containers (e.g. MP3).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120240243

commit a7d785947884af3addb8602b8d5aea79009595e0
Author: eguven <eguven@google.com>
Date:   Tue Apr 19 07:10:22 2016 -0700

    Shared super class for LibflacAudioTrackRenderer and LibopusAudioTrackRenderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120225655

commit a760c9bfd94c5e74a4c548b35ced86a0621e63bc
Author: olly <olly@google.com>
Date:   Tue Apr 19 01:55:12 2016 -0700

    Use RollingSampleBuffer directly for non-HLS.
    
    This also fixes the largest queued timestamp to be the
    correct value if upstream samples are discarded.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120207054

commit 5ce210e374ab4c0a078c9b3607c4d2b222e8043a
Author: olly <olly@google.com>
Date:   Tue Apr 19 01:48:18 2016 -0700

    Propagate format information through RollingSampleBuffer.
    
    At this point the only reason preventing the chunk package
    from using RollingSampleBuffer directly, rather than
    DefaultTrackOutput, is that the latter maintains the largest
    parsed timestamp. This will be pushed inside the former in
    the next CL. Following that, splicing logic will also be
    pushed inside of RollingSampleBuffer, and HLS will be moved
    over to using a single RollingSampleBuffer per track, with
    the splicing done inline.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120206658

commit febf86c54e93f72ee7f339d66e7b7e9375907a52
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 18 08:30:51 2016 -0700

    Clean up demo app source building.
    
    - Rename preparePlayer to initializePlayer, to reflect the fact that the
    preparing state is gone. Replace playerNeedsPrepare with playerNeedsSource.
    - playWhenReady is now always true in calls to initializePlayer.
    - Handle the intent just before setting the source.
    - Use URIs consistently instead of Strings to avoid reparsing.
    - onShown becomes initializePlayer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120125576

commit 4e0638ce06310f16a8ae1f0cfd6ebccd43dc113e
Author: olly <olly@google.com>
Date:   Mon Apr 18 08:03:52 2016 -0700

    Remove unnecessary extension of DefaultTrackOutput.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120123489

commit 4451be929d6ebe000e883c4558369f042412d98f
Author: olly <olly@google.com>
Date:   Mon Apr 18 08:02:16 2016 -0700

    Move sample offset application to RollingSampleBuffer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120123335

commit ffb4aeaa8cd31066e832b6109cdb3043a3fa51e4
Author: olly <olly@google.com>
Date:   Mon Apr 18 08:00:20 2016 -0700

    Remove pointless constructor argument.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120123223

commit 17d7a0cb4bb1396541eca2bfbc3bc14a6873a496
Author: olly <olly@google.com>
Date:   Mon Apr 18 07:58:28 2016 -0700

    Make RollingSampleBuffer implement TrackOutput
    
    This is the first step toward merging of RollingSampleBuffer
    and DefaultTrackOutput, which is a precursor to removing some
    indirection for DASH/SS playbacks, and to moving HLS playbacks
    to use a single output buffer per track (with inline splicing).
    
    Where this is heading is that sample format changes will
    eventually be attached to samples in the rolling buffer. This
    will eliminate the need for piping sample formats around the
    edges of the rolling buffer (e.g. via redirection in
    ChunkExtractorWrapper and BaseMediaChunk.getSampleFormat).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120123093

commit 4161dc8d62dc1bb0e3ed5af41a36c53f5c12b32b
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 18 07:06:43 2016 -0700

    Infer TYPE_SS for .isml.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120119973

commit 5e93c0b6e425706cf16cfdf7c55e6d6f60ecf0a4
Author: olly <olly@google.com>
Date:   Mon Apr 18 05:53:54 2016 -0700

    Fix spurious comment.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120115490

commit d7ac074088a25cbb8f8733e8b16ae9942887b011
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 18 03:14:47 2016 -0700

    Fix Android NDK links.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120107182

commit fa04c713f6998fff1d1db0abee9a21b2dae5ac3d
Author: olly <olly@google.com>
Date:   Mon Apr 18 03:11:00 2016 -0700

    Discard all sample data for disabled tracks.
    
    There's a more nuanced version of this where we actually
    disable on the loading side, but it's quite tricky to get
    the threading just right. I have a change that I'll
    probably manage to clean up and send out at some point.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120106967

commit 1e4a3c162ec56dd0f71499fba9d089b5402a4d4b
Author: olly <olly@google.com>
Date:   Mon Apr 18 02:42:10 2016 -0700

    Remove setVideoScalingMode call that doesn't do anything.
    
    Oops, forgot this from my previous CL!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=120104992

commit ed188d1bc872cd1860a309e4131876b0a7fa9a87
Author: olly <olly@google.com>
Date:   Fri Apr 15 07:08:30 2016 -0700

    Apply video scaling mode correctly.
    
    Issue: #1428
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119952373

commit c99250d9c51e8f258e78d0097be1a5cbbb39286a
Author: olly <olly@google.com>
Date:   Fri Apr 15 04:43:26 2016 -0700

    Constant simplification.
    
    - Use same constant for unknown/unset microsecond times/durations.
    - Change constant values to be nowhere near the "normal" range.
    - Misc cleanup.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119944019

commit 28e926602fe4e92abf0a605dc1b070a8ba8e30cb
Author: olly <olly@google.com>
Date:   Thu Apr 14 08:32:26 2016 -0700

    Remove layer of indirection when piping sample data.
    
    For DASH + SS, sample data is currently plumbed through:
    
    Extractor
    ->ChunkExtractorWrapper
    ->ContainerMediaChunk
    ->DefaultTrackOutput
    ->RollingSampleNBuffer
    
    This change bypasses the ContainerMediaChunk layer. It
    should be possible to completely delete DefaultTrackOutput
    in the future, but such a change may well be tied to
    changes in HLS format splicing + how we buffer (or don't
    buffer) disabled tracks.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119853857

commit 628a209b9ba6cacc4f3ee4f52f6cf16ea0cfac75
Author: olly <olly@google.com>
Date:   Thu Apr 14 05:50:54 2016 -0700

    Add Eclipse projects for extension tests.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119843448

commit 7ad34c5c5c3959c228bec9bcbe9fa43f43cfd3b1
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jun 7 05:41:05 2016 +0100

    Fix hashCode method for TrackSelection
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119842923

commit d9dcc58dcac18b8d2558592b9913095cf09c28de
Author: olly <olly@google.com>
Date:   Thu Apr 14 05:39:50 2016 -0700

    Simplify source building.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119842861

commit e4ee19513ced62165e47211a6d558e3e8d951550
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Apr 14 04:20:22 2016 -0700

    Remove ExoPlayer.STATE_PREPARING.
    
    prepare(SampleSource) is renamed to setSource(SampleSource). The player
    immediately transitions to STATE_BUFFERING when the source is set, at which
    point doSomeWork is called.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119838825

commit 2b0f2ec3bca58796bc4a698aabeb14ff66d56164
Author: eguven <eguven@google.com>
Date:   Wed Apr 13 10:20:57 2016 -0700

    Add opus and flac tests to MOE
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119759105

commit 3ae1c615d96144a5e7f462b39248f9917ed700a0
Author: olly <olly@google.com>
Date:   Wed Apr 13 10:12:02 2016 -0700

    LoadControl - Start cleaning up usage somewhat.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119758106

commit fec7798005d54297ba902ebb809b1229aa5eeed8
Author: olly <olly@google.com>
Date:   Wed Apr 13 09:16:45 2016 -0700

    Remove dead code + simplify commitSample.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119752741

commit ba7b1b7bf17bb7891f29529f3278292ced307258
Author: eguven <eguven@google.com>
Date:   Wed Apr 13 08:21:52 2016 -0700

    Copy vp9 extension v1 -> v2
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119748182

commit 51df2dce46473ebd56f79225c3bb079e5bced7c5
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Apr 13 08:19:38 2016 -0700

    Add support for voice selection in WebVTT CSS
    
    Allow styling <v Someone>Hello</v> with ::cue(v[voice="Someone"]) { ... }.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119748009

commit e594eccd4d290a862e2f45e85677804d3ce39095
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Apr 13 07:13:38 2016 -0700

    Merge SampleSourceTrackRenderer into TrackRenderer.
    
    TrackRenderer and SampleSourceTrackRenderer both now use a TrackStream
    so they can be merged.
    
    (This may also be useful for adding playlist support, in case TrackStreams need
    to be replaced during playback.)
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119743228

commit c2beffc6c56b12cc8fe7b1e2aee06aa623b7afd9
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Apr 13 04:50:42 2016 -0700

    WebVTT CSS Styling -- Support for element selectors
    
    This CL allows style blocks to reference elements. For example: we could style
    a cue with text "Sometimes <b>bold</b> is not enough" with the style block
    ::cue(b) { ... }.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119734779

commit f963c626af7d785c45d755d4646e25b90c32bde6
Author: olly <olly@google.com>
Date:   Wed Apr 13 04:23:41 2016 -0700

    Remove seeking to live edge.
    
    This is in preparation for the player knowing about the live
    window, at which point only correct playback positions will be
    passed into ChunkSource implementations. Note that both
    implementations bound the chunk index within range in case of,
    for example, off-by-one errors caused by very recent manifest
    updates.
    
    This will temporarily cause live playbacks to always start at
    the beginning of the current live window (we'll be trying to
    play from t=0, which will be adjusted to the start of the live
    window as a result of the bounding).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119733559

commit 730e4ac953b4628de0df03845d0b78e269471ae6
Author: olly <olly@google.com>
Date:   Wed Apr 13 04:16:49 2016 -0700

    Remove workaround for FrameworkSampleSource.
    
    FrameworkSampleSource will still be useful for audio, where
    sample interleaving isn't an issue. We could optionally add
    a "don't wait for first frame" boolean to the video renderer
    if we *really* need to keep some form of this workaround in
    place, but I'd rather not do so for now.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119733224

commit 35e0dd84017d0a50da24fa727b5f70e8d583a0e2
Author: olly <olly@google.com>
Date:   Wed Apr 13 04:11:47 2016 -0700

    Use a single set of track type constants.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119732992

commit 72025d7ea5d274565fb6f7cba5101579f11a8a14
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Apr 13 03:38:37 2016 -0700

    Add cd command to FLAC readme. Set executable bit in opus.
    
    Also add jni/flac directory to .gitignore.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119730955

commit 956cbe4a0997c136061e99546b0aa06f1392a64e
Author: olly <olly@google.com>
Date:   Tue Apr 12 10:57:27 2016 -0700

    Delete Clock/FakeClock from V2 until we need them.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119655941

commit 192f566a1bcbaae98bf0a4584a203c2463ba7137
Author: eguven <eguven@google.com>
Date:   Tue Apr 12 08:55:44 2016 -0700

    Copy opus extension v1->v2
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119643009

commit 767c7ab1692d13cafac7251bed44ccbd0d411c0f
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Apr 12 07:02:45 2016 -0700

    Fixed id referencing in WebVTT CSS styling
    
    In CSS, ids are references using #. The absence of # references elements.
    
    NOTE: If the id of a cue was "1", we support its reference with ::cue(#1).
    In CSS, however, this is not valid, and the number should be escaped with
    \3 as in ::cue(\31). We still do not use number escaping (and I doubt
    whether we should at some point).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119634708

commit def59ebb2633f990979e02b327cc84a6cead8d43
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Apr 12 02:29:56 2016 -0700

    Replaced full reference with import
    
    This CL removes a warning by adding the import, and removes a qualified reference in the process.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119618343

commit efe76def895934e08f27ca31a87c803b8e7cdccb
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Apr 11 10:54:31 2016 -0700

    Add support to CSS in WebVTT files
    
    This CL adds the support of CSS styling in Cues through id and "universal" cue selector.
    The more sophisticated selectors will be left for later, because they requier a bit more
    complex logic. Also narrowed a little bit the responsibilities of the WebvttCueParser to
    move some to the WebvttParser.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119547731

commit 087cf9546ff76f69efd0f900c08281d59515787e
Author: eguven <eguven@google.com>
Date:   Mon Apr 11 10:27:27 2016 -0700

    Copy main/extensions/flac -> experimental/extensions/flac
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119544516

commit eb877f0cb7013ecd646899f84b2055ede971d853
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 11 08:21:23 2016 -0700

    Handle udta as a leaf atom.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119532634

commit 7170ff380c4570c9a3fc6f65e522b2ae182f28e6
Author: olly <olly@google.com>
Date:   Mon Apr 11 04:18:20 2016 -0700

    Remove V1 DASH multi-period + seeking-in-window from V2.
    
    Both of these features are being promoted to first class
    citizens in V2 (multi-period support will be handled via
    playlists, seeking-in-window will be handled by exposing
    the window/timeline from the player and via the normal
    seek API). For now, it's much easier to continue the
    refactoring process with the features removed.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119518675

commit 1c0a120aebb0bbf6f9ed6bf9ce0d19c4b3b2beb9
Author: cblay <cblay@google.com>
Date:   Fri Apr 8 11:39:41 2016 -0700

    Give the SimpleCache.initialize() Thread a better name.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119393264

commit ebc5f0e7beeecdcc424c806b044029e6050ee5d9
Author: olly <olly@google.com>
Date:   Wed Apr 6 15:52:39 2016 -0700

    Update README/RELEASENOTES from main.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119211619

commit e5d028c425578b2cb37fb0571b2b57f5134109f5
Author: olly <olly@google.com>
Date:   Wed Apr 6 11:21:19 2016 -0700

    Merge https://github.com/google/ExoPlayer/pull/1397.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119182077

commit 92ac270ce57b16bdbc1bec8a7fc8fef4b4c0b147
Author: olly <olly@google.com>
Date:   Wed Apr 6 11:12:28 2016 -0700

    Return C constant rather than -1, as documented.
    
    Note that the DataSourceInputStream read methods
    are implementing a different interface (InputStream,
    not DataSource), which is why -1 is still used in
    that case.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119180851

commit 05ef643e28e4b0a9d5acede9775803397d0786c4
Author: eguven <eguven@google.com>
Date:   Wed Apr 6 03:32:27 2016 -0700

    Copy from V1: Extractor.release() method releases all kept resources.
    
    This method is needed by FlacExtractor to release native resources.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119143922

commit 7c35e38b4e284b5f5f5b094500a7da02f019a671
Author: olly <olly@google.com>
Date:   Tue Apr 5 07:59:25 2016 -0700

    Fix a few issues with SmoothStreaming in V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119049397

commit 3c1239826c43afb85ee4155a7b8c809b34df8612
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Apr 5 00:00:51 2016 -0700

    Rename webm.WebmExtractor to mkv.MatroskaExtractor.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=119020538

commit b977265f59bd4f4100fb9af28653d7c4b1860d1e
Author: olly <olly@google.com>
Date:   Mon Apr 4 10:36:00 2016 -0700

    Remove dead code.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118954433

commit 9282710f046ccd585dd5c3bb42e11236f733ac67
Author: olly <olly@google.com>
Date:   Mon Apr 4 03:51:11 2016 -0700

    Decouple next chunk evaluation and queue trimming.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118925372

commit 1581b915d3dcfbd037c45b629982a406a6ef5234
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Apr 4 03:28:57 2016 -0700

    Fix documentation super-nit.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118924198

commit e9fcbafcb4d2fc668cb75484d6d2ecdd108e8f3c
Author: olly <olly@google.com>
Date:   Mon Apr 4 02:47:14 2016 -0700

    Make OkHttp extension work in Eclipse/[].
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118921673

commit 3208e2067335c7de94eed2d69ca2da841c62bb05
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Apr 1 07:33:59 2016 -0700

    Add ParsableNalUnitBitArray which unescapes while reading.
    
    This replaces calls to unescape except for SEI unescaping.
    
    Use the new ParsableNalUnitBitArray for reading the slice header in HLS
    access unit detection and slice_type reading.
    
    Unescape the SPS before parsing in FLV and MP4. Before this change it was
    parsed in its original (escaped) form.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118777869

commit e4d815d164297b86152d393ad2e76577b2ff7a40
Author: olly <olly@google.com>
Date:   Fri Apr 1 07:01:33 2016 -0700

    Add OkHttp extension to V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118775995

commit b041b72bae6c8051d7752ca43aacedd58bba2ac8
Author: olly <olly@google.com>
Date:   Fri Apr 1 06:53:13 2016 -0700

    Yet more simplifications.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118775612

commit 9c2a971109a417384582d87b7fc17a852a5cbb60
Author: olly <olly@google.com>
Date:   Fri Apr 1 06:47:45 2016 -0700

    Simple method re-ordering of SampleSource implementations.
    
    The only change that's not re-ordering is to add a Util method
    for usToMs to replace the ones in the HLS and Chunk sources.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118775359

commit 292b2402e610973dcc95b32850183678e17e0403
Author: olly <olly@google.com>
Date:   Fri Apr 1 06:44:15 2016 -0700

    More SampleSource simplification.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118775144

commit a4d17282f12285a6a0c41f3193dddd5c21ac608e
Author: olly <olly@google.com>
Date:   Fri Apr 1 06:38:35 2016 -0700

    Have loader implement retry logic.
    
    This was made possible by the simplification of how DASH/SS
    chunk replacement works. It is also a step towards eliminating
    continueBuffering(), since continueBuffering() calls are no
    longer relied upon to resume a backed off load.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118774865

commit d83b89cfd0bba53d7b5fa9f3c9d9f348f822497f
Author: olly <olly@google.com>
Date:   Fri Apr 1 06:34:29 2016 -0700

    Minor documentation tweak.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118774671

commit b0c8a6132db6ff0a5eb94586c159bf5db69aed66
Author: olly <olly@google.com>
Date:   Thu Mar 31 14:58:32 2016 -0700

    Add DataSourceFactory + implementation.
    
    Step 6 of the refactor involves moving the logic that's
    currently in the SourceBuilder classes in the demo app
    into new SampleSource classes in the library. These classes
    will construct video/audio/text pipelines on-demand (i.e.
    when tracks are enabled) rather than constructing them all
    up front as is currently the case in the SourceBuilder
    classes. Hence we need a way to instantiate DataSource
    instances (i.e. a DataSourceFactory ;)).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118722180

commit 5f37e3c8fb71ff6f4ef8d7f00fe946c2e7f29a8d
Author: olly <olly@google.com>
Date:   Wed Mar 30 09:17:21 2016 -0700

    Ensure we re-enter the correct state after seeking.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118579021

commit 3187bd082984664835884c3878baa7f9c9919eaa
Author: olly <olly@google.com>
Date:   Wed Mar 30 08:07:36 2016 -0700

    Align DASH/SS/HLS chunk replacement mechanisms.
    
    DASH + SS previously had a ridiculously complicated chunk
    replacement mechanism in resumeFromBackOff. It also didn't
    allow replacement of the first media chunk in the queue,
    even though it's possible to remove it in the case that no
    corresponding samples have been consumed.
    
    This CL moves DASH + SS to the simpler model used in the
    HLS implementation, where the chunk source has a single
    opportunity to cancel (and hence later replace) the chunk
    when the load error occurs. With this change comes the
    ability to replace the first media chunk in the queue in
    all cases where it's possible to do so.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118573418

commit d8e6b096c4b9eeaba2e49d8f28a5bf72bd8e6c0f
Author: olly <olly@google.com>
Date:   Wed Mar 30 03:15:51 2016 -0700

    Refine fix for limbo state.
    
    This fixes some nuances with the initial solution. Mainly,
    that the TrackStreams returned by selectTrack could not be
    used safely until after endTrackSelection was invoked. It
    also reduces the need for member variables to track state
    between the track selection methods.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118556651

commit 305d8aa0493425d9c1627f54754e21a588c9817e
Author: olly <olly@google.com>
Date:   Wed Mar 30 03:04:44 2016 -0700

    Improve ExoCacheTest.
    
    - Use FakeDataSource as the upstream source.
    - Actually validate that caching is happening (i.e. reads happen
      on the upstream source only if the data hasn't been read through
      the CacheDataSource already).
    - Move FakeClock to sit alongside the other Fake classes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118555903

commit 6cc507aac00d5561a71526420b016368658beb63
Author: olly <olly@google.com>
Date:   Tue Mar 29 09:34:37 2016 -0700

    Make all DataSource implementations implement getUri.
    
    In V2 we'll at some point start using DataSource factories
    for creating DataSource instances. If there are two DataSource
    interfaces this gets unnecessarily awkward.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118470751

commit d869a8d2fad0f1f427c56a0a1372d08d362d2a65
Author: olly <olly@google.com>
Date:   Tue Mar 29 06:30:52 2016 -0700

    Fix networked WAV extraction (where # bytes read < # bytes requested).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118457489

commit ce47d7be38efaf493a7360e2c9be33cc226bf8c7
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 29 05:50:58 2016 -0700

    Fix TextTrackRenderer.isEnded().
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118455206

commit ce9b309aa150c8f9768a18c7a7fa26b064953e2d
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Mar 24 10:18:30 2016 -0700

    Rename SampleHolder to DecoderInputBuffer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118040127

commit 98fb6d150db2b546c9cce7f9bb2bdbcd985878f4
Author: olly <olly@google.com>
Date:   Thu Mar 24 09:39:05 2016 -0700

    Tighten when various SampleSource methods can be called.
    
    This removes the need for each SampleSource implementation to
    implement 3x "if(condition) {noop}" tests (ChunkSampleSource
    and SingleSampleSource were missing some of these checks).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118036233

commit 050b0b66da1ab9da5b01ac332451e88d06eba499
Author: olly <olly@google.com>
Date:   Thu Mar 24 08:54:24 2016 -0700

    Fix starting playback from t!=0
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118032818

commit f09b86a1bb20bd6054abd38ad16972897e614952
Author: olly <olly@google.com>
Date:   Thu Mar 24 07:16:49 2016 -0700

    Fix SampleSource limbo state - Part II
    
    This change optimizes startup and track selection for HLS. Changes
    in HlsChunkSource avoid unnecessary re-requests for media playlists.
    Changes in HlsSampleSource optimize exit from the limbo state (i.e.
    when endTrackSelection is first called).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118026962

commit b3ce415e880fc9502f1334c1451a68cef0efb703
Author: olly <olly@google.com>
Date:   Thu Mar 24 06:30:11 2016 -0700

    Fix SampleSource limbo state by introducing explicit "selecting tracks" state.
    
    1. SampleSource now has an explicit track selection state. This state is entered
       after the source is prepared, and also by calling startTrackSelection.
    2. endTrackSelection commits selection changes, and is responsible for doing the
       right thing w.r.t starting/stopping/restarting load operations.
    3. All sources now start or restart a load in the case of a new track selection.
       This fixes a problem where a source could be advanced by repeatedly disabling
       and re-enabling whilst paused. Some sources didn't restart a load in this case,
       since the position was unchanged, however the downstream renderer would then
       consume media up to the first keyframe in order to render something. Hence
       each disable/re-enable would advance by a keyframe.
    4. This change will enable a subsequent change where we'll discard media for
       non-selected tracks earlier than we do currently (i.e. we'll hook the extractor
       to a dummy track output, so the samples will never be written to a rolling
       buffer). This will enable a further subsequent change where buffer contributions
       are per-renderer rather than per-source.
    
    Issue: #1041
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118024436

commit 24b2c09287276945ded18de6b0a8bce27eca4bf8
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Mar 24 06:27:04 2016 -0700

    Use longs rather than ints for HLS byterange.
    
    Issue: #1387
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118024270

commit 454b3e896c37336f1a8d58426f07587abe2dc8ce
Author: olly <olly@google.com>
Date:   Thu Mar 24 06:01:19 2016 -0700

    Make demo app ready for multi-window environment coming with N.
    
    * Do not stop playback onPause but onStop in N and greater.
    * Fix back navigation after app has been put to background.
    * Make VIEW intent work when PlaybackActitivty is already launched.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118022964

commit d5c80a31e8416a89315a18acedc64ecf0facebc2
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Mar 24 05:38:00 2016 -0700

    Update list of ExoPlayer extractors in FrameworkSampleSource.java.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118021856

commit 1e78ee82cee2fc8e0eb4049bf1852c49a2d976f0
Author: olly <olly@google.com>
Date:   Thu Mar 24 05:32:10 2016 -0700

    WAV extractor fixes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118021575

commit 0ee45550c98fb05bbe47e2df89a5e2dda93571c4
Author: olly <olly@google.com>
Date:   Thu Mar 24 05:30:47 2016 -0700

    Use longs rather than ints for HLS byterange.
    
    Issue #1387
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118021498

commit b9d2224550455ecc8caf89a081c4762e56c6ad54
Author: olly <olly@google.com>
Date:   Thu Mar 24 05:29:51 2016 -0700

    Treat streams claiming to be AAC Main as AAC LC.
    
    Issue: #1383
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=118021452

commit 8571c81076f9c9a5cdccf42c4bff6ebd6108eb72
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Mar 23 12:42:29 2016 -0700

    Move resetting the peek position to ExtractorSampleSource.
    
    This fixes an issue where the PsExtractor would start reading
    unsynchronized if sniff was called.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117958077

commit 1175f50fb8370873fcbea113495ec9aea999d567
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Mar 23 01:36:39 2016 -0700

    Partially merge InputBuffer and SampleHolder.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117908518

commit 0d1ae1dd67f0efc849fc23cee732e5af1d5d79cd
Author: ccwu <ccwu@google.com>
Date:   Tue Mar 22 14:40:16 2016 -0700

    Change the signature of onQueuedInputBuffer
    
    Expose the input buffer for Exoplayer V2. This allows subclasses to
    parse the input buffer before it is decoded. One particular usage
    of this is to allow parsing user data stored in the tracks
    (e.g. SEI in H264), and incorporate the user data into the rendering.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117865971

commit 8353463bf5befae815e5c584fdf0916d436ee5f2
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 22 05:17:22 2016 -0700

    Detect sample boundaries in H.264 TSs without AUDs.
    
    Issue: #1263
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117813106

commit fc716b5711a16b96bd10955f942ea5159093b96b
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Mar 22 04:20:56 2016 -0700

    Signal end of stream in SampleHolder flags.
    
    Also use MediaCodec buffer flag constants instead of those on MediaExtractor.
    
    This is in preparation for merging InputBuffer and SampleHolder.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117810136

commit 733f2ccd1cffa3f51c48dcfb47ad1aae309bae18
Author: olly <olly@google.com>
Date:   Tue Mar 22 04:07:23 2016 -0700

    Add WavExtractor for extracting samples from WAV files.
    
    This version only supports 16-bit uncompressed PCM. A follow-up CL will
    add support for other sample bit depths.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117809475

commit a49c8dc86d48baeb5214181e7a82d8b991a03630
Author: olly <olly@google.com>
Date:   Tue Mar 22 04:01:04 2016 -0700

    Added loadErrorNotification to SingleSampleSource.
    
    Also hooked up DemoPlayer to ExtractorSampleSource events.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117809051

commit 27ab1a2e65fc2485392a84975cb11e290ced2908
Author: olly <olly@google.com>
Date:   Tue Mar 22 04:00:20 2016 -0700

    Merge updates from GitHub.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117808998

commit 5b06bfd5a8b04df836e681706f50dd132a917e5b
Author: olly <olly@google.com>
Date:   Tue Mar 22 03:59:35 2016 -0700

    Fixed TS+H262 playback when no pts is available
    
    If this situation is encountered, we assume that the encoder has a good reason to
    do this and use the last pts + frameDuration as new pts.
    
    Issue: #1295
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117808961

commit 1ca5378cda8f888003d2e45809111efe14d8c3c8
Author: olly <olly@google.com>
Date:   Tue Mar 22 03:53:00 2016 -0700

    Track input/output cleanup.
    
    - Remove special DefaultTrackOutput.sampleData method, and have
      SingleSampleMediaChunk use the regular one instead.
    - Make DummyTrackOutput behave correctly is allowEndOfInput is
      false.
    - Simplify progress tracking in ExtractorSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117808659

commit 60ba7823e0e28d3574d82c04d50a921e53763908
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Mar 21 09:45:08 2016 -0700

    Add Css styles in the WebVTT parser
    
    This is the first version and is still not linked to the WebVTT parser nor
    does it support all the intended features, but it was left this way to
    ease the review a little bit.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117722492

commit e7a27245e7d8638778b8f5819e54d231d6a16f88
Author: olly <olly@google.com>
Date:   Mon Mar 21 08:39:23 2016 -0700

    Use new-style for loops specifically for arrays.
    
    As per: http://developer.android.com/training/articles/perf-tips.html
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117716743

commit 2469f631ae6fe21df3794f676767023e5161f2b7
Author: olly <olly@google.com>
Date:   Mon Mar 21 04:13:55 2016 -0700

    Restore SampleSource.disable API
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117701759

commit 14c5114049569177d6ff0f1377e9b80d9bfd1844
Author: cdrolle <cdrolle@google.com>
Date:   Fri Mar 18 10:27:52 2016 -0700

    Fixed issue in which unknown sample mime types would cause MediaPresentationDescription to throw an NPE.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117560114

commit d870f378784583f3d995fc38f92b3258fc9abfa1
Author: olly <olly@google.com>
Date:   Fri Mar 18 10:09:09 2016 -0700

    Always use same Format objects during DASH live playbacks.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117558066

commit 4a38b2cade27af4a1e942fa17f598442a478ed69
Author: olly <olly@google.com>
Date:   Fri Mar 18 10:08:09 2016 -0700

    Fully reset state when displaying track selections.
    
    When showing a track selection for a renderer, the override
    variable could end up being retained from some previous call
    to show a track selection for some other renderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117557994

commit 03ed811c7caa8413e225c8a3f8f45873b78afeb3
Author: olly <olly@google.com>
Date:   Fri Mar 18 07:20:44 2016 -0700

    Add missing eclipse files to experimental.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117544932

commit 0dc0d703979d204433d3be63479c39c51451d56d
Author: olly <olly@google.com>
Date:   Fri Mar 18 07:00:31 2016 -0700

    Use SimpleDecoder for subtitles.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117543706

commit ed4f83979e38a3f624f5ac08dc6ed460250e1920
Author: olly <olly@google.com>
Date:   Thu Mar 17 05:48:54 2016 -0700

    Add extensions package to V2.
    
    - Not doing any renaming for now. It'll be easier to wait
      until after the extensions themselves are brought across.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117438338

commit 3c5a509af8c65ec06da6dcb700df6444a9ed274a
Author: olly <olly@google.com>
Date:   Wed Mar 16 07:03:19 2016 -0700

    Remove unused method.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117338990

commit 1eff6cf210940893afdf28d30251626f1dbc1552
Author: olly <olly@google.com>
Date:   Wed Mar 16 07:01:16 2016 -0700

    Bring back multi-audio and VTT support for HLS.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117338865

commit 1d4305cb91d9e91269e55aeefe7fcd61d2be22ad
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Mar 16 06:59:50 2016 -0700

    Remove redundant modifiers in ExoPlayer.java.
    
    Based on
    
    http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3
    http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.5
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117338783

commit 16e1eaf4101f96ee4105124c9488b55bd7d19f94
Author: olly <olly@google.com>
Date:   Wed Mar 16 03:34:28 2016 -0700

    Removed VorbisUtilTests throws declarations to avoid warning
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117326253

commit a067bd0965ea78f63ff41bbe9c50987ba92be3a5
Author: olly <olly@google.com>
Date:   Tue Mar 15 10:29:36 2016 -0700

    Make OggVorbisExtractor seekable.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117252304

commit 4ffa3556dd60a7e423a97930484a308be60daac1
Author: olly <olly@google.com>
Date:   Tue Mar 15 10:27:27 2016 -0700

    Fix parsing of expandable class size.
    
    Issue #1351
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117252069

commit 378b76363d16a6cd313267671941670c1d5d5b1b
Author: olly <olly@google.com>
Date:   Tue Mar 15 10:25:04 2016 -0700

    Support non-square pixels in MKV.
    
    Issue: #1360
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117251799

commit 8b22333ee9785004b1b19f66bc4140859d6fca03
Author: olly <olly@google.com>
Date:   Tue Mar 15 10:23:39 2016 -0700

    Make default audio capabilities public + update extractor list.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117251647

commit 1ead229ac5098b256b5cfa1c5b672c8b437d3d1d
Author: olly <olly@google.com>
Date:   Tue Mar 15 08:41:22 2016 -0700

    Misc configuration updates for V2.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117242101

commit 9777945ce2ef84248738c24652aacb39a53b086a
Author: olly <olly@google.com>
Date:   Tue Mar 15 08:39:17 2016 -0700

    Fix the 0 sample count ctts entry bug
    
    When the ctts contained an entry that had a 0-valued entry count, the
    parser would miss every other entry, failing the final assertion.
    The standard does not seem to prevent the value 0 in the sample_count
    field, so we need to allow it.
    
    Issue: #1326
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117241945

commit f04e412a1c1b1f57a8921852ce6ed3d9fb08a263
Author: olly <olly@google.com>
Date:   Tue Mar 15 08:37:31 2016 -0700

    Improve unsupported edts handling
    
    When the edited sample sequence does not contain any sync sample Exoplayer does not provide
    support. This CL changes the ArrayIndexOutOfBoundsException for a more explicative
    ParserException.
    
    Issue: #1336
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117241805

commit f5b7ea676d214818b100ec0cba0dfcc27f360a46
Author: olly <olly@google.com>
Date:   Tue Mar 15 07:28:17 2016 -0700

    Consider udta box as leaf
    
    The MP4 standard considers the udta box as a regular container box. Quicktime, however,
    considers it as a container (of only leaf atoms) that can have a terminating 32 bit
    integer with value 0. Since this breaks the principle of not having content in container
    boxes, this CL considers the udta box as a leaf box that contains other boxes and does
    the parsing manually.
    
    Issue: #1315
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117237255

commit bbceb459fdb79ebc2b736834f222b4891cd73439
Author: olly <olly@google.com>
Date:   Tue Mar 15 07:25:20 2016 -0700

    Add loading error notification to ExtractorSampleSource
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117237109

commit 6fc8057146d362f193aa37f7c7ef258d08e60859
Author: olly <olly@google.com>
Date:   Tue Mar 15 07:14:12 2016 -0700

    Fix empty container box bug for fMP4 extractor
    
    This fix derives from issue #1308, which came up in unfragmented mp4 files.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117236416

commit eeddd6d8df21922909303c902b746e34d071fbb9
Author: olly <olly@google.com>
Date:   Tue Mar 15 07:13:02 2016 -0700

    Allow multiple renderers with MediaClock as long as only one is enabled.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117236319

commit d0fa6bdbcc8efa60ad73ea007621883c9490e424
Author: olly <olly@google.com>
Date:   Tue Mar 15 07:11:48 2016 -0700

    Fix handling of self initializing segments in DASH
    
    The parsing of multiple moov boxes for a single ExtractorOutput incurred in
    an assertion failure due to repeated track declarations. This CL makes each
    new moov box replace any previous one. This change is transparent to the
    client, no flags are provided to allow this feature.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117236246

commit 5f3fa3955b4dc4ef7b76033960ecebb691375e45
Author: olly <olly@google.com>
Date:   Tue Mar 15 06:52:10 2016 -0700

    Set default max input size for H.263 and MPEG-4 video.
    
    The minimum compression ratio matches the Nexus 5X MPEG-4 video decoder.
    
    Issue: #1290
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117234657

commit 9d5aa0f983a0eb5ca48aea77836b74298c7c2029
Author: olly <olly@google.com>
Date:   Tue Mar 15 06:47:35 2016 -0700

    Fix the build.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117234408

commit 7208819018806425aff5b332ca76e21d890982c9
Author: olly <olly@google.com>
Date:   Tue Mar 15 05:23:11 2016 -0700

    Count input buffers.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117228451

commit 0135aaa12271b73597d15cca16db9650cb989b11
Author: olly <olly@google.com>
Date:   Tue Mar 15 05:20:39 2016 -0700

    Migrate ExoCache CacheSpan filenames from v1 to v2
    
    V2 supports encoding special characters while on disk.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117228319

commit 1ca32cced885fda1679e2e8049d1ce136004eb1e
Author: olly <olly@google.com>
Date:   Tue Mar 15 05:18:44 2016 -0700

    Fix empty container box bug
    
    If a container box is empty, it is never removed
    from the container box stack, breaking the extractor.
    
    Issue: #1308
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117228211

commit 37e00c8c6f278009e236f4c8606fe2d9dcac1073
Author: olly <olly@google.com>
Date:   Tue Mar 15 05:17:48 2016 -0700

    Support multiplexed fMP4.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117228173

commit c08c5b6f4c6ddab84a099c0e90b6f561e759af4e
Author: olly <olly@google.com>
Date:   Tue Mar 15 05:00:29 2016 -0700

    Increase gradle version to 2.10 and Android Plugin for Gradle to 1.5.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117226973

commit d20ce3fa167427608312ce6bd8833338dddf6259
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:59:33 2016 -0700

    Added FLAC to the Webm list of known types.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117226935

commit 9a40a4c77da4d13bc2ea3796a13c2768fff4dcdb
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:27:59 2016 -0700

    Clean up enabled renderers + processing of resets.
    
    - Made enabledRenderers an array to avoid loads of method calls.
    - Made if so that enabled renderers are always called in a consistent
      order, rather than their order changing if they're enabled/disabled
      over time. This is likely to make performance more predictable.
    - Split out reading of resets into a separate method. This method is
      now called directly after seeking on the source, so as to ensure
      instant propagation of the new position from source->renderers in
      the common case.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117225639

commit 9b467b7c1b3d90fcd5c5ecf0629e89b4972bdde1
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:23:54 2016 -0700

    DASH: Ignore stream defined index if manifest defines one.
    
    Issue: #1287
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117225449

commit ae2e8589788b2be64f594689d4562236c57821ad
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:22:18 2016 -0700

    Fix incorrect playback speed of mono audio on MTK/JB devices.
    
    Issue #801
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117225377

commit 8447781a44c7cc2b69a69e23ba5492f13f2ebe22
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:06:30 2016 -0700

    Add workaround to discard NAL units up to the first SPS.
    
    Some devices fail to decode an avc3 stream that doesn't start with an SPS (for
    example, if an access unit delimiter appears first). Workaround the issue by
    discarding input sample data up to the first SPS on those devices.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224602

commit fb1d2d9ee8d6624839fe196509586dba02855743
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:05:08 2016 -0700

    Add hooks for timestamp checking in MediaCodecTrackRenderer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224468

commit 26ad44248a387502861466c3765073ff17f12256
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:03:15 2016 -0700

    Fix a bug where ID3 data was read as sample data.
    
    When reading unknown duration files with CBR seeking, the Mp3Extractor could
    try to read sample data from 0. This happened because synchronization did not
    skip over the ID3 data when it immediately found valid frames. When the invalid
    sample data is read, the extractor tries to resynchronize from the next byte
    (at offset 1), and this fails because the ID3 data at the start of the file is
    longer than the synchronization search distance.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224270

commit d9d6b8540d143b2d9705cb1c64de7165618201c8
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:02:33 2016 -0700

    HLS: Ignore AAC/H264 streams if we know they don't exist.
    
    This is needed to support fully demuxed audio in HLS. For the
    sample I have the video (only) variant still declares an AAC
    stream. I suspect there's at least one toolchain out there that
    hardcodes H264 and AAC streams in TS output.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224224

commit 9cfff0b0283d038976ed437bd656cdea197bb30c
Author: olly <olly@google.com>
Date:   Tue Mar 15 04:01:18 2016 -0700

    Merge cleaned version of https://github.com/google/ExoPlayer/pull/1234.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224172

commit 99606f6e2e0dd67160666289e3302a0160d653f4
Author: olly <olly@google.com>
Date:   Tue Mar 15 03:58:57 2016 -0700

    Allow equality assertions on FakeExtractorOutput.
    
    The idea here is that you'll be able to feed data through an extractor
    to a FakeExtractorOutput, then do the same again with some or all of the
    simulated flakiness settings toggled on FakeExtractorInput, and then
    assert that the output was the same in both cases.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117224019

commit a1fc0a6b0079cf4ca27ce59a8f8618effb3c6e91
Author: olly <olly@google.com>
Date:   Tue Mar 15 03:03:18 2016 -0700

    Set max input size for H.265/HEVC.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220851

commit b1c356fbab8d585565dbcb5adda4bf84116fee1b
Author: olly <olly@google.com>
Date:   Tue Mar 15 03:01:49 2016 -0700

    Simplify (i.e. remove) waiting for first sync frame.
    
    The upstream source (or its stream) should always provide data
    starting from a sync frame, so this logic shouldn't be necessary.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220759

commit b37e9f698089d4412851cfcc3890a37849a6d186
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:58:24 2016 -0700

    For both alignment cue setting value and position cue setting alignment value,
    allow "center".
    This value (and not "middle") is listed in
    https://w3c.github.io/webvtt/ ( WebVTT: The Web Video Text Tracks Format, Draft
    Community Group Report, 21 December 2015).
    
    Leaving the behavior for "middle" unchanged.
    It was the value listed in older drafts, e.g.
    https://www.w3.org/TR/2014/WD-webvtt1-20141113/ ( W3C First Public Working
    Draft 13 November 2014 )
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220612

commit 16f57e3919c8f3a5b8fbc7913322c220ef377165
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:56:39 2016 -0700

    Ignore repeated control characters in EIA608 subtitles.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220536

commit a1c74cb259a9fa1fc8dcb8e6b87a998770ec9a7a
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:55:22 2016 -0700

    Give a calculation for H.264 level picture size limits.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220482

commit 5a6d1435ab635d327af8134ee32ddb4de1452109
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:53:48 2016 -0700

    Fix overzealous ContentProtection filtering.
    
    Failing to parse a UUID from a ContentProtection should only
    result in filtering if there was actually a cenc:pssh element
    there for us to get it from.
    
    Issue: #1256
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220417

commit 7cddd1b1d9da31afa6c77ea84715212390a262fd
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:52:36 2016 -0700

    Move OGG extractor to use FakeExtractorInput + Simplify.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220360

commit bccffb017d98f0306855ff11d38867220a708d33
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:47:22 2016 -0700

    Cleanup - Make PesReader classes static.
    
    This avoids accessing PtsTimestampAdjuster through a thunk method,
    and allows the PesReader classes to be static, which is nice in
    general.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220139

commit 02a2d5f9329803ed4f1d229e8efb4efb2ad58cae
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:45:55 2016 -0700

    Guidelines on filing issues + release notes update.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220082

commit 300b58e530a59f73fae7824102aad9d3a0e76411
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:44:24 2016 -0700

    Introduce FakeExtractorInput (based loosely on RecordableExtractorInput).
    
    - Use it to simplify a bunch of tests.
    - Will also replace RecordableExtractorInput in a subsequent CL.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117220030

commit a1a48abe920ddc6d1bb2f720ec5aff9995f3bb21
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:42:11 2016 -0700

    Apply gapless playback metadata for MP3/MP4 playback using MediaCodec.
    
    Issue: #497
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117219944

commit ba88091c7b27b5271dc2bdae912500f7f17a6b2f
Author: olly <olly@google.com>
Date:   Tue Mar 15 02:40:05 2016 -0700

    Added MPEG2-Program Stream extractor.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117219856

commit 2b4dcbef3fc94b2c3ec1614a34b7460b28dfdc46
Author: olly <olly@google.com>
Date:   Mon Mar 14 11:49:55 2016 -0700

    Fix parsing of version 1 pssh boxes, and ignore version 2+.
    
    Issue: #1195
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117155301

commit 64d7f2f846af7b72d8742f86004780b566cdf420
Author: olly <olly@google.com>
Date:   Mon Mar 14 10:56:40 2016 -0700

    Deduplicate functions for parsing hex strings.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117149421

commit 554817cca6f5fbfe450fb8c090f4e5d8b6b9c053
Author: olly <olly@google.com>
Date:   Mon Mar 14 10:43:18 2016 -0700

    Extract gapless playback data in MP4 files.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117148015

commit 2380857bf247f3d1f3d95144e74a2eb9fcbe4581
Author: olly <olly@google.com>
Date:   Mon Mar 14 09:41:10 2016 -0700

    Clip the skip length in DefaultExtractorInput.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117141509

commit a6ba84ade66879e3d020c7891c03e057335f034e
Author: olly <olly@google.com>
Date:   Mon Mar 14 09:39:59 2016 -0700

    Update Mpd parser duration calculation.
    
    Set the duration to the sum of the final period's start
    + duration (if available) if MPD@mediaPresentationDuration
    isn't set in the manifest.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117141391

commit 61adcf98d263d2af044a7a520559e7f20a1174af
Author: olly <olly@google.com>
Date:   Mon Mar 14 08:49:12 2016 -0700

    Fix issue seeking backward when using SingleSampleSource.
    
    Issue: #1193
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117136800

commit c98f7e83481173f67d0dbae1430d402c0d225124
Author: olly <olly@google.com>
Date:   Mon Mar 14 08:47:18 2016 -0700

    Fixed the Mp4 embedded WebVTT playback
    
    Issue: #1185
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117136646

commit 028ce2582c205d07b05ba7fef8da48aadcb006d6
Author: olly <olly@google.com>
Date:   Mon Mar 14 08:43:50 2016 -0700

    Fix handling of extended ID3 tags in MPEG-TS/HLS.
    
    Issue #1181
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117136370

commit b76db7acd2d1fcc9bff529e2d915c3d5731e367a
Author: olly <olly@google.com>
Date:   Mon Mar 14 07:25:22 2016 -0700

    Fix Javadoc typo.
    
    Issue: #1235
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117131149

commit c8d81abd5283ca4a86a94c362d7f040b14fd249d
Author: olly <olly@google.com>
Date:   Mon Mar 14 07:22:35 2016 -0700

    WebM extractor tests: Fix up byte/int conversions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117131005

commit 9d732d8c27d0315ab9a4f0c40736874d23a9af86
Author: olly <olly@google.com>
Date:   Mon Mar 14 07:11:49 2016 -0700

    Robustness fixes for WebM extractor.
    
    - readFully calls when reading a string or varint may have 0 length.
      The behavior of a 0 length read isn't well defined either at the
      ExtractorInput or DataSource level, particularly when the read may
      also coincide with EOS. We'll work on defining these cases properly
      going forward, but in the meantime this fix avoids attempting 0
      length reads.
    - [Aside] UTF8 the is guaranteed default charset on Android.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117130356

commit 9f4e46bd3c905f667a8f0570b3466d61d85ccb1b
Author: olly <olly@google.com>
Date:   Mon Mar 14 07:04:02 2016 -0700

    Discard CSD buffers from the raw decoder in passthrough mode.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117129870

commit 835a9e9abed3f0b4fbb8ddb54bb4ad701621327f
Author: olly <olly@google.com>
Date:   Mon Mar 14 06:59:03 2016 -0700

    Use a separate MIME type for DTS Express.
    
    DTS Express (which is DTS LBR according to http://www.mp4ra.org/codecs.html) is
    not supported for passthrough playback currently. Associate a different MIME
    type with it so that we don't try to use DTS passthrough for playing DTS
    Express.
    
    The MIME type for DTS Express is just vnd.dts.hd, with a profile parameter
    indicating that it's DTS Express rather than one of the other formats.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117129583

commit e116125c40437fd5c1cca1efa190cb624a8f26f4
Author: olly <olly@google.com>
Date:   Mon Mar 14 06:14:01 2016 -0700

    DashChunkSource: Handle minor timing differences
    
    Handle minor timing difference between the different media content
    and the available range values as specified in the MPD.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117127112

commit c2eb9d5598daf8ddc265a0917310502dfc56fd16
Author: olly <olly@google.com>
Date:   Mon Mar 14 06:11:05 2016 -0700

    Disable funky FRC on L on nVidia shield.
    
    The logic in the platform was causing captions and the reported
    playback position to gradually drift out of sync with respect to
    audio and video.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117126970

commit 8ef4af135823a466e0319cd48c34fbd21d244a01
Author: olly <olly@google.com>
Date:   Mon Mar 14 05:37:52 2016 -0700

    Fix incorrect position calculation in VBRI seeker.
    
    Issue: #1197
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117125081

commit d3d63101d1b4266ae41c7341add5df33b23eec81
Author: olly <olly@google.com>
Date:   Mon Mar 14 04:36:56 2016 -0700

    [Refactor - Step #5] Introduce TrackSelector
    
    Notes:
    
    - The way this works is that every time the player needs to
      select some tracks it invokes the TrackSelector. When a
      track selection is actually activated (i.e. "hits the
      screen") it gets passed back to the TrackSelector, which
      allows it to expose the current tracks through an API that
      it may choose to define. Since playlist support doesn't exist
      yet, it's currently the case that the pass-back always occurs
      immediately.
    - A TrackSelector can invalidate its previous selections if its
      selection criteria changes. This will force the player to invoke
      it again to make a new selection. If the new selection is the
      same as the previous one for a renderer then the player handles
      this efficiently (i.e. turns it into a no-op).
    - DefaultTrackSelector supports disabling/enabling of renderers.
      Separately, it supports overrides to select specific formats.
      Since formats may change (playlists/periods), overrides are
      specific to not only the renderer but also the set of formats
      that are available to it. If the formats available to a renderer
      change then the override will no longer apply. If the same set
      of formats become available at some point later, it will apply
      once more. This will nicely handle cases like ad-insertion where
      the ads have different formats, but all segments of main content
      use the same set of formats.
    - In general, in  multi-period or playlist cases, the preferred
      way of selecting formats will be via constraints (e.g. "don't play
      HD", "prefer higher quality audio") rather than explicit format
      selections. The ability to set various constraints on
      DefaultTrackSelector is future work.
    
    Note about the demo app:
    
    - I've removed the verbose log toggle. I doubt anyone has
      ever used it! I've also removed the background audio option.
      Without using a service it can't be considered a reference
      implementation, so it's probably best to leave developers to
      figure this one out. Finally, listening to AudioCapabilities
      has also gone. This will be replaced by having the player
      detect and handle the capabilities change internally in a
      future CL. This will work by allowing a renderer to invalidate
      the track selections when its capabilities change, much like
      how a selector is able to invalidate the track selections in
      this CL.
    - It's now possible to enable ABR with an arbitrary subset of
      tracks.
    - Unsupported tracks are shown grayed out in the UI. I'm not
      showing tracks that aren't associated to any renderer, but we
      could optionally add that later.
    - Every time the tracks change, there's logcat output showing
      all of the tracks and which ones are enabled. Unassociated
      tracks are displayed in this output.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=117122202

commit 9c98c4bb109b833c88b138b4f0c39f6d733df9e4
Author: olly <olly@google.com>
Date:   Tue Mar 8 03:42:19 2016 -0800

    Make Track[Group|GroupArray|Selection] consistent.
    
    - I don't think the length is useful in hashCode; if the length
      is different then Arrays.hashCode should account for that.
    - "this." just for consistency across these classes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=116641142

commit 00191848f725961db0a70c18dc4520125bf5e266
Author: olly <olly@google.com>
Date:   Tue Mar 8 02:51:53 2016 -0800

    Make TrackSelection implement equals/hashCode.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=116638211

commit 73400907fc3b04b8e05bae9a67455e24a2d3490d
Author: olly <olly@google.com>
Date:   Thu Feb 25 08:06:53 2016 -0800

    Introduce TrackGroupArray.
    
    This change replaces TrackGroup[] with TrackGroupArray. This is
    to allow equality based hashCode and equals implementations.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=115563146

commit d1cb4bc1af76d71212039fe6747e25fe1d0383f4
Author: olly <olly@google.com>
Date:   Thu Feb 25 07:51:36 2016 -0800

    Fix hasSampleFormat in experimental version. Oops!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=115561885

commit 1208d8ec75b611c210c540b2b1cd95b4e30487b5
Author: olly <olly@google.com>
Date:   Wed Feb 24 08:32:59 2016 -0800

    Allow more precise reporting of format support.
    
    This change allows a TrackRenderer to distinguish between the
    "I don't support this type at all" case and the "I am a general
    purpose renderer of this type, but cannot support the specific
    subtype" case.
    
    Bug=26622675
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=115454950

commit 6ba4fa3b51b972cc8dd7af2c3688f2a45896807a
Author: olly <olly@google.com>
Date:   Mon Feb 22 11:32:40 2016 -0800

    Make SampleSource interfaces right for TrackSelector.
    
    The TrackSelector API will look like:
    
    TrackSelection[] selectTrack(
        TrackRenderer[] renderers, TrackGroup[] trackGroups);
    
    In this CL:
    
    - SampleSources return TrackGroup[], so that the result can be easily
      passed to the selector.
    - TrackStream gets its own file to sit alongside other Track* classes.
    - A TrackSelection object is introduced to encapsulate group and track
      indices.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=115251331

commit 39a924451a590517effc3c3f94260b63c6a3dc0b
Author: olly <olly@google.com>
Date:   Thu Feb 18 07:49:42 2016 -0800

    Return format and adaptation support from single method.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114963314

commit 0e60335064c87b0d62665eab0ac2a5f8a048e236
Author: olly <olly@google.com>
Date:   Tue Feb 16 09:52:22 2016 -0800

    Add structure to ExoPlaybackException.
    
    - Add a top level failure type (source/renderer/unexpected),
      and convenience methods for retrieving the underlying cause
      without needing to cast.
    - Also add renderer index in the case of renderer failures.
    - setIndex/getIndex is a little . . . unclean, but alternatives
      involve either having the top line of the stack trace be a
      non-interesting line, or loads of try/catch blocks in
      ExoPlayerImplInternal.
    
    Issue: #777
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114763073

commit c48dd4f3e37706a4df90c53a2e54862af0d196dc
Author: olly <olly@google.com>
Date:   Tue Feb 16 05:18:47 2016 -0800

    Use FormatEvaluator for HLS.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114743795

commit a7adcce018a41ecb69dbbfd25ac6811d2ae3cc5e
Author: olly <olly@google.com>
Date:   Fri Feb 12 10:23:21 2016 -0800

    One Format object to rule them all.
    
    - Format can represent both container and sample formats.
      If a container contains a single track (as is true in
      DASH and SmoothStreaming) then the container Format can
      also contain sufficient information about the samples
      to allow for track selection. This avoids the Format to
      MediaFormat conversions that we were previously doing in
      ChunkSource implementations.
    
    - One important result of this change is that adaptive
      format evaluation and static format selection now use the
      same format objects, which is a whole lot less confusing
      for someone who wants to implement both initial selection
      and subsequent adaptation logic. It's not in the V2 doc,
      but it may well make sense if the TrackSelector not only
      selects the tracks to enable for an adaptive playback, but
      also injects a FormatEvaluator when enabling them that will
      control the subsequent adaptive selections. That would make
      it so that all format selection logic originates from the
      same place.
    
    - As part of this change, the adaptiveX variables are removed
      from the format object; they don't really correspond to a
      single format. This also saves on having to inject the max
      video dimensions through a bunch of classes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114546777

commit 362d0400cd6334552566774b213912ee6acf63d3
Author: olly <olly@google.com>
Date:   Fri Feb 12 10:14:45 2016 -0800

    Don't pass chunk list to ChunkSource.disable().
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114545827

commit 782817d524c28e361f60ea920df0cbea68c82911
Author: olly <olly@google.com>
Date:   Thu Feb 11 05:52:21 2016 -0800

    Remove durationUs from MediaFormat.
    
    Duration was originally included in MediaFormat to match the
    framework class, but it actually doesn't make much sense. In
    many containers there's no such thing as per-stream duration,
    and in any case we don't really care. Setting the duration on
    each format required excessive piping.
    
    This change moves duration into SeekMap instead, which seems
    to make a lot more sense because it's at the container level,
    and because being able to seek is generally couplied with
    knowing how long the stream is.
    
    This change is also a step toward merging Format and MediaFormat
    into a single class (because Format doesn't have a duration),
    which is coming soon.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114428500

commit ebf87a36197e1a2fe8e23757b27bb7afdea27c52
Author: olly <olly@google.com>
Date:   Thu Feb 11 05:39:57 2016 -0800

    Simplify codec configuration.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114427767

commit 335bb0aff2085caaceb7305c9830e6d7db019a0f
Author: olly <olly@google.com>
Date:   Thu Feb 11 05:35:02 2016 -0800

    Implement decoder capability checks in MediaCodecTrackRenderers.
    
    [Step 4 - Partial, of []
    
    - The capabilities checks previously performed in VideoFormatSelectorUtil
      are now performed in MediaCodecVideoTrackRenderer. This means they'll be
      useful for non-chunk use cases (e.g. when using ExtractorSampleSource).
    - Added capabilities checks for audio in MediaCodecAudioTrackRenderer. We
      didn't check audio capabilities previously.
    - Added functionality to allow a TrackRenderer to indicate the extent of
      its adaptive support.
    
    The idea here is that a TrackSelector (to be introduced) will have access to:
    
    (a) TrackGroups from the SampleSource that indicate whether they support
    adaptive playbacks and the formats of each individual track.
    (b) TrackRenderers that indicate whether they support adaptive playbacks as
    well as how capable they are of rendering formats of individual tracks.
    
    This is everything that a TrackSelector needs from the player components in
    order to decide how to wire things up. Note that a TrackSelector may opt to
    treat FORMAT_EXCEEDS_CAPABILITIES as FORMAT_HANDLED at its own risk, if it
    thinks that it (or the user) knows better. This is a request that we've seen
    from third parties for better handling cases where capabilities aren't
    accurately reported by the underlying platform.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=114427428

commit 6bc52262db1ffc02220cf8f848111fabf3fcff46
Author: cblay <cblay@google.com>
Date:   Thu Feb 4 11:01:05 2016 -0800

    Minor tweaks/fixes.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113868179

commit 43e1e7e83a15ddcab42545b56767273e86f0dec8
Author: olly <olly@google.com>
Date:   Thu Jan 28 07:14:58 2016 -0800

    ExoPlayer V2 Refactor - Misc
    
    Delete SingleSampleChunkSource. I don't think it's really
    useful for anything, now we have SingleSampleSource.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113259289

commit ce324f1ca928ca8ee846853652996b95593498b8
Author: olly <olly@google.com>
Date:   Thu Jan 28 07:14:27 2016 -0800

    ExoPlayer V2 Refactor - Step 7 (partial)
    
    This change removes the need for SourceBuilders to load their
    manifests before building their sources. This is done by pushing
    initial manifest loads into the ChunkSource classes. This simplifies
    the SourceBuilders a lot, and also DemoPlayer.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113259259

commit be47148940cd5c6589025ea96b7b440584f740ec
Author: olly <olly@google.com>
Date:   Wed Jan 27 05:16:32 2016 -0800

    ExoPlayer V2 Refactor - Step 4
    
    Notes:
    1. The logic in ExoPlayerImplInternal is very temporary, until we
       have proper TrackSelector implementations. Ignore the fact that
       it's crazy and has loads of nesting.
    2. This change removes all capabilities checking. TrackRenderer
       implementations will be updated to perform these checks in a
       subsequent CL.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113151233

commit 6cb20525cbb15d14c78f68506cd1bdc7ac7c1c75
Author: olly <olly@google.com>
Date:   Tue Jan 26 05:43:04 2016 -0800

    ExoPlayer V2 Refactor - Step 3
    
    Move binding of tracks<->renderers to ExoPlayerImplInternal.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113046018

commit cdae9ac5d26b18f5a84c4dbd79568ee1e6ae239b
Author: olly <olly@google.com>
Date:   Tue Jan 26 05:05:41 2016 -0800

    ExoPlayer V2 Refactor - Steps 1/2.
    
    GitHub note - Apologies for the cryptic change descriptions,
    they relate to a design doc that's not externally visible.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=113043764

commit 61d581fe4401a70e8d0884d79e0a9553685b6e67
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jun 15 13:36:09 2016 +0100

    Prepare for 2.x push

commit 39a7cea987e4d19a5d5f1818146ac53da03ae0f3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 16:00:22 2016 +0000

    Bump version to 1.5.4

commit 7d9007af28a2c33bb6cc283c4bc8f00bd41b82ab
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 15:55:16 2016 +0000

    Update release notes

commit a8a9e0de2a3e4cfe15d929c0b923f5e7350755f7
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jan 22 07:01:33 2016 -0800

    Removed permissions from the library manifest
    
    Fixes: #1176
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112781092

commit da2752137b7295b0ef6efc82e076259517751ee0
Author: olly <olly@google.com>
Date:   Fri Jan 22 05:42:13 2016 -0800

    Add proguard config for Opus extension.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112776882

commit a9720457d8b134df973240cb0abc20b652e34ee9
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 22 04:59:17 2016 -0800

    Add support for playing DTS in HLS.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112774678

commit a02fd14c318837149299dd73887f21a585ac49ae
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 12:19:49 2016 +0000

    Fix Eclipse project for library tests.

commit 7bf8080950fdb7d0b4a9c7f4522b0c9e058c996c
Author: olly <olly@google.com>
Date:   Thu Jan 21 16:32:12 2016 -0800

    ExoPlayer: Remove deprecated methods.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112736771

commit d804446b343401f6487f62777c9a23173f79309b
Author: olly <olly@google.com>
Date:   Thu Jan 21 13:58:01 2016 -0800

    Implement seeking via a single code path.
    
    When a seek is performed, renderers currently perform the
    actions that they need to take in two places: Some changes
    are performed in seekTo implementations. Other changes are
    performed when discontinuities are read from the source.
    
    In HLS we need to perform what is effectively a seek
    originating in the source. To support this, this CL allows
    discontinuities read from the source to modify the playback
    position. All actions that renderers perform as a result
    of a seek are moved to be performed when a discontinuity is
    received.
    
    Best way to understand CL:
    - Look at SampleSource interface change and then at the
      concrete implementations, to make sure they've been
      changed properly.
    - Look at SampleSourceTrackRenderer change.
    - Look at concrete renderers. The general pattern is that
      code previously performed in seekTo and READ_DISCONTINUITY
      is merged into onDiscontinuity().
    
    Note: This will be further untangled in V2.
    
    Issue #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112720746

commit 3f0244e2149c8cff842f7cbc91c920ca0a38140f
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 10:38:04 2016 -0800

    Read gapless playback metadata in files with Xing metadata.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112699916

commit 4bea0b184f908a3add9991c8267132786b05552e
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 10:32:00 2016 -0800

    Fix warnings in OggVorbisExtractorTest and VorbisBitArrayTest.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112699244

commit 9d89d48f56251dc69f19ad273ec30e259debbe5c
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 09:35:02 2016 -0800

    Fix ParsableByteArrayTest.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112693523

commit bed89730a7f641be862b8d765089d37cb6f0395b
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 09:05:56 2016 -0800

    Fix path to Mockito for Eclipse.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112691130

commit 588d5a6e556c76e46da596f32321dd519656a125
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 08:01:04 2016 -0800

    Parse encoder delay and padding from ID3 metadata in MP3.
    
    Based on AOSP's MP3Extractor.cpp and ID3.cpp.
    
    Issue: #497
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112685664

commit 25fb2a826e3d39f3dfda52d21d2b37afb417f693
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 07:26:27 2016 -0800

    Merge MP3 sniffing/synchronization functionality.
    
    As part of this change, Extractor.sniff may read/skip (not just peek) if it
    returns true. This allows Extractors to avoid parsing the input a second time in
    read.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112683272

commit e6637c50c249fb027aad5a97b347263d3ff80b24
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 21 05:34:30 2016 -0800

    Fix a couple of compilation warnings.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112676296

commit 89ce1ccedff72da5c7efc4ee50bfcd2d67e45818
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 11:45:04 2016 +0000

    OggVorbisExtractor (WIP - Seeking not yet enabled)

commit 88fa1495c47b8c14358167839eea0a14885ba130
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 11:40:27 2016 +0000

    Use consistent naming for Xing headers/tags.
    
    Also fix a couple of style nits.

commit cef1f12f1dc60714b8d4b4ff8a3b5d2c47607cbb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 11:40:02 2016 +0000

    Add readString to ParsableByteArray

commit eda8ac4e016be24a9821ce62a046c01142731772
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 11:38:06 2016 +0000

    Add eventSourceId to onAvailableRangeChange events

commit 00068c8954f7dd277afc5b7b2b25131401642a71
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 22 11:35:36 2016 +0000

    Add vpx extension playback test.

commit 783467b8fb8087feb44da5f2c160f9c87631e7bb
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jan 18 09:00:01 2016 -0800

    Work around broken MP3 decoder.
    
    Issue: #398
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112412961

commit a049382cd743b35f665af251ca493e21f864a771
Author: olly <olly@google.com>
Date:   Mon Jan 18 05:37:52 2016 -0800

    Treat seeks in HLS live to be at t=0, as in ExtractorSampleSource.
    
    This makes sense until we need to support seeking in the live window.
    
    Issue: #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112402026

commit cef0f7a0b184293e92dba6d1dacbb04917d1970f
Author: olly <olly@google.com>
Date:   Mon Jan 18 03:13:12 2016 -0800

    Apply flush workaround on S5 Mini devices with Exynos chipset.
    
    Also apply the workaround for the secure variant of OMX.SEC.avc.dec.
    Note that it's not necessary to do the same for the RK decoder in
    the method below, since that workaround is targeted at SDK_INT<=17
    and secure decoders only came along in 18.
    
    Issue: #603
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112395376

commit c01d0096ab72c19d254d2150f80f4eb773ae2e23
Merge: 9ab6c96 8e1f14c
Author: ojw28 <olly@google.com>
Date:   Sat Jan 16 15:37:07 2016 +0000

    Merge pull request #1155 from bartsidee/1095-dev
    
    link track language attribute in Smoothstream parser

commit 8e1f14cbc3bcb4a5f7ccab1cb4fbba24bde85fbe
Author: Bart van den Ende <bart@twcapps.com>
Date:   Sat Jan 16 12:23:36 2016 +0100

    resolve #1095 get language for all types, not just audio

commit d5425bb64acdff5e67913232ac0f1c27748f1e6a
Author: Bart van den Ende <bart@twcapps.com>
Date:   Fri Jan 15 15:03:46 2016 +0100

    resolve #1095 store the language as normalised attribute so we can access it from the track parser

commit 19cf24234c8bee0e5719baa86c90fd9e0fb8478b
Author: Bart van den Ende <bart@twcapps.com>
Date:   Fri Jan 15 12:10:20 2016 +0100

    resolve #1095 map the audio track language to the element parser instead of the track parser

commit 9ab6c9616946744f8cc27a7e8a300628c36234af
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 15 19:18:19 2016 +0000

    Make TtmlColorParser comment a little clearer.

commit c60dac7c467aaa99511e956caa37f1bd21ab5394
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 15 19:13:58 2016 +0000

    Further tweaks to TTML color parsing.

commit 7974a61476e9f494076fad1f8ee8f6df0a87c83c
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 15 19:06:27 2016 +0000

    Fix TtmlColorParser test.
    
    Also simplify the implementation slightly.

commit afafd08346f4b8f4b4bbdb1b2c6595b0a1a02e4f
Merge: 284b7e7 b5c8595
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 15 18:53:39 2016 +0000

    Merge branch 'aptly-io-fix_rgba_color_tuple' into dev

commit b5c8595655015f65d3f8b8198ac93ebbdccda30b
Merge: 284b7e7 e6132ed
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 15 18:53:30 2016 +0000

    Resolve merge conflict

commit 284b7e7f28752438191015487900a82797a3bcbf
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 15 09:14:19 2016 -0800

    Comment (e-)AC-3/DTS descriptor tags.
    
    Also, use terminology from ATSC spec in Ac3Util comment.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112254908

commit 0900c535640689540fdaf6468e7d30bae621635b
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 15 09:13:25 2016 -0800

    Set the passthrough buffer size based on encoded format bit rates.
    
    After this change, AC-3 uses about 20 KB and DTS uses 49 KB.
    
    For comparison, 'normal' PCM playbacks use by default (depending on the device
    and input format) about 45 KB. For passthrough, the following buffer sizes were
    used before this change:
    - Nexus Player AC-3: 23 KB
    - Nexus Player DTS: 25 KB
    - NVIDIA Shield AC-3: 15 KB
    - NVIDIA Shield DTS: 16 KB (caused underruns in some DTS-HD playbacks)
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112254836

commit 9bb124a0113f951ba195a876256564adc3cd342a
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Jan 15 08:43:00 2016 -0800

    Use uppercase for hex literals.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112252404

commit 5baf55176bdf0f88cd7b45a3473dc8b617eae07a
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Jan 15 06:11:44 2016 -0800

    Add support for Cue Settings and Spanned text in MP4WebVTT
    
    Using the provided methods by the previous refactors, it is now possible to use all of the WebVTT features already available.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112243172

commit d45f0b8b6d0210cfe7115641d71eaebdefae7f50
Author: olly <olly@google.com>
Date:   Thu Jan 14 10:18:54 2016 -0800

    Reflow comments in Util.java
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112163984

commit e6132ed7421684edea84b83134df5482a5a38cd5
Author: aptly-io <fm@aptly.io>
Date:   Thu Jan 14 23:11:57 2016 +0100

    Fix RGBA color tuple parsing
    
    The TTML 1 spec. defines an exact RGBA color tuple as #rrggbbaa
    See https://www.w3.org/TR/ttml1/#style-value-color
    
    Android's internal representation is ARGB.
    The correct parsing therefore requires a bit of extra byte shuffling ...

commit df7a96a7c4c9132720ca3104b91829daa0791976
Author: olly <olly@google.com>
Date:   Thu Jan 14 10:01:55 2016 -0800

    Map SDK_INT for dev devices.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112162208

commit e3da2cfb402b290dc10480a594d21e2ef226f156
Author: olly <olly@google.com>
Date:   Thu Jan 14 09:59:11 2016 -0800

    Treat .vtt as Webvtt as well as .webvtt.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112161960

commit 949317a41ad7d465e57395d4a5d71c0d64104d62
Author: olly <olly@google.com>
Date:   Thu Jan 14 09:57:46 2016 -0800

    Minor tweaks to merged pull requests.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112161860

commit be2aedbd53612ca6bde3bc8ee5c3acae16905d77
Author: olly <olly@google.com>
Date:   Thu Jan 14 07:50:12 2016 -0800

    Don't consider switching tracks as "joining".
    
    I'm not really sure how best to document this in TrackRenderer;
    it's a bit of a weird feature. For now, I've gone with the vague
    approach.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112150939

commit 317842a6b7bf1cd8e5600c6fac27cedad2539524
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 14 07:26:44 2016 -0800

    Use expandable headers in the sample chooser.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112149442

commit 2690f569af8e861bfba3e650176bb935996db42d
Author: olly <olly@google.com>
Date:   Thu Jan 14 07:24:03 2016 -0800

    Enable track selection + WebVTT for HLS.
    
    See the documentation of buildTracks for the gory details.
    
    Issue: #151
    Issue: #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112149293

commit b6b97a8683864ce39d7bfca9f817556fcddcbe4d
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jan 14 06:25:25 2016 -0800

    Expose cue settings parser
    
    This CL exposes the cue settings parser in order to allow its usage from the MP4Webvtt extractor. Also fixes a few mistakes from the previous related CL.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112145806

commit 6b9a1b16f1b0af4cab0f4a5ed8257a70fdcc8b46
Author: olly <olly@google.com>
Date:   Thu Jan 14 05:43:41 2016 -0800

    Fix issues playing FLV content.
    
    * AudioTagPayloadReader was strangely parsing an audioSpecificConfig
      itself, using the parsed values to build a new audioSpecificConfig,
      then passing the newly constructed instance to be parsed by
      CodecSpecificDataUtil. Unfortunately the translation was lossy ;).
    * Treat Duration=0 as an unknown duration.
    
    Issue #1137
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112143569

commit bc1d76a3eb882a11ae40e888cfcf5dbb96e7dd7c
Author: olly <olly@google.com>
Date:   Thu Jan 14 05:40:12 2016 -0800

    Fix ParsableByteArray.readLine + discard BOM at start of line.
    
    - I think \r and \n are handled the wrong way around?
    - We only expect to encounter a BOM sequence at the start of a
      file, but it feels fine to automatically discard it in all
      cases for simplicity. A BOM sequence doesn't mean anything in
      UTF-8. See https://en.wikipedia.org/wiki/Byte_order_mark. Note
      that I think the advice not to remove it on that page relates
      only to the case where the file is being edited + saved.
    
    Issue #1136
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112143407

commit 5ef11233919775184f0c4d0e1fd6c8bb3e6b2dac
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 14 00:58:57 2016 -0800

    Clarify @param bufferSizeContribution documentation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=112127698

commit 59cf3e02f5d5001a9094781381b1b65af3bd49df
Author: olly <olly@google.com>
Date:   Tue Jan 12 06:55:53 2016 -0800

    HlsChunkSource: Expose stuff for WebVtt/Variant selection.
    
    Issue: #151
    Issue: #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111945466

commit 2a9eeaa893c6275a74b1ad283a331452b1bf005d
Author: olly <olly@google.com>
Date:   Tue Jan 12 05:57:20 2016 -0800

    Fix HlsSampleSource use of LoadControl.
    
    There are multiple issues with HlsSampleSource's use of
    LoadControl that become apparent when you attempt to use
    the same LoadControl for loads by another source.
    
    * In the "limbo" state HlsSampleSource doesn't start any
      new loads, but doesn't update the LoadControl to tell
      it that it doesn't want to load anything either. This
      can prevent another source from starting the loads that
      it needs to make to complete preparation, causing
      playback to become stuck.
    * The LoadControl isn't updated properly when the EOS is
      reached. This can cause playback to become stuck near
      the end of the media.
    * If HlsSampleSource is released from being in the "limbo"
      state, it doesn't unregister itself with the control.
    
    Issue: #151
    Issue: #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111942009

commit 43fcb369249a61d9de6eea09637f5b02aa8dc007
Author: olly <olly@google.com>
Date:   Tue Jan 12 05:43:24 2016 -0800

    Use APPLICATION_M3U8 as the mimeType for media playlists.
    
    Given we need to do this in HlsPlaylistParser in the normal
    case (i.e. not MEDIA_TAG), we may as well just be consistent
    and do it everywhere.
    
    Issue: #151
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111941335

commit 8c8794878dc1425c339d37169149b66997a77c8c
Author: eguven <eguven@google.com>
Date:   Mon Jan 11 03:53:42 2016 -0800

    Fixed demo-misc-vp9-opus-sw DASH check
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111839055

commit b7d5ce366a59d248900bee1365e45299145b5870
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jan 11 02:12:21 2016 -0800

    Add a comment to explain the input size calculation.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111833857

commit c6cdf7e083c81dc58fbe52a69d54dee9eb9e61ba
Author: rileya <rileya@google.com>
Date:   Sun Jan 10 18:56:50 2016 -0800

    Add limited support for edit lists in fragmented MP4s.
    
    Currently only supports a single offset to the full media timeline
    (indicated by a duration of 0). This is most often used to fix the
    non-zero starting presentation timestamp introduced when B-frames
    are present.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111816916

commit aec9657c767ed44f899ffd4a998571f114bb064f
Author: cblay <cblay@google.com>
Date:   Fri Jan 8 18:28:41 2016 -0800

    Internal refactor.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111746825

commit bb55fd8e47f515ede75eeceb44764f6b526c9fd6
Author: vigneshv <vigneshv@google.com>
Date:   Fri Jan 8 10:49:28 2016 -0800

    opus: Add CodecCounters support
    
    Fixes Issue #1047
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111708934

commit ab9e3bac4682ca84bc9632e9eaa3a9ee3690ffd0
Author: olly <olly@google.com>
Date:   Fri Jan 8 08:55:12 2016 -0800

    Introduce HlsTrackSelector.
    
    This is equivalent to DashTrackSelector and SmoothStreamingTrackSelector.
    This is a step toward allowing HlsChunkSource to expose multiple tracks,
    which is a requirement for supporting WebVtt.
    
    This change also enables WebVtt extractor instantiation.
    
    Issue: #151
    Issue: #676
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111698833

commit 00f8deda3d7b558794986fcc6be47d49ea3a5b2b
Author: olly <olly@google.com>
Date:   Fri Jan 8 07:31:37 2016 -0800

    Introduce PtsTimestampAdjusterProvider for HLS WebVTT.
    
    This allows the same adjusters to be used by multiple
    HlsChunkSource instances. This is necessary because
    WebVTT chunks will be loaded by a second chunk source
    to the one loading audio/video. In both cases the same
    timestamp adjustments will need to be applied.
    
    Each source may transition from one discontinuity sequence
    to the next at a slightly different time, so it's necessary
    to maintain a separate adjuster for each sequence.
    
    An adjuster can only be initialized correctly using audio/video
    and not WebVTT, because the start time in a WebVTT file in
    HLS doesn't necessarily correspond to the chunk start time,
    which means the timestamp offset calculated by the adjuster
    could end up being incorrect. Hence sources providing WebVTT
    chunks will set isMasterSource to false. Lovely, right :(?
    
    Issue: #151
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111693126

commit 86c4fb3ac2c3c19dee13a3690d94670a4741290d
Author: eguven <eguven@google.com>
Date:   Fri Jan 8 06:10:04 2016 -0800

    In demo-misc-vp9-opus-sw removed FilePickerActivity and copied demo player permissions bug fix
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111689012

commit b9ec51dbedffa677e5b5419b05f0394d2fc951f3
Author: olly <olly@google.com>
Date:   Fri Jan 8 06:06:21 2016 -0800

    SmoothStreaming track selector feature parity with DASH.
    
    This gives DefaultSmoothStreamingTrackSelector feature parity
    with DefaultDashTrackSelector. Note that the code duplication
    across these classes will go away eventually, when we rework
    track selection as described in Github Issue #1121.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111688784

commit 00e903b32e05fb4ba137c59fcb30a776e88ca77e
Author: olly <olly@google.com>
Date:   Thu Jan 7 11:03:38 2016 -0800

    Don't pass maxWidth/Height for non-video streams.
    
    This is a no-op change for clarity only. maxWidth/maxHeight
    don't mean anything for AAC/MP3, so it makes sense to pass
    MediaFormat.NO_VALUE in all cases.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111619832

commit 651996983b4a890eb69d48def05045896c71a0cb
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Jan 7 10:33:52 2016 -0800

    Refactored the Webvtt parsing classes
    
    Moved the behaviors related to Cue's to the WebvttCueParser class.
    This way, the parsing methods will be more easily accessible to
    other classes, such as the MP4Webvtt parser. This class also has
    some methods that require state to avoid repetitive avoidable
    allocations. The method visibility is subject to changes in
    further CLs.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111616824

commit 0aa4d3d20974b6c436a67c0da1125847ee430ef6
Author: olly <olly@google.com>
Date:   Thu Jan 7 09:58:18 2016 -0800

    Remove dead code.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111613354

commit 664c80da15b78e886504d6560af8799e5a8dff2b
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Jan 7 08:49:05 2016 -0800

    Set a max input size for VP8 and VP9.
    
    Issue: #1090
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111607802

commit 9cdd246a555d3e0bd4d304293353b3644167fff9
Author: Yu-Hsuan Lin <yuhsuan.lin@livehouse.in>
Date:   Thu Jan 7 13:06:31 2016 +0800

    support okhttp3

commit cc1f3e5cac818bd360f1787f7d9cb41d957b534a
Author: olly <olly@google.com>
Date:   Wed Jan 6 09:13:28 2016 -0800

    Clean up parser exception a little + add descriptions.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111515406

commit 27e11f1f1a767ebdca75ea54158713a03d465af7
Author: olly <olly@google.com>
Date:   Wed Jan 6 09:01:51 2016 -0800

    Workaround flushing issues on S-3 JB MR2.
    
    Targeting to all API level 19 devices using the OMX.SEC.avc.dec
    decoder is probably the right thing to do. It shouldn't have
    negative implications if we apply the workaround on devices that
    don't really need it, except to slow down seeking slightly due
    to decoder re-allocation. Given we're talking about JB, I think
    the priority should be to "make sure it works".
    
    Issue: #951
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111514406

commit 9e3e61901e894879c00c156e0b4cc246806a264d
Author: olly <olly@google.com>
Date:   Wed Jan 6 07:20:29 2016 -0800

    Remove stray line break (ineffectively busy).
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111507159

commit 18927795356b5455a8495b677976947d4f8f2788
Author: olly <olly@google.com>
Date:   Wed Jan 6 04:53:35 2016 -0800

    Increment frame timestamps (TS/H.262).
    
    We normally expect each frame to come in its own PES packet,
    but it seems that this is not always the case. This change
    uses the frame rate in the stream to increment the frame
    timestamp in the case of multiple frames contained within
    a single PES.
    
    Note that since we don't expect 100s of frames in a single
    PES, or anything close to that really, the rounding errors
    that may accumulate due to use of a frame duration should be
    fine.
    
    Issue: #1112
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111499052

commit d740bf9f23b3f8b242b5524eaac000eb19fcd2eb
Author: andrewlewis <andrewlewis@google.com>
Date:   Wed Jan 6 04:25:42 2016 -0800

    Handle edit lists with one 0 duration edit.
    
    Issue: #1102
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111497855

commit 5b54dc5f8fdd37dc2c9ca05e66deb962d4579c9d
Merge: 69a42b6 6b59975
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 5 14:54:54 2016 +0000

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit 69a42b60f8df36d514149c4e465732dbeb699af7
Author: eguven <eguven@google.com>
Date:   Tue Jan 5 04:42:59 2016 -0800

    Implement ID3 Metadata support for audio only HLS.
    
    Issue: #862
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111403855

commit 1e4f2f6a1fceb9a39df723525556933d2b9f18c2
Author: aquilescanta <aquilescanta@google.com>
Date:   Tue Jan 5 04:16:20 2016 -0800

    Refactored WebvttCueParser methods to be static
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111402555

commit 7c103ca5f845b353ce2bd55c6b92c6035091deb3
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Jan 5 01:38:09 2016 -0800

    Using ExtractorInput.peek* instead of BufferingInput.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111394118

commit c1e99277d238e6bd5460aeaa1f2813bdca0259b3
Author: mishragaurav <mishragaurav@google.com>
Date:   Mon Jan 4 13:01:58 2016 -0800

    Check support for adaptive playback
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111348701

commit 681df4e4aa492c5cfb672651230ddaaa09b3ebad
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 4 09:07:05 2016 -0800

    Refactored the SubtitleParser's parse() signature
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111326567

commit 6b599751c6b4ee719131632c88aa718a4eb84608
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Jan 4 09:07:05 2016 -0800

    Refactored the SubtitleParser's parse() signature
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111326567

commit 9bcd1069b110fc7158f630905d93ecbe17da5a1f
Author: olly <olly@google.com>
Date:   Mon Jan 4 09:04:30 2016 -0800

    Blacklist CIPVorbisDecoder.
    
    Issue: #1111
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111326378

commit 18a39f3350c72b4daa958d9cc821602102be2308
Author: olly <olly@google.com>
Date:   Mon Jan 4 08:57:08 2016 -0800

    Add ability to not offset in PtsTimestampAdjuster.
    
    Issue: #1078
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111325745

commit 890dd5afb59440870b1ec2e853e8a384a7c682b4
Author: andrewlewis <andrewlewis@google.com>
Date:   Mon Jan 4 07:00:56 2016 -0800

    Add a peekFully overload with allowEndOfInput.
    
    This is in preparation for removing BufferingInput,
    and using peeking instead.
    
    Also add tests for peeking with allowEndOfInput and
    resetPeekPosition.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111318236

commit 030f26fd2d1c381f35bbed0be0f1746be3625ed9
Author: olly <olly@google.com>
Date:   Mon Jan 4 06:03:23 2016 -0800

    Fix an unsafe check in FragmentedMp4Extractor.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111315463

commit 81a74af933b127bf323a8b45eb16945c88500e4f
Author: mishragaurav <mishragaurav@google.com>
Date:   Mon Jan 4 04:13:41 2016 -0800

    Adding tests for H265
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=111310622

commit c31473c5964a6f1faa75934d31d8b333e99e712c
Author: aquilescanta <aquilescanta@google.com>
Date:   Wed Dec 23 07:40:05 2015 -0800

    Work around for the Choreographer's resource leak.
    
    This CL adds a class responsible for managing the lifecycle
    of a single Choreographer to be shared among all
    VideoFrameReleaseTimeHelper instances.
    
    Issue: #1066
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110839824

commit f2fd57cde17e1b62ce2b3c1b5ce6cf20f9958ca9
Author: mishragaurav <mishragaurav@google.com>
Date:   Tue Dec 22 06:59:47 2015 -0800

    Adding dummy device report log.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110768506

commit 33a2b2d0c55ad9201549e09de48b40410af7a567
Author: aquilescanta <aquilescanta@google.com>
Date:   Thu Dec 17 10:15:15 2015 -0800

    Added test cases to the MP4Webvtt parser
    
    This CL is prepares the ground for refactoring the Webvtt parser,
    so as to use the common parsing algorithms in both parsers. In order
    to do this, the Webvtt Parser will be refactored. As a side note, many
    more test cases will be added once the new subtitle features are
    implemented. Some useful test cases have also been left for a following
    CL, to allow an easy code review.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110466914

commit dd497b12596d081f202c687be1be20f46c7e3b33
Author: olly <olly@google.com>
Date:   Thu Dec 17 08:02:37 2015 -0800

    Don't check a framerate if we don't have one.
    
    Seems (marginally) nicer than making one up :). I didn't
    realize there was a method that didn't require a framerate
    to be passed!
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110456874

commit 6eea4bdbc34dea86a5bc81991163ca26761cae83
Merge: f4c10dc 2b1816c
Author: Andrew Lewis <andrewlewis@users.noreply.github.com>
Date:   Mon Jan 4 13:27:52 2016 +0000

    Merge pull request #1105 from IanDBird/eac3-fixes
    
    Improve identification of (E)AC3 content in MPEGTS and tweak EAC3 parsing

commit 2b1816c1f286fa29770008c1a24b6173062e4477
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Mon Jan 4 08:59:36 2016 +0000

    Skip substream id field when parsing EAC3 sync frame format

commit e33345e5b80074f7c960ace0b1055ebc83c6f0dd
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Mon Jan 4 08:58:57 2016 +0000

    Add support to identify (E)AC3 streams via TS descriptor tag

commit f4c10dc560fbe46a4fee8bea9b6d7079d3e03ed0
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Dec 17 12:15:48 2015 +0000

    Don't hold a lock while rendering in VpxRenderer.

commit b9607321fec71839a2668f609461bb1ab8b28545
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 17 12:15:09 2015 +0000

    Simplify DefaultExtractorInput

commit cf13280590a412a0640ae3036c5b13b943fc54ed
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 17 12:14:26 2015 +0000

    Allow onOutputFormatChanged to throw ExoPlaybackException

commit 3f05ddbcc16100fb749f80a5c23a551f8fb9bac8
Author: ojw28 <olly@google.com>
Date:   Wed Dec 16 20:55:04 2015 +0000

    Enforce 80 char line limit in README.md

commit 0dbd7aae54ccf8f7310bb4d1b937ffe2c5f2d703
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 16 20:49:19 2015 +0000

    Restore correct version of README (oops).

commit 7fbffc873c5d96727e31371f1d5ee7a15dd979b2
Author: olly <olly@google.com>
Date:   Wed Dec 16 09:50:53 2015 -0800

    Expose control over decoder selection.
    
    This allows implementation and injection of custom MediaCodecSelector
    instances. By injecting a custom selector, it's possible for applications
    to exert more control over which decoder(s) they instantiate. For example,
    applications can force use of a software decoder.
    
    GitHub Issue #938
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110369810

commit 8d6c4b8eb5d122b80d325e01fa99dfe817b81ee0
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 15 02:07:51 2015 -0800

    Only allow one input buffer to be dequeued at a time.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110238340

commit 3a958ed522230053964829febaa282195cc260c6
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 15 00:05:07 2015 -0800

    Only return true from isReady after rendering.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110231626

commit f16b8baf75df49674942b161eb0a20f9dbd6aa0f
Author: eguven <eguven@google.com>
Date:   Mon Dec 14 08:15:23 2015 -0800

    ExtractorInput new skip methods to make skip methods analogous to the three read methods.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110155932

commit 009b454b6997ebd774fc7df8750f1d88e2c1939f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 16 20:33:50 2015 +0000

    Add InputStream to byte[] method to Util.

commit 7f8ddeac39269744c720104e93deea668ee4bcf6
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 16 20:33:04 2015 +0000

    Added  little endian methods to ParsableByteArray.

commit 50d5cbea70bc05876e4af9a52a5c8febe130c5aa
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 16 19:57:14 2015 +0000

    Don't treat network_PID as program_map_PID.
    
    Issue: #1068
    Issue: #1001

commit cbb2cfbf81fc90d981040bb7188d7914df81a354
Merge: 558ae15 7fce590
Author: ojw28 <olly@google.com>
Date:   Mon Dec 14 14:53:39 2015 +0000

    Merge pull request #1057 from emakar/dev
    
    blacklisted broken mp3 decoder on api lower than 20

commit 7fce590db2ed83456b287e090f14326145343c0e
Author: yauhen <yauhen@yandex-team.ru>
Date:   Mon Dec 14 17:50:54 2015 +0300

    blacklisted broken mp3 decoder on api lower than 20

commit 558ae15a77a7c6b76f1595e0ae09e18cfe58b58a
Merge: a1d5626 d15da1f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 14 10:41:40 2015 +0000

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit a1d5626fe70baed961644a41fc34f23fdc75749f
Author: eguven <eguven@google.com>
Date:   Mon Dec 14 01:10:18 2015 -0800

    Fixed DefaultExtractorInput.read(...) to allow to read bytes in the peek buffer
    when the dataSource reaches to the end.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110131793

commit 80bd91e636734adea426ff87526f1fa7ef21a5a1
Author: aquilescanta <aquilescanta@google.com>
Date:   Fri Dec 11 09:53:27 2015 -0800

    Add "Webvtt embedded in MP4" support
    
    Issue: #689
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=110003312

commit 63dc769bffda4422a4f3f516cfd0eb4d4a76992f
Author: andrewlewis <andrewlewis@google.com>
Date:   Fri Dec 11 07:34:23 2015 -0800

    Improve seeking in MP3 files with XING headers.
    
    Fix behavior of getTimeUs when seeking after the last entry in the table of
    contents. Round correctly in getPosition, clipping to the stream duration based
    on the input length (if known), falling back to the stream size from the header.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109993852

commit cd1b991c48c06191a352029faa109da3666dc9e0
Author: aptly-io <fm@aptly.io>
Date:   Sat Dec 12 21:09:43 2015 +0100

    Allow multiple identical but intermittent spans
    
    Multiple identical TTML fontStyles or fontWeights or textDecorations
    on the content for a specific moment were rendered as if there's only
    one decoration (span).
    That's because SpannableStringBuilder.setSpan(span, start, end, flag)
    found an earlier set span (the static allocated span's reference
    is the same each time) and only refreshed this first span's start and
    end values instead of adding a new span at its (new) different range.
    This patch removes the static data members;
    this makes the newly allocated span objects distinguishable.
    A correct implementation is favoured over worries about memory
    consumption.

commit 36ea0f8acd5c032234e19f72efc0bc7057cf33b9
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Dec 10 09:33:48 2015 -0800

    Fix Seeker.getTimeUs for positions before the first frame.
    
    Issue: #1038
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109906628

commit f37fcddfb02664fc102a5c4146f9a87954bec43c
Author: olly <olly@google.com>
Date:   Thu Dec 10 06:31:28 2015 -0800

    Tweak DashTest VP9 constants.
    
    This is a no-op change that just makes the definitions consistent
    with the H264 ones, for general neatness/consistency reasons.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109892547

commit 0b0baa28be92ddc96128ba793d2f96f2c9e12cfc
Author: anjalibh <anjalibh@google.com>
Date:   Wed Dec 9 17:46:07 2015 -0800

    Expose and support colorspaces in LibVpx.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109851975

commit e487fe6fa7e230174740b7e894034b64c491b9a6
Author: anjalibh <anjalibh@google.com>
Date:   Wed Dec 9 14:23:36 2015 -0800

    Allow custom VPX output buffer renderers.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109832096

commit d15da1ff73e8d98bb21c708c9923ec2adfd5eefb
Merge: 38148b3 d753378
Author: ojw28 <olly@google.com>
Date:   Mon Dec 14 09:57:18 2015 +0000

    Merge pull request #1055 from aptly-io/fix_multi_stylespan_per_ttml_cue
    
    Allow multiple identical but intermittent spans

commit d753378b2f5111bd715968530f2cf552015e2351
Author: aptly-io <fm@aptly.io>
Date:   Sat Dec 12 21:09:43 2015 +0100

    Allow multiple identical but intermittent spans
    
    Multiple identical TTML fontStyles or fontWeights or textDecorations
    on the content for a specific moment were rendered as if there's only
    one decoration (span).
    That's because SpannableStringBuilder.setSpan(span, start, end, flag)
    found an earlier set span (the static allocated span's reference
    is the same each time) and only refreshed this first span's start and
    end values instead of adding a new span at its (new) different range.
    This patch removes the static data members;
    this makes the newly allocated span objects distinguishable.
    A correct implementation is favoured over worries about memory
    consumption.

commit 38148b303fe5df9e646fba1aba818761df297f9f
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Dec 10 09:33:48 2015 -0800

    Fix Seeker.getTimeUs for positions before the first frame.
    
    Issue: #1038
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109906628

commit 99b34a1287fe55fd6ddcc2302793ade6bfce6d30
Author: olly <olly@google.com>
Date:   Thu Dec 10 06:31:28 2015 -0800

    Tweak DashTest VP9 constants.
    
    This is a no-op change that just makes the definitions consistent
    with the H264 ones, for general neatness/consistency reasons.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109892547

commit 3f5b475035fc99949ae3b6122c7b5b70f88b9678
Author: anjalibh <anjalibh@google.com>
Date:   Wed Dec 9 17:46:07 2015 -0800

    Expose and support colorspaces in LibVpx.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109851975

commit c41f3ea75e7ed07c873f4eb086189cd2e77c56e8
Author: anjalibh <anjalibh@google.com>
Date:   Wed Dec 9 14:23:36 2015 -0800

    Allow custom VPX output buffer renderers.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109832096

commit 7bc341f385551974354f7b3d07cded7bdbb0d720
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:16:27 2015 +0000

    Update README.md

commit 8a839fcf950258dd27375b2d187e25b036958ee2
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:13:27 2015 +0000

    Update README.md

commit 4ff5b1f06b5f9738c5d3c3b66e4a385f3a37f960
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:12:16 2015 +0000

    Update README.md

commit f2f3f01d61585f356ae3496127b40b69ca06deac
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:10:30 2015 +0000

    Update README.md

commit 748e5f301308b40e4cc55ca36af0ac4629b0418e
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:08:39 2015 +0000

    Update README.md

commit 247ac80b52387f0b5f78d69689aa1a14a5475639
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 18:06:46 2015 +0000

    Update README.md

commit f926d6a67ec7c844627b66caa9724089dd8dabbf
Merge: 345e4ec f8b9357
Author: ojw28 <olly@google.com>
Date:   Thu Dec 10 17:50:12 2015 +0000

    Merge pull request #1044 from ryanseys/dev
    
    Clean up README.md

commit f8b935795546e46d530d45c6ce0968ef37ae7318
Author: Ryan Seys <ryan@ryanseys.com>
Date:   Thu Dec 10 09:47:03 2015 -0800

    Clean up README.md
    
    - Remove redundant Readme in title
    - Remove unnecessary Description header
    - Move installation steps to immediately follow description
    - Reword some parts for clarification

commit 345e4ec74e81c4413022d5952017e9e71f3c6af6
Author: olly <olly@google.com>
Date:   Tue Dec 8 09:57:11 2015 -0800

    Bump version to 1.5.3.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109698010

commit bdc7633f5a26893aed1e7c0e3b3643b77888abe3
Author: Oliver Woodman <olly@google.com>
Date:   Tue Dec 8 17:17:30 2015 +0000

    Cleanup in TsExtractor.

commit 84307eff507fa428662fda660b4d6dd512984c77
Author: olly <olly@google.com>
Date:   Tue Dec 8 04:16:26 2015 -0800

    Document ChunkSampleSource constructors.
    
    Issue: #1030
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109674800

commit d7f40be3852330b0352b444ec7e381ef96e19086
Author: olly <olly@google.com>
Date:   Tue Dec 8 02:10:00 2015 -0800

    Update release notes.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109667763

commit c0b19ed72b664266fc48a428179044e54cd42563
Merge: fb7ddb7 f752a02
Author: ojw28 <olly@google.com>
Date:   Tue Dec 8 11:39:12 2015 +0000

    Merge pull request #1007 from alex3d/large-pmt
    
    Fixed large PMT packet parsing

commit fb7ddb722c7d377d54817caebb53d014d679b283
Author: olly <olly@google.com>
Date:   Mon Dec 7 09:59:33 2015 -0800

    Minor tweaks to AudioTrack playback params logic.
    
    - Use allowDefaults to fix crash if params are passed without
      the speed being explicitly set.
    - Allow null to be passed to clear previously set params.
    - Clarify in doc that the passed params shouldn't be modified
      after they're passed.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109591580

commit 00f84fc85fd21c4910344b19be3f98bb0b49b943
Author: vigneshv <vigneshv@google.com>
Date:   Mon Dec 7 03:00:52 2015 -0800

    Move APP_PLATFORM to Application.mk
    
    Fixes github Issue #944
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109563981

commit e4cf93d04cd0288a189acefe66f8aaabbe72a4b7
Author: vigneshv <vigneshv@google.com>
Date:   Mon Dec 7 01:30:20 2015 -0800

    Fix libyuv clone URL
    
    Fixes Github issue #1015
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109559497

commit 42984653fb7f470b37862816c6baa4c493119be3
Author: vigneshv <vigneshv@google.com>
Date:   Mon Dec 7 01:22:46 2015 -0800

    Update libyuv URL in vp9 extension instructions
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109559103

commit 20e3ca73eccd3b182fa377bd25ef478cf07ba501
Author: andrewlewis <andrewlewis@google.com>
Date:   Thu Dec 3 09:59:02 2015 -0800

    Don't use CIPMP3Decoder.
    
    Issue: #1000
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109318738

commit 46481fabccf3cbfe3fccde310e9e4ac2dc4a58b4
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 1 09:31:40 2015 -0800

    Mark AudioTrackUtilV23 overriding methods with @Override.
    
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109093558

commit c685e279728f0504f4bac81e616091c1a4c1cc07
Author: andrewlewis <andrewlewis@google.com>
Date:   Tue Dec 1 00:17:51 2015 -0800

    Fix {Opus,Vpx}DecoderWrapper flush() buffer handling.
    
    Currently, input/output buffers can 'leak' if they are dequeued then the decoder
    is flush()ed. This happens if an input buffer is dequeued then a discontinuity
    is read, or an output buffer is dequeued and is early. If this happens several
    times, no more buffers are available.
    
    This change makes flush() work like MediaCodec: it returns all dequeued
    input/output buffers to the codec. Keeping the behavior in line with MediaCodec
    might make it easier to factor out a common decoder interface in the future.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=109054178

commit 1855a5a97d5fb6e6733d390148923a4c559f6546
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Nov 30 10:05:56 2015 -0800

    Fixed FFWD/RWD keys support in DemoPlayer
    
    Overrided the dispatchKeyEvent of MediaController to allow FFWD and RWD through
    remote control keys.
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=108989028

commit 6570ef0e483cf6bc2908c0e4b4ff7316a9453f8e
Author: aquilescanta <aquilescanta@google.com>
Date:   Mon Nov 30 02:20:24 2015 -0800

    Add support for AudioTrack pitch/speed alteration on API 23.
    
    Issue #26
    -------------
    Created by MOE: https://github.com/google/moe
    MOE_MIGRATED_REVID=108958826

commit f752a023c81ef2b19b389f5d6b616724233ad83d
Author: alex3d <alexthreed@gmail.com>
Date:   Mon Nov 30 19:26:20 2015 +0300

    Fixed large (>ts packet) PMT parsing

commit 33506adab5732e46ef90e5fa650707862e5e8a36
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Mon Nov 30 16:01:35 2015 +0000

    Remove executable bit from some test assets.

commit daaebd7d72c40ad474278e6f701830f8995f3357
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 18:10:47 2015 +0000

    Remove file that shouldn't be checked in

commit 9925f8f9b83f432d057ca2136f42007999818c70
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 18:09:56 2015 +0000

    Add proguard config for VP9 extension

commit a6bfe02d24bba6dade58a7a996ddb0959307b8bc
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 16:38:30 2015 +0000

    Add additional Widevine samples + improve errors.
    
    * Add additional Widevine samples.
    * Improve error messaging in demo app around decoders.
    * Display toasts for playback errors related to missing insecure
      decoders, missing secure decoders, decoder instantiation failure
      and decoder query failure.
    * Remove checks from SampleChooserActivity, since the above largely
      covers off this problem.

commit c2df814b5890826d667eae73e5c7f05ca8614414
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 16:03:37 2015 +0000

    Add special WebvttExtractor for HLS.
    
    This is the main component required to enable WebVTT subtitles in HLS.
    It passes through each WebVTT file as a sample, and derives the correct,
    adjusted timestamp for each of them on the way through.
    
    Not yet wired up because we need to properly share the same
    PtsTimestampAdjuster everywhere, and also stop instantiating new instances
    of the adjuster. The adjuster will also need to correctly handle
    discontinuities, since we'll no longer be creating new instances of it.
    
    Issue: #151

commit 1a9b2be5510bd9698c90aeaaa28a9e1ba965c0a6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 16:02:12 2015 +0000

    WebVTT styling.
    
    - parse webvtt cue
    - remove all tags from string (supported or not)
    - apply spans for b, i and u
    - honor class names in tags to properly parse the cue but do not apply styles for them

commit cdb6ac40738fc0d1b265840b3e8fc634e00c40d6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 15:59:25 2015 +0000

    Added a isLocalFileUrlOrPath(Uri) method to remove manual checks
    
    Also replaced the manual checks with a call to this method

commit c667feca4b156ef90b31fea87bd2c55985cb8c4e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 15:58:11 2015 +0000

    Get the physical display resolution if possible.
    
    Issue: #800

commit c62e535cf047c43a122a11c675413d7efa920a0b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 15:57:20 2015 +0000

    Make HLS behind-live-window behavior consistent.
    
    - Propagate BehindLiveWindowException if we fall off the back
      of an HLS live stream.
    - Consolidate seekPositionUs and playbackPositionUs into a
      single parameter.
    
    Issue: #765

commit 81040e8d231748b1e22506dc74f396c7443c6421
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 27 15:56:46 2015 +0000

    Remove stray author tag

commit 4bb8bea9528a803a201b809e8bd4abe3f0b460e8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:07:40 2015 +0000

    Subtitle renditions can be represented by Variant instances.
    
    This will make it easier to use HlsChunkSource with WebVTT HLS
    media playlists.

commit 0236831e48cb64989f9dd8498b39c3be850362c9
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:07:09 2015 +0000

    Remove author tags.

commit 761b8137eb9e7b222c21cdbe11496d24118580d9
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:05:59 2015 +0000

    Use API level 23 constants.

commit 72f093c4f6d66cea021756e1cbe931b52f55a79e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:05:20 2015 +0000

    WebVTT parser improvements.
    
    * Split findNextCueHeader and validateWebVttHeader into static methods.
      This is a step toward WebVTT in HLS, where we'll need to re-use these
      to peek at the top of the WebVTT file (they'll be moved into a util
      class).
    * Made parser robust against bad cue headers + added a test.
    * Removed spurious looking assertion in WebvttSubtitle.

commit 963e604ffd1cab42112121901b4908ed30bdcc25
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:03:57 2015 +0000

    Misc cleanup.
    
    - Remove some unnecessary condition checking.
    - Rename variable to a better name.

commit dc94e44b1ffc056261ffe012491d8c079e2a359f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:03:11 2015 +0000

    Make output mode a tri-state flag instead of binary
    
    This CL fixes the case when a surface is attached *after* playback
    has started.

commit 61fb0c558ef181138705a55e33261af0b30f9d35
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:02:19 2015 +0000

    Fixed demo player permissions bug
    
    API 23 requires the permissions to be granted at runtime.
    This CL submits a solution for EXTERNAL_STORAGE, since it
    is the only dangerous privilege required so far.

commit 1fc32d56c8b0583384e9909a00fc137d527883b8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:01:21 2015 +0000

    check maximum consecutively dropped frames in video tests

commit ddaa9092ec6cda22145f0f562e4463f01f312175
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 17:00:18 2015 +0000

    Parse the sequence number at discontinuities.
    
    This is required to match up segments in one playlist (e.g. VTT)
    to those in another (e.g. Audio/Video).

commit 6f62b499c505fbf33bfa15dd3509922166e29611
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:50:30 2015 +0000

    Merge seek/playback positions in ChunkSource interface.

commit f11a204b4abb6ed56fc6dd7fc8d15af977b83604
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:49:25 2015 +0000

    Remove caption parser strict modes.
    
    They don't seem particularly useful; they don't technically force
    strict compliance, but rather just catch a few token things in
    each case. Furthermore, for playback, probably the right thing to
    do is to always turn strict mode off.

commit 4fbe4fc7d56875620f757ba952d553cd120a3b1e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:48:45 2015 +0000

    Throw correct exception.

commit 042bd2ff826d3dee65aab014fe4b5a8cc1d06051
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:47:52 2015 +0000

    Clean up WebvttParser somewhat.

commit 7e2fffe74dd7ac77246c6ebc0dd63ef3dc60b16e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:47:05 2015 +0000

    Make sure we use the correct mimeType with DRM initialization data.
    
    We were previously using the container format of the media being
    played as the mimeType generating key requests, but this is not
    always correct. As an example, where a manifest contains webm streams
    but specifies initialization data using cenc:pssh elements in the
    manifest, the media has a webm mimeType, but the DRM initialization
    data has an mp4 mimeType.

commit ad7237b5d02339075cd9d58d8e57e35439fcd8e2
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:45:37 2015 +0000

    Handle E-AC-3 audio in HLS.

commit 9fd575e1beefc3787b25e7f1ef91a0a346a0a146
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:44:43 2015 +0000

    Allow Representations to have custom cache keys.

commit 632ccc6c2070d2186d323951607699dc0c236c52
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:43:56 2015 +0000

    Simplify passthrough playback rate calculation.
    
    This change also fixes pre-M DTS HD passthrough playback on NVIDIA Shield.

commit b8e7e1077ec2635de84428edf51f5df29e45f9ea
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 25 16:42:12 2015 +0000

    Fix bad pixel w:h ratio calculation in H262 reader.
    
    It appears the spec calculation gives the h:w pixel ratio, where-as
    we want w:h. It's pretty easy to convince oneself that this way round
    is correct. Consider a video that's 100px by 100px, and setting
    aspectRatioCode=3 to achieve this. The pixelWidthHeightRatio needs to
    be 16/9 and not 9/16 :).
    
    Issue: #965

commit 18ae955fea6c8d7f978b236292d00a9029547be0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:35:17 2015 +0000

    Update release notes.

commit 57ee90a96c62d25721b77ec1488559c783604963
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:29:42 2015 +0000

    Clean up AudioTrack.

commit a4f1e3ce53f0bf83d3ebc69a837d5ed4345dc69a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:27:53 2015 +0000

    Don't re-buffer when AudioTrack underruns occur.

commit 80d699920c0d2caa5112f901ccbdcee870ef54c0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:21:03 2015 +0000

    If we have an output buffer, we're ready.

commit c92bc3e6c287871a7436a46863997611ba477ef6
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:18:43 2015 +0000

    Enhance DASH playback tests

commit e65f7264583d3ccc49143b6e442381a4ead91261
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:06:43 2015 +0000

    Allow video format filtering without viewport constraint.

commit 80e829d7d12a41f80e40a06845d31955d190b47f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:03:10 2015 +0000

    Fix some warnings.

commit 8234a251103294589bb4fd8c876d27a91eb2bdc5
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 16:01:28 2015 +0000

    Add H262 support for TS.
    
    Built on top of https://github.com/google/ExoPlayer/pull/915.

commit b1e4283058e1ec47fe9555dacbdb23b6e0f60063
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:55:57 2015 +0000

    Some cleanup to TS H264/H265 readers.

commit d96fe37c05693a0682d466f435ac8b9d8eb362f6
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:52:58 2015 +0000

    Don't use getClass().getSimpleName() where it's pointless to do so

commit bcbfe9f7083e98e7c1784d38e585dc35c59b3228
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:52:16 2015 +0000

    Add AMR-NB and AMR-WB support to ExoPlayer

commit b293cf2a76b6181fd8c4261c74d5a705f24eb739
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:50:20 2015 +0000

    Parse QuickTime variant audio sample entries.
    
    Issue: #958

commit 830229c8218dc10001cf521a9d9dbe6360d9f6cf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:45:42 2015 +0000

    Fix Libopus renderer's isReady to take into account outputBuffer avail.

commit f8d2229f522fb607274476ad7540e2e8bae75e27
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:43:48 2015 +0000

    Fix build break

commit a3f894b86ba85503da361bc3db97e1c7d25aa32f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:43:24 2015 +0000

    Add support for extracting E-AC-3 in Matroska files.

commit 5de7638f74704b980a2c0f565ade86d17eadb633
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:42:40 2015 +0000

    Handle laggy manifest servers.  Don't reprocess discarded manifests twice.

commit b27dc9b7dc10db03db4410586bc642c6b0fbc34e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:41:30 2015 +0000

    Clean up E-AC-3 naming.

commit 269757cb3ec162b0a6316cc86bd8c9dc783afce0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:38:54 2015 +0000

    Clean up MP4/FMP4 shouldParse methods.

commit 3cbb1fa1b99ba86d32c6a9ae9ce364ea9abdccf7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 17 15:32:25 2015 +0000

    Tweak error string

commit be95968fe293f2eb8d8e47ef2e5ed96ae31b2c74
Merge: a0b52bc 1f309f7
Author: ojw28 <olly@google.com>
Date:   Fri Nov 13 14:04:32 2015 +0000

    Merge pull request #957 from Bastian35022/dev
    
     Check for valid periods in DASH MPD after parsing.

commit 1f309f7edf910501dccbf85101280b94d01b8ba1
Author: ebascel <bastian.cellarius@ericsson.com>
Date:   Fri Nov 13 14:44:50 2015 +0100

    Check for valid periods in DASH MPD after parsing.

commit a0b52bc136ae153615ebf1caffd4b5f2caafc537
Merge: a679e39 0089987
Author: ojw28 <olly@google.com>
Date:   Thu Nov 5 03:11:06 2015 +0000

    Merge pull request #919 from castlabs/feature/smooth_streaming_mime_types
    
    Added missing MimeTypes to Smooth Streaming manifest parser

commit 00899870551e69ca5bb69915ad23782f14e533a6
Author: Miquel Beltran <miquel.beltran@castlabs.com>
Date:   Tue Nov 3 16:51:05 2015 +0100

    Added missing MimeTypes to Smooth Streaming manifest parser

commit a679e39ab76a4d471bca4be3e177b2edfa182fe6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Oct 30 12:02:18 2015 +0000

    Limit max line length to 100 chars.

commit 2cb6db2b42939f052e428b00a530b2929a3f073f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Oct 30 11:58:36 2015 +0000

    Update Widevine VP9 samples

commit c53495e7e2c59e1a6a9c26d957019143cf5f56bd
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Thu Oct 29 16:37:48 2015 +0000

    Check all descriptors for a registration_descriptor.
    
    Issue: #898

commit b64986ce8275dc3c723bb15bf9f00a808ab19b16
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Thu Oct 29 16:28:00 2015 +0000

    Blacklist bad decoders

commit ffc925f19464cdd50e58cf5d548a5fe89ce0abd9
Merge: b922416 d49d3e2
Author: ojw28 <olly@google.com>
Date:   Wed Oct 28 22:04:32 2015 +0000

    Merge pull request #885 from RikHeijdens/parse-hls-name-label
    
    Parse HLS NAME label from the MasterPlaylist

commit d49d3e2cd3f92d87737eed9b5c4a35224a0bca6f
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Oct 28 16:57:29 2015 -0400

    Changed formatName to something more concise
    
    And fixed the indentation

commit 4a77d1a44e6eb0883625fda1575a831a5fec8b2b
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Oct 28 11:14:05 2015 -0400

    Remove unnecessary getter

commit 022c1ad6ddf1b5b968772811105e20c591476f4c
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Oct 28 11:10:58 2015 -0400

    Store HLS trackname in the Variant class instead of Format class

commit 1c1f5af5d2830932c770a712d7a608369f706ddf
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Wed Oct 28 11:02:44 2015 -0400

    Changed the use of the name variable

commit b9224160a36a911095d77089c4d4f9d5d538bb20
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 28 13:42:40 2015 +0000

    Use equals rather than == for string equality

commit 4237e3d391e3e265944544f6408b545bd5f21f5e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 21:06:38 2015 +0000

    Cleanup following #884 II

commit 02cc495f1c10e3302e76b98454bfa325106c3851
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 21:03:16 2015 +0000

    Cleanup following #884

commit e252dddeb010a81da637e4c3dc814e234561daa6
Merge: f16ba3b f4b07ab
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 20:38:10 2015 +0000

    Merge branch 'RikHeijdens-mediaformat-id-dash' into dev

commit f4b07ab1470ad7b81071941ff1638fa36b1cbacb
Merge: f16ba3b ec65fe9
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 20:37:54 2015 +0000

    Resolve conflicts

commit f16ba3baacdc9f7a4fd2a2720eeb78df68f9764b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 20:18:28 2015 +0000

    Update release notes

commit cda5b2035344ba3ce3191f8d1e8e7ef0c3f5712f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 20:07:54 2015 +0000

    Bump version to 1.5.2

commit 62a89ae90cf30f98f01fed18cda55ef64f01c853
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 18:57:26 2015 +0000

    tweak javadoc

commit dd4d4e8f7ec298aeb36776043507db3515a682b7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 18:36:24 2015 +0000

    Add libopus/libvpx availability checks

commit 4422e8a0155642a4708e1f50b1fb2c340c78f56d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 18:23:00 2015 +0000

    Further cleanup to FLV extractor

commit f91ea9039dae92793fc62caa4080d4a58a947771
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 27 18:20:53 2015 +0000

    Read AC-3 and HEVC signaled by private registration_descriptor.
    
    Issue: #898

commit 6fb5052d2fb6208fd56d5ade55a5f45d0bfa34d9
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:53:29 2015 +0000

    Fix vp9 samples

commit 22a302c28e9f3bdc990f19a258323b9c9a94d00f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:52:36 2015 +0000

    Fix widevine samples

commit 195c0c8884be83a03f5a8ac1376f2201ff0dcc13
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:34:29 2015 +0000

    Fix parsing of multi-channel AAC audio specific config in MP4 and ADTS.
    
    Previously, when spectral band replication (SBR) or parametric
    stereo (PS) was in use in an MPEG-4 stream, the channel configuration
    chosen was likely incorrect. The channel configuration was *always*
    incorrect for 7.1 audio (gave 7 channels instead of 8).

commit 9246fbbe7d838c02462408636d02a6fd1c2763a7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:33:53 2015 +0000

    Add exception type for manifest load errors.

commit f3113e7055bb2474d52f192a8fbacf752d35de22
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:32:49 2015 +0000

    Use MediaCodecUtil.IsSizeAndRateSupportedV21 where available.

commit a74fd17e925ae4146aade446d667ca62cf4c1923
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:31:09 2015 +0000

    Handle curle braces in SystemID UUID.
    
    Issue: #863

commit 21c1b8ca0644d3abf63b2f0141974952c5c1e0e3
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:29:10 2015 +0000

    Add basic handling for edit lists in MP4 streams.
    
    Issue: #874

commit b03278f2bf5c0eb114730ffc63bf172560915ecb
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:28:10 2015 +0000

    Don't assume representations are video in first two DashChunkSource constructors.

commit 4d9dd3f6e64be9379c3e10750345c02a2e421fb5
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:26:05 2015 +0000

    Remove spurious blank line

commit 941ca3f3045eea47858676db895de67af4f05075
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:25:46 2015 +0000

    Add readShort to ParsableByteArray

commit 0de2d3a863efac93399273ce7d317f33aba8e227
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:25:02 2015 +0000

    Add VP9 playback tests

commit b766253116d687e15c6052e3ef25d1b419933973
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:23:06 2015 +0000

    m

commit 14c190310c8db1c43eb349c2b6e9f4125b217421
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:19:10 2015 +0000

    Fix broken Javadoc

commit c59fc4756501496ffcdc45c0c4725aaae2176f7a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:18:53 2015 +0000

    Throw ParserException from parsers when a parse exception occurs.

commit 13aaa5a5db234657ff2e136d8505d70bd4c27134
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:16:56 2015 +0000

    Use C.MICROS_PER_SECOND more consistently.

commit daa583591520057148b3ad0b4ba90af26b996053
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:15:42 2015 +0000

    Timestamp HEVC samples based on the first NALU's timestamp.
    
    Issue: #893

commit c0a81e1138078d9539332b62311ed35f4cd18455
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:11:39 2015 +0000

    Update Widevine test streams.

commit c0f0cbcb7a645dc59158b499d81ed22ec4fa56d5
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 15:02:32 2015 +0000

    Move to target API level 23

commit d8b1f9efccc09597fb426e39c11eba51aa3c028f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 14:53:27 2015 +0000

    Add API to get the version of native decoders
    
    Add API to get the version of underlying libvpx and libopus
    decoders. Also update the demo app to show the version in the UI.

commit ec65fe952c292495c9837b9ec88b78b901e8fd86
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Mon Oct 26 09:59:19 2015 -0400

    Fixed code indentation

commit bc3125c5d26c68c5724de8c82063653e9893a597
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Mon Oct 26 09:59:05 2015 -0400

    Fixed MediaFormatTests

commit 02d42753ec99775fc0a4f1c528f27295f83f6677
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 11:56:25 2015 +0000

    A couple of final tweaks

commit cdad156bae4354811ddac42b053998a3fbe0b510
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 11:52:23 2015 +0000

    Further tweaks to ScriptTagPayloadReader

commit dff17f244c59add82e78e46a772ad0393f63a37f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 11:14:34 2015 +0000

    Some probably correct tweaks to ScriptTagPayloadReader

commit 950cc70003d7633d69afb2e2d4d0859c9b1fa0c6
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 10:44:19 2015 +0000

    Purely stylistic changes to FLV extractor

commit fb75b65a70672536ebeaf2cc2e851934872f0367
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 26 10:24:30 2015 +0000

    Fix compile error.

commit f133524c2fc9da17ac36ff274b25df5e9a2405f7
Merge: 0545c58 3e36f52
Author: ojw28 <olly@google.com>
Date:   Mon Oct 26 10:17:53 2015 +0000

    Merge pull request #828 from jeoliva/flv-experiment
    
    FLV (H.264 + AAC) support

commit 282a3fe818472c565c294888856f950bc1a911db
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Fri Oct 23 09:56:00 2015 -0400

    Converted trackId into String

commit 3e36f529f8fe8ef4c3550dc00f16684c532d0da0
Author: joli <jeoliva@gmail.com>
Date:   Tue Sep 29 16:20:41 2015 +0200

    FLV Support - Added Video Reader and parsing improvements

commit 1b469f422f4599b9a5aca779d4c41f23cb4dcef8
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 15:52:35 2015 -0400

    Synced with upstream

commit 1d31521710738aa4a6577f6d5ed4d2db8fdf554a
Merge: 1cefde0 0545c58
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 15:49:45 2015 -0400

    Merge branch 'dev' of github.com:/google/ExoPlayer into mediaformat-id-dash
    
    Syncing my fork

commit 1cefde0d0a9f4dc4214fc56f37c168523abca545
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 15:20:44 2015 -0400

    Deleted unnecessary file used for testing

commit 10f3be6d509428c4bc9f4a1610dda0271dbdcdd8
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 15:01:44 2015 -0400

    Hls NAME parsing changes
    
    -   NAME is optionial now in the Hls Manifest
    -   Use the id field in Format to store the NAME instead of
        a field in Variant to mimic DASH's behaviour
        (see the DASH Id PR, which is not merged yet at this time).

commit eb282639c59e9c5ba5390bb6d5403a822bd35cbd
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 14:51:31 2015 -0400

    Parse NAME label from HLS Master Playlist
    
    The HlsPlaylistParser now parses the "NAME" property
    from the MasterHlsPlaylist and saves it in the Variant

commit 42351d31273e18b288197bebbeb6a18587dc3ae8
Author: Rik Heijdens <rik@jwplayer.com>
Date:   Tue Oct 20 13:59:10 2015 -0400

    Added id property to MediaFormat
    
    Added the property 'id' to the MediaFormat class
     which serves as an identifier for the track.
    
    DASH Representations will have the "id's" from their
    Media Presentation Description mapped to the id property
     in the MediaFormat class that will represent the track.
    
    We needed this for an use case where we wanted to read the 'id'
    value from the DASH representation and present it to the user
    in order for the user to select the right track.

commit 0545c58dee9380ead1d483b99e16d8cc041afef5
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 14 12:12:03 2015 +0100

    Bump version to 1.5.1

commit b89339f5f74e32ee5d2ad278f75fb40435a6dc7f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 14 12:01:30 2015 +0100

    Update release notes

commit 6d44ec560eb5d9ac38644d0ecb6a942f8f9a58b3
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 14 11:51:16 2015 +0100

    Skip to the sample/auxiliary data offset in fragmented MP4 streams.
    
    The sample data position is the sum of the data offset and the base data offset.
    The base data offset is either specified in the stream, or defaults to the first
    byte position in the moof box. (We only support one traf per moof currently, so
    the offset does not need to be assigned for later track fragments.) The data
    position can optionally be offset by a data position read from the trun.
    
    The auxiliary information offset is calculated in the same way, but using an
    offset read from the saio box.
    
    Issue: #837
    Issue: #861

commit aa647745a28138b744a7536491f8960f05d1460f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 17:59:14 2015 +0100

    No-op re-orderings.

commit 0b1c8897bc4e589ce6a96a353abc8782fd535707
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 17:58:01 2015 +0100

    Bump bintray release version.

commit 20e05a31b2a71e8cfe22cde4bcf0fe5ea073bb0b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 17:57:10 2015 +0100

    Do TTML color parsing directly in Exoplayer.
    
    - Added TtmlColorParser to workaround JellyBean issues with named colors.
    - Support rgb and rgba expressions as well.

commit 414ad053141cc697cb2d932d277d345e9a51121b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:34:17 2015 +0100

    Fix package for vp9opus demo.

commit b7d242e2c10911dc6288248990ca39ecb199287a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:32:49 2015 +0100

    Add missing Eclipse files for playback tests.

commit bcb9f8282df7b05a66329e5115511c67f1651d2d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:32:10 2015 +0100

    Enable SmoothFrameTimeHelper by default.
    
    Context:
    - Currently, playback is significantly more juddery with it disabled,
      particularly on AndroidTV.
    - We should be able to do the "best" job of this internally, so injection
      doesn't buy anything useful. If someone has a better implementation for
      adjusting the frame release, they should improve the core library.

commit 9b4e9723e5f459ac86e621ae01a70929b4aba16e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:28:14 2015 +0100

    Don't use SEC VP8 decoder on Galaxy S3s.
    
    The only Samsung devices with names starting "d2" that we're aware of
    are Galaxy S3 variants, and also one Samsung Galaxy Pocket Neo d2aio
    SAMSUNG-SGH-I747Z. This change speculatively includes that device too because
    its name is very similar to SAMSUNG-SGH-I747 which is known to be affected.
    
    Issue: #548

commit c4235d0e8dfff9c7cb930645cec19997390dbb1c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:26:58 2015 +0100

    Ignore tfdt boxes for SmoothStreaming playbacks.
    
    Issue #838

commit 79055066813123c939c29e5a5e223a5ff043b91e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:25:58 2015 +0100

    On Sony Bravia devices check for 4k panel.
    
    Documentation: https://developer.sony.com/develop/tvs/android-tv/design-guide/
    
    On API 23 we should also check Display.Mode (where supported).
    
    Issue: #800

commit 952bd4e73cf261be9baa6b251d59cfff3d455783
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:24:48 2015 +0100

    Don't calculate a maximum input size for H.264 on Sony 4k TV.
    
    Issue: #800

commit a764b359e80112f02bb3964a3936b62275ffd44d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:21:16 2015 +0100

    Add support for DTS passthrough on supporting devices before API 23.
    
    NVIDIA Shield before API 23 supports DTS passthrough, so this change inlines the
    constant value.

commit a5ebb49a1a1b2bda285f72d90b92f8fb99de17be
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:20:15 2015 +0100

    Set the maximum input size based on the sample table for MP4s.

commit 3682141ee1c43d967c53406165a874a4dfad33c7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:18:12 2015 +0100

    webm_extractor: Re-sync to next level 1 element on invalid data
    
    Try re-sync'ing to the next level 1 element when invalid data is found. This
    corrects the behavior for test case 4 in the mkv test suite.
    
    Partially Fixes Issue #631

commit ab489d35e96f6e09a4115d479f82d0b152c6d402
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:16:15 2015 +0100

    Don't pass keyboard escape key to media controller.
    
    This makes it possible to exit the player when using e.g. an Android TV with a
    keyboard.

commit bcb4ea4f703e667e910d8b4016ddab67d11af2eb
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:15:13 2015 +0100

    Allow launching of ExoPlayer demo app via adb shell.
    
    For example:
    adb shell am start -a com.google.android.exoplayer.demo.action.VIEW -d http://...

commit 6bf817f107ded1bc749d78dd599b6fd8e41d684e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 12 12:12:43 2015 +0100

    Workaround EOS propagation for all devices with RK decoder.
    
    As per the end of the related issue, it's likely that all devices
    running the affected API levels + decoder are affected by the same
    issue.
    
    Issue #464

commit 98426a782fff0279b89e3bfa81fbbbb3070fbf26
Merge: 8c53590 ee8a00b
Author: ojw28 <olly@google.com>
Date:   Mon Oct 12 12:03:31 2015 +0100

    Merge pull request #857 from IanDBird/dev-truehd
    
    Add support for TrueHD audio codec in WebMExtractor

commit 8c53590b9b26a8b86fea0c42f65956a539030d0a
Merge: 2d967a1 e933e2d
Author: ojw28 <olly@google.com>
Date:   Mon Oct 12 12:03:26 2015 +0100

    Merge pull request #858 from IanDBird/dev-mpeg2
    
    Add support for MPEG2 video codec in WebMExtractor

commit e933e2d49f31c1ecc5144d203e72e719c9200195
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Fri Oct 9 14:38:39 2015 +0100

    Add support for MPEG2 video codec in WebMExtractor

commit ee8a00b68ab1d032d700957efdecd0bcaf16d785
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Fri Oct 9 14:12:48 2015 +0100

    Add support for TrueHD audio codec in WebMExtractor

commit 2d967a1b6d1007302737b06f8a2fedc6bd2738a5
Merge: 5b81612 6a5cd68
Author: ojw28 <olly@google.com>
Date:   Fri Oct 9 12:40:33 2015 +0100

    Merge pull request #856 from IanDBird/dev
    
    Make MediaCodecUtil.getMediaCodecInfo public

commit 6a5cd6889258df6b9a08b770e2bf351a5bb30e18
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Fri Oct 9 12:33:01 2015 +0100

    Make MediaCodecUtil.getMediaCodecInfo public

commit 5b81612c3b63aa19262c1e87960d4d61477ba721
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 1 17:33:02 2015 +0100

    Tweak okhttp package name

commit 01597d02085f86661a1cf3e931a7ca859017e74d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:58:12 2015 +0100

    Fix markup

commit 851cde2e0e53eb342c72f68271145a2d8b7f3728
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:56:41 2015 +0100

    Update RELEASENOTES

commit ba6cb05e0a6acd5f550c7750bc18b39534d99cba
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:55:51 2015 +0100

    Update ReadMe files.

commit e1d6f8618bf3f7af80a925f4ac5919885d43ade2
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:51:45 2015 +0100

    Package restructuring

commit 19c7520e68ccaa5236344229de36ce2741690b2c
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:41:35 2015 +0100

    Better gradle package names

commit 0ff03e40bd5879c3b9d73ba9db1681d12fb1785f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:27:37 2015 +0100

    Okhttp extension - Update gradle build

commit af1ffeccc7933d3312a6066b6342b8b88746a254
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:24:45 2015 +0100

    OkHttp extension - Add eclipse project

commit 434a2733a3735315627569cceef3abf9950de9c1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 21:10:34 2015 +0100

    OkHttp extension modifications.
    
    1. Change package name (rm "datasource")
    2. Require injection of OkHttpClient through all constructors, and
       remove allowCrossProtocolRedirect/connectTimeout/readTimeout
       constructor arguments. The client should be configured with these
       prior to injection.
    3. Fix code style to be consistent with the project.
    4. Simplify call to get contentLength. I'm pretty sure okhttp returns
       the correct value when gzip is enabled, so there's no need to check
       this in the data source.
    5. Misc cleanups.

commit 2112bc24e33a153058326b88704908fb41343ad7
Merge: 62ce0ff 0df29a6
Author: ojw28 <olly@google.com>
Date:   Tue Sep 29 21:06:46 2015 +0100

    Merge pull request #735 from b95505017/okhttp_http_data_source
    
    Add an extension that provide DataSource using OkHttp

commit 8ddc73511e0129f73b09f76d8028753c9b1f67d6
Author: joli <jeoliva@gmail.com>
Date:   Tue Sep 29 03:30:57 2015 +0200

    FLV Support - Added Audio and Script Data readers

commit 62ce0ff00970083992241241fbdd0ed6c9de24b7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 11:40:59 2015 +0100

    Fix indentation.

commit d8934e27512f2a7ed7090a87285dad55a9842057
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 11:37:40 2015 +0100

    Make mapping from position to time more accurate in XING MP3 streams.
    
    This change keeps the proportion offset * 256 as a floating point value rather
    than rounding it before linear interpolation, which will increase precision
    slightly when seeking in streams with XING headers.
    
    In practice, this won't make much of a difference because precise seeking in VBR
    MP3s with XING headers seems not to be possible without reading the entire file,
    due to the fact that the (uneven) distribution of bits is represented by a fixed
    number of table of contents entries.

commit 15da18d900d9865d82897089ac36f117deaec284
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 29 11:36:26 2015 +0100

    Fix format selection bug.
    
    Issue: #825

commit 427cb34aca0b0252ed429961f1014550cf3399e0
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 20:56:28 2015 +0100

    Bump version to 1.5.0

commit dce74f42090642fb0a0dc0edbfd755b3a5813dfe
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 20:24:46 2015 +0100

    Add onDrmKeysLoaded back again (oops)

commit e96e6180463da64d5c7473bb062bd99a39004dad
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 20:23:45 2015 +0100

    Clean up expansion of sample buffers.
    
    - The old approach was technically incorrect, because the checks
    were "capacity < sampleSize" and hence neglected the fact that
    the buffer position may be greater than 0 (e.g. if the caller
    wants to prefix the sample with some additional data).
    
    - Also proactively throw an exception if the buffer is too small,
    rather than wait for the failure when we actually do the write.

commit 15c2f9c32871857a8665bd2b1badc2f1d287bc0d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:38:35 2015 +0100

    Explicitly set max input size for H264 decoders.
    
    This works around an issue where some devices, such as the Acer Iconia,
    don't allocate large enough input buffers for H264.
    
    Issue: #616
    Issue: #714

commit decb7f58c781d439bc4d5a2e4e55af7ee8dbfa71
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:36:28 2015 +0100

    Expose container track identifier via MediaFormat.
    
    Issue: #770

commit 979fd083b42e74af05aa8bbebaa0c5434c83cd43
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:34:19 2015 +0100

    Don't invoke adaptiveTrack with 0 or 1 representations.
    
    0 will crash. 1 is pointless.

commit e8895c8746487351ededbe0dd072f3fb31468c75
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:25:30 2015 +0100

    Fix AudioTrack EOS handling in ExoPlayer.

commit e035e4de7f12e5fb1124dbcca12d5a47a708d778
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:25:05 2015 +0100

    Let MediaController handle whatever keys it wants to handle.
    
    ....Except BACK and MENU, which only make sense if the the controller
    is visible.

commit 15052052eecdb8509a959962600f400d5e368486
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:24:35 2015 +0100

    Clean up TrackRenderer TODOs

commit b81ac8cdc2d223a7b35a27b53551eef90f84a174
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:24:13 2015 +0100

    Added robustness for chunk removal.
    
    Issue #812

commit 42416b82dbaacbb7381e66fb4baf035b0491fba9
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:22:54 2015 +0100

    Fixed issue in which DashChunkSource didn't make use of the most recent
    manifest.

commit c3e0d34aa1e6f81afea8dfe6a215d1ad2d4e4e42
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:22:12 2015 +0100

    Fixed int overflow issue with callbacks on very long-running streams.

commit e4e02f91891f1b6b944e2b7b5ade5ae06f47f913
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:20:27 2015 +0100

    Further improve WebVTT parser according to WebVTT spec

commit 71f542f7c2628a027df8ea0788dbb10e1efa6d32
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:16:26 2015 +0100

    If a parser really wants to throw a runtime exception, don't crash.

commit ee80be9217e9a18061f70f6bb4c4aff887defd65
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 12:15:53 2015 +0100

    Fix comment typo

commit e652019bb3eb2041218ecf928c10b3166f728f78
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 28 11:59:10 2015 +0100

    Tweak new drm listener method. Fix demo app

commit 6cb029d8c156897d324d8a3ec63aca8fda914ff3
Merge: 765d165 95db1ea
Author: ojw28 <olly@google.com>
Date:   Mon Sep 28 11:16:29 2015 +0100

    Merge pull request #818 from pakerfeldt/on-drm-session-ready
    
    Add onDrmSessionReady callback

commit 95db1eacd12957a242ffff8c602fffc8d451394f
Author: Patrik Åkerfeldt <patrik.akerfeldt@gmail.com>
Date:   Thu Sep 24 14:40:04 2015 +0200

    Add onKeysLoaded callback
    
    This adds a callback for when DRM keys have been loaded.

commit 765d1659be1eb8833bacb458cbaf78131fb143d9
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:25:25 2015 +0100

    Return "seeked to" position immediately after seek.

commit c1b8352e33b2348dc1c3d71b8d5c5e3532fd60c4
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:25:07 2015 +0100

    Stylistic tweaks.

commit 88452d95eeceacfc138463e83c958eedb46e1006
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:24:33 2015 +0100

    Playback test tweaks.

commit da97e30e3387eb2e564d441e93ff54ac89b3e651
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:23:50 2015 +0100

    Support mp3 media segments in HLS.
    
    Issue #804

commit c960636d2824af83b7e9f90867c74df8ac9f6636
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:23:28 2015 +0100

    Stylistic cleanup.

commit cf27b83e8a556a0e6be572e16527154372eeebf4
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:22:40 2015 +0100

    Implement handlesTrack using MediaCodecUtil.

commit 8022d28e049f0a3b3db1fe1a06dda28aaf669176
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:21:26 2015 +0100

    Make certain we have appropriate locks held for playback tests.

commit 3538e57797b799411a3e32eb098db49194b75a55
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:20:47 2015 +0100

    Work around incorrect timestamp handling on Sony Xperia E.
    
    Also include more Sony Xperia Z devices in the MP3 workaround.

commit 6ef8c3a61bbc524e93499495d1342a23ba9b2c61
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:20:12 2015 +0100

    Avoid loading the first HLS segment twice.
    
    Issue: #788

commit 8a723706d62a4621f9aa97a99af6997d25c72ef5
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:19:28 2015 +0100

    Provide more flexibility for setting caption font size.
    
    - Respect any padding set on SubtitleLayout.
    - Allow specification of absolute, fractional and fractional-ignoring-padding
      text sizes.

commit 7f9b12982da435ee99e1c57afbf4e1c184059b69
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 18 18:18:15 2015 +0100

    Use consistent buffer sizes in demo app.

commit d6801389de13fb4f076ec6b7b27f8552957a226a
Merge: de68c98 ff6455a
Author: ojw28 <olly@google.com>
Date:   Fri Sep 18 11:58:28 2015 +0100

    Merge pull request #807 from castlabs/feature/parse_audio_channels_only_for_mpeg_dash
    
    Parse audioChannels only when on mpeg-dash

commit ff6455aadbb6831d36e3f7db7fca3d7cbb18cfbb
Author: Miquel Beltran <miquel.beltran@castlabs.com>
Date:   Fri Sep 18 11:48:34 2015 +0200

    Parse audioChannels only when on mpeg-dash
    
    Only parse the @value as Int when the schemeIdUri is urn:mpeg:dash:23003:3:audio_channel_configuration:2011

commit de68c982ab93f102b3541ba86fc7a8f58ea333d5
Merge: 1be3f9d 925795c
Author: ojw28 <olly@google.com>
Date:   Thu Sep 17 16:34:33 2015 +0100

    Merge pull request #795 from jeoliva/webvtt-parser-improvements
    
    Improve WebVTT parser according to WebVTT spec

commit 1be3f9dcbc5c0108975456e2d71a91a0319895fc
Merge: d769717 e2ed741
Author: ojw28 <olly@google.com>
Date:   Thu Sep 17 15:15:59 2015 +0100

    Merge pull request #796 from souji1103/dev
    
    Prevent ArrayIndexOutOfBoundsException when proguard is enabled

commit 925795cb4f110d1cb3dcaea29d550c60b5355dc5
Author: joli <jeoliva@gmail.com>
Date:   Fri Sep 11 02:58:56 2015 +0200

    Improve WebVTT parser according to WebVTT spec
    
    - Line parameter
      - Added support for value and line alignment attributes.
      - Support negative numbers when line is an absolute number (not a
    percentage).
    - Position parameter
      - Added support for value and position alignment attributes
    - Added support for WebVTT comment blocks
    - Percentage values now accept decimal numbers (as webvtt spec states)
    - Added new WebVTT tests for testing all new implemented features

commit e2ed741dddd66519e796d8611574b27dc21d9423
Author: souji <souji1103@users.noreply.github.com>
Date:   Wed Sep 16 09:04:04 2015 +0900

    prevented excess loop, reading pes header

commit d7697176ed98787d6d67e0dbb994b26d95fcfb10
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:45:54 2015 +0100

    Include language in audio formats.
    
    Issue: #437

commit b6f15a17e0f0a260f6e3a81040d227142da4e191
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:44:52 2015 +0100

    TTML improvements.
    
    - do not denormalize styles at parsing time but only put normalized style info
    into TtmlNode tree. Resolve styles on demand when Cues are requested for a
    given timeUs.
    - create TtmlRenderUtil to have static render functions separate
    - added unit test for TtmlRenderUtil
    - adjusted testing strategy for unit test to check resolved style on Spannables after rendering

commit 908e4dfd5df4840a1d1fcb45d293bebd011e3bce
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:43:42 2015 +0100

    Search for synch' when sniffing ADTS and check four frames.
    
    Issue: #791

commit 721956710f446f6d476366f0b5d4b1c7c4aa3211
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:43:12 2015 +0100

    Remove MediaFormat.create methods that don't take a duration.

commit e7926145c6798f14cda0939cfc4bb3aaa8306be0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:42:16 2015 +0100

    Fix overflow for DASH live streams using large timescales.
    
    Issue: #789

commit 74186c2cd0d12a6da053ba1dfde720f8354560b6
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:41:55 2015 +0100

    Try harder before allowing playback tests to fail.

commit ab46d263ad64d9c3be2cf5b4c550e9b70b8bdbdc
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 15 13:41:42 2015 +0100

    Use decoders with names that don't start "OMX.".
    
    There is no guarantee codec names start with this prefix in >= L.
    
    Issue: #782

commit 5050913ba01ad055a0be1c7a4031b4a6653378be
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 19:19:17 2015 +0100

    Update release notes.

commit e6e1e2c1d1c7e0eea6fc85920248ed5f0a99e11c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 19:03:14 2015 +0100

    Tweaking TTML parsing logic.

commit 04342f2b7653fa4fd3e3c26f82d9ac8c3dc14d36
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:31:08 2015 +0100

    Don't use toLowerCase :).
    
    It can do weird things if the device has an unusual default Locale.
    Util.toLowerInvariant uses the US Locale, which does the right thing
    in this case.

commit eeb73a86ea21d07c59ac010ce499517f000ca76f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:30:47 2015 +0100

    Improve sniffer behavior for fragmented MP4.
    
    - Allow a moof box to exceed the search size.
    - Return immediately after reading an ftyp box with no compatible types.
    
    Issue: #784

commit 6f9019a4e390a951d454368fa78e752d5de5f476
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:30:13 2015 +0100

    Use DTS to set timestamp adjustment where available.
    
    Partial fix for #778

commit 1f3bd97a2df2f6d9806f50fc68b81e4c1e128741
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:29:36 2015 +0100

    Add non-strict SubRip parsing (enabled by default).

commit ede7a69d958711242315600d8a5008f7e3d76b53
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:28:50 2015 +0100

    Change DTS MIME type to vnd.dts.

commit ab66dfa7c221bad2cffcb6bf7dc1be0caf6c1aa9
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:27:03 2015 +0100

    Parsing embedded TTML styling.

commit 95fcb3b411c24ddaca37518d111638ba22d823f0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:24:31 2015 +0100

    Draw subtitles over the shutter.
    
    This allows the demo app to display subtitles without video
    (when there's no video, the shutter view does not hide itself).

commit e48851d8ccc16e03c443ff875a32a7511b76a43d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:23:20 2015 +0100

    Share PTS timestamp adjustment across format changes.
    
    When switching format in HLS, we instantiate a new extractor, which
    adjusts TS presentation timestamps so that they align properly with
    the start of the first segment in the new format. Some HLS streams
    appear to have slightly misalignment that causes a glitch when using
    this approach.
    
    It's better to re-use the same timestamp adjustment across formats,
    and only reset it when seeking or when there's an actual discontinuity.
    This is because the HLS spec guarantees PTS timestamp alignment across
    different formats.
    
    We'll also need something like PtsTimestampAdjuster to share between
    separated audio and WebVTT tracks, which also contain PTS timestamps
    that are aligned, and will need to share a common adjustment.
    
    Issue: #692

commit 7d38d2ef3c9d1cd316b0b33199c6cabf21b3f320
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:22:44 2015 +0100

    CuePainter fixes for caption styling.
    
    - Don't allow "nothing has changed" optimization in the case
      that only styling has changed (TextUtils.equals will return
      true in this case, but we shouldn't optimize).
    - Add functionality to suppress embedded styling; seems useful
      to have.
    - Added "this." for clarity.

commit 68f2dc5998780886beb08a62c42b832e3746a185
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:22:07 2015 +0100

    Remove MultiTrackChunkSource (multi track now supported directly).

commit e6ca2df5144185159b4a0a37445cb204f353557f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:21:21 2015 +0100

    Fix end-of-stream for live streams.
    
    Issue: #764

commit 89fcafec5bfc831522db3a600b5bf97692453ef6
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:20:07 2015 +0100

    Correctly set a format duration.

commit 820433de06dc6f86fb2c1e2a922400ae6ee6e32f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:17:13 2015 +0100

    Call stop() to fully play out remaining audio!
    
    Issue: #707

commit 9bcc00f369dca153432bdf52191bd2d5c4cebfb3
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:16:42 2015 +0100

    Fix reported buffered position for HLS across format switches.

commit a7ba393d54637c693f54ae372a1b605848d19a80
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:16:23 2015 +0100

    When multiple BaseURL elements are present, prefer the first one.
    
    Issue: #771

commit 4a29be498b9946a3332143f2bce6ce409fd24dd4
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:15:15 2015 +0100

    Correctly use "current-manifest-live" v.s. "stream-is-live"
    
    When a live stream ends, what typically happens is that the manifest
    is refreshed and the refreshed version is not marked as live/dynamic.
    When this happens we:
    
    1. Don't want the duration of the track to change.
    2. Still want to consider the possibility that we may have fallen behind
       the live window.
    3. Don't want to allow futher manifest refreshes.
    
    This change uses the right thing in the right place.

commit 143a4deee8ad37ed3c46f2cf9a4bb41ccad4a698
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:12:32 2015 +0100

    If no buffers were queued, handle EoS directly.
    
    Issue: #707

commit 59a789b340ae2357317c81a7730d50e8f30d2f80
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 10 18:11:18 2015 +0100

    Include missing durations in AC3/DTS formats.

commit e13e23e3e030b49d3e1dac17ba93ef4bcf837a71
Merge: 5c0745c 4b69fad
Author: ojw28 <olly@google.com>
Date:   Wed Sep 9 14:31:49 2015 +0100

    Merge pull request #776 from IanDBird/srt-fix
    
    Ignore extra returns in Subrip parsing

commit 4b69fad6b7b2bdaef0b4080b62a933e60746f1b3
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Wed Sep 9 11:56:10 2015 +0100

    Ignore extra returns in Subrip parsing

commit 5c0745cedff6a0c2f373ff63a787780dcf491607
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:59:55 2015 +0100

    Add some generally useful error propagation logic for HLS.
    
    Issue #765

commit fb8f0113c636eff73de205fb9119e02456616381
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:59:18 2015 +0100

    Hide captions when the track is disabled.
    
    Issue #763

commit 5d1052f6ec99eb8f1ed326359cb00e1d7592112b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:58:54 2015 +0100

    Allow specifying the AudioTrack's stream type.
    
    Issue: #755

commit ab2aac9d3f63b697de02c51ef1e732e353136acd
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:58:31 2015 +0100

    Infer mime types from DASH manifest.

commit 9592a8a4ffcbd238cf4d2aa9f96527fce3cc85e3
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:57:45 2015 +0100

    Fix IFR parsing

commit 8c3f93d6bf2ee92806fb43355eaea10f3e15ae7a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:56:54 2015 +0100

    Start to fix media mime types.
    
    - Admit we don't know the mime type (using unknown mime types) rather
      than passing the container mime type.
    - Pass the correct mime type for opus, vp9 and vp8, and remove the incorrect
      container checks in the corresponding extensions.

commit 4104a8def991b135700b895025efae53f86b553a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 7 13:55:35 2015 +0100

    Handle raw TTML in DASH correctly.

commit 0c968703c829db38855c480c2ae760cae87dfd70
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:27:01 2015 +0100

    Add playback tests (work in progress).
    
    All valid Android devices should pass these tests.

commit e6a93a08dea787dd9486b3debe2b7f1c0f72a0df
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:24:46 2015 +0100

    Update instructions for building with latest libvpx.
    
    - Fix building with APP_ABI=all by configuring for all architectures.
    - Keep vpx_dsp which is required for building successfully.
    - Use perl -pi -e not sed, for building on Macs.

commit 7a0f00ce41d20502dd296fa47daf76e132e51c1a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:23:35 2015 +0100

    No-op setting volume to current volume.

commit 3c65df92c25302f14899ecb1d7d23d73a5dae80b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:23:10 2015 +0100

    Allow multiple sources for text.
    
    Issue #753

commit ecd48da1de4160eab30aef279eec14025be148b4
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:22:18 2015 +0100

    Multi-track support for DASH.
    
    - With this change, you can select from the individual video formats in
    the demo app, as well as the regular "auto" (adaptive) track.
    - DashRendererBuilder no longer needs to create MultiTrackChunkSource
    instances for the multiple tracks to be exposed.

commit 6cf261aed7b8e5a3c97d398d34749a80f44247dc
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:20:23 2015 +0100

    Move default SmoothStreaming track selection to library.

commit 4b2991267e4fbea4b2230cd582f8af2b5047689b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:19:40 2015 +0100

    Some renaming to make format use slightly clearer.

commit fae6c65367c6154d15b5c99a9eeb866ee36ba568
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:19:06 2015 +0100

    Be robust against manifests that don't define top level duration explicitly.
    
    I think such manifests are invalid, and I haven't seen any examples,
    but given it's trivial to fill in the duration if the periods define
    durations, it seems worth being robust.

commit 2f4c96781d3ba3bc6c048abb7210867d4c901b91
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:18:16 2015 +0100

    Refactor handling of period start times and durations.
    
    - It's not possible to determine a period's duration just from the
    corresponding Period element in a DASH manifest. It's necessary
    to look at the start time of the next period (or the duration of the
    manifest for the last period) to determine how long a period is. We
    don't currently do this in the parser, and hence set duration incorrectly.
    We also set period start times incorrectly because we don't set it to
    equal to sum of the durations of prior periods in the case where it's
    not explicitly defined.
    
    - We're currently propagating these (incorrect) values all over the place
    through data-structures that we build when parsing the Period element.
    
    - This CL removes this redundancy, storing only the start time of each
    period in Period elements, and not propagating it elsewhere. It's then
    used when required in DashChunkSource.

commit cb85dc25aa74978c59ee04d83fac9728318cb77f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:17:21 2015 +0100

    Clean up max dimension handling.

commit 4a9ff7b094473df1586fdffee2c14069a0514b59
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:16:36 2015 +0100

    Correctly propagate END_OF_STREAM through Opus decoder.

commit a953e7217f800314698e6108b380526a7af56ccd
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:16:02 2015 +0100

    Fix naming/documentation for SmoothStreaming.

commit a704b3d3387dd2453bc64f21bacc83910becea80
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:15:20 2015 +0100

    Tweak video renderer.

commit 39babb779f7c38ca3e767523a3bef8d77d2591c1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:14:46 2015 +0100

    Magic tests fix...

commit f8824ac390fc070bfd23cc54f51ce17b4de5d4d7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:14:10 2015 +0100

    Support dynamic TimeRange for DASH live.

commit d5f8d1a1b1a73652b5b359dce8cbe89c34fe729e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:13:22 2015 +0100

    Don't crash updating a representation without an index.

commit ebeafe23c08fff21fd234c86add280f5c25e4877
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:12:52 2015 +0100

    Refactor multi-period Period updates.
    
    The main change here is to add PeriodHolder.updatePeriod, which is
    analogous to RepresentationHolder.updateRepresentation.

commit b55a80dbf99b519a0b75dd83d95d13da12242543
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:12:22 2015 +0100

    Fixed potential issue in which a live-edge latency greater than the duration of the manifest would result in the latest available time being lower than the earliest available time.

commit 476cefa7cca4e529643ba54880a7424b278eecf0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:11:50 2015 +0100

    Remove extra constructors.

commit 35a744a5d48c86843a0dca23199b7b88d352165e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:11:01 2015 +0100

    Use perl for in-place substitution.

commit 96734144ba1c4cbc0fe7d2ddf120e392c4d3af42
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:07:28 2015 +0100

    Extract DTS samples in DASH, MP4 and Matroska.

commit bca2d16cc15de3d3659c2ff00ebe9aff71ab6536
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:06:16 2015 +0100

    Specify locale when using String.format.

commit adf82c7f5e57d93dd7301a727f3611ff23916f71
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:05:43 2015 +0100

    Correctly read mimeType for ISO 13818-7 objectTypeIndication values.
    
    Issue: #731

commit 83568ca52f806cf983fcb1daee2d4b621c6cc5d0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:04:47 2015 +0100

    Support MKV embedded SubRip captions.

commit 009d4d0c2cb0244aa1466a2bd62eb54b95c5c24e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:03:45 2015 +0100

    Fix retries if failure occurrs when reading seek map.
    
    The following sequence was problematic:
    
    1. See start of a cluster having not output a seek map. Decide
       to seek for the cues. Enter CUES_STATE_BUILDING state.
    2. Error occurs before seek map is output.
    3. ExtractorSampleSource isn't prepared yet, so restarts from the
       start of the stream.
    4. See start of the same cluster having not output a seek map.
       This time cuesState is CUES_STATE_BUILDING, so we just carry
       on. We then fill the buffer with sample data, despite the
       source not being prepared, at which point we get stuck.
    
    It's unclear to me why cuesState needed three states, so I've rm'd
    the BUILDING state. Step (4) above will now do the same thing as
    in step (1). If the failure repeats, we'll eventually fail, which
    is WAI.

commit b3ba7e16c12804a521490c5c696a6da5c5c8862e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:02:16 2015 +0100

    Close DefaultHttpDataSource connections quietly.

commit 10badcc43050e3e39a3ca6df860ca690265c14b1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:01:43 2015 +0100

    Support multi-track in MKV/WebM extractor.
    
    Issue: #514

commit e07c35815e796395dbc0a92bb4e294eea5817968
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:01:06 2015 +0100

    Don't move to next subtitle too soon.
    
    Second time lucky. We should just move to the next subtitle
    when it's started. Simples.

commit 530aa265ff6e8b54e93cd54cab883d17eef7dc97
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 14:00:37 2015 +0100

    Fix playback of MKV audio tracks that use default channel/frequency vals.
    
    Also do some significant cleanup to the extractor.

commit 64c0e5c9971e9d907ae334856961a481dc068871
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:59:34 2015 +0100

    Use XING headers without size/table of contents.
    
    These MP3s are unseekable but allow calculating the VBR duration correctly.
    
    Treat streams as live only if they are unseekable and lack a duration.
    
    Issue: #713

commit 6799d6dad057b12818501d1b7355ddfa383bae71
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:58:57 2015 +0100

    Fixed issue where calling valueAt on a SparseArray with an index greater than the size of the SparseArray would sometimes return the class' internal DELETED object and cause a ClassCastException.

commit 7bf1d891688020e32eb53453d0a4d9362b7b6aaf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:58:22 2015 +0100

    Fixed overlapping captions.

commit 9231520ee82b7b132f0f50a9d915d70cf210f694
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:57:51 2015 +0100

    Some misc cleanup.
    
    - Remove unused method in DashChunkSource.
    - Remove inputEncoding parameter for subtitle parsers. We're
      ignoring it in all but one of the parsers, and for the one
      that does use it, it'll only ever receive null, since that's
      all we're passing.
    - Make TextTrackRenderer advance to the next subtitle even if
      the current one hasn't finished, in the case that they overlap.
      This shouldn't ever really happen, but it seems best to trust
      the start time of the new sample rather than the last event
      time of the previous one.

commit eb3829c7c8e7baa6ee9de0092c1a98a21143546b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:56:40 2015 +0100

    Always show track language if we have it.
    
    May as well. Also specifically fixes showing the language
    for subtitle tracks that have application/* mime types.

commit 8e9aadc5e58701448625ffbbe9952bd3b7f4286d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:56:10 2015 +0100

    Workaround for vorbis EOS flush bug (23361053).
    
    I'm assuming this will be fixed in API level 24.

commit 879da812189305f8823174db909b3f7350da5938
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:55:02 2015 +0100

    Expose more sensible HLS track information.
    
    - Video track is always marked as adaptive, the resolution is
      stripped out (since it's otherwise just set to whatever the
      resolution of the first selected variant is), and the max
      dimensions are set.
    
    Issue #514

commit 0efaec59b82638f83bfad406ebb03b85219f261a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:54:00 2015 +0100

    Implemented limited support for multi-period DASH manifests.
    
    Limitation: Successive periods must expose the same adaptation
    sets and representations.
    
    GitHub Issue: #557

commit f69f94899185bbfd805dc82ff79bc710570e11b7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 1 13:52:30 2015 +0100

    Fixed issue in which ContainerMediaChunk would throw an NPE for self-initializing chunks.

commit 01a037f49694a66e67e633458777a0928000626d
Merge: 25fe9db c373800
Author: ojw28 <olly@google.com>
Date:   Thu Aug 27 10:58:46 2015 +0100

    Merge pull request #741 from pakerfeldt/unfinal-streamingdrmsessionmanager
    
    Enable override of open/close in StreamingDrmSessionManager

commit c37380049233ee5138ab1ec0f1634506397c1504
Author: Patrik Åkerfeldt <patrik.akerfeldt@gmail.com>
Date:   Thu Aug 27 09:20:57 2015 +0200

    Enable override of open/close in StreamingDrmSessionManager
    
    Make it so that extensions of StreamingDrmSessionManager may override open/close.

commit 0df29a6497618b6a11fe5025dc6f89a3b1293a90
Author: Yu-Hsuan Lin <b95505017@gmail.com>
Date:   Mon Aug 24 00:46:42 2015 +0800

    Add an extension that provide DataSource using OkHttp

commit 25fe9db5d15ca23104dab2c240d4d2e168b12e50
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:35:32 2015 +0100

    Set the sync flag on all audio samples in WebM.
    
    Issue: #690

commit cde1c27e2b9860d4cc3c9ea49bf5c46ee5632bd2
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:34:59 2015 +0100

    Make Opus codec-specific data match the platform.
    
    Issue: #690

commit 02f1efd118bca66f7007cafe8849ab23f82d0439
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:34:20 2015 +0100

    Add bitrate to MediaFormat.
    
    Issue: #514

commit ff201db98155ec006f95a479783cb91bcbbf23ae
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:33:01 2015 +0100

    Allow renderers to pull tracks from multiple sample sources.
    
    This is needed for several use cases:
    
    - ExtractorSampleSource with option to play both embedded and out-of-band
      subtitles.
    - HLS multi-audio and out-of-band-webvtt.

commit ea7caf4f91e29dc4787666a50e12009df08f78d1
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:32:33 2015 +0100

    Bit of a hack to pass through original MediaFormat from FrameworkSampleSource.

commit c9d980801384047ea1ad8130757f848e92d1ed92
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:32:01 2015 +0100

    Make getRendererEnabled behavior the same as it used to be, until it's removed.

commit 679fa8de0387de8da71724ab94dfddcdca05526a
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:31:28 2015 +0100

    Only use passthrough for passthrough MIME types.

commit e770e5c24ba5c463133011d034c2f473ea25ce25
Author: Oliver Woodman <olly@google.com>
Date:   Wed Aug 19 16:29:30 2015 +0100

    Multi-track - The (nearly) final step.
    
    - Migrate demo app to use new APIs.
    - Add multi-track support for ExtractorSampleSource case.
    - Add multi-track support for SmoothStreaming use case.
    
    The final step is to add support back for the DASH use case and
    delete MultiTrackChunkSource. This is blocked on multi-period support
    landing, in order to prevent a horrendous merge conflict. We also
    need to update HLS to expose sensible track information.
    
    Issue: #514

commit 57250036bff2d2ccfccf0ce17391d11cff833afa
Merge: 3b9ca40 3714751
Author: ojw28 <olly@google.com>
Date:   Wed Aug 19 12:04:13 2015 +0100

    Merge pull request #724 from hori-ryota/feature/bugfix-of-parse-aes-url-for-hls
    
    Fixed bug of AES URI Pattern for hls

commit 3714751b95ca1659c1ffbb056aa1f4e3abfc5813
Author: hori-ryota <hori_ryota@cyberagent.co.jp>
Date:   Wed Aug 19 17:34:28 2015 +0900

    Fixed bug of AES URI Pattern for hls

commit 3b9ca40b05edf1be97b896a37c8dee0a2b88dcb7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:15:53 2015 +0100

    Add ISO 14496-30 embedded TTML (stpp) subtitle support.
    
    Issue: #689

commit 38f2413290e1f5174b78cdaeb1b8935e5b4b5a25
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:14:21 2015 +0100

    Allow ChunkSource an opportunity to fail preparation.
    
    When ChunkSource implementations implement multi-track for DASH and SS,
    format selection will move inside of ChunkSource. If we, for example, fail
    to query the decoder to determine which tracks are playable, we need an
    opportunity to fail (i.e. say we're not prepared, so that maybeThrowError
    is called, from which we can throw).
    
    This may go away in the future if we remove the distinct preparation step
    and treat tracks/formats as things that can change dynamically, but for now
    this is what we have.
    
    Issue #514.

commit d49d5a1765445a35230c0866d84a3880d3076251
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:13:23 2015 +0100

    Fix reading HEVC in MPEG TS.
    
    Fix reading the first slice flag, which before could cause a read out of bounds
    if the NAL unit started at the end of the buffer.
    
    Handle non-VCL NAL units by flushing a pending sample when starting to read one.

commit 37ebec6e826bac0f09c17e977f7341f76127e2b4
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:12:33 2015 +0100

    Skip more than one ID3 header.
    
    Issue: 713

commit 90f9f7314d0125106c558458f5ca6e90dd67473e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:11:37 2015 +0100

    Allow MediaFormat to express that it's adaptive (not yet used).
    
    Also:
    - Better document MediaFormat.
    - Document getFormat to indicate what it's good (and not good) for.

commit 6e527c550f7eed01937c0f4531e710dc7df4f6cd
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 17 17:08:09 2015 +0100

    Expose new multi-track APIs in the ExoPlayer interface + plumb
    multi-track support upstream to the ChunkSource interface.
    
    This change does not yet make use of the newly exposed APIs. This
    will come in a subsequent CL.
    
    Issue #514.

commit bf77f3b28969942c278ec98a53bcdb6d6b2cb713
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 13 20:36:50 2015 +0100

    Simplify subtitle parsing.
    
    - Currently all subtitles we parse contain timestamps relative to the sample
      timestamp, however we add the sample timestamp in inconsistent ways (sometimes
      in the Subtitle, sometimes in the SubtitleParser). This change converges on
      a single approach. It also paves the way for passing absolute offsets to use
      instead, and being able to apply them in a consistent way in a single place
      (PlayableSubtitle). This functionality will be required for ISO 14496-30 TTML
      embedded subtitles.
    
    Issue: #689

commit fbf590fdf691af57bbbbf6afacde867c69e59604
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 13 20:35:52 2015 +0100

    Fix reading PCM configuration in HEVC SPS.

commit 6b44c6e6b1aad560a44abeb5372239bb19726ed1
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 13 20:32:09 2015 +0100

    Fix single sample loading + seeking in HLS.
    
    Issue #587

commit 87457d5042b3b64b060be41faaeebf0b7bd9d1d0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 13 11:19:34 2015 +0100

    Add CodecCounters to LibvpxVideoTrackRenderer.

commit d3995eaa7ad2e8406c1c86f3035f31d762352baf
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 13 11:18:15 2015 +0100

    Fix rotation handling as far as is possible.
    
    Issue: #91

commit 8db1331021c46a6357a70ebc6f68b59ccbcff3c0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:23:22 2015 +0100

    Propagate MediaFormat instead of TrackInfo.
    
    Issue #514.

commit f7ffeb75cf3681ba4557a5f02f4c60f28e40bc5f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:18:19 2015 +0100

    Parse pixel aspect ratio from SPS for use when there's no pasp atom.
    
    Issue: #697

commit 69466adbe3e25bc77a3a2798c50823547edee107
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:17:33 2015 +0100

    Remove unused exception class.

commit 02c7525ff7d98b861d45aa32741611df6a339a89
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:16:56 2015 +0100

    Remove custom VTT logic.

commit dbaeecc4da6769bc2441bb108fdfba6413cdbc0e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:12:43 2015 +0100

    Improve DASH manifest parsing.
    
    - Parse all attributes that may exist in either the AdaptationSet or
      in the child Representation elements at both levels.
    - Correctly infer TYPE_TEXT for Representation elements whose mimeType
      is application/mp4 and whose codecs attribute indicates a known text
      codec type.
    
    Issue: #689

commit d6152dc36a0066d3f2bf43a6d1ce57341e10a7a8
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:11:35 2015 +0100

    Use MediaFormat.language in hashCode and equals.

commit 7d306ae593dea44624705e3d8656defe07d6f36b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:10:46 2015 +0100

    Add language to MediaFormat + parse it from mdhd box.
    
    + Move conversion from framework -> exo format to FrameworkSampleSource.
    + Improve MediaFormat conversion test.

commit b2206866f0eecc52af53681ec340f61ba7d38d2a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:08:23 2015 +0100

    Use audio passthrough if possible, falling back to on-device codecs.
    
    Remove MPEG TS stream filtering based on AudioCapabilities.
    
    Pass AudioCapabilities to MediaCodecAudioTrackRenderer so it can choose between
    passthrough/raw and decoding for AC-3 tracks.

commit 6085d185faa41871f76a8ddf3d5825bd0cc5e361
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:06:21 2015 +0100

    Internal plumbing for multi-track support.
    
    - Generalize rendererEnabledFlags to be selected track indices through
      ExoPlayerImpl/ExoPlayerImplInternal.
    - Selecting an out-of-bound track index (e.g. -1) is equivalent to
      disabling a renderer prior to the generalization.
    - A prepared TrackRenderer that exposes 0 tracks is equivalent to a
      TrackRenderer in the STATE_IGNORE state prior to the generalization.
    
    Issue #514.

commit 13f4a3e3bdbde53534cfb36bd3f00462f32a6a93
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:04:00 2015 +0100

    Common base class for SampleSource based TrackRenderers.
    
    This will allow multi-track support when consuming from a SampleSource to
    be added in a single class, rather than in 6. Prep for Issue #514.

commit 150b3cdb1930c8e22438f853a9c91356d8878cbd
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 18:00:42 2015 +0100

    Call AudioTrack.flush() before AudioTrack.release().
    
    On NVIDIA Shield, recreated passthrough AudioTracks have incorrect playback head
    positions, due to shared state with the previously destroyed passthrough
    AudioTrack. Calling AudioTrack.flush() before AudioTrack.release() ensures this
    state is cleared.
    
    This is a safe change so I have not made it a device-specific workaround. The
    combined time for flush and release is less than 10 ms (with flush normally
    taking less than two ms).

commit f129812b7042e046d6061c37c8414b605cd5182a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 17:59:24 2015 +0100

    Clean up AudioCapabilities.

commit adf98b0fccd323f5afc149590371254218443728
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 17:52:13 2015 +0100

    Make seekTo(currentPosition) a no-op in ExoPlayer.
    
    - Also avoid boxing when passing the seek position to the background
      thread.
    
    Issue: #654

commit 6ee6bc5c5978d3f44da6e09a75e57c32833eacde
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 17:48:45 2015 +0100

    webm demo app: Fix crash on screen touch
    
    Fix crash on screen touch before starting playback. mediaController cannot be
    used until after setMediaPlayer has been called on it.

commit ce26e601ed9e12bf9ebecde6359527415336641c
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 11 17:47:02 2015 +0100

    Fix typo in H265Reader.
    
    See H.265/HEVC specification subsection 7.3.4.

commit ab3f623767525c3e0c6b555e3aa3f3fa2bfa50d2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 7 17:28:03 2015 +0100

    Workaround broken devices.
    
    Issue #464
    Issue #665

commit a7d843f90d0929855af638167dcd28417c1499bf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 4 16:07:54 2015 +0100

    Increment version to 1.4.2

commit 3bd52c74bb18471888f2aa0b84f02d98695e3de4
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 4 13:53:57 2015 +0100

    Update release notes

commit 039cddd6c0480e48bba51930aad761fd4096aa79
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 4 13:50:15 2015 +0100

    Don't require comma in EXTINF tags

commit d3ce56f9bc97e58f7bee487f92dc0d8c097c9d88
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 3 15:18:23 2015 +0100

    Fix commented code

commit 574e554e015eceba4fa2c8488df52b250c2cb5ef
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 3 15:17:41 2015 +0100

    Make classes/methods final to prevent uncontrolled extension.

commit 6b775efd4d74f179ac34003b679ef2f68304388b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 3 14:52:52 2015 +0100

    Fix playback of HLS media playlists

commit 1a5d12359df09de6fc20fee74bcf3e3a98881208
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 30 20:34:17 2015 +0100

    Fail fast if we can't play anything.
    
    Issue: #672

commit ed51b5824206970c92f6e7684ded1c2d4788fccb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 30 17:16:19 2015 +0100

    Fix backoff for SingleSampleSource.

commit 5f51a4ff83577afe19a8ba2678b5be0d0e6aaeb4
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 30 17:13:24 2015 +0100

    Cleanup - Make RollingSampleBuffer append methods more consistent.

commit 0d42032ada8418a686ec32babd9839c9e8af3d74
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 30 10:05:54 2015 +0100

    Aes128DataSource should be final.

commit a56c00268d5b64ec0f6f02dd795ad0a868dd725f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 30 10:05:04 2015 +0100

    Remove ability to disable frame accurate seek.
    
    Everything I've seen that uses ExoPlayer sets it to true, and
    setting it to false is poorly supported / likely to result in
    bad initial A/V sync after each seek.

commit e90ad9c47db99472db1be5f74bfffd2d95282234
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 29 22:34:52 2015 +0100

    Make Aes128DataSource private to the HLS package.
    
    Issue: #662

commit 1f0e6a5c46b05ca27cfd607771c5d40acc7bae89
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 29 21:58:59 2015 +0100

    Simplify subtitle loading with a SingleSampleSource.
    
    Issue: #587

commit 98ecc209be81c3936c2c7682507205d1a629594f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 29 21:49:19 2015 +0100

    Improvements to Mp4Extractor and FragmentedMp4Extractor.
    
    - Make Mp4Extractor more robust when resuming from read failures.
    - Made FragmentedMp4Extractor handle atoms with extended sizes.
    
    Issue #652

commit 2f0aec43ec24a04fd1a0a004e0dea9539df8a177
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 29 21:48:17 2015 +0100

    Don't print warning if we get a SeekMap when reading DASH chunks.
    
    Both FragmentedMp4Extractor and WebmExtractor now invoke seekMap() with
    SeekMap.UNSEEKABLE if there isn't an index in the stream, so DASH playbacks
    will end up printing this warning every 5 seconds or so. This is obviously
    not desirable, so this CL just removes the warning! The alternative would
    have been to print a warning if the value is anything other than UNSEEKABLE,
    but it doesn't really seem worth it.

commit 48826836d15d7ea57a4ea55fb48d1823b95a93e4
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 27 16:32:55 2015 +0100

    Put tests where they belong + bump bintray-release version.
    
    Issue: #651

commit 08dc691ff7b1e4449493ba0fa77ddb9456f37702
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 27 16:20:40 2015 +0100

    Allow playback of unseekable fmp4 media.
    
    This is useful to allow playback of individual segments from a
    DASH stream as regular fmp4 files. These segments don't typically
    contain a segment index. For playback to start, we need to invoke
    seekMap with the UNSEEKABLE index. We do this if we haven't seen
    a segment index when we encounter an mdat box (if one were present,
    it would have been located earlier than this point).

commit e89c40cfd3464f5a6c13b8e0498d569194abd955
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 27 12:45:23 2015 +0100

    Handle renderer building cancellation.
    
    If the manifest server response arrived after the player was released, the
    renderer builder would set up renderers for a released player, causing an
    exception to the thrown in the DASH case.
    
    Also fix Issue #657

commit 9e0ca9e7f00d2b5bb288577a6a0b3df5af1d378c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 14:50:57 2015 +0100

    Add support for reading MPEG 4 SP in matroska streams.
    
    Issue: #641

commit 03305c92cf41acb88565d2dc9cc81f6323c77aec
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:44:52 2015 +0100

    Modified timing of manifest fetches to compensate for drift due to fetch time.

commit 7ea199638e785ddfbf56605c65297e5da4c63f9c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:44:11 2015 +0100

    Content/Asset data sources - Handle >2^31 byte files correctly.
    
    Issue #641

commit b57b80f723dbcbff0cfa275926df428af59dda11
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:43:48 2015 +0100

    Multiple small fixes for subtitles/mp4.
    
    1. [Cleanup] Remove unused Track types, including TYPE_TIME_CODE.
    2. Add subtitle track type, which is different to the existing text type.
    3. Set duration on the media formats for text and subtitle tracks. This
       was causing the player to report unknown media duration for mp4 files
       containing such tracks.
    4. Make TextTrackRenderer do the right thing when not started.
    
    Issue: #635

commit b44de0d2509abfb39a15b343957a7d4338e08d26
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:14:06 2015 +0100

    Improve sniffer error reporting.
    
    - Make UnrecognizedInputFormatException public so the app can more easily handle
      it when it is propagated to onPlayerError.
    - Format the description using the simple class names for the extractors.
    - Don't retry loading after it's thrown, but just throw immediately.

commit 4c1fb0c9772fa76dc6e7695ee904a337cc56167c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:12:57 2015 +0100

    Don't catch API 19 exception from newInstance.

commit a44a78c72d4c1267bd64ffa4437c56090ee8c4db
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:12:01 2015 +0100

    Fix some HEVC and H.263 nits.

commit 9dc1bfbbe7bdba0ddf483f6fd7ee4b0d8f97534a
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 23 13:09:52 2015 +0100

    Support POST requests with DefaultHttpDataSource/DataSpec

commit 6b03e6a17c8a970e41c39bdc686c1ced77371319
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 22 18:46:46 2015 +0100

    Fix MP4+MKV sniffing to handle empty atoms / EBML elements.
    
    Issue: #641

commit 648f224d98d62f748bccfb40dcac37750fc4f580
Merge: a9d9a46 646b396
Author: ojw28 <olly@google.com>
Date:   Wed Jul 22 16:14:11 2015 +0100

    Merge pull request #639 from IanDBird/mkv-hevc
    
    Add support for HEVC video in Matroska files

commit a9d9a46c4239fe2d37010d8cf621bd4520b934b2
Merge: 85e0bca cf2e539
Author: ojw28 <olly@google.com>
Date:   Wed Jul 22 16:14:04 2015 +0100

    Merge pull request #643 from Ood-Tsen/s263
    
    add support s263

commit cf2e539a31f8b2bd82f1fc85c05aed082f30049e
Author: ood_tsen <oodtsen@gmail.com>
Date:   Wed Jul 22 21:08:38 2015 +0800

    add support s263

commit 85e0bca33d7cd4d1052a7bebfc6ab6abadc2df19
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 17:39:38 2015 +0100

    Add support for choosing an extractor based on sniffing the container.
    
    - ExtractorSampleSource takes an array of extractors to test for suitability.
    - Extractors now implement a sniff() method that returns whether they can
      extract samples in the input stream's format.
    - Switch demo app samples to use format detection.
    
    Issue: #438

commit 87daa912d74f505660b7a854fb69c7e4c3a0bf45
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 17:36:07 2015 +0100

    Remove dead code (failed==false in all cases)

commit 3b34b0682c49d58dd131710ad59d42ba0b2f8a83
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 17:35:09 2015 +0100

    Handle the last MP3 sample being truncated without throwing.
    
    Issue: #599

commit ed2b65654c2684d85debfd24b6366bddfb40366f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 17:34:37 2015 +0100

    Cleanup UdpDataSource.

commit 646b39622fbfa4fb9308c0094658113e808f8fc0
Author: Ian Bird <IanDBird@Gmail.com>
Date:   Tue Jul 21 15:24:35 2015 +0100

    Add support for HEVC video in Matroska files

commit a2f10399e7e6249b4cc389e6241149a6cd1a9b49
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 10:07:49 2015 +0100

    Improve error propagation

commit 5df6854fea8412a95384a4bed7c2ff50ab382adc
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 10:05:22 2015 +0100

    Noop tweak to DefaultHttpDataSource

commit e7950555d3acaba105f46fb83e7496ae0e4a4312
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 10:05:04 2015 +0100

    Generalize MulticastDataSource to UdpDataSource

commit 4451b065711863bf714e6f1406a42276ec7ee1c3
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 10:02:54 2015 +0100

    Use default subtitle parsers in demo app

commit eb4920bb2a5039115920efa463a2bad3d955ba64
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 10:01:15 2015 +0100

    Better compatibility with MKV test streams.
    
    1. Fix seeking in test2.mkv by handling non-default timescale
       after duration.
    2. Fix handling of missing cues in test6.mkv by allowing playback
       to continue (but all seeks will reset to t=0).
    
    Issue #631

commit 7bc1241e06ee06d6f693d4ec69bc9f6f6fbff167
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 09:59:22 2015 +0100

    Reflect subtitle parsers.

commit 6082bb67691bcacab235793c29cc0b5ca0a68e53
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 09:58:36 2015 +0100

    Always use timed video frame release on V21+.

commit 508e1cabe1123f6d3766789f364463adbd6a98bf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 21 09:57:51 2015 +0100

    Always null inputStream, even if closing it failed.

commit cd83bbb740e5844e2e96d837db2e13580d4971fd
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 17 19:07:46 2015 +0100

    Fix release notes

commit d8c874f7d81cb74a4094bcab42f9d102474fa112
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 17 12:01:32 2015 +0100

    Correct grammar

commit 0279a9f791138fc4746ba1005a79ae610a6dcdd6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 17 11:34:00 2015 +0100

    Bump version to 1.4.1

commit 119c4736067445e01627ea01b3d04609d52f593f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 17 11:30:48 2015 +0100

    Temporary fix to prevent premature failures during HLS playbacks II.

commit 7c2d6355650e311be38a40115fed359bec4ab0ab
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 16 21:48:14 2015 +0100

    Minor fixes for Javadoc warnings

commit 8a7d68da6c9d2d63a53e1fa8e08acf592c453ae8
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 16 20:22:35 2015 +0100

    Don't render empty cues

commit ebe9ae6b13126cb12aa595aefc35daab195e6704
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 16 19:30:14 2015 +0100

    In continueBuffering, return whether a particular track has samples.
    
    Issue: #595

commit 17c1b630b813db4ca94aa89c9309531da5dbb9e0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 16 18:26:50 2015 +0100

    Bump version to 1.4.0

commit 67b47756815931db0bc2b5858d55424fc768b133
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 16 17:59:41 2015 +0100

    Temporary fix to prevent premature failures during HLS playbacks

commit 85256bef411bd8a267309a6dc8bfa312d82825ec
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 19:55:35 2015 +0100

    Add support for MP3 audio in Matroska files.
    
    GitHub issue: #589

commit 79db618ba63195c08bfda64c5a3b50906e36f5ef
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 18:53:32 2015 +0100

    Add support for header stripping in Matroska streams.
    
    Issue: #589

commit 6c2b3c875da14f4d4aa23ed709fd7d868f5697b8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 18:52:57 2015 +0100

    Handle unbounded ranges in DASH manifests.

commit 2b0f68a0abaabf3cdac29624b3b429512ca19670
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:27:10 2015 +0100

    Rm Timescale from AudioTrack. Not required.

commit 72d42fbc9faaf56980401d33fb2e5c93d2e161b4
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:15:21 2015 +0100

    Fix an issue where retrying WebM extraction failed.
    
    The ID_SEGMENT can only be read once, as seeing the element a second time is
    assumed to indicate that the file contains multiple segment elements (which is
    not supported).
    
    This change allows the element to be read twice if it is at the same position,
    so that retrying loading from the start can succeed.

commit 31e5e0edaf6ef30aca39a0e5603e389ff1a71bd4
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:14:37 2015 +0100

    Clear outputBuffer.flags in VpxDecoderWrapper.decodeBuffer()
    
    This ensures FLAG_END_OF_STREAM doesn't get permanently stuck.

commit 4282d7c22b0d3b97276de2e3324bdc8238d71de5
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:11:41 2015 +0100

    Update MediaCodecTrackRenderer.
    
    1. Workaround for decoders that fail to handle the END_OF_STREAM flag.
    2. Revert processing of final output buffer if it's non-empty. This
       introduced another bug (#596)
    
    Reverts: b88012f51ff3df1d8a35c032c5f585bc994a81ba
    Issue: #417
    Issue: #596

commit 884e7a41707348c6a5a48e4342b4986bc7b2bad5
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:10:53 2015 +0100

    Optimize captions.
    
    SubtitleLayout no longer trigger re-layouts of the view hierarchy.
    Instead, the SubtitleLayout just invalidates itself. This is made
    possible by making SubtitleLayout a regular View that draws each Cue
    directly onto the canvas, rather than having SubtitleLayout be a
    ViewGroup with a child View for each Cue.

commit 8b08efce794a99ecd93651ad396bc2c5aea26a63
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:10:09 2015 +0100

    Fix warnings in WebM demo app

commit c1e1497d1397a32e2c3d9476d9c87843451e6b1d
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:09:20 2015 +0100

    Change how subtitles are laid out in the demo app.
    
    The SubtitleLayout is now properly aligned with the surface.
    This means the subtitles remain on top of the video in portrait
    mode, rather than being huge and below it.

commit fe52a486f47331a2c898802a2b2da5ac8ca645de
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:05:15 2015 +0100

    Inject Allocator into ExtractorSampleSource.

commit b4879236b58a7c3214b0a58f1d329e315f9a20e8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 15 11:01:44 2015 +0100

    Document usage of MATCH_LONGEST_US.
    
    Handling of this constant is already in place everywhere, this
    just documents that its use is allowed.

commit 23580049514f514c2f786e5571b842fa3ffcf158
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Fri Jul 10 11:47:24 2015 +0100

    Add device-specific workarounds for VP8 and MP3.
    
    Avoid using the VP8 decoder on Samsung Galaxy S4 Mini.
    Issue: #548
    
    Avoid using the MP3 decoder on Sony Xperia Z/API level 16.
    Issue: #377

commit c47c6816e4cc0d04c41e7c16f734cc8d90c04d1d
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Fri Jul 10 11:46:30 2015 +0100

    Detect frames using first_slice_segment_in_pic_flag.

commit ead8abf09f48149b7b69b3471eaa256ff57614f2
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jun 30 13:50:10 2015 +0100

    Fixed incorrect caption sizes after device orientation change.

commit 35a9f2635c8f6c7aed7696588b1c8154307c29a7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jun 30 13:49:03 2015 +0100

    Use Locale.US in calls to String.format.
    
    Issue: #585

commit f03e1cd572d846692c74febeb69289b1d949a0b8
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 17:14:55 2015 +0100

    Updatae release notes

commit 588be2bd4b44fd15fd4636a0f7f482647190d4fa
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 16:53:46 2015 +0100

    Fix intermittent decoder crash when playing MP3 inside MP4

commit 3bcd9ca6c3bc506cc91b00cb5526d4f907fe4fdf
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:44:10 2015 +0100

    Simplify HLS MP3 support.

commit 0c577ce2ce0bc1f7b34e98be112cd804791283a2
Merge: 7fb5b86 c06f844
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:41:59 2015 +0100

    Merge branch 'tresvecesseis-dev' into dev

commit 7fb5b86579d596e5fc9d0183c021a833d0adfa39
Merge: faff857 dd3a4a9
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:41:47 2015 +0100

    Merge branch 'dev' of git://github.com/tresvecesseis/ExoPlayer into dev

commit faff85784bb382551ffa5f4574988962826d9e8e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:38:28 2015 +0100

    Use the right overload of createAudioFormat in Ac3Util.

commit a4ff13d7da0878ed07030db1691d5c2169d90dfa
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:37:48 2015 +0100

    Set a MIME type based on the esds ObjectTypeIndication.
    
    Issue: #576

commit a626a5e5d4aecb816bc392f1e6049b7c1a2103d7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:35:57 2015 +0100

    Take period start time into account when calculating segment times.

commit 2b27137e9e1a11595853c244e44f863d18e3be9e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:33:08 2015 +0100

    Fix bug that caused failure when all renderers disabled.
    
    Prior to this change, there was a bug where playback would
    fail with the following steps:
    
    1. Start playback.
    2. Pause playback.
    3. Disable all renderers.
    4. Enable at least one renderer.
    5. Resume playback.

commit 33d55631ed43b63e029667ae04d89af886a925a0
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:31:13 2015 +0100

    Fix handling of pixel aspect ratio change.
    
    The new logic assumes that an input format change will be
    followed by an output format change, but I think this is
    pretty much guaranteed. If this weren't to happen then the
    new pixel aspect ratio wont be picked up, but I think it's
    extremely unlikely (it would require the format to stay
    exactly the same except for the pixel aspect ratio, which
    would be bizarre).

commit c7635c9dbd4f89fc469819955bf776d780c225cb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:29:45 2015 +0100

    Add some audio hooks.
    
    This makes it easier to add an extension for adjusting
    audio playback rate.

commit b88012f51ff3df1d8a35c032c5f585bc994a81ba
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:28:50 2015 +0100

    Process final output buffer if it's non-empty.
    
    Issue: #417

commit a175ecbff36ebcce2bb8f1b73a16e4f276eed09e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:27:45 2015 +0100

    Update WebVTT test to check we handle comment in header.

commit fb31fe0fe43d95fa108d9d51f31e7c6a07a60c15
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:27:17 2015 +0100

    Fix stale comment

commit b394c4612821eee2246b365776173858656c2d8f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:26:54 2015 +0100

    Add utility method to query whether device is an AndroidTV.

commit a1ab1fc2a2b7562f699d5af6a89e78ad8fae74e7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:26:31 2015 +0100

    Detect WebVTT file header according to the spec:
    
    1. An optional U+FEFF BYTE ORDER MARK (BOM) character.
    2. The string "WEBVTT".
    3. Optionally, either a U+0020 SPACE character or a U+0009 CHARACTER
       TABULATION (tab) character followed by any number of characters that
       are not U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR) characters.
    4. Exactly one WebVTT line terminators to terminate the line with the file
       magic and separate it from the rest of the body.
    
    Issue: #580

commit 712756c3e85d6ed9cd411735bfbda3e0de4ab754
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:24:37 2015 +0100

    Cleanup regex in MPD parser

commit 98d446aa6d5e3b9fac970927a93df8f66aa978e2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:24:00 2015 +0100

    Allow seeding of RandomEvaluator.
    
    This is useful for reproducibility in playback tests.

commit 194b4ae081a54f032ff4fd597c1b9e45cb768b0b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 26 14:23:34 2015 +0100

    Fix link to be https

commit c06f844ee1a78ac8e20451abb6f89e26cd586db8
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 25 20:57:21 2015 +0100

    SUPER!

commit ed856b2a71ab4c1c1ef76d0e790aac6e6ba9ac84
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 25 19:17:00 2015 +0100

    Test

commit 5e65b40864268ed404b7be1ad270c4bd52e3beb1
Merge: e328546 dd3a4a9
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 25 18:51:20 2015 +0100

    Merge branch 'dev' of git://github.com/tresvecesseis/ExoPlayer into tresvecesseis-dev

commit e32854660790116192fe4dc8e126e85517ad0be8
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Tue Jun 23 17:57:41 2015 +0100

    Make reusable fakes for extractor+track outputs.
    
    Improve Mp4Extractor test.
    
    Add support for Xiph lacing in Matroska files.
    
    Add support for EBML lacing in Matroska files.
    
    Handle the initial sticky intent for HDMI audio plug.

commit bc14e87cfb5525ac9cf4f8245db67250f33b4980
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 22 15:57:06 2015 +0100

    Tighten package visibility

commit 4092e8ca0f5e729566a8071171109efefcf882cb
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 22 15:50:18 2015 +0100

    Fix GitHub issue #572

commit 91b47cfe6b6843fb0a46258ae630f462dc8f7d5a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 22 11:08:00 2015 +0100

    Tweak

commit 2f268a996274057d154bc3ed5172a0224818d056
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 22 11:04:23 2015 +0100

    Fix final issues with HLS 404 handling #537

commit 97aaee6d1505e52f0c502c19758ba59de27dc959
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 19 20:05:34 2015 +0100

    Fix crash introduced by previous change.

commit b8df8ecb47d838f4e3c184cbcbb64a397b1384a2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 19 19:55:12 2015 +0100

    Final fixes for correctly handling chunk load failures in HLS.
    
    An accumulation of several fixes:
    
    1. Change to HlsExtractorWrapper is just a move + documentating
       things that were already true + adding a precondition in the
       configureSpliceTo method.
    
    2. Change in HlsSampleSource.readData ensures that configureSpliceTo
       and hasSamples aren't called on an extractor that isn't prepared.
    
    3. The other change in HlsSampleSource ensures the correct "previous"
       TsChunk is used. If a TsChunk fails to load and is replaced, the
       previous chunk should be the one before that whose load completed
       successfully.
    
    4. Determine switchingVariantSpliced based on the actual format of the
       previous chunk, so it's set correctly in the case of a TsChunk load
       failure and subsequent replacement.

commit 203f3ab7321a21900cc842ba9f0ef17fe29a1607
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 19 13:31:16 2015 +0100

    Get the current extractor properly.
    
    This fixes the case where we need to switch from one variant to
    another during preparation, having loaded zero samples, because
    the first chunk for that variant gave us a 404 error. In this
    case the first extractor will have no samples, and there will
    be a second extractor that does.

commit 55862a77b1a8264e4e97b8a1bbc6fb2805c59742
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 18:53:22 2015 +0100

    Remove dead code

commit 51a8635ba2fa470ef93ccf6d48a3de0fadb2150f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 18:01:47 2015 +0100

    Make HlsChunkSource sane again.
    
    There was a mess where we were indexing into both a list of variants
    and a (differently ordered and possibly of differing length) list of
    formats. This sanitises everything.

commit e0316d1c16ac2f4f1ea8b96585fb2807900b1775
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 17:31:14 2015 +0100

    Refine TTML parsing logic + setup for adding styling information.
    
    1. Refine the way TtmlNode handles whitespace collapsing when constructing
       the output text. Can of worms.
    2. Start using SpannableStringBuilder. This will allow attaching of spans
       in getText as nodes are encountered, which is how we'll be incorporating
       styling information into the result.

commit efa92ac168f99f9ef8bd7dee098bfadb7d2511f7
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:30:08 2015 +0100

    Tiny cleanup

commit 773a69ddf967a6b6c2a14e68c3c4ad6975fab295
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:29:28 2015 +0100

    Remove redundant types

commit 160a88baf9a86e388fa317dd00c76fbae92bdaa2
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:28:54 2015 +0100

    Steps toward enabling seeking in DASH live

commit 8e58a3f5f58db1f92ebf52de76c31c8139f3d036
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:24:53 2015 +0100

    Steps toward full multi-track support.
    
    1. Remove requirement for TrackRenderer implementations to report
       current position, unless they are time sources.
    2. Expose whether renderers have media to play. The immediate benefit
       of this is to solve the referenced GitHub issue, and also to only
       display the appropriate Audio/Video/Text buttons in the demo app
       for the media being played. This is also a natural step toward
       multi-track support.
    
    Github issue: #541

commit 2c29d88330dbf0bfe8fc4722a0b06f4563afb9dc
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:22:17 2015 +0100

    Remove unnecessary call to seekTo.

commit 0ee8c07fe5ad94e38621f4ffcf9d11930b87a9f5
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:21:32 2015 +0100

    Better handle duration + disabled renderers
    
    - Fix bug where duration of initially disabled tracks wasn't correctly
      incorporated into the overall duration reported by the player.
    - Don't transition to STATE_ENDED unless the position has reached the
      duration, if the duration is known. This allows for "playback" to
      continue when all renderers are disabled, rather than jumping straight
      to STATE_ENDED.

commit 9de1bb7a0118db4ce3cdca1538ef5788b5b07503
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:18:51 2015 +0100

    Add Matroska sample

commit 072c63c33e859659d181e4350563c4f2ba54374a
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:18:09 2015 +0100

    Handle stbl atoms with no samples.
    
    Github issue: #554

commit 8c98c588e8742756088750a675ab78e25e325cd2
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:17:32 2015 +0100

    Add support for fixed-size lacing in Matroska streams.

commit 4c4782c72dfb63fb0dbb0ca7d739c0095c16fc50
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:16:37 2015 +0100

    Pass whole PSSH box to MediaDrm (except in the WV+L case).
    
    This fixes SmoothStreaming on AndroidTV, and also removes a
    warning that gets logged when using Widevine/FMP4.

commit d0ba265290ef77046db4cdcebfbd256a3dcf6572
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:13:54 2015 +0100

    Fix some MPD parsing issues.
    
    - contentType can be defined on an AdaptationSet.
    - language can be defined either in AdaptationSet or in a contained
      ContentComponent.
    - The id from the AdaptationSet should come from the AdaptationSet.

commit 54d207f3ce3933a4b547dbedba9c784e00327232
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:12:33 2015 +0100

    Default caption parsers to non-strict parsing.

commit 39adcabf7d9507c4ac30962e8cd49a2d84954dc3
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 18 14:11:33 2015 +0100

    Blacklist variants if media or encryption loads fail, in addition
    to if the playlist load fails.
    
    NB - I'm aware the casting is a bit messy, but I don't want a common
    interface because I'm hopeful that TsChunk will go away at some point.
    
    Issue: #537

commit dd3a4a91394068349c5423505dbd81fd56d537e6
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Wed Jun 17 23:00:31 2015 +0200

    fix audio channels CodecSpecificDataUtil bugs
    
      * fix channel number encoding using the AUDIO_SPECIFIC_CONFIG_CHANNEL_COUNT_TABLE
      * allocate the correct number of bits (4) int the CodecSpecificDataUtil struct

commit ecf7d1be9e68d665bb61d1b43b3daec0933e0ddd
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jun 16 13:50:22 2015 +0100

    Fix HLS track selection

commit eea57d0d76020dfcfec33ec964204a9e58b17707
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 18:02:35 2015 +0100

    Enhance WebM extractor tests

commit 854fa928fbdeefcd6452d24dab5d91e59b86129d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 18:01:46 2015 +0100

    Fix read H.264 in WebM when the NAL unit length field length is not 4.

commit 49f4fe7810c3e049278223558422813bd4a709c4
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 17:43:53 2015 +0100

    Rename URL->URI for manifest fetching

commit ded106053ca7d8abc5cb9757cce674112459ef15
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 17:43:06 2015 +0100

    Remove spurious blank line

commit 9902efc5db5d35f542a53bfa675d528cc5d9d0da
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 17:40:04 2015 +0100

    Update release notes

commit 164d8b4242903aea3b984fc72277366418279228
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 15 17:38:51 2015 +0100

    Rework application of Mpd.Location + fix test.

commit 04d6672e2c9df5735cb861d783a313f63a739747
Merge: 8cf7d37 c0ecc22
Author: ojw28 <olly@google.com>
Date:   Mon Jun 15 16:16:41 2015 +0100

    Merge pull request #536 from T-Pham/dev
    
    Fetch next Dash manifest using URL in Location directive if exists

commit c0ecc223597d5661ecd225770cece5bd2750d77d
Author: Thanh Pham <minhthanh@me.com>
Date:   Wed Jun 10 22:00:22 2015 +0700

    Fetch next Dash manifest using URL in Location directive if exists

commit 8cf7d372e969ad38ce7538901f84718cb13837d5
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:53:58 2015 +0100

    Fix test URL

commit a70c1f1a4b0b5cba16b8d1d5f7310b1974ead0ad
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:52:56 2015 +0100

    Remove requirement to specify downstream renderer count.
    
    This makes it so that it's no longer necessary to specify the number
    of downstream renderers to HlsSampleSource, FrameworkSampleSource and
    ExtractorSampleSource, by forcing the downstream renderers to register
    with the SampleSource instances in their constructors. This eliminates
    a common source of subtle client bugs where the passed value is incorrect.

commit 15dc87b037fe908c9763c58bab51ac754c078d0f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:46:41 2015 +0100

    Add flag to force spurious audio timestamps to fail playback.
    
    For enabling during device test runs.

commit e8fd3025e31e745c41dd65f8dac8445abc4caf5b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:45:27 2015 +0100

    Fix propagation of sample encryption key for webm

commit ead25a9dfe19ed1761f2f6372dbb4a6c4ad5c111
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:44:44 2015 +0100

    Call incrementalPrepare directly from prepare

commit 02c978e16c238944a931e1e169f75efc9963126e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:44:01 2015 +0100

    Further cleanup subtitle implementations.

commit bdd1968abe5fc1b24ee46858f14d547b9a3a5f5c
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 12 17:36:48 2015 +0100

    Allow reading of response headers from HttpDataSource implementations

commit 36617264019db70ee10bf9980f1f710c208599a3
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jun 10 18:30:00 2015 +0100

    Allow multiple chunk loads to prepare a HLS stream.
    
    Issue: #530

commit 87dfaff74b1b7a0f914374b7692d801cb01a3414
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jun 10 18:19:05 2015 +0100

    Fix SRT test

commit 1b1769bb6d57163a0edbf45e2b674dd0b75af3cb
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jun 10 18:03:34 2015 +0100

    Further simplify SRT support

commit fbbf3f27fdce46950f5cbe5e57fcc07325eb52f3
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jun 10 17:48:01 2015 +0100

    Simplify Subrip support

commit 71252784e905797217e1fd0cc049e482c627031b
Merge: 24e897d 2fb2e5a
Author: ojw28 <olly@google.com>
Date:   Wed Jun 10 17:46:53 2015 +0100

    Merge pull request #498 from ened/subtitle/srt
    
    Subrip (SRT) support

commit 2fb2e5a5097e287ab28893ebfaf3e8018459e84a
Author: Sebastian Roth <sebastian.roth@gmail.com>
Date:   Wed May 27 11:08:05 2015 +0800

    Subrip (SRT) support.

commit 24e897d39f493415459866901013b271c2c6e82e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 20:04:56 2015 +0100

    Further H264/H265 code deduping + fix NAL unescaping.

commit ae466cc59ba2233f74a7c4b4ef4380a598eaa5a0
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:45:45 2015 +0100

    Allow fmp4 in demo app (demuxed only)

commit 4bced734d09bcd4bd610ea5a3ae3f5aed16211aa
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:37:09 2015 +0100

    Update release notes

commit a3aed0eaedc72b7b71010ec80c520cbbe23ad689
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:30:59 2015 +0100

    Update settings.gradle

commit 218d02fc59d185c062f7d376f749c71d6f5df0a1
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:30:19 2015 +0100

    Allow Webm extractor to extract Matroska files

commit 362ccea31035ef7c553ac9b4dcafc65c9b4c145d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:29:37 2015 +0100

    Clean up permissions

commit 926bc805f5090d8162808dc022bfd4ed0ac5b85d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:28:42 2015 +0100

    Add some useful Systrace

commit 96c1e670c45346fa03bcff0453499ec205c66ee8
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:27:20 2015 +0100

    De-duplicate code for H264/H265 in MPEG-TS.

commit 10efe7904dee2ca7460342c4553251a0977a5034
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:26:20 2015 +0100

    Cleanup

commit 955c7b25a44b3ea15012a46e924847828bf93826
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:24:42 2015 +0100

    Doc fix

commit 1732aa761c72e0b35dcd393edbe1a749c085556f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jun 5 18:24:22 2015 +0100

    Set MediaFormat for VTT chunks + cleanup.
    
    ChunkSampleSource had a null check solely for the VTT case,
    where DashChunkSource wasn't setting a MediaFormat on VTT
    chunks. It's trivial to do so, and is more consistent, so I've
    done that and removed the null check. Also done some small
    tidying.

commit 01affbb93ef685e91ab38b085dfaccb8bb011406
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jun 4 15:46:32 2015 +0100

    Simplify tx3g support.

commit 254bc5a8cc922dbc1494eb42561760302b7d08ec
Merge: c992d9c b95b0aa
Author: ojw28 <olly@google.com>
Date:   Thu Jun 4 15:07:29 2015 +0100

    Merge pull request #509 from Ood-Tsen/tx3g
    
    parse mp4 tx3g

commit c992d9c4338f9568346650d024ed8a4ec6a918fb
Merge: 5b186a2 e34ef40
Author: ojw28 <olly@google.com>
Date:   Thu Jun 4 11:41:35 2015 +0100

    Merge pull request #517 from google/dev-webm-vp9-opus
    
    Merge webm/vp9 native extensions into dev.

commit b95b0aad5c7c6418b788fc70a91c2f534d52972b
Author: ood_tsen <oodtsen@gmail.com>
Date:   Wed Jun 3 20:28:30 2015 +0800

    clean the list while forward seek.

commit fd2ebc767c9f9e565df02c99f4c719c66aadb193
Author: ood_tsen <oodtsen@gmail.com>
Date:   Wed Jun 3 20:02:42 2015 +0800

    keep maximum number of subtitles to four.

commit 106ebbf7dfd37f5feba24200e6ed3192e7a3e494
Author: ood_tsen <oodtsen@gmail.com>
Date:   Tue Jun 2 21:00:22 2015 +0800

    clean up unused code.

commit 5b186a2aa43f29983374a3c9be5af34059bb2345
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Mon Jun 1 17:42:43 2015 +0100

    Add support for reading H.265 in MPEG TS.

commit 39607551aa222a2d92abb0c501db78ed8eae6dd1
Author: ood_tsen <oodtsen@gmail.com>
Date:   Mon Jun 1 20:47:55 2015 +0800

    add title.

commit f42ed8920215c78ee61df924a06d120a3d1c50b3
Author: ood_tsen <oodtsen@gmail.com>
Date:   Mon Jun 1 19:47:46 2015 +0800

    parse mp4 tx3g

commit 02d5cb8109d71e9883b3abd5c748c595cb1f215c
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Fri May 29 12:52:05 2015 +0100

    Use Build.DEVICE not Build.PRODUCT.
    
    On HTC Butterfly these match, but Build.DEVICE is actually the right value to
    use.
    
    Issue: #377

commit e34ef4018852cfd013f56820a46dd25583bcda64
Merge: ece3ac6 cb1e6ad
Author: ojw28 <olly@google.com>
Date:   Thu May 28 17:21:08 2015 +0100

    Merge pull request #503 from google/dev
    
    dev -> dev-webm-vp9-opus

commit cb1e6ad41822deb0ba38b33f35ded760b8b7dd3d
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:19:30 2015 +0100

    Tweak project configuration

commit a85a169604ef09a12c72a82b6f85dd79dadde7fd
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:18:26 2015 +0100

    Simplify the demo app.

commit b806109cfd63f4aedf19f388c1091b81f61bead2
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:14:52 2015 +0100

    Make HlsSampleSource use LoadControl.
    
    This will be needed for keeping WebVTT subtitle and separate
    audio tracks is sync whilst loading.
    
    Issue: #151

commit ea29c71d94cb013115b3bff26e971f693770bdde
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:11:28 2015 +0100

    Temporarily revert bounded live seeking. It's causing issues in its current form.

commit aa249e9f7f07d138da68ba794393c8e89b1cd710
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:08:39 2015 +0100

    Fixed issue in which the segment/chunk shift value could become incorrect.

commit 99edc6a4b447399d62f578d0aeed0eabbeddd98c
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:07:12 2015 +0100

    Avoid using OMX.qcom.audio.decoder.mp3 on HTC Butterfly.
    
    This OMX component is listed but can't be instantiated on this device.
    
    According to the GitHub issue, some other devices are also affected, so these
    will have to be added too.
    
    Issue: #377

commit 5c9c15ae6e6a30b7635b4d9888ee58e987e3bd0b
Author: Oliver Woodman <olly@google.com>
Date:   Thu May 28 17:06:26 2015 +0100

    Add support for extracting H.265/HEVC data in MP4 files.

commit ece3ac63c8201af8eaa041057d53ad9352b8322e
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:50:29 2015 +0100

    webm branch cleanup

commit 9f9e432d522853a6735fa8783ac107d619640c3f
Merge: c42b265 ac54b4f
Author: ojw28 <olly@google.com>
Date:   Fri May 22 21:46:42 2015 +0100

    Merge pull request #487 from google/dev
    
    dev -> dev-webm-vp9-opus

commit ac54b4f696d65fe03533af6e7428c751ceb51b35
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:45:13 2015 +0100

    Cleanup/Sync with internal tree

commit 67d0154960b3e4a413b57359ebd6f1004b4636f2
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:40:22 2015 +0100

    Use Java7 <> syntax

commit 91bcec82f5067cb95296f4caf84ae3633bbaf290
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:37:21 2015 +0100

    Support an up-front block allocation in DefaultAllocator.

commit 79d557dd80d6d1c38725ef4c49b5ef03c80fbcfa
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:36:35 2015 +0100

    Move WEBVTT custom header constants.
    
    They're current location is annoying, because it creates a dependency
    from the dash package to the webvtt package. For apps like Play Movies
    where WEBVTT isn't used, it's nice just to delete the whole package at
    import time, which requires that this dependency be removed.

commit efd0b1e3cfa5f315348c39f03832c8a4d48ce739
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 21:34:51 2015 +0100

    Updated all ExoPlayer Eclipse projects to use Java 1.7.

commit c42b265e6541b81f9eeb16461705842eebaf4fec
Merge: 4aee221 54e2c28
Author: ojw28 <olly@google.com>
Date:   Fri May 22 20:59:48 2015 +0100

    Merge pull request #485 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 54e2c2833cd4c5d5938f36da77518e52cd87d87a
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:57:24 2015 +0100

    Bump to 1.3.3

commit 19552f8e48d84beba4431726d6bfb0460faf96cd
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:47:49 2015 +0100

    Update README

commit 4e1c4f00aceaafe296dbf3fe0d4c0f66814bb05d
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:43:38 2015 +0100

    Resolution is INTxINT

commit a60dc5803e667d53db7a952dab46baf1457540e7
Merge: 250cab2 fd7345b
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:40:36 2015 +0100

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit fd7345b4c49a5db23d9c798b080b5471b2df5907
Merge: 763d68f 08d3373
Author: ojw28 <olly@google.com>
Date:   Fri May 22 20:40:26 2015 +0100

    Merge pull request #483 from kellyschrock/hls_aac_fix
    
    HLS AAC fix

commit 250cab2dac085efb20eb90c906c15c2fd97c90dd
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:39:28 2015 +0100

    Fix AudioTrack typos.
    
    Issue: #479

commit 30011285bbc17ad095182457ed4849ddead85ef8
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:38:23 2015 +0100

    Add TRICK_PLAY constant to core Exo.
    
    Seems generally useful to have.

commit 3e62b63eb254bd1d5e818c303015b0c0ea7ed605
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 22 20:37:52 2015 +0100

    Try and use httpDataSource if scheme isn't recognised.
    
    Issue: #473

commit 08d337365e11007f7a2edac4902f26737fdaeb66
Author: Kelly Schrock <kellyschrock@gmail.com>
Date:   Thu May 21 20:35:09 2015 -0500

    HLS AAC fix
    
    Fixes issue where an NPE occurs when RollingSampleBuffer is created
    with a null Allocator.

commit 253a0105f7acc79f40ee5d7faa23d2ba5fe77aaf
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 15:24:18 2015 +0100

    Cleanup

commit 658a7ffba59b94f028b5e3a0b51ad853ab3781d2
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 15:19:59 2015 +0100

    Step towards enhanced Webvtt parser to support HTML-rich captions and positioning.

commit 709fc7735b9038ab8ea8399b4e2308587d98bd80
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 15:16:29 2015 +0100

    First steps toward implementing bounded live seek.

commit 4aee221fb3bf58076eee3f84c353905b33a04bdf
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 15:03:03 2015 +0100

    Fix webm demo

commit e3a7fc4da7ca82a7f8bf86a15cb11fd41f2d5a5e
Merge: c4fd6c2 763d68f
Author: ojw28 <olly@google.com>
Date:   Tue May 19 14:57:00 2015 +0100

    Merge pull request #469 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 763d68f26c641e345112c07551038488e089af2f
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:37:29 2015 +0100

    Bump to 1.3.2

commit c86a5378c754b0223209b5fbd6227503078961be
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:23:30 2015 +0100

    Update release notes 3

commit e55448924e65907d60f2839f36c33518137409a8
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:22:23 2015 +0100

    Update release notes 2

commit f88283d614c348edef2251c41251dfadc29505b7
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:20:27 2015 +0100

    Update release notes

commit 6ae97ced3aeb9678567453899fb1b4fb6de17ff0
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:14:53 2015 +0100

    Support content:// URIs, and some cleanup/consistency tweaks.
    
    - There's definitely potential for more code sharing in these
    classes, but deferring for now.
    - Also made no-scheme default to file://, and allowed smoothstreaming
    URLs to be specified with or without the /Manifest suffix.

commit a9c977a79e0be0cf40903aaa89ce7e8514de777d
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:13:31 2015 +0100

    Fix Mp3Extractor synchronization when loading retries.
    
    Before preparation, and when seeking, Mp3Extractor did not handle retrying:
    - synchronizedHeader was set before the header was known to be valid, which
      means that after seeing one valid frame header and then failing to read, the
      synchronization would be treated as complete.
    - The input buffer would keep data loaded during synchronization but on the next
      call to synchronize when retrying it was not returned to the mark position to
      re-parse the data.
    
    This change fixes these issues.

commit 675c7738c14e81f56292e0e1b7e246f1c6ce1e58
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:12:59 2015 +0100

    Let DefaultUriDataSource load assets.

commit f474afbf5e0a0b3f22307eac2f93f1135d4c6828
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:06:48 2015 +0100

    Fix handling of widths/heights when choosing formats.
    
    - Make HlsPlaylistParser treat non-positive dimensions as unknown.
    - Make HlsPlaylistParser parse floating point resolutions, because
      technically that's how they're spec'd.
    - Make VideoFormatSelectorUtil treat non-position dimensions as unknown.
    
    Issue: #461

commit 059b80c1ab798c85e43280a768f239c6d1c7286a
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:05:50 2015 +0100

    Improve DataSource implementations:
    
    1. Make DefaultUriDataSource robust against exceptions through from close().
    2. Make AssetDataSource handle file:///android_asset/ URIs.

commit 672906060ca64763f7209cddbf932e865db3bb19
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:05:08 2015 +0100

    Fix missing ID3 events
    
    When I moved the id3Reader instantiation out of the while
    loop (below where it is now) it was no longer guarded by
    the streamTypes.get(streamType) deduping check. This brings
    back an equivalent check.

commit cd6c5c39848faeaecd14693fbe3f6bb25128fb84
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:03:39 2015 +0100

    Fix CBR seeking when XING header is present.
    
    When a XING header is present but not usable (due to missing fields), CBR
    seeking can be used instead. It relies on the bitrate. The bitrate from the
    unusable XING header is not correct, which leads to incorrect seeking.
    
    Also fix VBRI seeking by setting the correct offset on the frame to parse. Few
    people seem to use that format, but I have found two very short truncated
    samples which were falling back to the CBR case before but are using VBRI with
    this change.

commit d03fb105165f0724b8e576f84b85503c169b233d
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:02:40 2015 +0100

    Remove readBitsLong, use readBits instead

commit dd7a79688396843f40bdb507e3c7ea00e27e966b
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:01:59 2015 +0100

    Make constant public

commit 0dfc1d3bb799ee2c48b51f9b6b32b0e350161b4d
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 14:00:49 2015 +0100

    Don't sample the timestamp/latency for AC-3 passthrough playback.

commit 9f53ea81169f8e1f680a35450dad78d58f16b034
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 13:56:44 2015 +0100

    Tweak documentation 3

commit 35737bb9895936e80c1495122410913810e5a609
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 13:56:13 2015 +0100

    Tweak documentation 2

commit d0ea014ba3dae62ec0d124034de1cd7d71f549e4
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 13:54:59 2015 +0100

    Tweak documentation

commit b9688742c672c02291c58845ee846bf34e4b46c7
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 19 13:50:31 2015 +0100

    Add changelog to track high level changes of each release

commit 820525695a0853e5e21b98d0af2bce2eafda6d2c
Merge: ea9611a b340d47
Author: ojw28 <olly@google.com>
Date:   Mon May 18 13:54:28 2015 +0100

    Merge pull request #465 from Ood-Tsen/contentDataSource
    
    support content uri (e.q. content://xxx)

commit b340d47165ebaec360e5a2a05c56dfd23f7c16cc
Author: ood_tsen <ood_tsen@htc.com>
Date:   Mon May 18 20:24:59 2015 +0800

    support content uri (e.q. content://xxx)

commit ea9611acebffcd0b96856e4f440ad2fef0d43c61
Merge: 5ca5df0 1469f11
Author: ojw28 <olly@google.com>
Date:   Wed May 13 10:29:37 2015 +0100

    Merge pull request #454 from pakerfeldt/property-setter
    
    Support setting properties on MediaDrm

commit 1469f11aa3432369fbd687f9fb28fc35291e1c7a
Author: Patrik Åkerfeldt <patrik.akerfeldt@gmail.com>
Date:   Wed May 13 10:41:22 2015 +0200

    Support setting properties on MediaDrm

commit c4fd6c2b1f0d7743f3ca7d45056e733e34322e90
Merge: e1b7ccf 5ca5df0
Author: ojw28 <olly@google.com>
Date:   Tue May 12 18:44:28 2015 +0100

    Merge pull request #448 from google/dev
    
    Bump to 1.3.1

commit 5ca5df0bb2cc65dd55ce4f12eae6379b4f025ac6
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 18:42:46 2015 +0100

    Bump to 1.3.1

commit e1b7ccf15e9a0b67528c08b56c1c9d2768f0c94a
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 18:32:22 2015 +0100

    Fix versions

commit 093596377113ab5e9a0f0ba8a5f4dcd44f6d494f
Merge: e7bb9dc b7b9dc1
Author: ojw28 <olly@google.com>
Date:   Tue May 12 18:15:59 2015 +0100

    Merge pull request #447 from google/dev
    
    dev -> dev-webm-vp9-opus

commit b7b9dc1c2ec0a852dab74b67bf2144776f33fac4
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 17:02:47 2015 +0100

    Fix javadoc location in readme

commit 06cbb4e74689d6adf38fcbe556f7c6db0408f514
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 16:57:39 2015 +0100

    Fix doc image refs

commit 683b67cc191d683b7375d5a331d6736048ee07a5
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 16:53:47 2015 +0100

    Correct javadoc header

commit 2dabad3bc3c3165f9b2b32c4e878d5b29985da88
Merge: 5ca3378 350cffb
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 15:23:21 2015 +0100

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit 5ca3378b71cea75c709f4979e0bb9c41b84d6cbf
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 15:22:43 2015 +0100

    Rm doc dir from dev

commit 8a347d1a5d8c3c01daef28f3049718423cc7895a
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 15:21:42 2015 +0100

    Use https

commit cd55fc068f55d7b5d1c6b621e3cfcf1b033303e9
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 15:10:07 2015 +0100

    Gradle for Javadoc

commit 350cffb6d6de546890b18a3d520c049a891340e5
Merge: fc31992 4f5496d
Author: ojw28 <olly@google.com>
Date:   Tue May 12 14:15:41 2015 +0100

    Merge pull request #446 from ened/gradle-plugin-1.2.3
    
    Gradle plugin 1.2.3

commit fc31992a0164b88c8a28912c3904c1e9914cb512
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 10:43:22 2015 +0100

    Update README 2

commit 639690079e53b153a8e7602d761acf8d7d76a784
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 12 10:12:22 2015 +0100

    Tweak README

commit 4f5496d4a6bb157bc2463bfc813048b75a8cf8dc
Author: Sebastian Roth <sebastian.roth@gmail.com>
Date:   Tue May 12 10:11:00 2015 +0800

    Gradle plugin 1.2.3

commit e7bb9dc0d86279ccc6cac4dfce48d03c0b8a6af6
Merge: caf41fb acad036
Author: ojw28 <olly@google.com>
Date:   Mon May 11 21:29:12 2015 +0100

    Merge pull request #445 from google/dev
    
    dev -> dev-webm-vp9-opus

commit acad036b80205304b7e896795abbec2b2bf7a66a
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:24:31 2015 +0100

    Fix link

commit 4cebae7dcefa3db1f1cd79c5f9bdfbe49d44e22e
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:23:12 2015 +0100

    Update README

commit caf41fb1f1dea8f5697c05b8b712f6b6e7460972
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:18:23 2015 +0100

    Bring branch up to speed with dev

commit dd41d14ac327f480f8f8d8f8a30c8fedc5139a25
Merge: 5d92cc8 166c2f7
Author: ojw28 <olly@google.com>
Date:   Mon May 11 21:17:17 2015 +0100

    Merge pull request #444 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 166c2f7cc0c48961ca5efd15a9bb14261345ba15
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:16:02 2015 +0100

    Fix two issues related to seeking with AC-3 output.
    
    When a passthrough AudioTrack is replaced (due to seeking) the new one behaves
    as if it is still emptying data from the old one, with its playback position
    advancing until it runs out of data.
    
    Data written while the 'old' AudioTrack was emptying would be discarded, so
    avoid writing to the new AudioTrack while the old one is still emptying.
    
    Also avoid using AudioTrack.getTimestamp with passthrough tracks, as this causes
    the playback position to jump to a position that breaks audio/video
    synchronization.

commit 79c7798d841239aad034c232bdc9e6abd664b113
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:11:53 2015 +0100

    Reorganize BandwidthMeter interface

commit 64cc380fe15435f3c497f417c5723c7adf57c4f2
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:10:20 2015 +0100

    Avoid loading first chunk when preparing HLS for non-zero position.
    
    This also fixes a technical mistake where HlsChunkSource is fed
    seekPositionUs=-1 when obtaining the first chunk. This is wrong,
    but the usage of this variable within HlsChunkSource enforces that
    the seek must stay within bounds, so we get away with it.
    
    Issue: #385

commit 116a18848f51dc61cd7512824d20bda088c62cc1
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:05:37 2015 +0100

    Alter default exo buffertime value to 2500ms.

commit 12d05a0917a85a9fa5b7dea8e3f322fe2a618f70
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:04:51 2015 +0100

    Bump target API level to 22.

commit b0abda43ecdf2dfa1d0c2f2f0070a965ed9666e9
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:03:30 2015 +0100

    Ensure we configure a new extractor when we need one.
    
    Issue: #400

commit 770ad7f06ff4cdba1021c7423a7916517c5065c9
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:02:38 2015 +0100

    Fix edge case in HlsSampleSource.
    
    1. prepare() needs to load a TsChunk to actually prepare the source.
    2. Source is prepared, but no tracks are enabled (this is why it's
       an edge case - no-one is likely to be doing this!).
    3. The TsChunk load completes.
    
    We should not load additional chunks in this case.

commit dd5eabdf4a5c6e0de641656d8bc7db2d3042c853
Author: Oliver Woodman <olly@google.com>
Date:   Mon May 11 21:01:35 2015 +0100

    Signal EoS when seeking ExtractorSampleSource to the end of a track.

commit 2ce33c257a73a064b3145cb11740d6c485e7a506
Merge: 861d674 3079bf1
Author: ojw28 <olly@google.com>
Date:   Mon May 11 16:24:17 2015 +0100

    Merge pull request #436 from ened/dev
    
    Simple gradle updates

commit 861d6749ef24b4b1b97855418dc9d7fe36a933b2
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:09:39 2015 +0100

    Remove ability to extend the default FormatEvaluator implementations.

commit 9f77c4009e5d8dc51e5df08592dead8c636f73ef
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:08:59 2015 +0100

    Clip seek position to the inputLength - 1.

commit d9071710cfda98f743f575a8c7f8f64a0e834f84
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:08:13 2015 +0100

    Read AC-3 tracks in MPEG TSs only if AC-3 playback is supported.
    
    Partly fixes #434 as the AC-3 stream will now be ignored if the
    audio capabilities don't allow it to be played back.

commit d8af120b98b7fbbba6e5abaaf540c29ef502bbff
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:06:59 2015 +0100

    Fix treating all DVB data as AC-3.
    
    Issue #434

commit 7437ee39d81f86ff61cdc1f9d8784dbf165a9c4c
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:06:27 2015 +0100

    Remove deprecated method.

commit 54b71a57436f4622a3661918f5553dd1fd6c2355
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:05:54 2015 +0100

    Allow cross-protocol redirects.
    
    Issue: #423

commit 4527539efe053715b33e29a59966e7fd039d2423
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:05:04 2015 +0100

    Handle cenc:pssh elements in DASH manifests.
    
    Issue: #407

commit 3360f5eda5fde56e51154b1182ffafde6caafbaf
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:04:21 2015 +0100

    Enable passthrough based on the input MIME type.

commit a1083d360ad3ed77facf2ce543c4440363b37daf
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:03:05 2015 +0100

    Prevent wrapping detection on new passthrough AudioTracks.

commit de5bce3400129b4b6400237e64cc3e70bcf4044c
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 8 17:02:23 2015 +0100

    Apply passthrough workarounds only on platform API versions 21/22.

commit 3079bf1d7502dd14ae7356a1a4e64523d5ccc5a8
Author: Sebastian Roth <sebastian.roth@gmail.com>
Date:   Thu May 7 16:35:53 2015 +0800

    gradle updates

commit 5d92cc8324431c2d89b2796dd177c3bcaf03b78a
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:41:12 2015 +0100

    Make changes to Opus/Vp9 projects to build against new dev

commit 102e0ce879cb63ef112213a3154794f4936386d9
Merge: fcc2138 02ea6f8
Author: ojw28 <olly@google.com>
Date:   Tue May 5 20:38:36 2015 +0100

    Merge pull request #431 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 02ea6f8937c85f2ae5a231f77abb34e44244a8c6
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:34:34 2015 +0100

    Fix TYPE values.

commit 9d73104472b20e060421463f7762b2595f0164b7
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:34:07 2015 +0100

    Remove unused imports.

commit 9921dfd1ced208f4dd4d37cd92d3debcb963a501
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:33:25 2015 +0100

    Deprecate FrameworkSampleSource as a deterrent.

commit 37827be8cbea4bf930af379df88f0ba99cbd9bb5
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:32:28 2015 +0100

    Use a UriDataSource for DASH manifests.
    
    This allows loading a manifest from a file:// URI.

commit 6909c948b93bd8b232a622ca7f5aa910d48bf5cf
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:32:06 2015 +0100

    Remove SuppressLint in AudioTrack.

commit d2ba5cfd97499429821bd0c863a642bf531d9fe8
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:31:34 2015 +0100

    Add TYPE_M4A, which is equivalent to TYPE_MP4.

commit 9dcb17f21a839fb86d79d764bac36c1a206124e5
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:30:52 2015 +0100

    Clean up DataSourceInputStream

commit a63883a8c8074dc8d39524e7889c50d8066f2928
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:30:32 2015 +0100

    Fix format equality checking.
    
    For Live SmoothStreaming, referential equality checking
    isn't enough (it breaks once the manifest is updated).
    Updated other instances too just for consistency.

commit 8eb7349987b11dfe625490a0132144656347ed5b
Author: Oliver Woodman <olly@google.com>
Date:   Tue May 5 20:12:32 2015 +0100

    Fix broken demo links

commit ab402bd13e5d853068ff5fbcb369f2b5e4599cb4
Merge: 7f58a0b 2a06c26
Author: ojw28 <olly@google.com>
Date:   Tue May 5 13:51:03 2015 +0100

    Merge pull request #429 from gitanuj/datasourceinputstream-fix
    
    Fix DataSourceInputStream.read() for EOF cases

commit 2a06c2641c8a1c4bc146fdb227f6f10f2e6a97d7
Author: Tanuj Mittal <tanuj.183@gmail.com>
Date:   Tue May 5 16:30:09 2015 +0530

    Fix DataSourceInputStream.read() for EOF cases

commit 7f58a0be8192c375565d7c77950200ee0a38c011
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:43:42 2015 +0100

    Use TYPE_MP4 instead of TYPE_OTHER for Dizzy.
    
    Issue: #72
    Issue: #292
    Issue: #302
    Issue: #425
    Issue: #424

commit 1cac22d2a29eb99718570e2c4c6e18c9f6395f1d
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:37:14 2015 +0100

    Add support for standalone WebM playbacks.

commit b3594051a1546c6d271da1285e9518ebb127c4b6
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:35:54 2015 +0100

    Fix DemoPlayer's spurious transition through STATE_IDLE.
    
    The spurious transitions were caused by calling pushTrackSelection
    in onRenderers after changing the renderer building state to BUILT
    and before calling player.prepare. pushTrackSelection can cause the
    ExoPlayer to generate state changes, since it can call setPlayWhenReady.
    This change transitions the renderer building state later, so that
    when this happens getPlaybackState correctly masks the state and
    returns STATE_PREPARING.

commit 79cdd036828223bf2da29f8091252add27799aed
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:34:57 2015 +0100

    Filter unsupported video formats for HLS.

commit b405d3d9b73d2854c5ae7f173755917807e13045
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:33:52 2015 +0100

    Have Representation, TrackElement and Variant consistently expose Format.
    
    And delete things that we're parsing but don't use from TrackElement.

commit 8673cafce882dc8d441b7507917741473aa4022b
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:32:42 2015 +0100

    Move Allocator to HlsSampleSource (from HlsChunkSource).
    
    - This makes HLS consistent with Chunk/ExtractorSampleSource.
    - It needs to be consistent for WebVTT in HLS.
    - Also trim the allocator when done.

commit 0c5a1a6c35be56e9d25a70d7fb1cba952dbf2eed
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:31:49 2015 +0100

    Distinguish exceptions caught at top level.

commit efb9ff1fe737e15d79e3cb75b43ba71c376d0eda
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:31:21 2015 +0100

    Play standalone MPEG-TS files.
    
    - Have TsExtractor report a SeekMap to the output.
    - Implement TsExtractor.reset to reset extractor state.
    - Add 1x sample.

commit cfab852096b7fdb6d4d81a99ab6eabe0b20bd7c0
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:30:00 2015 +0100

    Remove pointless references to ElementaryStreamReaders.

commit d82343d06cee2b9412ac88acc93cb6fc4eda4340
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:29:32 2015 +0100

    Remove MediaFormat.bitrate.

commit 54f97c952e77fbbda64f6330ac3747806d456718
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:28:49 2015 +0100

    Reintroduce Allocation abstraction.
    
    Play movies has an Allocator that attempts to allocate a single
    huge byte[] up front to minimize the risk of GC pauses. This abstraction
    will be required to keep that when updating them to the new Exo.

commit 9b112cf94df6c552abaa21371de9fbdb8db065b1
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:27:11 2015 +0100

    Video format selection.
    
    Making Representation and TrackElement extend Format will simplify
    this further (TBC whether this is a good idea!).
    
    Issue: #393

commit fafcd79e1b8bed1c4323049d6e2ea9af029fed70
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:25:19 2015 +0100

    Move AC-3 bitrate calculation into Ac3Util.
    
    This is in preparation for removing bitrate from MediaFormat.

commit 6bf62770bddd9b6a6e694b0b513a39ca3d051cf4
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:24:50 2015 +0100

    Make sure that the process dies if a loading task throws Error.

commit 1d528b80eaa85449a02f800f507e13e4e5186ea8
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:24:27 2015 +0100

    Move getUserAgent from DemoUtil to library's Util.

commit 6cb46e454905f704067409f1a682dd5b8a625c95
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:23:33 2015 +0100

    webm_extractor: Add VP8 to the list of codecs.
    
    VP8 can be decoded by MediaCodec (since very early versions of android). Now that we want WebmExtractor to be general purpose, adding VP8 makes sense as it is a common use case.

commit 5ea7424ee3b3fced67dd85651d51cf186bdca648
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:23:02 2015 +0100

    Tidy up AssetDataSource.

commit 053e5b9f1cec5f277652f5e9fd831569c2407bf5
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:22:31 2015 +0100

    Fix javadoc warning.

commit ce3d5c9a5997c3072a587aefeacb8d33438d3fe8
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:22:03 2015 +0100

    Throw when getMinBufferSize returns an error value.

commit e6c7defc7930254d18a74088ea46add0e7e18838
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:21:36 2015 +0100

    Make ParsableBitArray.data public, like ParsableByteArray.

commit 7ad55dbf2c834b3b938b5f292b6f2b053ec192bf
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:20:47 2015 +0100

    webm_extractor: Add support for parsing BlockGroup element
    
    This CL adds support for parsing BlockGroup elements for all
    codecs (not just opus). It also adds a test to verify the new
    behavior.

commit 99304eb44ea5a7915e6c0fc86c22bd77a9aa0b97
Merge: aed45bb 39082d1
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:18:54 2015 +0100

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit aed45bb2ca1a6e7b25a33cdc59ff1eb95c9c3a00
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:10:47 2015 +0100

    Add support for reading AC-3 audio in HLS.

commit 39082d19181226012f641009a84407357abd695e
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:10:47 2015 +0100

    Move AC-3 header parsing into a new Ac3Util class.
    
    This is in preparation for adding support for AC-3 in HLS.
    
    Also parse E-AC-3 boxes.

commit 9b6c30525ec438ad8bc03e5a6afbff442b2f941a
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:13:53 2015 +0100

    webm_extractor_tests: Add tests for multi track Webm Extractor Support
    
    Refactor the extractor tests to enable testing of multi track Webm support.
    
    Github Issue: #363

commit 48fc9635a919f4a32f866f0bf8b50ff12fa979f9
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:13:19 2015 +0100

    webm_extractor: Add support for Cues present at the end of file
    
    This CL adds support for WebM files which have Cues present at the end of the file (i.e.) after Clusters. The file referenced in the bug can now be played back using the demo app. It adds a new flag to WebmExtractor which should be set to true only when being used through ExtractorSampleSource. All others (e.g. DASH) should not set it.
    
    Reference file: http://demos.webmproject.org/exoplayer/glass_vp9_vorbis_cues_at_end.webm

commit 6cccfc1caa13c00a7be8b640e31ad0840746b14a
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:12:28 2015 +0100

    Make Atom.getAtomTypeString public.
    
    I've found myself doing this a couple of times during local
    debugging. It's harmless to have it public, and seems pretty
    useful for debugging inside of the mp4 package.

commit b787852e71346ce96ae0f0687c62ba52f80e98b7
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:11:57 2015 +0100

    Correctly stop previous renderers if prepare is called again.

commit 88daaa882ce75de78ec7e74ead50e13cdb435428
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:11:27 2015 +0100

    Fix NPE if source is released having never been prepared.

commit 837090e8f9a67553b840b6a1988da873cb299f60
Author: Oliver Woodman <olly@google.com>
Date:   Fri May 1 20:10:47 2015 +0100

    Move AC-3 header parsing into a new Ac3Util class.
    
    This is in preparation for adding support for AC-3 in HLS.
    
    Also parse E-AC-3 boxes.

commit 26c5461b100cd4438f554d09007fd343e1fef7f3
Merge: f273c73 a43dd6b
Author: ojw28 <olly@google.com>
Date:   Fri Apr 24 11:51:11 2015 +0100

    Merge pull request #408 from dnutcracker/dev
    
    fix for issue #403

commit a43dd6ba68f482ae4978118179446d3779ba7935
Author: Nati Dykstein <nati@samba.me>
Date:   Wed Apr 22 22:25:44 2015 +0300

    Update AssetDataSource.java

commit f273c73123be236d9594613f00a0dde12d641cb9
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:24:12 2015 +0100

    Support NALUnitLengthFieldLength != 4.
    
    Seems a little hacky to define this in Track, but there doesn't seem to
    be a particularly nice alternative.
    
    Issue: #406

commit afb1a93059794b432cf6fa9509a603ddb3b73fa4
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:23:33 2015 +0100

    Refine ExtractorSampleSource retry.
    
    I was hoping not to avoid this, but in the case of a parsing
    failure during preparation we keep retrying forever!

commit 1a01dcc55af8ebe435c664baeb42100dfb225c83
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:22:48 2015 +0100

    Separate UriDataSource from HttpDataSource.
    
    Using a file:// URL for loading an HLS stream (for testing) would fail due to
    casting the connection to an HttpURLConnection in DefaultHttpDataSource.
    
    This change makes UriDataSource an interface for objects that are DataSources
    with URIs. That allows for reading manifests for HLS using just a UriDataSource
    rather than an HttpDataSource (URLs in the playlist are relative to the data
    source's URL so the getUri method is needed).

commit d43d55edebeec09404e635ea4233c067e3e2aa29
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:20:12 2015 +0100

    Add minSdkVersion note to build.gradle.

commit a1336978adbf4940d3550599131f52b19abc6d90
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:19:48 2015 +0100

    Fix DataSpec toString formatting.

commit c807c69a93b39c574ffc685263d56f5d82274c38
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:18:23 2015 +0100

    webm_extractor: Support for multiple tracks
    
    Github Issue: #363

commit f637fde962d7d82cc0ce0d6f767248efab18942a
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:17:36 2015 +0100

    Allow overriding of codec buffer dequeue block time.

commit 1a9bf018a4134852aafd25b127a8296611558f2a
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:16:42 2015 +0100

    Add frame rate to Format for use in format selection (when known).

commit a7e2b719c5c6278bc93e1d382acb7677b9f1caf7
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:14:46 2015 +0100

    Call init() on the extractor only once for each chunk.
    
    On retrying loading a chunk, the state of the extractor was reset due to a call
    to seek(). Prevent this call by only calling init() if no bytes were loaded.
    
    Also make the DefaultExtractorInput use the loading position not the original
    stream position so that its getPosition() method returns offsets relative to
    the start of the stream, which fixes a bug where the chunk index offsets would
    be relative to the wrong position if there was a retry while loading the chunk.

commit 21e69f3154ee4d21153cad6ef473d683ee1970ee
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:13:19 2015 +0100

    Add more loading info (including chunk loading times) to
    BaseChunkSampleSourceEventListener.onLoadCompleted.

commit 3a1325b0af009b7aada70fcdd95ff3dcadae4158
Author: Oliver Woodman <olly@google.com>
Date:   Wed Apr 22 16:11:23 2015 +0100

    Make TsExtractor consistent with AdtsExtractor.

commit 647d9bedb8099321289ac2dcbfc02d7a365f42ed
Author: Nati Dykstein <nati@samba.me>
Date:   Wed Apr 22 14:51:05 2015 +0300

    fix for issue #403

commit 55e08ff712b7be66d6fd8545d46ed29f6b472e22
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:12:11 2015 +0100

    Avoid time discontinuity when retrying a live stream.
    
    Issue: #227
    Issue: #389

commit faf0e2c1471179f0dfaa3a547719c5121920a962
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:10:31 2015 +0100

    Improve retry logic.
    
    1. Reset retry count to 0 if a Loadable makes progress.
    2. Handle resume correctly in the case of live streams.
    
    Issue: #227
    Issue: #389

commit 4c94a846d5486af4cf3a7169aa0e1b1ad85a547e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:09:45 2015 +0100

    webm_extractor: Fix issue in vorbis extraction.
    
    Vorbis decoder in android MediaCodec [1] expects the last 4 bytes of the sample to be the number of samples in the current page. This definition holds good only for Ogg and is irrelevant for WebM. So we always set this to -1 (the decoder will ignore this value if we set it to -1). The android platform media extractor [2] does the same.

commit b1aac839e68d837611eb11dcda86d6e5e75e81fc
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:08:54 2015 +0100

    Don't feed AC-3 input when the audio track is paused.
    
    This works around an issue the audio track continues to play audio data written
    after calling AudioTrack.pause(), which breaks rebuffering behavior (as video
    can never catch up if audio continues to be consumed, in some circumstances).
    
    Also don't increment the timestamp wrap count if the track is paused, to work
    around an issue where the playback head position jumps back to zero after the
    AudioTrack position jumps back to zero.

commit c4eee71fa204d33da48dba6659368eca284a4a3d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:07:04 2015 +0100

    Support AAC without platform MediaExtractor.
    
    Issue: #231
    Issue: #227

commit fb97fca04e339d5dbe23a92bb4d300901aa04c74
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:04:52 2015 +0100

    Handle dynamic appearance/disappearance of ID3 track in HLS.

commit 5f74226d675191c2191b780a1021113b621a5a9f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:04:18 2015 +0100

    Make the audio track session workaround flag non-final.

commit 508e13e0bd96d27475851de6106546ae52c98897
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:03:24 2015 +0100

    Clean up + optimize ParsableByteArray.

commit 9092fad8e8ae6de7e7681181763fe96c8545d73a
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:02:20 2015 +0100

    Fix subtitles.

commit 052371784166e10aee551e37184840594b29aa68
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:01:59 2015 +0100

    Fix crash.

commit e84c8521698b52b95ae2f9949a99f8ff1354e524
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 20:01:06 2015 +0100

    Select E-AC-3 in preference to AC-3, and remove other tracks.

commit 3f1638de9508978235effdc2b0bbb28d31c4f5bb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 19:59:58 2015 +0100

    Use ENCODING_PCM_16BIT for keepSessionIdAudioTrack.
    
    ENCODING_PCM_8BIT support is not required.

commit e4e6a1caf0298a325d1276d1fd958e4e1c300348
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 19:59:03 2015 +0100

    Switch from AudioFormat.ENCODING_DEFAULT to .ENCODING_PCM_16BIT.
    
    AudioTrack.getMinBufferSize does not handle ENCODING_DEFAULT so
    switch back to ENCODING_PCM_16BIT.

commit 31552b8cdf42d4839212263ec3e983cb46dd883a
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 17 19:57:56 2015 +0100

    Handle play/pause button in the Demo app on Android TV.

commit c3bf60b1a912d6fe28e09ebc66bafd5467d688bb
Author: Oliver Woodman <olly@google.com>
Date:   Tue Apr 14 16:45:46 2015 +0100

    Add JavaDoc to remove lint warning about unused variable.

commit 7cf6aa86d20e669330870cf5b5cc5e5a1b7139fb
Author: Oliver Woodman <olly@google.com>
Date:   Tue Apr 14 16:44:01 2015 +0100

    Properly document in code how to pass CustomData to PlayReady DRM.
    
    Issue: #339

commit d9b3582baacd932dd86c3af5a01e6b30ba2f1650
Author: Oliver Woodman <olly@google.com>
Date:   Tue Apr 14 16:42:24 2015 +0100

    Use OMX.google.raw.decoder for passthrough playback.
    
    The OMX component needs to be configured with a format that has a
    MIME type of audio/raw. Remove Ac3PassthroughAudioTrackRenderer,
    which is no longer used.

commit ed1dbddc756e901d71db710d89cf893a80037c74
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 13 19:36:16 2015 +0100

    Trim memory when disabling ExtractorSampleSource.
    
    This prevents memory leakage even in the case where the app
    is still holding a reference (direct or indirect) to the
    Allocator.

commit 0d69a2eae8942fb93039c73686740130d115592c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 13 19:03:04 2015 +0100

    Implement event reporting from HlsSampleSource.
    
    Issue: #275

commit e21f7801b50f09cc974cfb62ede8f6a3b9fb9247
Author: Oliver Woodman <olly@google.com>
Date:   Mon Apr 13 18:57:31 2015 +0100

    Major surgery to move all playback modes to the new Extractor model.

commit e5acc5a2c86466c26917f810deff2455f9b4272b
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Mon Apr 13 16:54:24 2015 +0200

    resync with Extractor changes

commit da7ae2a9253b500409b184ad561d89633f565488
Merge: 9208c65 6c5af23
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Mon Apr 13 15:56:43 2015 +0200

    Merge remote-tracking branch 'upstream/dev' into dev

commit 265adf9a8f066a24f20d6f691a9218196afdf885
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 02:09:40 2015 +0100

    Move chunk trigger constants into Chunk.

commit a17ffa66f236ec3647696c3e80cfee73b3834bfa
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 02:05:53 2015 +0100

    Delete test for the removed source package.

commit ad56490bde6dd0bc7d2cfcbc207639b28f86ecc9
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 02:03:43 2015 +0100

    Add ability to discard from write-side of DefaultTrackOutput.

commit 4c8f9a8c6fb6d831d76ef122bf7f479fdaaf18c3
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 02:00:47 2015 +0100

    Remove source package, and restore original FrameworkSampleSource.

commit 587edf8e2b5a227f6b869ce0ea51361cfbedb9b3
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:58:34 2015 +0100

    Add new style mp4/fmp4 extractors.

commit f002e6a76e31028783b92f21aa595107ca926ba6
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:42:48 2015 +0100

    Add test for DefaultExtractorInput + trivial Extractor sanity checks.

commit 7d8141e41900933554cc7946888fb43ff653c036
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:33:31 2015 +0100

    Add new style mp3 extractor.

commit 4a1fed9e8697a9db9de26a618b886678d9802145
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:25:49 2015 +0100

    Add new style WebM extractor.

commit 6c5af232303ccf8166c8d4bc8266984a8a5ced93
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:12:40 2015 +0100

    Minor tweaks to HlsSampleSource.

commit da656e6f26ac49e88f5abc5a7a90aa1bbf5c3a3e
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 01:07:41 2015 +0100

    More steps towards unified extractors.

commit 53a47524a1d6f81487cf16db245cb8fc066e6410
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 00:59:00 2015 +0100

    Support non-square pixels in HLS.
    
    Github issue: #375

commit 37d12ff14a606d20a7a4df4591e5cabb26a13d1e
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 00:55:38 2015 +0100

    Steps toward generalizing the Extractor interface for all extractors.

commit 3a551c73ba78100292d133c0bc54811f6d195319
Author: Oliver Woodman <olly@google.com>
Date:   Sat Apr 11 00:23:46 2015 +0100

    Move hls.parser to a new extractor package.
    
    This package will house all extractors, which will be unified
    to implement a single Extractor interface.

commit fc176b9cbe5cdbaa662738eb737ac0d3d5aca2ab
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:41:45 2015 +0100

    Fix TsExtractor bug.
    
    The limit on the ts packet buffer can be reduced during processing
    if it's discovered to have padding. Hence we need to reset it back
    to the ts packet size before processing each packet.

commit 61443b2f1266012282f282ff3e5ce06c6432f5dd
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:31:03 2015 +0100

    Relocate content of Mp4Util to more sensible locations.
    
    - Atom related stuff in Mp4Util is moved to Atom.
    - Remainder of Mp4Util is renamed to H264Util.

commit fea2140d57e5e4d422b923790018017f5aa71ab9
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:15:52 2015 +0100

    Add ability to query size/rate support in MediaCodecUtil.

commit 38efb1fc3f37a71ffa7a8fd7c6b3a2e1aafc19e9
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:12:47 2015 +0100

    Clean up Aes128DataSource.

commit 6bf52dd69c9ea253f6a536a3b197a23975bb5de0
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:06:57 2015 +0100

    Report decoder initialization information out of track renderer.

commit a17123c49b02c62512c854709a36a59de2f0612d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:03:50 2015 +0100

    Clean up codec reinitialization.

commit 380c427fb3ac73c339f4d054394ed55c8130b826
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:01:09 2015 +0100

    Make MediaCodecVideoTrackRenderer easier to extend.

commit a085d2f29b24f3d6ae85fcd10d654c723eac32af
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 23:00:23 2015 +0100

    Add END_OF_INPUT constant + start using it.

commit 608d685b2c91aa5b777bd56ccf44705db80b6e6f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:56:13 2015 +0100

    Add missing header.

commit d745384d9935cf2db3296bab06e12ca1ea5fe2b8
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:55:12 2015 +0100

    Change decodeOnly to be a sample flag.

commit 70b0e55a8b934d2fe91e7fab62eb8604cd41c9cf
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:39:15 2015 +0100

    Remove deprecated bandwidth parameter.

commit c9010256432c8b09982b6a2c4f7fbfaa17b7c2ac
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:38:06 2015 +0100

    Don't attempt license request when keys expire.
    
    - Keys should not expire during normal playbacks of correctly configured content.
    - Attempting to refresh on expiration causes a race condition, that may result
      in either failure or brief re-buffer, for the 30s license test video.
    - This change provides deterministic behavior, which is to always fail.

commit d108c13535e4f9f47b9f36bc463520a5f69105fe
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:36:07 2015 +0100

    Remove deprecated method.

commit 4dc8e8f951510c16928603b8ce2d91700f6e3af3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:35:03 2015 +0100

    Add audio and m3u8 mime types.

commit ecaf329b0d5d425d5b12858bf291f4d6cdb3add9
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:34:06 2015 +0100

    Improve ParsableByteArray performance + enhance API.

commit ed658b8e8d4ad839d721bc79ff4f2175a9ff5413
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:33:10 2015 +0100

    Attempt to guard against ExoCache corruption.

commit cfcbca6c958c613f7f03dc6c4010b86801b32176
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:29:51 2015 +0100

    Make FileDataSource throw EOFException.

commit 362dc5f382e3a87f04fed017248e225eeb416396
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:26:00 2015 +0100

    Don't fail if server doesn't support partial requests.
    
    Some servers, probably edge cache machines that exclusively serve
    chunked media, don't support partial requests. Which is kind of
    vaguely reasonable for that particular case. This change modifies
    DefaultHttpDataSource to correctly handle this case, by manually
    skipping data up to the requested position (and making sure not to
    read more data than the requested length).

commit 1a198b8a300b87784d7a283894a9d2662f6dbe7c
Author: Oliver Woodman <olly@google.com>
Date:   Fri Apr 10 22:24:39 2015 +0100

    Minor cleanup (remove deprecated method, fix javadoc)

commit 9183525b5e95e9bb6161b2d07f933798322ed6ef
Merge: acd1b9a e33e1d7
Author: ojw28 <olly@google.com>
Date:   Wed Apr 1 13:56:15 2015 +0100

    Merge pull request #221 from martinbonnin/better_input_format_change_for_non_adaptive_codecs
    
    better handling of input format change for non-adaptive codecs

commit fcc2138e9fc41a1a21614caca54bac16a1fa8d07
Merge: d27b6de acd1b9a
Author: ojw28 <olly@google.com>
Date:   Tue Mar 31 11:29:42 2015 +0100

    Merge pull request #374 from google/dev
    
    dev -> dev-webm-vp9-opus

commit acd1b9acff42e79d1671ab3def7bdb141c742baa
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 31 11:28:51 2015 +0100

    Enable ContentProtect elements at the Representation level

commit 5a5935cb72857580803573f0d44703516d332558
Author: Oliver Woodman <olly@google.com>
Date:   Mon Mar 30 15:56:39 2015 +0100

    Fix HLS playlist parsing of boolean attributes.
    
    The regex included quotation marks like X="YES", but the manifests
    don't actually contain them, for examples X=YES.

commit 85be2aed0a5e5487504905d45c1a565d288feee2
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 10:50:15 2015 +0000

    Add ability to release via Bintray.

commit d27b6de119ab04a0616635f666483297dc018ceb
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 25 12:13:53 2015 +0000

    Release AudioTrack when done.

commit 7f44d8f9b920b2ff7949695b706acf05343ff238
Merge: 5dedf5d b73b9a0
Author: ojw28 <olly@google.com>
Date:   Wed Mar 25 12:12:44 2015 +0000

    Merge pull request #367 from google/dev
    
    dev -> dev-webm-vp9-opus

commit b73b9a0509b194e11e3ad7f051cf380c22118758
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 25 12:08:45 2015 +0000

    Add workaround for #252 (but don't enable it by default).

commit e54d07c1b09ee051d4ceedcde12f50433111c45d
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 17 12:36:46 2015 +0000

    Fix issue with new extractor input

commit 5e4a35fa7ea719cc9ce17d03ca6d4abc67125f39
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Fri Mar 13 18:10:37 2015 +0000

    Add Mp4SampleExtractor, for reading unfragmented MP4 files.

commit 6d8c4dd41649c5bd5b9eed3b18a560721d68322b
Author: Andrew Lewis <andrewlewis@google.com>
Date:   Fri Mar 13 18:06:00 2015 +0000

    Add workaround for slow okhttp InputStream.close() on API levels 19/20.

commit a22ccf9254fdf087e0a9d6abc76e7e8d740019ae
Author: Oliver Woodman <olly@google.com>
Date:   Fri Mar 13 11:47:51 2015 +0000

    Another baby step to unified extractors.
    
    - Have extractors read from an ExtractorInput. Benefits of this are
      (a) The ability to do a "full" read or skip of a specified number
      of bytes, (b) The ability to do multiple reads in your extractor's
      read method. The ExtractorInput will throw an InterruptedException
      if the read has been canceled.
    
    - Provides the extractor with the ability to query the absolute
      position of the data being read in the stream. This is needed for
      things like parsing a segment index in fragmented mp4, where the
      position of the end of the box in the stream is required because
      the index offsets are all specified relative to that position.

commit 1111dd73a0812da5c333879a4b44a8d282fc0ba3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Mar 13 11:44:27 2015 +0000

    Further simplify HlsExtractor interface.
    
    - Move to builder naming.
    - Propagate formats to the TrackOutput instances, rather than having
      them be read through the Extractor. There was actually some weird
      indexing going on here before (which happened to work, but wasn't
      well defined).

commit 04cead415ad7c7fd6427de65ecb7f94a0dc14367
Merge: 12807a7 fb36f85
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 12 19:44:18 2015 +0000

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit 12807a7d4b5ec1ebb8f62c69be5616fd6e68bd04
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 12 19:42:00 2015 +0000

    Simplify encryption handling in HLS.

commit fb36f85e0d5e4c9f7c5e0d92586b004b71f43496
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 12 19:42:00 2015 +0000

    Simplify encryption handling in HLS.

commit fabd4705501b2be9434dadeb0a83f18913f4a942
Merge: 5ca2e0f 94dd9c4
Author: ojw28 <olly@google.com>
Date:   Thu Mar 12 16:43:24 2015 +0000

    Merge pull request #354 from canatella/aes-iv-fix
    
    Fix AES decryption of HLS streams.

commit 94dd9c41f4cd048baa3b62193a7a5c215c0ed8b1
Author: Damien Merenne <damien.merenne@veygo.co>
Date:   Thu Mar 12 10:23:29 2015 +0100

    Fix AES decryption of HLS streams.
    
    As per http://tools.ietf.org/html/draft-pantos-http-live-streaming-04#section-5.2,
    the initializaton vector (IV) of the AES decryption algorithm should be set to:
    - the IV attribute value if present,
    - the sequence number otherwise.
    
    Currently, the IV is set once and use over all next media sequences
    where the IV attribute is not set. The fix is to use the provided IV if
    given or use the current media sequence number.

commit 5ca2e0fd95d580df34599c84b37f9e1e4f49da87
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 11 19:21:33 2015 +0000

    First step toward extractor unification.
    
    - It's probably easiest to think of this as a standalone HLS change, which is splitting out the "loading" and "consuming" sides of HlsExtractor and a good structural change in its own right. To do this, HlsExtractorWrapper becomes a final class implementing the consuming side. HlsExtractor becomes an interface defining the loading side.
    
    - The bigger picture is that, hopefully, HlsExtractor will become a lightweight extractor interface that can be used throughout the library. Because it doesn't need to implement the consuming side, we'll save on having to re-implement the consuming side for every extractor (we'll probably need one consuming side implementation for HLS/DASH/SmoothStreaming, and a second one for everything else, both of which will use SampleQueue). It's expected that the HlsExtractor interface will need to change to accommodate all use cases.
    
    - The next step in unification will be to try and have FragmentedMp4Extractor implement HlsExtractor (which will need renaming). Once this is done, I'll try and move the chunk package over to use the HlsExtractor interface.

commit becc6fca4cbdeeddfac5cd5050d9f00081374802
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 11 15:49:53 2015 +0000

    Enhance SampleQueue/RollingSampleBuffer to support other use cases.
    
    - This is a step toward hopefully converging HLS and CHUNK packages.
    - Add support for encrypted samples.
    - Add support for appending from a DataSource.

commit 5d0457152d46052a32209ec11ee6237eaecf3a76
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 11 15:48:12 2015 +0000

    Remove need for InlinedApi with a few more C constants.

commit 56a509d8e43b459bdefbd115b85aa7103c16770c
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 21:44:20 2015 +0000

    Clean up handling of encrypted samples in fmp4/webm extractors.
    
    - The fmp4 extractor was reading from sampleEncryptionData even
      for not-encrypted samples, which I'm pretty sure isn't right.
      Fixed this. For all encrypted content I've seen, this change
      will be a no-op because isEncrypted is always true if there's
      an encryptionBox present.
    - Made webm extractor only set cryptoInfo if isEncrypted is true.
    - Align variable naming in the two extractors, for clarity.

commit 5e11b9f008fcbe4ef4ad7611d08a99c0a3c562d7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:48:41 2015 +0000

    Add DrmInitData (missed from a previous commit).

commit eba16e55b01e31c83eb001ef20093d276df3f100
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:43:25 2015 +0000

    Support delayed loading by Loader.

commit 8c1088559e85a07d0090c03ebf684e2ff52d2d21
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:42:48 2015 +0000

    Generalize getPsshInfo to properly accomodate WebM.
    
    - Rather than returning a map, return a DrmInitData object,
      with mapped and non-mapped implementations.
    - Include a suitable mimeType to pass to the MediaDrm. Previously
      we were incorrectly passing the mimeType of the samples,
      where-as MediaDrm expects the container mimeType. Note that
      it doesn't matter whether the mimeType starts with "video" or
      "audio", hence using video mimeTypes everywhere.

commit eec6458b435027da1609da4d9468edfeb691e22f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:37:47 2015 +0000

    Add handling of Extended Western European character set for CEA-608.

commit 4192ac56afe9ef10ef8826d58d2875a7a182286a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:36:37 2015 +0000

    WebM Extractor support for Encrypted content.

commit 1ebaaaebd5ba35928efbfd47e04e885fcc516583
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:07:19 2015 +0000

    Parse EXT-X-MEDIA tags with SUBTITLES type.
    
    Not yet used by anything.
    
    Issue: #151

commit be103106cb46515a04833d803f44afc2ac963df0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:06:07 2015 +0000

    HLS: Better stream selection at start of playback.
    
    - Correctly handle bandwidth NO_ESTIMATE case.
    - Don't consider switching without a previous chunk.

commit 489e99158f18f10c64acc3a76e3b47086b478498
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:04:38 2015 +0000

    Remove getDurationUs from the SampleExtractor interface.
    
    Set the duration on the MediaFormat instead.

commit f3f9c845cd85d9b4cd15e523cbf7a20f26c5b555
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:02:24 2015 +0000

    Add test for DefaultSampleSource.

commit cdf19430ef5fbab1877b40c3f8c62e30d05335c4
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 10 19:01:11 2015 +0000

    Remove TrackInfo from the SampleExtractor interface.

commit 5dedf5d930ead6c696c68fadac5850590713ae98
Merge: 07855aa fbd0a57
Author: ojw28 <olly@google.com>
Date:   Fri Mar 6 16:44:18 2015 +0000

    Merge pull request #340 from google/dev
    
    dev -> dev-webm-vp9-opus

commit fbd0a57e5c0a24fa7d4ae6ae56f63d271b411837
Author: Oliver Woodman <olly@google.com>
Date:   Fri Mar 6 16:39:00 2015 +0000

    Push tests.

commit 462fea3eaf265557f818e31deef3429759f51cbd
Author: Oliver Woodman <olly@google.com>
Date:   Thu Mar 5 11:56:00 2015 +0000

    Correctly resolve Uris according to RFC3986.
    
    Issue: #327

commit 9208c655d18a492fc908b354c75b8927108f6eeb
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Wed Mar 4 20:46:22 2015 +0100

    fix false positives in sync word detection thanks to @jeoliva

commit 457557b56fe80d15a47ddde5bc78241075c2c262
Author: Oliver Woodman <olly@google.com>
Date:   Wed Mar 4 11:02:43 2015 +0000

    Parse ISO8601 timestamps using UTC timezone.

commit a1d4a5e154031796033f4774f03e4505cde3bcd1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 3 18:16:22 2015 +0000

    Continue waiting for keys until the codec is flushed.
    
    It was possible for a codec input buffer to be filled with two frames' worth of
    data, if seekTo was called after populating a buffer, if waitingForKeys was true
    and seeking did not trigger a flush. This caused the CryptoInfo to be configured
    as if the input buffer contained a large amount of reconfiguration data as
    cleartext.
    
    Move resetting waitingForKeys to flushCodec, so that we don't try to read the
    next sample from the source until the first one has been consumed or discarded.

commit baea1cd12dc5f0b23e3c57b37811b8d72d76f1c5
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 3 17:17:02 2015 +0000

    Add ftyp atom def

commit b9addf28b2d7950b810cdfe6a50776d3a110bf71
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 3 17:15:43 2015 +0000

    Formatting tweaks for enhanced ID3 support + support in demo app.

commit 0c6566bce7caba5c6920517160a89d06def33b92
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 3 17:14:48 2015 +0000

    Add flags to DataSpec. Support GZIP option.
    
    Also remove uriIsFullStream. It's not doing anything particularly
    useful, so I think it makes sense to remove it from the public API;
    it's unlikely anyone is using it.
    
    Issue: #329

commit 3868b1d4cbd67677924f5831b95669c0cd8929eb
Author: Oliver Woodman <olly@google.com>
Date:   Tue Mar 3 17:11:21 2015 +0000

    Clean up media playlist blacklisting / fix nits.
    
    It seems fairly safe to assume a playlist wont be blacklisted
    within 1ms of the device booting :).

commit 2bb2e2c44f6921d15fae3788472fc58fbf7d233a
Merge: ea95db2 b03c8a7
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Mar 3 00:23:59 2015 -0500

    Merge pull request #324 from jeoliva/id3
    
    Add support for GEOB and PRIV ID3 frames.

commit b03c8a713b4d94a135b2c487223e043afd40724d
Author: J. Oliva <jeoliva@gmail.com>
Date:   Sat Feb 28 00:47:42 2015 +0100

    Mime type string always finish with a single 0 byte
    
    Mime type string always finish with a single 0 byte

commit 88475e4feedc68107779e44f135746086044538e
Author: J. Oliva <jeoliva@gmail.com>
Date:   Fri Feb 27 22:09:05 2015 +0100

    Fixed issue in the calculation of size of objectData
    
    - Fixed issue in the calculation of size of objectData
    - Indentation fixes

commit 2ce938d650195ca7c5cb0327673145550ad875a4
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Fri Feb 27 14:29:21 2015 +0100

    Added MPEG audio support to TsExtractor v.2

commit 1739af685a2b2cca76c253dc9c4733db9b3a1e43
Author: J. Oliva <jeoliva@gmail.com>
Date:   Fri Feb 27 11:02:37 2015 +0100

    Removed indexOfNot method
    
    Removed the unused method indexOfNot

commit f33cdd97e6d9ce92073ca46ac77d1481bce89b47
Author: J. Oliva <jeoliva@gmail.com>
Date:   Fri Feb 27 10:57:43 2015 +0100

    Fixed an issue when looking for termination string in UTF-16 and UTF-16BE
    
    Modified parse method to take into account different lengths for the
    termination character (1 for UTF-8 and ISO-8859-1; 2 for UTF-16 and
    UTF-16BE).

commit c135bb7a57414ef77e5effee98a400cbb7eba738
Author: J. Oliva <jeoliva@gmail.com>
Date:   Thu Feb 26 21:54:29 2015 +0100

    Fixes for correctly supporting UTF-16 and UTF-16BE charsets
    
    For fields encoded using UTF-16 or UTF-16BE charsets when looking for
    termination character we have to look for two zero consecutive bytes.
    
    Otherwise, as many characters encoded with UTF-16 or UTF-16BE has one
    of their 2 bytes set with the value zero, we will be truncating text
    fields.

commit 1545a052f0899ac657c3a5d8dccb280848684793
Author: Sergio Moreno Mozota <sergio.morenomozota@telefonica.com>
Date:   Thu Feb 26 19:12:58 2015 +0100

    Added MPEG audio support to TsExtractor

commit ebbd022a524677d3623ab37281c3d7476f66f64d
Author: J. Oliva <jeoliva@gmail.com>
Date:   Thu Feb 26 16:49:05 2015 +0100

    Added new ID3 frames
    
    - Added support for ID3 frames of types GEOB and PRIV.
    
     - GEOB type is commonly used by dynamic ads provider to include in the
    stream information about the ads to be played.
     - PRIV type is commonly used for time synchronization (example:
    synchronizing playback of a live stream and its webvtt captions) and
    also by analytics companies to include tracking information in the
    stream.
    
    - Added a sample stream from Apple that contains ID3 metadata.

commit ea95db2375c552ef4f19fc7bfaa39ebf11d7d27c
Merge: 006986c 2ac7046
Author: ojw28 <olly@google.com>
Date:   Wed Feb 25 14:33:26 2015 +0000

    Merge pull request #316 from jeoliva/blackplaylist_management
    
    Better management of blacklisted playlists

commit 07855aadcf4b9aedee9cf3477366ef1aabbfda89
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 14:13:04 2015 +0000

    Fix build after pull from dev

commit 7f70db976570adb68d48760d34267beb6c088c09
Merge: 430d06d 006986c
Author: ojw28 <olly@google.com>
Date:   Wed Feb 25 14:04:48 2015 +0000

    Merge pull request #321 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 006986cc58bae6758cd75ea7bc21a0da4eae9646
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 13:39:15 2015 +0000

    Make NetworkLoadable use an injected HttpDataSource.
    
    Note: I'm fairly confident that NetworkLoadable.Parser implementations
    can live without the inputEncoding being specified. But not completely
    100%...
    
    Issue: #311
    Issue: #56

commit 2ce17b601fa5b46f9c9d63a93d123676a06ea853
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 13:34:31 2015 +0000

    Correctly bound search into segment indices.
    
    The return value here assumed that the time being searched for
    was beyond the start time of the last segment. This fix also
    handles the case where the time is prior to the start of the
    first segment.

commit d2da3bbf8a2dd5af202c89f2817ab1daa14ae613
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 12:09:06 2015 +0000

    Simplify NetworkLoader/Parser/ManifestParser
    
    The only downside of this change is that MediaPresentationDescriptionParser
    is no longer stateless.

commit 0fdcb3347c3cec744c145489ad827f921a08c738
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 11:48:55 2015 +0000

    continueBuffering should return true when ended.
    
    This issue didn't have any material impact on playbacks, but
    fixing it anyway to be technically correct.

commit d6ebd49c6320f058afa7ceda3cd135e86131d6c8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 25 11:37:39 2015 +0000

    Two small fixes for HLS.
    
    1. Clear prefixFlags when a NAL unit is found.
    2. continueBuffering should return true if loading is finished.

commit 2ac7046ffcba342f5f176563b5a1287eb217995f
Author: J. Oliva <jeoliva@gmail.com>
Date:   Mon Feb 23 22:42:53 2015 +0100

    Clear stale blacklisted playlist when getting next variant index
    
    Calling clearStaleBlacklistedPlaylist within getNextVariantIndex method.

commit 4fe62b9b0a31f95c3b5ca43e277544caa0b440e9
Author: J. Oliva <jeoliva@gmail.com>
Date:   Mon Feb 23 20:40:37 2015 +0100

    Clear stale blacklist in getChunkOperation
    
    Clear stale blacklist in getChunkOperation before getting next variant.
    This ensures:
    1.- Player resilience to failures, always trying to look for a working
    playlist that allows player to non stop playback.
    2.- High quality blacklisted playlists can be reused in case they go up
    after a failure. Player always trying to provide the best user
    experience.

commit f8a9da90e81dde23fb8ee97c7b435d2da0f9eee0
Author: J. Oliva <jeoliva@gmail.com>
Date:   Mon Feb 23 20:06:49 2015 +0100

    Renaming methods and code formating
    
    - Method evaluatePlayListBlackListedTimestamps renamed to
    clearStaleBlacklistedPlaylists
    - Code formatted to be consistent with style elsewhere.

commit 20a40f5d113cfdfe84aadc111395a6dfcb28f216
Author: J. Oliva <jeoliva@gmail.com>
Date:   Mon Feb 23 15:14:09 2015 +0100

    Better management of blacklisted playlists
    
    Added an expiration time field to playlists blacklisted to allow
    Exoplayer to continue playback when playlists that failed were
    recovered from a bad state.
    
    In live environments, some times occur that primary encoder stop
    working for a while. In that cases, HLS failover mechanism in the
    player should detect the situation and “switch” to playlists served by
    the backup encoder (in case a backup encoder exists). This was well
    managed before these changes.
    
    However, and to ensure a playback experience that can recover itself
    from temporary issues, we cannot blacklist a playlist forever. When
    streaming live events using HLS, it is quite typical that the player
    needs to switch from primary to backup playlists, and from backup to
    primary ones, from time to time to have playback working when temporary
    issues in the network/encoder are happening. Most of the issues are
    recoverable, so what I have implemented is a mechanism that makes
    blacklisted playlist to be available again after a while (60 seconds).
    
    Evaluation of this algorithm should happen just when something fails.
    If player is working with a backup playlist, it shouldn’t switch to the
    primary one at least something fail.

commit 430d06d467e7d570d4ac0b487a412f097372afe9
Merge: 654d37f 6d14fc3
Author: ojw28 <olly@google.com>
Date:   Fri Feb 20 15:18:28 2015 +0000

    Merge pull request #313 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 6d14fc3330fe1ad47970e6ba8e7dbf036a22bbfb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 20 15:10:25 2015 +0000

    Implement UTC time synchronization for DASH Live.
    
    Support is provided for the following schemes:
    
    urn:mpeg:dash:utc:direct:2012
    urn:mpeg:dash:utc:http-iso:2014
    urn:mpeg:dash:utc:http-xsdate:2012
    urn:mpeg:dash:utc:http-xsdate:2014

commit 4076b08e4bc5b261aba6e8f514af063a64b9ae23
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 20 15:07:22 2015 +0000

    Naming tweak

commit 654d37fe290eac770300c066500362d914a7f2fd
Merge: 8f0d576 b510088
Author: ojw28 <olly@google.com>
Date:   Thu Feb 19 11:32:27 2015 +0000

    Merge pull request #310 from google/dev
    
    dev -> dev-webm-vp9-opus

commit b5100886896ad35a32e6105a9d005c3209a81a9b
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 19 11:22:42 2015 +0000

    Fix EIA-608 issues.
    
    - Data needs to be unescaped before it's passed to SeiReader.
    - SeiReader should loop over potentially multiple child messages.
    - I also changed the sample passed to the EIA-608 renderer so that
      it's the entire sei message payload. The first 8 bytes are
      unnecessary, but it seems nicer conceptually to do it this way.
    
    Issue: #295

commit 00ec7ef0c14ec41545f3a873b7e7c6c30b419050
Merge: f6a0cb9 e84bce6
Author: ojw28 <olly@google.com>
Date:   Thu Feb 19 10:59:50 2015 +0000

    Merge pull request #307 from jeoliva/issue_codec_regex
    
    Issue with regular expression for CODEC attribute

commit e84bce61304dbfc639d2447deafbfcdcb37269b9
Author: J. Oliva <jeoliva@gmail.com>
Date:   Thu Feb 19 01:17:35 2015 +0100

    Fixed issue in CODEC regular expression
    
    Previous regular expression for extracting codec information was wrong,
    given a line that defines a variant it added information from “CODEC=“
    text to the end of the line (including also information about
    RESOLUTION or alternate rendition groups as part of the CODEC field).
    
    This is not causing a functional problem (at least known by me)
    although is making codecs field storing information that is not related
    with the codec.

commit f6a0cb963b68f7b36649ee7ead9c24d55b22f5f9
Author: ojw28 <olly@google.com>
Date:   Wed Feb 18 23:42:42 2015 +0000

    Update CONTRIBUTING.md

commit 1649aa63813f66cabc4c7b293ba7868c9e68fbcf
Author: ojw28 <olly@google.com>
Date:   Wed Feb 18 23:39:10 2015 +0000

    Update CONTRIBUTING.md

commit abac6b7dd6662bb4893566a4a04bf9804ee0599d
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 18 19:11:52 2015 +0000

    Fix off-by-one-bug preventing NAL unit detection at the limit.

commit b03c5c5753810a6d0076374f69aa8744059dd3e8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 18 15:15:20 2015 +0000

    Ensure we always seek after selecting a track.
    
    Some extractor implementations underneath MediaExtractor require a seekTo
    call after tracks are selected to ensure samples are read from the correct
    position. De-duplicating logic was preventing this from happening in some
    cases, causing issues like:
    
    https://github.com/google/ExoPlayer/issues/301
    
    Note that seeking all tracks a side effect of track selection sucks if
    you already have one or more tracks selected, because it introduces
    discontinuities to the already selected tracks. However, in general, it
    *is* necessary to specify the position for the track being selected,
    because the underlying extractor doesn't have enough information to know
    where to start reading from. It can't determine this based on the read
    positions of the already selected tracks, because the samples in these
    tracks might be very sparse with respect to time.
    
    I think a more optimal fix would be to change the SampleExtractor
    interface to receive the current position as an argument to selectTrack.
    For our own extractors, we'd seek the newly selected track to that
    position, whilst the already enabled tracks would be left in their
    current positions (if possible). For FrameworkSampleExtractor we'd
    still have no choice but to call seekTo on the extractor to seek all
    of the tracks. This solution ends up being more complex though, because:
    
    - The SampleExtractor then needs a way of telling DefaultSampleSource
      which tracks were actually seeked, so that the pendingDiscontinuities
      flags can be set correctly.
    - It's a weird API that requires the "current playback position to seek
      only the track being enabled"
    
    So it may not be worth it! I think this fix is definitely good for now,
    in any case.
    
    Issue: #301

commit cc7a15b79b84673fddc2f711342b687002f66dc0
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 18 15:09:45 2015 +0000

    Fix bad assertion

commit 526c64294a77a36ef543c6b48718794ab389c592
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 17 16:04:44 2015 +0000

    Handle the edge case of zero-length chunks.
    
    Issue: #289

commit a1e196fe200629b096a9b85f3927cdd72a7428d7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 17 15:41:59 2015 +0000

    Add support for elementary AAC/ADTS streams.
    
    - This change:
    
    1. Extracts HlsExtractor interface from TsExtractor.
    2. Adds AdtsExtractor for AAC/ADTS streams, which turned out to be
       really easy.
    
    Selection of the ADTS extractor relies on seeing the .aac extension.
    This is at least guaranteed not to break anything that works already
    (since no-one is going to be using .aac as the extension for something
    that's not elementary AAC/ADTS).
    
    Issue: #209

commit b46d1fc7cc2516cc29c629954ed0d69364098d97
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 16 22:30:28 2015 +0000

    Bump dev version to 1.3.x

commit 3472e86c369e114cf8b9e1b03a55193816e11284
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 16 22:22:25 2015 +0000

    Correctly reset ADTSreader state

commit 8f0d576fedd80826b1f38e614080671946fbb48a
Merge: ccac9fa 4041126
Author: ojw28 <olly@google.com>
Date:   Fri Feb 13 20:38:09 2015 +0000

    Merge pull request #293 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 40411269daef787f52cab19b5c0bdb884faefd4d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 20:36:27 2015 +0000

    Use C.SAMPLE_FLAG_SYNC

commit 9d480ecd204cfd2cd3585c28765f420e7384c162
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 20:34:30 2015 +0000

    Fix broken javadoc link

commit bc99435b4855bf3d776005de6e81e9f13e1f8f8d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 20:20:45 2015 +0000

    Add C.SAMPLE_FLAG_SYNC and removed InlinedApi suppression in a few places.

commit 5f64a1fde75824331c9c9294b7116eb2bb5f033a
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 20:13:11 2015 +0000

    Restrict HLS buffering by total buffer size as well as duration.
    
    This prevents excessive memory consumption when switching to
    very high bitrate streams.
    
    Issue: #278

commit c3788c0931da5c63ac1dcca5b81f0303ae30323e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 20:11:12 2015 +0000

    Eliminate memory copy of H264 data through H264 reader.
    
    I think this is the limit of how far we should be pushing complexity
    v.s. efficiency. It's a little complicated to understand, but probably
    worth it since the H264 bitstream is the majority of the data.
    
    Issue: #278

commit 37e6946cd9f4abddebba3a945811d70aa00fad02
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 19:32:01 2015 +0000

    Finally - Remove Sample, fix GC churn + inefficient memory usage.
    
    Use of Sample objects was inefficient for several reasons:
    
    - Lots of objects (1 per sample, obviously).
    - When switching up bitrates, there was a tendency for all Sample
      instances to need to expand, which effectively led to our whole
      media buffer being GC'd as each Sample discarded its byte[] to
      obtain a larger one.
    - When a keyframe was encountered, the Sample would typically need
      to expand to accommodate it. Over time, this would lead to a
      gradual increase in the population of Samples that were sized to
      accommodate keyframes. These Sample instances were then typically
      underutilized whenever recycled to hold a non-keyframe, leading
      to inefficient memory usage.
    
    This CL introduces RollingBuffer, which tightly packs pending sample
    data into a byte[]s obtained from an underlying BufferPool. Which
    fixes all of the above. There is still an issue where the total
    memory allocation may grow when switching up bitrate, but we can
    easily fix that from this point, if we choose to restrict the buffer
    based on allocation size rather than time.
    
    Issue: #278

commit 28166d8c0d34441ee000d624dbd86672c9810d37
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 19:31:01 2015 +0000

    Rename ParsableByteArray.length() to limit(). Add capacity().

commit 321005e4b1be588366413c7537a008e066beb3b2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 19:27:52 2015 +0000

    Use 'bitrate' not 'bit-rate' consistently.

commit d1360ad7d2769e0eb0c511ca93ccd58919556e8d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 13 19:26:49 2015 +0000

    Pragmatic fix for "stuck-in-ready-state" when seeking near the
    end of some streams.

commit 066334dad7f82a9e954b0ee7efd0bb0d742987b8
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 12 17:24:23 2015 +0000

    Continue TsExtractor refactor.
    
    - Remove TsExtractor's knowledge of Sample.
    - Push handling of Sample objects into SampleQueue as much
      as possible. This is a precursor to replacing Sample objects
      with a different type of backing memory. Ideally, the
      individual readers shouldn't know how the sample data is
      stored. This is true after this CL, with the except of the
      TODO in H264Reader.
    - Avoid double-scanning every H264 sample for NAL units, by
      moving the scan for SEI units from SeiReader into H264Reader.
    
    Issue: #278

commit 61a86295fd3c798e24083acd228d11f832770b68
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 12 17:02:34 2015 +0000

    Fix for video-only playbacks transitioning straight to STATE_ENDED.
    
    The complexity around not enabling the video renderer before it
    has a valid surface is because MediaCodecTrackRenderer supports
    a "discard" mode where it pulls through and discards samples
    without a decoder. This mode means that if the demo app were to
    enable the renderer before supplying the surface, the renderer
    could discard the first few frames prior to getting the surface,
    meaning video rendering wouldn't happen until the following sync
    frame.
    
    To get a handle on complexity, I think we're better off just removing
    support for this mode, which nicely decouples how the demo app
    handles surfaces v.s. how it handles enabling/disabling renderers.

commit 784431f3e08099a4f22a130eb2a3f2e1b054879d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 12 12:48:27 2015 +0000

    Move EIA reordering back to the renderer (sorry for churn).
    
    Reordering in the extractor isn't going to work well with the
    optimizations I'm making there. This change moves sorting back
    to the renderer, although keeps all of the renderer
    simplifications. It's basically just moving where the sort
    happens from one place to another.

commit f7fb4d4c358b86a2ab031b4a5852f0ba8bcb3128
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 12 12:46:58 2015 +0000

    Optimize NAL unit search.
    
    I'm not really a fan of micro-optimizations, but given this method
    scans through every H264 frame in the HLS case, it seems worthwhile.
    The trick here is to examine the first 7 bits of the third byte
    first. If they're not all 0s, then we know that we haven't found a
    NAL unit, and also that we wont find one at the next two positions.
    This allows the loop to increment 3 bytes at a time.
    
    Speedup is around 60% on Art according to some ad-hoc benchmarking.

commit 3568ecaf001a792441e36fca22b784ee1463deb3
Author: Oliver Woodman <olly@google.com>
Date:   Thu Feb 12 12:09:57 2015 +0000

    Split TsExtractor into multiple files.
    
    There's no code change here at all, except for how TsExtractor's
    getLargestSampleTimestamp method works.

commit 92f085bc5823243ca0b8f136283256fc5a188737
Author: Oliver Woodman <olly@google.com>
Date:   Wed Feb 11 14:57:07 2015 +0000

    Remove intermediate copy steps in TsExtractor.
    
    1. AdtsReader would previously copy all data through an intermediate
    adtsBuffer. This change eliminates the additional copy step, and
    instead copies directly into Sample objects.
    
    2. PesReader would previously accumulate a whole packet by copying
    multiple TS packets into an intermediate buffer. This change
    eliminates this copy step. After the change, TS packet buffers
    are propagated directly to PesPayloadReaders, which are required
    to handle partial payload data correctly. The copy steps in the
    extractor are simplified from:
    
    DataSource->Ts_BitArray->Pes_BitArray->Sample->SampleHolder
    
    To:
    
    DataSource->Ts_BitArray->Sample->SampleHolder
    
    Issue: #278

commit 797fa7f872a3e61d20e9dabd486078f889795793
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 10 22:13:01 2015 +0000

    Make TsExtractor use ParsableByteArray where possible.
    
    - TsExtractor is now based on ParsableByteArray rather than BitArray.
      This makes is much clearer that, for the most part, data is byte
      aligned. It will allow us to optimize TsExtractor without worrying
      about arbitrary bit offsets.
    - BitArray is renamed ParsableBitArray for consistency, and is now
      exclusively for bit-stream level reading.
    - There are some temporary methods in ParsableByteArray that should be
      cleared up once the optimizations are in place.
    
    Issue: #278

commit 7c66b6ed3b953adbe518203027d0ccba94e7cbc8
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 10 12:25:13 2015 +0000

    HLS optimization #1 (refactor).
    
    This is the start of a sequence of changes to fix the ref'd
    github issue. Currently TsExtractor involves multiple memory
    copy steps:
    
    DataSource->Ts_BitArray->Pes_BitArray->Sample->SampleHolder
    
    This is inefficient, but more importantly, the copy into
    Sample is problematic, because Samples are of dynamically
    varying size. The way we end up expanding Sample objects to
    be large enough to hold the data being written means that we
    end up gradually expanding all Sample objects in the pool
    (which wastes memory), and that we generate a lot of GC churn,
    particularly when switching to a higher quality which can
    trigger all Sample objects to expand.
    
    The fix will be to reduce the copy steps to:
    
    DataSource->TsPacket->SampleHolder
    
    We will track Pes and Sample data with lists of pointers into
    TsPackets, rather than actually copying the data. We will
    recycle these pointers.
    
    The following steps are approximately how the refactor will
    progress:
    
    1. Start reducing use of BitArray. It's going to be way too
    complicated to track bit-granularity offsets into multiple packets,
    and allow reading across packet boundaries. In practice reads
    from Ts packets are all byte aligned except for small sections,
    so we'll move over to using ParsableByteArray instead, so we
    only need to track byte offsets.
    
    2. Move TsExtractor to use ParsableByteArray except for small
    sections where we really need bit-granularity offsets.
    
    3. Do the actual optimization.
    
    Issue: #278

commit ccac9fad4e61eae184b329b93e9ae2501cf79eb6
Merge: 876fa41 b0a3c30
Author: ojw28 <olly@google.com>
Date:   Mon Feb 9 17:29:44 2015 +0000

    Merge pull request #287 from google/dev
    
    dev -> dev-webm-vp9-opus

commit b0a3c30a90039bad8d2364c6d214836d5d437c81
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 9 17:28:07 2015 +0000

    Improve EIA608 caption support.
    
    - Also make text renderers respect the decodeOnly flag.
    - Also fix AC3 passthrough to always allocate direct buffers.

commit 32f0eb1278dacc1c78faf031a4a1db86ab617bac
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 9 17:25:39 2015 +0000

    Enhance mp4 parsing.

commit 876fa41b431b41b62542ba5e97097292c80b0ab6
Merge: 3338a09 147bbe6
Author: ojw28 <olly@google.com>
Date:   Fri Feb 6 12:01:24 2015 +0000

    Merge pull request #283 from google/dev
    
    dev -> dev-webm-vp9-opus

commit 147bbe6d55370977dc8a92ac2e6fccfbf5a678ca
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 6 11:52:14 2015 +0000

    Simplify demo application.
    
    - Remove simple variant. Maintaining both simple + full is
      unnecessary effort.
    - Remove need to specify content id in Sample definition,
      except where it's actually required (for DRM requests in
      the Widevine GTS samples)

commit bfa1de68d8528af30d6863c82e059753c0f403d1
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 6 11:43:37 2015 +0000

    Move common MP4 parsing code to CommonMp4AtomParsers and Mp4Util.
    
    Also add parseMp4vFromParent and return the track's duration in parseTrak.
    
    This is in preparation for adding a non-fragmented MP4 extractor.

commit a968e5535bd8b3d756f4a1de89354bf33a86d523
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 6 11:32:46 2015 +0000

    Continue playback of tracks with longer duration than the timesource.
    
    If the timesource track renderer ends, but other track renderers
    haven't finished, the player would get stuck in a pending state.
    This change enables automatic switching to the media clock in the
    case that the timesource renderer has ended, which allows other
    renderers to continue to play.

commit 03ef3d148f3007a1112fe4060850181945b80ca2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 6 11:32:08 2015 +0000

    Add MP4V mimetype.

commit fbf75e12636c05cfd794cd04e89ca0edd5cb1344
Author: Oliver Woodman <olly@google.com>
Date:   Fri Feb 6 11:31:13 2015 +0000

    Fix SubtitleView to redraw if text changes but bounds stay the same.

commit 7505944497340585c627e2cc47eaf5ab15680454
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 3 12:44:18 2015 +0000

    Separate leaf/container children in ContainerAtom.
    
    Add a utility for converting named atom types to integers.
    
    Add atom types for non-fragmented MP4 parsing.

commit 5bfc5f373be48ce782f980509c868e3942db27a0
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 3 12:43:09 2015 +0000

    Bug fixes for ByteArrayDataSource.

commit 0ef28abbec08c74a1598e03dc80d0073ea7a98a7
Author: Oliver Woodman <olly@google.com>
Date:   Tue Feb 3 12:41:49 2015 +0000

    Modified Webvtt parser to handle cue identifiers and tags.
    
    Issue: #268

commit 3338a09c70ad8dbf2d771117cd4c6c02a0e189bb
Author: Vignesh Venkatasubramanian <vigneshv@google.com>
Date:   Mon Feb 2 13:31:31 2015 -0800

    Update .gitignore to ignore VP9/Opus specific files.

commit 10070a2d93c702a335986622096269268e9ab348
Author: Vignesh Venkatasubramanian <vigneshv@google.com>
Date:   Mon Feb 2 13:26:52 2015 -0800

    Add demo app for WebM Native Extensions
    
    Add a demo app that can be used as a reference for how to use the native VP9 and
    Opus Extensions.

commit 7113d2ab6f9d35bca224c78022de2a0397def56d
Author: Vignesh Venkatasubramanian <vigneshv@google.com>
Date:   Mon Feb 2 13:25:46 2015 -0800

    Add Opus Native Extension
    
    Add Opus Native Extension that can be used to playback Opus using the native
    libopus library.

commit dd726001a8c8754f0d20f8703cd281c678152eca
Author: Vignesh Venkatasubramanian <vigneshv@google.com>
Date:   Mon Feb 2 13:24:24 2015 -0800

    Add VP9 Native Extension
    
    Add VP9 Native Extension that can be used to playback VP9 using the native
    libvpx library.

commit c1a2f3d0c2141235f230378c9cd4c26a88da4568
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 2 19:54:56 2015 +0000

    Add AOSP header.

commit 7b9b7c6e3b69831a1a8826ce49efc860e048b74d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 2 19:51:37 2015 +0000

    Handle non-indexed representations.
    
    These may occur in VOD streams where a representation's data
    is small enough not to require segmentation or an index. For
    example subtitle files.
    
    Issue: #268

commit d1fe33cdf81a810f69cc5e87dd766c62e251acd8
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 2 14:59:30 2015 +0000

    Add DefaultSampleSource and SampleExtractor interface.
    
    SampleExtractor will initially only be implemented by FrameworkSampleExtractor
    which delegates to a MediaExtractor, but eventually it will also be implemented
    by additional extractors.
    
    The sample extractor can be used as a source of samples via DefaultSampleSource.

commit 6f3ccc3615584b1a3b2290ae05c587b8219e6de4
Author: Oliver Woodman <olly@google.com>
Date:   Mon Feb 2 14:56:33 2015 +0000

    Handle byte-order-mark prefix to WebVTT file.
    
    Issue: #268

commit e33e1d79227913b2b234364f53c946679af50722
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Tue Jan 27 18:37:27 2015 +0100

    cleaner test

commit c228017fe4a4b2024c2a2515d785876e0fe43482
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Tue Jan 27 18:35:40 2015 +0100

    rename hasQueuedOneInputBuffer to hasQueuedInputBuffer

commit ed0b02d09bacdf809f6ef2960f6a0c9c5927c2fb
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 27 17:00:46 2015 +0000

    Package restructuring to accommodate incoming features (sorry).
    
    This may be painful in terms of applications having to change their
    imports. Sorry about that.

commit 27c0e7d77611af6074b7d008d255090d3f064474
Merge: ce2f681 b7be7bc
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Jan 27 11:48:15 2015 -0500

    Merge pull request #267 from google/dev-hls
    
    Merge dev-hls -> dev

commit b7be7bc01b96f63be3892750ce0bc204e7100eb3
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 27 15:12:33 2015 +0000

    Fix handling of PTS wraparound.

commit ee83468084f9fb1b53e6063481a0dff484e88922
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 27 15:11:44 2015 +0000

    Blacklist playlists that 404/410.

commit c6c6f2d83ea2664dbf297e930660d37285020a1f
Merge: 9534144 ce2f681
Author: ojw28 <olly@google.com>
Date:   Tue Jan 27 15:10:34 2015 +0000

    Merge pull request #266 from google/dev
    
    dev -> dev-hls

commit 424b29f996fd5211625ff407689ddb337b6e05a1
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Tue Jan 27 10:44:02 2015 +0100

    remove REINIT_STATE_DO_REINIT_NOW state, reinit directly when needed.

commit ce2f681bd342f3d84479ce625efceaafb3c216cc
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 16:18:41 2015 +0000

    Add directories for extensions + additional demos

commit db5cc21c338b0a44c67e569444ed30af660f5698
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 15:18:27 2015 +0000

    Revert test

commit fda8f6d35a784068918429d4da5b155b3fa9a1f9
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 15:12:17 2015 +0000

    Test

commit 7b41741db0b03f5e78291e62df2268a9ba32871c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 15:01:25 2015 +0000

    Revert test.

commit 76f44eeb137330497820bcc485b5fd905d231311
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 15:01:00 2015 +0000

    Test.

commit f1a7784eb1f74781fe761dd9416aa2b0eeccdf5c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 14:49:33 2015 +0000

    Fix DASH Live edge calculation.
    
    Also added clamping to getSegmentNum in one case where
    it was not already implemented, and defined this behavior
    property in the getSegmentNum javadoc.
    
    Issue: #262

commit a64df69f8553c64d1e5b421cad81af292cc9ca7b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 26 14:08:38 2015 +0000

    Refine last segment calculation.
    
    This makes the calculation correct for the case where periodDurationMs
    does not divide exactly into durationMs.

commit e5381811125a0f7d874dfff763ee7ec4c1e84660
Merge: 14d1317 1a36384
Author: ojw28 <olly@google.com>
Date:   Mon Jan 26 14:08:08 2015 +0000

    Merge pull request #264 from IhorZak/dev
    
    Fixed wrong calculation of last segment number when using segment templa...

commit 1a363849e26553cb6bcfd1297b7a2feffadd16f8
Author: Ihor Zakhozhyi <ihorzak@gmail.com>
Date:   Sun Jan 25 18:47:16 2015 +0200

    Fixed wrong calculation of last segment number when using segment template without segment timeline.

commit 95341440da54151411e727ddc1693220d2b39b18
Merge: 59b04df 14d1317
Author: ojw28 <olly@google.com>
Date:   Fri Jan 23 14:32:21 2015 -0800

    Merge pull request #263 from google/dev
    
    dev -> dev-hls

commit 14d1317ce0c629d300f0e69ea7777e3507bbb517
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 23 22:25:39 2015 +0000

    Replace tabs with spaces.

commit 4f65e94e93bab3ac590d1d7c84786c8879b0c2ca
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 23 22:23:59 2015 +0000

    Add Javadoc to ParsableByteArray.

commit 59b04df4c38092b6633abc5df3b1c330af63bbb6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 23 22:18:54 2015 +0000

    Fix incorrect max height calculation.

commit 6520557dc0e9e4b49907e0d0e3f8657dd0e9a4f0
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Fri Jan 23 09:08:41 2015 -0800

    Add (not technically necessary 0xFF guard for clarity).
    
    Without this, the byte is cast as follows (in bits) if the top
    byte is set:
    
    10000010 -> 1000000000000000000000000000010
    
    This works because we then always shift at least one bit left,
    and only look at the bottom 8 bits of the result. It's confusing
    though. It's clearer if the cast to int gives just adds zeros to
    the front, like:
    
    10000010 -> 0000000000000000000000010000010

commit 06ddb036c844c3373135100ce8367df2a713df51
Merge: b30f55f 80602b1
Author: ojw28 <olly@google.com>
Date:   Fri Jan 23 08:09:27 2015 -0800

    Merge pull request #260 from mine260309/dev-hls
    
    Fix a signed right shift issue in BitArray.readUnsignedByte()

commit 80602b16846da1c7a9e9df1b5eb051adb8498dfc
Author: Lei YU <mine260309@gmail.com>
Date:   Fri Jan 23 23:52:46 2015 +0800

    Make BitArray.readUnsignedByte() a bit more clear by using int value instead of byte to prevent unnecessary convert from int to byte.

commit a9b2120fc961215ad09f3e52578964ae27caccde
Author: Lei YU <mine260309@gmail.com>
Date:   Fri Jan 23 16:44:23 2015 +0800

    Fix an issue in BitArray.readUnsignedByte() returns incorrect value when bitOffset is not zero and data[byteOffset + 1] starts with bit 1.
    This is caused by signed right shift, the fix is simply to make it unsigned right shift.

commit b30f55f1470d49e47ce3e4fa79a15c77beb6b22a
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Thu Jan 22 12:53:33 2015 -0500

    Process only type == 0 captions. #156

commit 79708f43f8d9665a3c984e618899e3b12eff8f9b
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Thu Jan 22 10:24:51 2015 +0100

    handle the case when flushCodec() is called while reiniting the decoders

commit ef396933f8f1c20e0b9f43a01fdd5bfe5470748d
Merge: 4158ede e246970
Author: ojw28 <olly@google.com>
Date:   Wed Jan 21 15:52:31 2015 -0800

    Merge pull request #255 from google/dev
    
    dev -> dev-hls

commit e246970a202e6db7f2528c8a65416681a0163036
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Wed Jan 21 15:51:02 2015 -0800

    Minor style tweaks.

commit bb9e34f512ad3f82d441efd5b0dc4f0b1c307a0a
Author: Oliver Woodman <olly@olly-macbookpro2.roam.corp.google.com>
Date:   Wed Jan 21 15:47:17 2015 -0800

    Minor style tweaks.

commit 5941882df021e62e6bedc354c0b71f3eeb81ed34
Merge: a879819 8547f0c
Author: ojw28 <olly@google.com>
Date:   Wed Jan 21 09:06:10 2015 -0800

    Merge pull request #254 from SongArc/dev
    
    FrameworkSampleSource with FileDescriptor

commit 4158ede6e312ae718f165b1b48c952189d67b27a
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Wed Jan 21 11:54:23 2015 -0500

    Move Closed Captions processing to Eia608TrackRenderer. Use TextRenderer interface for captions. Sort captions based on video frames DTS. Add better control characters and special characters in basic North American character set support. Fixes #156

commit 8547f0c05d6911efae35aa3b2dfb61600f698995
Author: Nezz <bloodsource@vipmail.hu>
Date:   Wed Jan 21 17:44:48 2015 +0100

    Replaced tabs with spaces

commit 796e5bc7d64af7d59c0b48dd9b257c9f1d990b76
Author: Nezz <bloodsource@vipmail.hu>
Date:   Wed Jan 21 02:44:21 2015 +0100

    FrameworkSampleSource with FileDescriptor #246

commit fe43377104de176286a57ae05e399a32c55ac838
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:44:42 2015 +0000

    Increase retry count to 3

commit 06e9e5d3eac6c73db8a3431b2e591f6ec61c54be
Merge: a6e94af a879819
Author: ojw28 <olly@google.com>
Date:   Mon Jan 12 17:43:44 2015 +0000

    Merge pull request #234 from google/dev
    
    dev -> dev-hls

commit a879819dd31754782348f95cf64ec15629c9bb29
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:40:55 2015 +0000

    Force callers into MediaCodecUtil to catch any exceptions that occur.
    
    Issue: #217
    Issue: #228

commit 286365ada86e89dc6f71bff3314cdad00555327a
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:38:21 2015 +0000

    Use Long.SIZE.

commit 3ca12d0c39722084434812ceddbc0c2e15f13dfd
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:37:25 2015 +0000

    Update min retry count to 3.
    
    Empirical testing in shows increased robustness.

commit e8d2c00cf7486897e790b80bd3e6bc16e3f67d08
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:37:07 2015 +0000

    Add trace to chunk fetches.

commit f65a093596b268698262c39aaafdb29ac280b015
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:35:43 2015 +0000

    AudioTrack enhancements.
    
    - Workaround issue where video may freeze whilst audio continues
      on some devices that have entered bad states.
    - Fix wrap-around for playbacks lasting more than 27 hours.

commit 224fc2eef8eb16b009c7c2b2b02978cb92412c5c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jan 12 17:34:00 2015 +0000

    Omit range header if the range is 0-.
    
    Apparently some servers don't like it, and in general it's
    unnecessary to set the header for this case.

commit a6e94af267f97fc8dfdc5f4b2a0d2119aa721cf5
Merge: 869ecbf 1613c9c
Author: ojw28 <olly@google.com>
Date:   Tue Jan 6 20:15:42 2015 +0000

    Merge pull request #226 from google/dev
    
    Refine logic for determining AudioTrack size.

commit 1613c9c7a8ee7c719a04b7156d8fbf925527af75
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jan 6 20:13:50 2015 +0000

    Refine logic for determining AudioTrack size.
    
    - Target 4x the minimum specified by the framework.
    - Impose a minimum duration (250ms).
    - Impose a maximum duration (750ms, or the minimum
      specified by the framework if that's larger).
    
    I've removed the ability to specify the multiplication
    factor, since the underlying implementation is getting more
    complicated, and we should really be able to figure this out
    internally.

commit 869ecbfcf317fd77f16b1e54686dcf8d7d7acb2f
Merge: f745be8 8cb37d7
Author: ojw28 <olly@google.com>
Date:   Fri Jan 2 17:38:59 2015 +0000

    Merge pull request #225 from google/dev
    
    dev -> dev-hls

commit 8cb37d7935b6a7719d1876531ec94dc65c36c19a
Merge: d906e40 2128ceb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 2 17:36:36 2015 +0000

    Merge branch 'dev' of persistent-https://github.com/google/ExoPlayer into dev

commit d906e405a176ace5807daaf92ef5843fa4082d7b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jan 2 17:35:57 2015 +0000

    Propagate AudioTrack errors.

commit 2128ceb777bfcdf0be699946833a6eca087b8cdc
Merge: a96a7fe 75b5a59
Author: ojw28 <olly@google.com>
Date:   Fri Jan 2 17:31:33 2015 +0000

    Merge pull request #220 from martinbonnin/log_all_audiotrack_write_errors
    
    log all AudioTrack errors

commit 75b5a59f597973d2cae77bbe83c826ee9eb6a344
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Fri Jan 2 18:09:14 2015 +0100

    Oooops... bad comparison

commit e8a8c49a97d5cc56e2e8fb4c5e9b6cb00fcc77c1
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Tue Dec 23 13:47:50 2014 +0100

    better handling of input format change for non-adaptive codecs
    
    * this fixes a bug when switching from HE-AAC 22050Hz to AAC 44100Hz (the AudioTrack was not reset and we were trying to send a bad number of bytes, triggering a "AudioTrack.write() called with invalid size" error)
    * this also improves quality switches, making it almost seamless

commit eec4e24ef0b04355879340e437d78294996e2f14
Author: Martin Bonnin <martin.bonnin@dailymotion.com>
Date:   Tue Dec 23 13:02:29 2014 +0100

    log all audio errors

commit f745be8978e784e1f4fc753f65e661bce801a374
Merge: f39d83c a96a7fe
Author: ojw28 <olly@google.com>
Date:   Tue Dec 23 10:53:58 2014 +0000

    Merge pull request #219 from google/dev
    
    Include gradle plugin 1.0.0

commit a96a7fe78289ed9126907c476ae7312489cf1042
Merge: 4c0554d e3eedda
Author: ojw28 <olly@google.com>
Date:   Tue Dec 23 10:53:29 2014 +0000

    Merge pull request #218 from google/master
    
    Include gradle plugin 1.0.0

commit e3eeddab218ecc63f2b4d2cc4781ae9b3afbd0b6
Merge: 34372de e4ea9c1
Author: ojw28 <olly@google.com>
Date:   Tue Dec 23 10:50:07 2014 +0000

    Merge pull request #216 from ened/gradle-plugin-100
    
    Include gradle plugin 1.0.0

commit e4ea9c1056e4430044115ca677f19e948544d98b
Author: Sebastian Roth <sebastian.roth@gmail.com>
Date:   Mon Dec 22 10:34:46 2014 +0800

    Include gradle plugin 1.0.0

commit f39d83cf752ee4dfd23e8d5ec26ef9973b747cf3
Merge: 0414b0d 4c0554d
Author: ojw28 <olly@google.com>
Date:   Sat Dec 20 12:00:41 2014 +0000

    Merge pull request #215 from google/dev
    
    dev -> dev-hls

commit 4c0554d0d76462a436c4f43528a8f2cf9eecf0a7
Author: Oliver Woodman <olly@google.com>
Date:   Sat Dec 20 11:59:19 2014 +0000

    Start adding support for more formats in WebM container.

commit ed6fcb638e0198d6018705d3c26321ace0bdf41b
Author: Oliver Woodman <olly@google.com>
Date:   Sat Dec 20 11:57:49 2014 +0000

    Fix reading single byte from DataSourceInputStream.

commit 0414b0d2f6cfda21c1db13166ff55d4b6cd20d2c
Author: Oliver Woodman <olly@google.com>
Date:   Sat Dec 20 11:57:05 2014 +0000

    Fix assertion fail on seek.
    
    Issue: #214

commit c497b78ffe04752b3593e5cfc7a763438b907edb
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:13:46 2014 +0000

    Fix memory leak in TsExtractor when not all tracks are enabled.
    
    Previously samples belonging to disabled tracks would just
    accumulate in an arbitrarily long queue in TsExtractor. We
    need to actively throw samples away from disabled tracks up
    to the current playback position, so as to prevent this.
    
    Issue: #174

commit 1fce55f6fe15991106202c8054b51fa2c0b53195
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:12:04 2014 +0000

    HLS: Consider all programs.
    
    I'm not sure exactly what the implications of this change are,
    but I'd really hope that only one program in each stream is carrying
    audio/video. For GoPro cameras, they expose the video stream in
    the second program, for some reason.
    
    Issue: #116

commit 0756c3d28c33026a90be6dff88a2b9806e16be30
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:11:17 2014 +0000

    Relax assertion.
    
    We've seen a few streams where this assertion fails. If you
    just skip the packet, things appear to recover correctly in
    all cases I've seen, so replacing failure with a warning.

commit ea21eba87e25a33e7587f27aad2686d8686e48ba
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:10:16 2014 +0000

    Allow re-enabling video track without transition through buffering state.

commit 5cf781ab9f1af27bd65c71a6d0b67952058572d6
Merge: 83e80f9 7f91a6d
Author: ojw28 <olly@google.com>
Date:   Fri Dec 19 12:09:06 2014 +0000

    Merge pull request #211 from google/dev
    
    dev -> dev-hls

commit 7f91a6d4d8095dc6a78c478aafccad7d24ee44f3
Merge: 99b438e cc830d6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:07:39 2014 +0000

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit 99b438e4c4fa1b40653c0da07d9fff2479777a9d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:06:00 2014 +0000

    Don't request that the server use DEFLATE compression.
    
    If the server actually gives us a DEFLATE response, we
    fail to handle it properly!

commit 4d6c9f27c2a2ae982acedf7df45b9fd2656300b7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 19 12:05:03 2014 +0000

    Minor cleanup of AudioTrack.

commit cc830d6fdb6d708eb587814b640252cd42176e05
Merge: ee823a9 52e5b8e
Author: ojw28 <olly@google.com>
Date:   Thu Dec 18 10:29:06 2014 +0000

    Merge pull request #208 from alexandrite/fix-mp3-buffer
    
    AudioTrack will mark 0-size buffers as consumed

commit 52e5b8e848c2d6a4593c8a5de84fcca6f7a7badc
Author: Alex Puterbaugh <alex.puterbaugh@starmakerinteractive.com>
Date:   Wed Dec 17 11:30:49 2014 -0800

    AudioTrack will mark 0-size buffers as consumed
    
    This can happen in the first, non-codec-config output buffer
    from MediaCodec, while decoding MP3 data.
    
    This issue was discovered on Nexus 5's running both KitKat
    Lollippop.

commit 83e80f98fba4e7c37dbcc96c933ddd3af56da6dd
Merge: 39c07d5 ee823a9
Author: ojw28 <olly@google.com>
Date:   Wed Dec 17 19:25:12 2014 +0000

    Merge pull request #207 from google/dev
    
    dev -> dev-hls

commit ee823a95fc737b7495ee021c90af37cc0b03aa22
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 17 19:22:52 2014 +0000

    Add launcher icon source.

commit 48540c2ba0492b9d35272f4403b240ac43906149
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 17 19:19:39 2014 +0000

    Add icon for demo app.

commit 3a9d08edb58529f1c2e0a271e2422e1e5030ba7e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 17 19:18:33 2014 +0000

    Misc performance/correctness tweaks.

commit f1fe109bfaef903e85380abb190b0efe0498177e
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 17 19:16:02 2014 +0000

    Fix AC3Passthrough
    
    - Handle read returning NOTHING_READ for AC-3 streams.
    - Remove extra checks for the audio track being initialized.
    - Call isInitialized() instead of checking audioTrack != null.

commit 39c07d570c75f7cf11206f802ec807a770b4278c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:30:21 2014 +0000

    Adapt HLS on non-adaptive devices.
    
    This just brings HLS treatment in the demo app in line with
    DASH and SmoothStreaming.

commit 1face38709ddd3b8acba72d44fbe37db54291f57
Merge: b805692 57068a6
Author: ojw28 <olly@google.com>
Date:   Mon Dec 15 15:12:21 2014 +0000

    Merge pull request #204 from google/dev
    
    dev -> dev-hls

commit 57068a6406974060394e528be9bd28d8c125072e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:06:05 2014 +0000

    Clear subtitle when text disabled.

commit 57faa497561488cd81d485fb13849f0c9348c90d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:05:06 2014 +0000

    Fix crash running ExoPlayer demo on JB. My bad!
    
    - We can't refer to UnsupportedSchemeException outside of the
    V18 compat inner classes.
    - There were also a few missing return; calls.

commit 11eb1c222b6fd5cd49d1013a3f8ac290d4d467b2
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:04:38 2014 +0000

    Identify AC-3 tracks by codecs="ac-3", not the MIME type.

commit 595147de9b4c0cf6ec1d784597457cba1af97507
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:03:10 2014 +0000

    Enforce sliding window of available segments for DASH DVB.

commit 978a4d857a436788249b0c439929109d09d9ddb8
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 15 15:02:29 2014 +0000

    Handle getting the audio track's position before the first AC-3 buffer.
    
    ac3Bitrate is set only after the first buffer is handled, which meant that
    getting the playback position would cause a divide by zero before then.
    
    When playing back AC-3 content, the ac3Bitrate will always be set after the
    first buffer is handled, so return a 0 position if it is not set.

commit b80569237b575b7619e0eff73c305c116a782a91
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:25:48 2014 +0000

    Correctly propagate fatal load error.

commit 4c29eb58f1daa78802bebf49ddba2a578a7e5d3e
Merge: 1554db1 0cb8169
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:24:05 2014 +0000

    Merge branch 'dev' into dev-hls

commit 0cb8169323c2292f531a7c52e661f61e0b28f840
Merge: 5a3340d 1554db1
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:23:43 2014 +0000

    Merge branch 'dev-hls' into dev

commit 5a3340d638cfeb3809f435b1b0118f2acce15079
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:18:44 2014 +0000

    Add initial AC3 passthrough support.

commit 81bf68b1cb9e689c24ebc38e47f98ee71fc4a143
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:13:58 2014 +0000

    Minor doc fixes.

commit 9d4e1773474579ac1be07ca588ff06bd75dce10d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:12:00 2014 +0000

    Support DASH Live TTML subtitles.
    
    Also add missing file.

commit bb024fda088f67cf552017bc3ca4a9cf164a4a87
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:07:48 2014 +0000

    Partial support for DASH DVB Live streams.
    
    - Adds support for dash manifests that define SegmentTemplate
      but no SegmentTimeline.
    - Assumes that the device clock is correct when calculating which
      segments to load. The final step here is to use the Utc timing
      element in the DASH manifest to obtain an accurate client clock.
    - Doesn't yet enforce that the client shouldn't load segments that
      are in the future or behind the live window.

commit ae55b12bd8455758f23dfffa9e2d007af2ae5383
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:05:45 2014 +0000

    Don't require samples to specify whether they're encrypted.
    
    This wasn't actually used for anything other than showing a
    toast, which is now generated based on the manifest instead.

commit 099bbe048f338bbd7470e2782e9488fa94946d84
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 14:02:14 2014 +0000

    Correctly handle audio and video only DASH streams.

commit 3e33fddbc195b4329d8bfd06b23d4c1cf462a04d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 12 13:59:45 2014 +0000

    Correctly handle audio-only SmoothStreaming streams.

commit 1554db1673db2983566caa830dcc819ca8c1d1cb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Dec 11 10:26:50 2014 +0000

    Skip bad PES packets
    
    Issue: #200

commit 34372deb9a583bd647df7aaa612da18d4947b4f8
Merge: 280ccb1 f15e397
Author: ojw28 <olly@google.com>
Date:   Wed Dec 10 16:52:40 2014 +0000

    Merge pull request #199 from google/dev
    
    Release 1.1.0

commit 035671b722286f7ea22e5bdf6a1fc1b76a9ca525
Merge: a254218 f15e397
Author: ojw28 <olly@google.com>
Date:   Wed Dec 10 14:08:10 2014 +0000

    Merge pull request #198 from google/dev
    
    dev -> dev-hls

commit f15e3973e05cfbb88c1283a5b8869c7e18c093cf
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 10 14:05:51 2014 +0000

    Fix discovery of secure decoders on some L devices.

commit 86b2209ad03ebccdb4212b8f1bd470cc595bb10f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 10 14:04:58 2014 +0000

    Bump version to 1.1.0.
    
    Also update gradle files.

commit a25421889168df7c3ffc72842ee7c39a4da3025e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:19:24 2014 +0000

    No-op format changes.

commit 87ca1b3465c35c96b68ca04d24a872cad71ae072
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:18:10 2014 +0000

    Skip previously loaded HLS data after an error occurs.
    
    Github issue: #183

commit 1344b36da94b3393b5ef05662db9f13324f33d29
Merge: 0a888a0 c4b2a01
Author: ojw28 <olly@google.com>
Date:   Mon Dec 8 20:17:17 2014 +0000

    Merge pull request #194 from google/dev
    
    dev -> dev-hls

commit c4b2a0121230cb533a658fd6c55b4c01199a3000
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:15:06 2014 +0000

    Allow out-of-band pssh data for DASH playbacks.
    
    This fixes the referenced issue, except that the MPD parser
    needs to actually parse out UUID and binary data for schemes
    that we wish to support. Alternatively, it's easy to applications
    to do this themselves by extending the parser and overriding
    the parseContentProtection and buildContentProtection methods.
    
    Github Issue: #119

commit 2f0a1779e2183b990885b099d1beed38438d9bac
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:13:52 2014 +0000

    Stop piping PSSH information through the extractor.
    
    It's cleaner to not inject data into the extractor only
    so that it can be read out as though it were parsed from
    the stream. This is also an incremental step towards
    fixing Github issue #119.

commit cf80c4d9cb3de06e9861bb85ca3242ded6e6b072
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:12:04 2014 +0000

    Allow passing of optional parameters in MediaDrm key requests.

commit 01151c9c65810a9fff439f5901a85bde4e6a4f63
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 20:10:52 2014 +0000

    Don't append base uri if chunkUrl is absolute.

commit 0a888a0d4f11356f6021e63e5ba473d9c0a5fd77
Merge: 5d78205 7ca1de2
Author: ojw28 <olly@google.com>
Date:   Mon Dec 8 20:08:53 2014 +0000

    Merge pull request #193 from google/dev-hls-spspps
    
    Add SPS/PPS to the media format.

commit 7ca1de22759ab507f5c0a378f71abe3beb885ec3
Author: Oliver Woodman <olly@google.com>
Date:   Mon Dec 8 11:36:51 2014 +0000

    Experiment to add SPS/PPS to the media format.

commit 5d7820542cd351d33915b1c8ed1c2740d306f47d
Merge: 3d775c1 c8e5988
Author: ojw28 <olly@google.com>
Date:   Fri Dec 5 17:58:56 2014 +0000

    Merge pull request #189 from google/dev
    
    dev -> dev-hls

commit c8e5988e6d2ca8c2391042adb2f3ea0443f937f3
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 5 17:53:24 2014 +0000

    Fix handling of unknown duration in FMP4.
    
    Issue: 186

commit 6f1832fb66df5f9b8844d595ab0b13ef7dab3e34
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 5 17:52:30 2014 +0000

    Support negative-fronted xs:duration values.
    
    Issue: 186

commit fc8c08d240ee0bac3d40e8d816c780bdf0ab0178
Author: Oliver Woodman <olly@google.com>
Date:   Fri Dec 5 17:51:52 2014 +0000

    Fix #187

commit 3d775c164106d6709c4238ea6a02e61ee20f7afa
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:50:31 2014 +0000

    Use C constants + minor cleanup.

commit 511dd9435a7697402c215fce9471fac54bb66db4
Merge: c2d55ac 4efc0ab
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:48:20 2014 +0000

    Merge branch 'dev' into dev-hls

commit 4efc0abde92a07c91d54c55ac32f821aec004eb7
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:45:13 2014 +0000

    Implement DASH Live.
    
    Note: This adds support for the majority of DASH live streams,
    however we do not yet correctly support live streams that rely
    on UtcTimingElements in their manifests.
    
    Issue: #52

commit 6652f864bd69f04b1793eaeadc63edf80ba2571b
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:33:36 2014 +0000

    Audio improvements.

commit 2e1f9897e76005978444eb617a862c1cdfa6b5c1
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:30:56 2014 +0000

    Fixed issue in which setting a representation duration to unknown wasn't handled correctly.

commit dc644ae86d3aeaf15c53aac50faaddacd193af22
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:30:15 2014 +0000

    Make single MICROS_PER_SECOND constant + use it everywhere.

commit 656fc0b0ca4b2ba5269227848a5da9294d4854f5
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:26:48 2014 +0000

    Make sure SmoothStreaming manifest durations are -1 for Live.
    
    Plus start to properly document the SmoothStreaming package.
    Note that where the documentation is a little vague, this is
    because the original SmoothStreaming documentation is equally
    vague!

commit c2d55acab52941cb883c891e6973b0aa4457ec5b
Author: Oliver Woodman <olly@google.com>
Date:   Wed Dec 3 18:10:30 2014 +0000

    Get Exo+HLS memory usage more under control.
    
    - Split sample pools for video/audio/misc, since the typical
      required sample sizes are very different (and so it becomes
      inefficient to use a sample sized for video to hold audio).
    - Add TODO for further improvements.
    
    Issue: #174

commit b9f32539247e70bbb3d3472c4116dc179b0950f8
Merge: 40f3172 165562d
Author: ojw28 <olly@google.com>
Date:   Thu Nov 27 18:18:02 2014 +0000

    Merge pull request #176 from google/dev
    
    dev -> dev-hls

commit 165562d8808cc46578d1732f76112c732c53662e
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 27 18:15:16 2014 +0000

    Add VSYNC aligning smooth frame release helper.

commit 2969bba60fd502bbac2d11cdab399fdd3b438ea3
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 27 18:14:19 2014 +0000

    Fix timestamp rollover issue for DASH live.
    
    The timestamp scaling in SegmentBase.getSegmentTimeUs was
    overflowing for some streams. Apply a similar trick to that
    applied in the SmoothStreaming case to fix it.

commit c5342630328fcda01eeec01784d63d43b0c0d352
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 27 18:12:46 2014 +0000

    Enhance parsing of xs:duration to support year/month/day.

commit 1a557a06c1a25989d9fc644c64762c4561a9a218
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 27 18:11:43 2014 +0000

    Support SmoothStreaming repeated chunk tags.

commit 40f3172237fcb0c58eb07c2766c989cd501e15ae
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 26 17:21:41 2014 +0000

    HLS: More control over buffering + tweak caption impl.
    
    - Move all three buffering constants to a single class (the
      chunk source).
    - Increase the target buffer to 40s for increased robustness
      against temporary network blips.
    - Make values configurable via the chunk source constructor.
    - Treat captions as a text track for HLS. This allows them to
      be enabled/disabled through the demo app UI.
    
    Issue: #165

commit 8e2801ce9b4ab0091ec1681832f9de4c1acdbdc8
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 26 12:08:46 2014 +0000

    Improve HLS ABR.
    
    - Add options to switch abruptly at segment boundaries. Third
      parties who guarantee keyframes at the start of segments will
      want this, because it makes switching more efficient and hence
      rebuffering less likely.
    - Switch quality faster when performing a splicing switch (when
      we detect that we need to switch variant, we now immediately
      request the same segment as we did last time for the new variant,
      rather than requesting one more segment for the old variant
      before doing this.

commit 410fcdeb87084af7b5338c068fdde4163ed055e7
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 26 12:01:36 2014 +0000

    Merge HLS playlist parsers, make a single parser identify the
    playlist type (master or media).
    
    Issue: #155

commit f9f3b82d9335e7f557d50bfc1de6840776c64609
Merge: f034ee7 ab00a4d
Author: ojw28 <olly@google.com>
Date:   Wed Nov 26 11:26:39 2014 +0000

    Merge pull request #172 from google/dev
    
    dev -> dev-hls

commit ab00a4da03bfc5ddcc2ed29b0be31cc6308dabe7
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 26 11:23:15 2014 +0000

    Allow non-strict webvtt parsing.

commit 7dfebc2e11f4d696e0e729adafe7c8a469bee669
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 26 11:22:54 2014 +0000

    Make default retry count public.

commit f034ee7d403fb9aa33e553c0874c443ffb47791f
Merge: 52b95c1 69c7cb0
Author: ojw28 <olly@google.com>
Date:   Fri Nov 21 17:55:38 2014 +0000

    Merge pull request #169 from google/dev
    
    Correctly handle redirection when requesting manifests.

commit 69c7cb09c8389f3ba5f9be8165a2db754c244880
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 21 17:54:55 2014 +0000

    Correctly handle redirection when requesting manifests.

commit 52b95c1f8362a7efcf6b992f267b72075faed3ff
Merge: 03e859d 8c980c8
Author: ojw28 <olly@google.com>
Date:   Fri Nov 21 00:32:12 2014 +0000

    Merge pull request #166 from google/dev
    
    dev -> dev-hls

commit 8c980c8892c088802702afb077a796d17b07964b
Merge: 2798b43 9658534
Author: ojw28 <olly@google.com>
Date:   Fri Nov 21 00:30:48 2014 +0000

    Merge pull request #164 from talklittle/dev
    
    gradle plugin 0.14.4 fixes

commit 9658534b937812f20b12016c34d39d0f3bb3b882
Author: Andrew Shu <talklittle@gmail.com>
Date:   Thu Nov 20 15:54:48 2014 -0800

    demo: compileSdkVersion 21 (was 19)

commit 66c48a1151f5fa9e59d8ef3a91e5e789fe10b57c
Author: Andrew Shu <talklittle@gmail.com>
Date:   Thu Nov 20 12:18:54 2014 -0800

    gradle: compileSdkVersion 21
    
    fixes broken import statements

commit f7589ceee22f64f42ec2af3cf314b72ea53cd83f
Author: Andrew Shu <talklittle@gmail.com>
Date:   Thu Nov 20 12:18:35 2014 -0800

    gradle: fix demo build.gradle

commit 5447081d17eb209f9fee8956ce0251214bdcdb7a
Author: Andrew Shu <talklittle@gmail.com>
Date:   Thu Nov 20 12:18:13 2014 -0800

    gradle: 2.2.1-rc-1 wrapper jar and distribution url

commit 0ce3e6e8a6adf5bcecf660abb23e91fcef928cb0
Author: Andrew Shu <talklittle@gmail.com>
Date:   Wed Nov 19 15:30:54 2014 -0800

    fix compatibility with android gradle plugin 0.14

commit 03e859d7745e720e2c4242ec9f66bd625dc91870
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 17:11:02 2014 +0000

    Fix handling of encrypted media if IV changes.
    
    1. Correctly replace the AES data source if IV changes.
    2. Check the largest timestamp for being equal to MIN_VALUE, and
       handle this case properly.
    3. Clean up AES data source a little.
    
    Issue: #162

commit 81e2c9f0d3ea0fd934fbb4f01ae20bb81c7adf66
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 14:59:22 2014 +0000

    Fix https://github.com/google/ExoPlayer/issues/159.
    
    The actual fix here is to not call discardExtractors in HlsSampleSource
    whilst the loading thread that's pushing data into it is still running.
    It's required to wait for that thread to have exited before doing this.
    
    Issue: #159

commit 8c07847b00552247540536a11e0cacc30482ba6f
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 14:58:06 2014 +0000

    Properly propagate errors that occur during preparation.

commit 2798b430cabcb547faeac41056ed39d914825592
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 12:23:29 2014 +0000

    Delete spurious file.

commit b501f8ab398c6277d114eb2de0ebe21ae3abb998
Merge: faf196a 33c37eb
Author: ojw28 <olly@google.com>
Date:   Thu Nov 20 11:12:06 2014 +0000

    Merge pull request #160 from google/dev
    
    dev -> dev-hls

commit 33c37ebc82a9ffbe59d040b3be09f34e3a465e85
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 11:04:38 2014 +0000

    Fix AudioTrack position reporting whilst paused.
    
    Issue: #158

commit 2a832fd3c495c224fea934335a7b7c62bd80cbe5
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 20 11:03:47 2014 +0000

    Minor stylistic tweaks.

commit faf196a581520f1f3164388bb25a68c90446c897
Merge: 25ddeab d506d76
Author: ojw28 <olly@google.com>
Date:   Wed Nov 19 16:10:17 2014 +0000

    Merge pull request #154 from google/dev
    
    Merge dev -> dev-hls

commit d506d7660da070163d90f3730dc981ca1a5357b5
Merge: 127bcd1 255c3b2
Author: ojw28 <olly@google.com>
Date:   Wed Nov 19 16:08:38 2014 +0000

    Merge pull request #147 from jonasl/dev-gc
    
    MediaCodecTrackRenderer: Avoid excessive garbage generation

commit 25ddeab57d7bcf45a583a5dc05a63de7e0934d6f
Merge: 826c73a 467f195
Author: ojw28 <olly@google.com>
Date:   Wed Nov 19 16:08:27 2014 +0000

    Merge pull request #146 from jonasl/dev-hls-crop
    
    TsExtractor: Account for frame cropping when parsing SPS

commit 826c73a16bfb7212524d563420b5ed2ff79a0873
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 19 16:06:33 2014 +0000

    Fix renderer count.
    
    Issue: #153

commit 127bcd18c386108aa6ee5a9370ea2ad6a9e3855d
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 19 15:58:26 2014 +0000

    Bring internal/external branches closer.
    
    - Unredact internal error ids.
    - Move images.

commit 4280511a33e961ad18670cb99432cc617ce32dfe
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 19 10:34:49 2014 +0000

    Seamless splicing for adaptive HLS.

commit 87d0be252e8d4d655a6f301b5d65e3d1426e4c0d
Merge: 3cfe894 bc303b7
Author: ojw28 <olly@google.com>
Date:   Wed Nov 19 10:10:53 2014 +0000

    Merge pull request #149 from google/dev
    
    dev -> dev-hls

commit 3cfe894b93bbf2ff7dc1e48bb8b3d8d228fa0550
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 18 19:36:44 2014 -0500

    Additional IV fix. Trim sign bit from BigInteger.toByteArray() output, if it creates a 17th byte for it. #145

commit 255c3b27f6ee08e09007addb6f177bebc62d8c0e
Author: Jonas Larsson <jonas@hallerud.se>
Date:   Fri Nov 14 16:13:13 2014 -0800

    MediaCodecTrackRenderer: Avoid excessive garbage generation
    
    Looking up a long in a HashSet<Long> auto boxes the long and leaves
    it for the GC. As decodeOnly is relatively infrequent it's much
    better to do a simple linear search in a List<Long>. That way
    we can avoid boxing every incoming time stamp value. In the general
    case this will be linear searching in an empty list, a very fast
    operation.
    
    Signed-off-by: Jonas Larsson <jonas@hallerud.se>

commit 15d3df6a5852e2ba483364d03f9031f106974b5f
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 18 14:48:40 2014 -0500

    Add EIA-608 (CEA-608) Closed Captioning support for HLS #68

commit c57484f90a554cc86af5ab7351e8a4569970214c
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 18 14:11:02 2014 -0500

    Fix for IV bigger than 32 bits #145

commit 3abcefa00cdc8432a4a79af7bf568d753a9c3ce1
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 18 14:05:34 2014 -0500

    Add EXT-X-BYTERANGE support #139

commit bc303b730ad34d421a14598f05cba26ed34eacb1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 19:03:04 2014 +0000

    Factor out AudioTrack from MediaCodecAudioTrackRenderer.
    
    AudioTrack contains the portions of MediaCodecAudioTrackRenderer that handle the
    platform AudioTrack instance, including synchronization (playback position
    smoothing), non-blocking writes and releasing.
    
    This refactoring should not affect the behavior of audio playback, and is in
    preparation for adding an Ac3PassthroughAudioTrackRenderer that will use the
    AudioTrack.

commit 44bc01b28d3da0cf17368575b558bb66f38d289e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 19:02:32 2014 +0000

    Add receiver for HDMI plugged-in configuration changes.

commit 7cd201c28b9e26a4bd9b6049af3a89add26f316f
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 19:02:20 2014 +0000

    Add missing class.

commit 2472637264ecf51bbc3dafcd285d1d2f72715f50
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 19:00:30 2014 +0000

    Add support for extracting Vorbis audio in WebM Extractor.

commit 6a544da2f8266e13173a4643b8fc8c9d22d2ba4e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 18:57:07 2014 +0000

    Use new MediaCodecList APIs on L.

commit 685e1d1f06507771de29807c8874d3664316a9d8
Author: Oliver Woodman <olly@google.com>
Date:   Tue Nov 18 18:54:45 2014 +0000

    Minimize memory leak risks.
    
    Remove implicit back-reference from playback thread to player.

commit 467f19568b73b4fa236d8c97ff2fc583d08bf05d
Author: Jonas Larsson <jonas@hallerud.se>
Date:   Fri Nov 14 14:34:00 2014 -0800

    TsExtractor: Account for frame cropping when parsing SPS
    
    Passing uncropped dimensions to certain decoders will make them
    output frames without proper cropping set.
    
    Signed-off-by: Jonas Larsson <jonas@hallerud.se>

commit 360d452dade2dda732bb49d9642787f5b12b0775
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 14 18:32:22 2014 +0000

    Avoid seeking if seekPosition==currentPosition

commit eb1210d410988492865ef1f025c449f256e3eabc
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 14 18:31:55 2014 +0000

    Make sampleQueue thread safe

commit 6b123590cab361ecee7ebef3b010eff043d6c7a2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 14 16:31:47 2014 +0000

    Correctly propagate errors

commit 643f33f7e97fb638ba0b779e5faf547a14b55e6a
Author: Oliver Woodman <olly@google.com>
Date:   Fri Nov 14 16:31:23 2014 +0000

    Properly handle different profiles (skipping SPS data as needed).

commit fd519016209391698d4a5a828f6f7deac73e88ff
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:32:10 2014 +0000

    Big HLS update. Add start of adaptive support, but leave disabled for now.

commit 6c6ba900a9da4abea158920323ac6b18d78d58f9
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:23:44 2014 +0000

    Fix the build.

commit 0005f41fe9b03b646bbf5b78d5809e0b00061b5f
Merge: 7b5c4d7 cb06845
Author: ojw28 <olly@google.com>
Date:   Thu Nov 13 16:20:13 2014 +0000

    Merge pull request #138 from google/dev
    
    dev -> dev-hls

commit cb0684597609a8a158e6a5792ea644e868eb68ec
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:16:02 2014 +0000

    Minor linebreak fixes

commit d14e11c507f2d11b934b6a6e97aff7558a2eaacb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:13:55 2014 +0000

    Additional extraction for AC3

commit 456d53e178e8535e99dc58a117d3e86e598ac22d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:13:02 2014 +0000

    Minor cleanup.

commit 2d97d31a9e549eb73b4106ae1f981a9704651a8e
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:11:52 2014 +0000

    Add ability to make fine-grained frame release timestamp adjustments

commit f1c646b79374be6e7488208820dfcee378ce79f0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:10:21 2014 +0000

    Add diagnostic info to decoder exceptions + minor cleanup

commit 59688397fa7800005f567faad1e91539ea270bf1
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:08:43 2014 +0000

    Suppress deprecation warnings

commit bc871c94a6490b0b5577ec377a291afdd4dd8ff7
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:08:16 2014 +0000

    Add bitrate to MediaFormat

commit 4460b7c62605ce1c938878698b98c976f5f5156e
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 13 16:06:49 2014 +0000

    Fix typo

commit 7b5c4d705ff3a6b1798555e0a9383b3a019f3189
Merge: e9dacb0 5abb413
Author: ojw28 <olly@google.com>
Date:   Mon Nov 10 08:49:20 2014 +0000

    Merge pull request #131 from google/dev-l
    
    Merge dev-l into dev-hls, now L SDK is released.

commit 441d7f4e17d6ab02cbb37b7ec67bf6c9ede9d069
Merge: 1653e81 5abb413
Author: ojw28 <olly@google.com>
Date:   Mon Nov 10 08:47:59 2014 +0000

    Merge pull request #130 from google/dev-l
    
    Merge dev-l into dev, now L SDK is released.

commit 5abb413f4e4670e011edf6bc52820817678cfbdf
Merge: e6c7e29 1653e81
Author: ojw28 <olly@google.com>
Date:   Thu Nov 6 19:30:47 2014 +0000

    Merge pull request #127 from google/dev
    
    dev -> dev-l

commit e9dacb08df74ed552e4c2295fbe8c33619daaa31
Merge: aeb17e6 1653e81
Author: ojw28 <olly@google.com>
Date:   Thu Nov 6 19:30:24 2014 +0000

    Merge pull request #126 from google/dev
    
    dev -> dev-hls

commit 1653e81687933735b3c192a5ebdcf1de79295a88
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 6 19:28:21 2014 +0000

    Add configurable retry count to ChunkSampleSource

commit eccf8d792433d8048f79b0a79ac7659307fc330c
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 6 19:27:28 2014 +0000

    Minor Webvtt parsing tweaks

commit d2e73dd566175c57e7afa481987a5be8fdd025eb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 6 19:26:41 2014 +0000

    Add brackets to make expression clearer.

commit aeb17e6a8830081794a40be1963d134fcdb5fdcb
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 6 19:22:14 2014 +0000

    HLS improvements + steps towards ABR.

commit 9790430a626c8b1a0b894529df95ad32cffe5510
Author: Oliver Woodman <olly@google.com>
Date:   Thu Nov 6 19:17:22 2014 +0000

    Trim whitespace from codecs

commit 55b4272a466a42e5a441746bb8f02380de0cefdf
Author: Oliver Woodman <olly@google.com>
Date:   Wed Nov 5 17:25:02 2014 +0000

    Pro-actively parse the final PES packet.

commit e6c7e296473682a57bf7e55937aae9c37d7693df
Merge: 3837567 712e460
Author: ojw28 <olly@google.com>
Date:   Wed Nov 5 17:15:39 2014 +0000

    Merge pull request #121 from google/dev
    
    dev -> dev-l

commit 71f918c01b3318f42cc9b2d7f83b4976e7c20bbb
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Wed Nov 5 11:54:45 2014 -0500

    ID3 refactoring to match apple's player behavior #67

commit b946ad9234f34b3a498a96911402974d9b0048b8
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 4 14:24:13 2014 -0500

    Specify UserAgent for ManifestFetcher in HlsRendererBuilder.

commit c781fcd13d52f7ae413a7aa7a13864e569609096
Merge: a76addb 712e460
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 4 14:20:36 2014 -0500

    Merge pull request #117 from google/dev
    
    Add cookies support and use the same UserAgent in ManifestFetcher and in...

commit 712e46085deab098ae043725c406e9c7939d9553
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 4 14:06:37 2014 -0500

    Add cookies support and use the same UserAgent in ManifestFetcher and in HttpDataSource.

commit a76addba5d59637dec40653698e7dc3551534ced
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Nov 4 13:38:22 2014 -0500

    Add AES-128 encryption support for HLS #69 and parsing logic for CODECS and RESOLUTION attributes.

commit 38375670a6a0162c1fbd6094d8f3d67aa2f2c8ae
Merge: 059835e dedbd53
Author: ojw28 <olly@google.com>
Date:   Mon Nov 3 15:58:30 2014 +0000

    Merge pull request #115 from google/dev
    
    Use largeHeap in demo app

commit a21c9ebc31d154a963effa65f1297fc8b1c4d860
Merge: f4a5cd6 dedbd53
Author: ojw28 <olly@google.com>
Date:   Mon Nov 3 15:56:55 2014 +0000

    Merge pull request #114 from google/dev
    
    Use largeHeap in demo app

commit dedbd5367f35ce70ace99f77c314653392de9231
Author: Oliver Woodman <olly@google.com>
Date:   Mon Nov 3 15:54:58 2014 +0000

    Use largeHeap in demo app

commit 059835e357ec11f54f52831704fe9490da801bf3
Merge: d71b9b7 deb7f2b
Author: ojw28 <olly@google.com>
Date:   Mon Nov 3 12:21:45 2014 +0000

    Merge pull request #113 from google/dev
    
    dev -> dev-l

commit f4a5cd637fe13791b2aebc13e38ba4df5b60627b
Merge: 4c146ee deb7f2b
Author: ojw28 <olly@google.com>
Date:   Mon Nov 3 12:21:04 2014 +0000

    Merge pull request #112 from google/dev
    
    dev -> dev-hls

commit deb7f2badd8719ea9cf55038e325d1dc75c482b9
Author: Oliver Woodman <olly@google.com>
Date:   Mon Nov 3 12:06:35 2014 +0000

    Add AAC test stream.

commit 19eb7795fe27d78193808a0cccdfa6bdc0b540df
Author: Oliver Woodman <olly@google.com>
Date:   Mon Nov 3 12:01:53 2014 +0000

    Fix default startNumber.
    
    Issue: #108

commit da26b03d9cf4e63fed9bf3f6d0115159c6b16fb0
Author: Oliver Woodman <olly@google.com>
Date:   Mon Nov 3 12:01:25 2014 +0000

    Minor setup tweaks.

commit 4c146ee28d6a867a08b850f10d2be0b6051b1298
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 19:48:54 2014 +0000

    Neaten TsExtractor a little.
    
    - Add a readBit method to BitsArray for reading a boolean flag.
    - Make things accessed from inner classes package visibility to avoid
      the compiler generating thunk methods.

commit d71b9b7ca11b5fa556e8d931cc94308884f31a4f
Merge: dd2921f 78f34cf
Author: ojw28 <olly@google.com>
Date:   Tue Oct 28 19:30:00 2014 +0000

    Merge pull request #100 from google/dev
    
    dev -> dev-l

commit b6bbf50c0ed8f6ded9110bc6457c3bee6fdec17b
Merge: 2422912 78f34cf
Author: ojw28 <olly@google.com>
Date:   Tue Oct 28 19:29:29 2014 +0000

    Merge pull request #99 from google/dev
    
    dev -> dev-hls

commit 2422912be841003e2c8f5fd9f657304f1565341b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 19:25:10 2014 +0000

    Refactor HLS support.
    
    - The HlsSampleSource now owns the extractor. TsChunk is more or less dumb.
      The previous model was weird, because you'd end up "reading" samples from
      TsChunk objects that were actually parsed from the previous chunk (due to
      the way the extractor was shared and maintained internal queues).
    - Split out consuming and reading in the extractor.
    - Make it so we consume 5s ahead. This is a window we allow for uneven
      interleaving, whilst preventing huge read-ahead (e.g. in the case of sparse
      ID3 samples).
    - Avoid flushing the extractor for a discontinuity until it has been fully
      drained of previously parsed samples. This avoids skipping media shortly
      before discontinuities.
    - Also made start-up faster by avoiding double-loading the first segment.
    
    Issue: #3

commit 78f34cf480516bf1d63279e63a55a49591af7e6c
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 18:22:26 2014 +0000

    Add svg source for diagrams.

commit 11cbe2819eceef362be7103d16698ff2f62b7bcb
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 17:55:21 2014 +0000

    Clean up project files.

commit d3a05c9a44cde42097a55058e2906e2395b636a6
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Tue Oct 28 13:24:12 2014 -0400

    Add ID3 Timed Metadata support for HLS #67

commit ca310100283388140bd5b77f4d17ba4104af9019
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 14:25:12 2014 +0000

    Add HLS support to simple variant of demo app. Plus cleanup.

commit dd2921f9b27586d06bbc48fd930bd1f663663ce6
Merge: 1057a45 552db2f
Author: ojw28 <olly@google.com>
Date:   Tue Oct 28 14:19:18 2014 +0000

    Merge pull request #97 from google/dev
    
    dev

commit 3bee259de90003d555df9eb4daccbace5f75bc1a
Merge: 5ba3f1e 552db2f
Author: ojw28 <olly@google.com>
Date:   Tue Oct 28 14:18:56 2014 +0000

    Merge pull request #96 from google/dev
    
    dev -> dev-hls

commit 552db2fa7c8e83ee934f490e4873154789fdf367
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 14:15:52 2014 +0000

    Avoid spurious preparing->idle->preparing transition in demo app.
    
    Issue #81

commit c34f7368aeb28d21a9255e995f8b0e346dc61527
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 14:12:55 2014 +0000

    Minor tweak to UriDataSource.

commit 5ba3f1eea34e22ee71e2ef1f83e17b6a4d756fcf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Oct 28 10:08:42 2014 +0000

    Fix build.

commit b5c4148f8f587cf19abb4e611fa726b58bdf6cb2
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 11:20:39 2014 +0000

    Use UriDataSource in demo app.

commit 119eb6712ad0c8ebe577d744eadaf45780907c2d
Merge: c2c7a75 192cdc6
Author: ojw28 <olly@google.com>
Date:   Mon Oct 27 11:06:31 2014 +0000

    Merge pull request #93 from google/dev
    
    Dev -> Dev-hls

commit 1057a458120adad850eb83708aa26009541d36ce
Merge: 4c348d8 192cdc6
Author: ojw28 <olly@google.com>
Date:   Mon Oct 27 11:06:10 2014 +0000

    Merge pull request #92 from google/dev
    
    Dev -> Dev-l

commit 192cdc66a2ba13292f3cfd7090dc8c810302e53f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 11:00:04 2014 +0000

    Ignore secure decoders. They shouldn't be explicitly listed.

commit 067422a491da0fe5955a98946961bf3827b90b74
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:59:37 2014 +0000

    Cleanup TextTrackRenderer.

commit 5f6b197355e27e5bad497f1c9859c4f22e8824b5
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:56:52 2014 +0000

    Allow direct and indirect buffer replacement.
    
    Also tweak ManifestFetcher.

commit ae6e082d2f4ed4304211a9c818afd81e5b8a7388
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:54:51 2014 +0000

    Add a UriDataSource for reading from file or network.

commit 6aeb989327a9cdd1dd2ce9d924083310e825f522
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:53:39 2014 +0000

    Add some MimeTypes that will be useful in the future.

commit f859205438a496c7859233e5880b086984bd58d7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:52:45 2014 +0000

    Let FileDataSource report to a TransferListener.

commit b8415dba599ef681f371f25b2fc9df21ed2bc9e0
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 27 10:51:45 2014 +0000

    Parse all UUID boxes, not just the first one.

commit 4c348d8aa6554c2f27c4d105f471488842154567
Merge: fcd9ec6 1f0d411
Author: ojw28 <olly@google.com>
Date:   Mon Oct 20 16:59:46 2014 +0100

    Merge pull request #83 from google/dev
    
    Pull dev -> dev-l

commit c2c7a75681642989c3facf8958479be73906c740
Merge: 5f0be42 1f0d411
Author: ojw28 <olly@google.com>
Date:   Mon Oct 20 16:59:18 2014 +0100

    Merge pull request #82 from google/dev
    
    Pull dev -> dev-hls

commit 1f0d41188656acb619014dde3f6f01a980f298ae
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 20 16:55:38 2014 +0100

    Make mpd parser more ameanable for extension.

commit 5a8713321914344286527fc8fd8a343074b8b650
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 20 16:54:51 2014 +0100

    Add case for 7.1 audio.

commit 5f0be427a46a6b902091cf46bda2a02deba3453e
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 20 16:53:43 2014 +0100

    Update HlsSampleSource + correctly propagate error from prepare.
    
    Issue: #81

commit 48536118039c46787836287aa7ed9f06710906a1
Author: Oliver Woodman <olly@google.com>
Date:   Mon Oct 20 16:45:56 2014 +0100

    Remove additional "/" from merged URLs.
    
    Issue: #81

commit 60d162df18076b4db3034b8ff944da86d372a2ef
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 15 20:42:26 2014 +0100

    Fix overflow when comparing HLS Segments for long videos.

commit fcd9ec6c23a556cea61ae1c7145471d4e18ed0f7
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 21:55:10 2014 +0100

    Tweak audio renderer to match dev/dev-hls.

commit fd3016cd13805150c0dac32220b328be071c8c51
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:54:30 2014 +0100

    Use setVolume on API level 21 devices, plus minor naming cleanup.

commit d2e480f01b73fd252a64776ec31f95fd816eb11e
Merge: 7794df7 7594310
Author: ojw28 <olly@google.com>
Date:   Thu Oct 9 17:31:36 2014 +0100

    Merge pull request #75 from google/dev
    
    Merge dev -> dev-hls

commit 989bbef24eaab393de6df70608d16c34147e1a33
Merge: be72194 7594310
Author: ojw28 <olly@google.com>
Date:   Thu Oct 9 17:31:05 2014 +0100

    Merge pull request #74 from google/dev
    
    Merge dev -> dev-l

commit 759431048d7c990c2c3ef8a28e73c8e3e843b680
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:27:20 2014 +0100

    Treat "no chunk to load yet" in the same way as finished.
    
    The key change here is that nextLoadPositionUs is set to -1
    if we're not loading but don't have a next chunk ready to
    load. This ensures that "missing chunks" in one stream don't
    prevent chunks in another stream from loading. This occurs
    in SmoothStreaming with TTML subtitles, where the chunks are
    sparse.

commit 027d9eefbdfdfbc74208376cc1834e54a8cd1d93
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:26:01 2014 +0100

    Smoother playback #1.
    
    Propagate elapsedRealtimeUs to the video renderer. This allows
    the renderer to calculate and adjust for the elapsed time since
    the start of the current rendering loop. Typically this is <2ms,
    but there situations where it can go higher (normally when the
    video renderer ends up processing more than 1 output buffer in
    a single loop).
    
    Also made variable naming more consistent throughout the package.

commit 3b4409ae0b1627d2dd238d15e2723c029b1ee181
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:19:14 2014 +0100

    Allow relaxation of TTML validity requirement when parsing subtitles.

commit d4e824634c85f4f2b6b0bfac200a7bbfeddd3aba
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:17:43 2014 +0100

    Throw a checked exception rather than unchecked one.
    
    So that we actually catch it, rather than having the process crash!

commit 43712ce41c659181bf8f7f8b3d133732a5ace9be
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:16:13 2014 +0100

    Cap AudioTrack latencies at 10 seconds and log a warning if too large.

commit ac18ac087bf9d178580112edf386fb56016da786
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 9 17:13:14 2014 +0100

    Fix missing ->IN_SYNC transition.

commit be721943c614ea04a9bbdc316ac3f2d5097b5ab5
Author: Oliver Woodman <olly@google.com>
Date:   Thu Oct 2 12:23:08 2014 +0100

    Fix incorrect condition.

commit 1c92b28b16722b94229438c50ab70f6bee093e88
Merge: f4d3079 dec40bc
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 22:17:32 2014 +0100

    Merge pull request #65 from google/dev
    
    Add file missing from "Improve subtitle handling" change.

commit 7794df7bd834e7b649fc9c2a41788179769bd699
Merge: 422f23a dec40bc
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 22:17:11 2014 +0100

    Merge pull request #64 from google/dev
    
    Add file missing from "Improve subtitle handling" change.

commit dec40bcbd36e84a35367160a008818a9402ac04f
Author: Oliver Woodman <olly@google.com>
Date:   Wed Oct 1 22:14:44 2014 +0100

    Add file missing from "Improve subtitle handling" change.

commit f4d3079bba4178a71311d22b749182a1f08545af
Merge: e99aaa4 8c665e3
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 22:10:16 2014 +0100

    Merge pull request #63 from google/dev
    
    Update dev-l

commit 422f23aceb4695583c5b94b4b17ef003fdd28cda
Merge: d64036c 8c665e3
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 22:09:48 2014 +0100

    Merge pull request #62 from google/dev
    
    Update dev-hls

commit d64036c5ed0d34d3dd3c17cb2ef3101882e2aeab
Author: Andrey Udovenko <andu.nsk@gmail.com>
Date:   Wed Oct 1 16:54:50 2014 -0400

    Add basic HLS support (VOD and Live) with EXT-X-DISCONTINUITY.

commit 8c665e3dd2d0c6dfb9a29e29f8885a9658461455
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 21:27:25 2014 +0100

    Improve subtitle handling.
    
    - Move parsing onto a background thread. This is analogous
      to how frame decoding is pushed to MediaCodec, and should
      prevent possible jank when new subtitle samples are parsed.
      This is more important for out-of-band subtitles, which can
      take a second or two to parse fully.
    
    - Add Useful DataSpec method.

commit ea1ab674a402e446e3d024099897ab4dd9d8c39d
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 21:26:12 2014 +0100

    Strip trailing newline from WebVTT subtitles.

commit 9fc963acc647b9cec4e9b0064c32bd8e6459b915
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 21:25:02 2014 +0100

    Add missing param documentation.

commit 8ea3f9805c495a0deef051aca2909b3533158c34
Author: ojw28 <olly@google.com>
Date:   Wed Oct 1 21:23:50 2014 +0100

    Add class to enable loading of out-of-band subtitle files.

commit e99aaa4d67606183026228da78d258c45e25d8ec
Author: ojw28 <olly@google.com>
Date:   Mon Sep 29 16:59:08 2014 +0100

    Update CaptionStyleCompat for L.

commit 9cfe5fcf44337e3eeee52ba9326cfd3273aa722a
Author: ojw28 <olly@google.com>
Date:   Thu Sep 25 20:29:44 2014 +0100

    API level 21 enhancements for ExoPlayer playbacks.
    
    - Use native frame release timing in video renderer for
      smoother video playback.
    - Avoid unnecessary memory copy steps in audio renderer.
    - Use non-blocking AudioTrack API.

commit dd30632aa1522b47d14b0ad9aaad45c5ccaf4b19
Author: ojw28 <olly@google.com>
Date:   Thu Sep 25 20:15:59 2014 +0100

    SmoothStreaming Live support.
    
    Issue: #12

commit 4adf8f77f49fa1d7f21f3629e68fc94b6c5f9c4a
Author: ojw28 <olly@google.com>
Date:   Thu Sep 25 20:13:40 2014 +0100

    Tweak stop/disable cycles.

commit fc230733aed9ec2f17764da16cff45cb163a364b
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:21:44 2014 +0100

    Ignore blockingSendMessage calls after release.
    
    Previously we'd end up blocking forever in this case, which
    is the worst thing we could do :). We could either throw an
    exception or just print a warning. Printing a warning is more
    in line with what other methods do (Handler prints a "sending
    message to dead thread" warning).

commit da125bb5ccd67c94dcc9c82d0d1754802b222fdf
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:17:36 2014 +0100

    Merge DashLiveMpdFetcher logic into generic ManifestFetcher.
    
    This allows ManifestFetcher to both execute the initial
    manifest load and be plugged into an ExoPlayer ChunkSource,
    where it can be used for repeated manfiest refreshes during
    live playback.

commit f82a331728650ef8f40aa93e00c493f8902a9b58
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:14:16 2014 +0100

    Fix StreamingDrmSessionmanager.
    
    Use locally bound variable instead of class variable.

commit 1ed048dba80f4b3e2e9e8da8aff4578f2e24b0d1
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:13:54 2014 +0100

    Clean up TTML timestamp parsing.

commit 7cb55e23f6877fccdc376b705c16e8eb8b051c36
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:13:31 2014 +0100

    Correctly handle zero length fragmentRun.

commit 4fdd68facf9861dfbdf48d9c86c1a53a361b3f54
Author: Oliver Woodman <olly@google.com>
Date:   Tue Sep 23 11:13:09 2014 +0100

    Fix SmoothStreamingManifest to handle large timestamps.

commit c4e1c3543c6857e897293e9f75aeeddd65830085
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:36:12 2014 +0100

    Enhance Loader API.

commit ce5eea72d2e2331a2d4057bf835b85da53f1a892
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:34:46 2014 +0100

    Auto-infer character encoding.

commit 4344675098bd221271b3135873af1c6aa0c9b631
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:34:05 2014 +0100

    Add WebVTT parser.

commit 525b309764303af559f4c37add838983128a2d6e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:33:23 2014 +0100

    SmoothStreaming - Parse last chunk duration.

commit f52742b10030cbd55d0a3ed3c2f4ccddbdbed740
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:32:21 2014 +0100

    Ensure that we try and call release on a renderer
    
    Do this even if stop/disable fails.

commit 4e96caa623d1ceed484d06e049bc8c27c1e9aea7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:31:17 2014 +0100

    Resolve reference Uris correctly.
    
    Ignore the path of the base Uri if the reference starts with "/".
    Spec - http://tools.ietf.org/html/rfc3986#section-5.2.2

commit bf95592b2c7f1998b676b0fe5c21af3ee9fbe907
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:30:21 2014 +0100

    Remove unused import. Tweak documentation.

commit 8378019839ae4c37264d0bcd9f37f481c28c7a35
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:29:34 2014 +0100

    Fix SmoothStreaming where audio FourCC is missing.

commit b2fc944af14c6d87e6eeb48ef5dc8e4bf6906ee7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Sep 19 18:26:04 2014 +0100

    Remove getLoadedData API from ExoPlayer components.
    
    This API wasn't particularly nice. Best to remove it whilst
    hopefully no-one is using it. Leaving the ReadHead abstraction
    in place, since it might well prove useful in the future.

commit c19faa63cd97ba8f8ce4cb26b05488cafa81c479
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 18:03:11 2014 +0100

    A few tiny bug fixes.

commit ec90eac301ba212b3bd6c3c70e26c66a65138597
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:34:35 2014 +0100

    Support anamorphic video content.

commit 6c3ae7f1757789936294b6ba79586dbf7ca43f31
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:30:39 2014 +0100

    Add SubtitleView and CaptionStyleCompat to ExoPlayer.

commit e4b35e884aec5313f4b2a0f2102fe359433f7cc6
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:26:43 2014 +0100

    Transition ExoPlayer to use longs for ms timestamps.

commit d85f4abb2ba2ff374720445c7999af9a0b473b63
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:23:50 2014 +0100

    Support negative media timestamps (if people *really* want to send us them!).

commit 6b2b6ca4799ef7c8a38c86d8ece60e95d70cdfb1
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:23:13 2014 +0100

    Prevent device provisioning when another device provisioning request is already under process.

commit bc01a4f48d3afd2f612e4f91694c36f4f980c42d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:22:40 2014 +0100

    Relax MediaCodecVideoTrackRenderer.canReconfigureCodec().
    
    Allow non-H264 adaptive decoders.

commit bf5ee6ff230a60a0c7c716c902712d24ea08aaa0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:19:26 2014 +0100

    1. Parse live attributes from SmoothStreaming manifest.
    
    2. Common interface for manifest parsers.
    - This effectively moves the common interface from the Fetcher level
      (i.e. ManifestFetcher) to the Parser level (i.e. ManifestParser).
    - The motivation here is to allow the implementation of components that
      can work with a generic ManifestParser implementation.

commit d4e35358a1737f5e5d7261735cdaf1b89e67c463
Author: Oliver Woodman <olly@google.com>
Date:   Thu Sep 11 16:09:52 2014 +0100

    Fix bad assertion. It doesn't hold for TTML subtitle chunks.

commit 280ccb16305dc085f6009072c624e753f34fb61c
Merge: 79c2f53 6e9ba9b
Author: ojw28 <olly@google.com>
Date:   Mon Sep 8 11:41:56 2014 +0100

    Merge pull request #43 from google/dev
    
    Merge 1.0.13 to master

commit 6e9ba9ba47e842b9074a26ded3e0b079492eb6e8
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:38:20 2014 +0100

    Bump version to 1.0.13.

commit ddd2d004f0031842899e4a5015913ace4f1155b2
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:35:39 2014 +0100

    Make SmoothStreaming manifest more robust.
    - Skips unrecognized elements rather than crashing.
    - FourCC treated as required for video and optional elsewhere,
      as per the SmoothStreaming spec.
    - Only parse initData text when we're actually in the ProtectionHeader element

commit 181eceaf4bbed9697ac38a62a80b0d377d929f2c
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:34:06 2014 +0100

    Fixed MPD date/time parsing issue.

commit 52a300f1fd56d96b6ea2bea8b55cd3b4a6f57832
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:33:12 2014 +0100

    Merge fMP4/H264 and WebM/VP9 DASH implementations.

commit 1ddd5c6e166e97cda0b02b47d11365f1632d11a7
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:23:35 2014 +0100

    Parse some DASH manifest components for DVB LIVE.

commit 5d35698d8faa8a62ec22351f8d801691e05b0f5b
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:21:18 2014 +0100

    Make MediaCodecTrackRenderer discard non-keyframes after seek.
    This means that after a decoder flush, the renderer will avoid
    feeding non-keyframes into the decoder until it has received and
    fed the first keyframe. The decoder has no way of correctly
    decoding non-keyframes that arrive before a keyframe.

commit 5059690a7a1f80f9277d028a128592c4b376164d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:20:11 2014 +0100

    Add https->http redirect sample video.

commit 5b2f0566a74a7e2ac64895822623e4388ffec172
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:18:36 2014 +0100

    Fix potential cause of infinite-spinner-without-failure.
    It looks like for the case of self-contained media segments,
    it's possible to get stuck without failure in the case that
    the load fails having loaded less than the length of the init
    data.

commit 92e320812113825c6a33a6a1fd573599554b9e2d
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:17:21 2014 +0100

    Don't try and read a trackEncryptionBox unless we actually have a saiz atom to parse.
    
    Issue: #35

commit 14048b013a967e5956a67ee5ba314d3bb94ab458
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:15:44 2014 +0100

    Add disclaimer to stop people getting confused by the minSdkVersion.
    
    Issue: #31

commit d465ab70291a1a16d34c4346a511f27b3b57935f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:14:22 2014 +0100

    Call FormatHolder what it really is.
    
    Since we have a Format class as well, it's very confusing that
    FormatHolder actually holds a MediaFormat. I think it's quite
    likely that Format will need promoting into the root package as
    part of the HLS work, which will make this even more confusing
    (although it is possible that for HLS we'll define yet another
    Format class, if it turns out we need significantly different
    fields).
    
    Note - I deliberately avoided renaming the formatHolder
    args/params, because they're not particularly ambiguous and
    because it introduces some ugly line breaks.

commit 3b25928a133e2c6e49bf5636e7bb8561f103e68f
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:11:01 2014 +0100

    Make audio renderer more robust to bad getTimestamp values.

commit a7b88cd6a9bac4de5ef47b23e0d7fb50c570b3a6
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:09:53 2014 +0100

    Tighten isReady() up again.
    - Bring back requirement for the first video frame to be rendered
      before isReady returns true, *unless* we've deduced that the
      upstream source is serving multiple renderers.
    - Ditto for requiring that the audio track has some buffered data.

commit 98a7573812f3031f2d3d2fd4ba2d86d7e2e2c818
Author: Oliver Woodman <olly@google.com>
Date:   Mon Sep 8 11:07:16 2014 +0100

    Minor changes to fix Javadoc.
    
    - cache ref didn't work because it referred to a private variable
      (which isn't documented) from a public interface definition
      (which is). Meaning the Javadoc generator was trying to link
      to documentation that didn't exist.

commit 79c2f535c6f811361c9ffa674de4a5dba2120b85
Merge: 553a1d2 cc04fd1
Author: ojw28 <olly@google.com>
Date:   Thu Aug 14 17:04:34 2014 +0100

    Merge pull request #29 from google/dev
    
    Merge 1.0.12 to master

commit cc04fd1e76b988ac696271501355b71875ec13f0
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 14 16:19:30 2014 +0100

    Fix the build.

commit 5b9c92cb83f0b72ccae7f80ad17ccde9a72c212b
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 14 15:45:33 2014 +0100

    Bump version to 1.0.12.

commit 4e7b333aee2af26376230c054eee0d25c443134d
Author: Oliver Woodman <olly@google.com>
Date:   Thu Aug 14 15:44:09 2014 +0100

    Support chunked requests.

commit af6e144adc5bb4dbf7d2022e56c01baf0879396e
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 12 21:35:13 2014 +0100

    Fix bug introduced supporting self-contained media chunks.
    
    The equals check we perform needs to ignore the max dimensions.
    This tended to work in practice because formats would be the
    same object, but in the case where different format objects
    are used, things can break.

commit 5cfa9adaccedb78834eec094c221fe543d954e22
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 12 14:16:28 2014 +0100

    Add missing C file.

commit 58e9e61688002a7d75d2e3841a1b5d745559a4e3
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 12 14:13:43 2014 +0100

    Remove unnecessary SuppressWarning annotations.

commit e0a29c841ebcfb887c5562e4f12f985799e61b4a
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 12 14:12:05 2014 +0100

    Don't release AudioTrack unless we have to.

commit 4a745b1cd84172e8d58c55ca561dd22ec5d339c3
Author: Oliver Woodman <olly@google.com>
Date:   Tue Aug 12 13:55:38 2014 +0100

    Optimize out quite a few allocations in FragmentedMp4Parser.

commit 005e98fc34f7fc24d00673f930f29b9b21283983
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 11 19:42:04 2014 +0100

    Simplify parsing of encryption data + support SENC boxes.
    
    Issue: #4

commit 8ec88402617cf8ba26803bc5aeacf650956726df
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 11 18:38:39 2014 +0100

    Minor cleanup.
    
    - Add constants class. Currently housing a single lonely variable,
    which is used generally throughout the library, and so no longer
    nicely fits into a specific class.
    
    - Rename a few other constants to add clear units.
    
    - Made minor tweak to ExoPlayer documentation.

commit 25a532656c25d5ce82e0f1b5cddc3e2e9b8f7e73
Author: Oliver Woodman <olly@google.com>
Date:   Mon Aug 11 17:42:08 2014 +0100

    Optimize some CodecCounter inefficiency.
    
    1. Use ints rather than longs.
    2. Remove some counters that dont seem hugely useful.
    3. Replace use of volatile with explicit method calls that
       cause a memory barrier. This is a lot more efficient than
       using volatile because it can be invoked only once per
       doSomeWork.

commit 9a124120ff3f2759fb08c0ff05b45c363cf6d065
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:56:26 2014 +0100

    Changes around renderer readiness and extraction.
    
    - Make MediaCodecTrackRenderer.isReady more permissive.
      This largely fixes #21
    - Bring WebmExtractor closer to FragmentedMp4Extractor.
      The two will probably be placed under a common interface
      fairly soon, which will allow significant code
      deduplication.

commit 41ff1e4071d3e06a3bb7e0e542bae7d5bfc8a60b
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:54:32 2014 +0100

    Add CacheDataSource.Listener.

commit b1992c384895637ed232a93b193ac16a72f48e44
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:53:49 2014 +0100

    Don't call doSomeWork if we're preparing

commit 2a82ff353b8b8a613a874a8d75e39b485a1a68a0
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:53:08 2014 +0100

    Make DefaultWebmExtractor handle cues and format independently.
    
    * Remove concept of being prepared by simply reporting if format
    and/or cues are known.
    * Allow replacement of format and/or cues later in the stream.
    * Initialization and index segments can be parsed independently
    of one another but must be in order due to internal WebM dependencies.
    * Let seekTo() work even when cues are unknown.

commit 32464e6de4f6a79bffc4e634f2dc59dfae3d4a9d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:51:48 2014 +0100

    Fix integer variant of library version.

commit ad26085e5c7a911101fd2415db3b2c45a129a53f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:51:21 2014 +0100

    Finish painful bytes/sec -> bits/sec conversion.

commit 0f57a5f1cf16e9e0abe98fbc025ce03831c371c2
Merge: 553a1d2 ef6be79
Author: Oliver Woodman <olly@google.com>
Date:   Fri Aug 1 15:44:15 2014 +0100

    Merge branch 'dev' of persistent-https://github.com/google/ExoPlayer into dev

commit ef6be7957df4911e2eef6aa92aedd459e78ab42e
Merge: b3277c6 c125996
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 28 14:31:20 2014 +0100

    Merge branch 'dev' of https://github.com/google/ExoPlayer into dev

commit b3277c666b14651023b42eecb3ce5e436d62af33
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 28 14:29:21 2014 +0100

    Add language to Format (+other misc fix).

commit c1259969f80ba2feb51734c9b37dce938b9d2843
Merge: bb5cfd5 e33f5a5
Author: ojw28 <olly@google.com>
Date:   Thu Jul 24 11:23:36 2014 +0100

    Merge pull request #17 from rejasupotaro/dev
    
    Thanks!

commit e33f5a514c79f3b3126a7f12aa668fe3aea61c3b
Author: rejasupotaro <takiguchi0817@gmail.com>
Date:   Tue Jul 15 17:49:46 2014 +0900

    Update README.md

commit fa83b2fa5e9b7e348b763c1f6b1822e8b6cf9340
Author: Kentaro Takiguchi <takiguchi0817@gmail.com>
Date:   Tue Jul 15 17:43:34 2014 +0900

    Add jarRelease task

commit 5a888f3a6de3694e7da4b56b2939d2ae50bedc63
Author: Kentaro Takiguchi <takiguchi0817@gmail.com>
Date:   Tue Jul 15 17:38:50 2014 +0900

    Update tools version

commit 50f69f22dfe35dc65119b03454410f24998755c1
Author: Kentaro Takiguchi <takiguchi0817@gmail.com>
Date:   Tue Jul 15 17:35:26 2014 +0900

    Add gitignore

commit 553a1d2ec15b3d34f76aff720d42de2f663eb55f
Merge: 4228f2c bb5cfd5
Author: ojw28 <olly@google.com>
Date:   Fri Jul 18 14:56:36 2014 +0100

    Merge pull request #16 from google/dev
    
    Add missing files.

commit bb5cfd52c52dfc328c2aef2b54fbb57407331b7e
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 18 14:55:24 2014 +0100

    Add missing files.

commit 4228f2cfa376155aae80ff4561b83ce999697951
Merge: 273fad8 1ed65df
Author: ojw28 <olly@google.com>
Date:   Fri Jul 18 14:43:59 2014 +0100

    Merge pull request #15 from google/dev
    
    Merge 1.0.11 to master

commit 1ed65dfb85797a48ef062552c7708aa3b9143ac6
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 18 14:37:46 2014 +0100

    Add some additional information to README.md.

commit edb5446440e717b7ba96e2dca765689d823ac728
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 18 14:31:55 2014 +0100

    Bump version to 1.0.11.

commit 62d17cabf0d57013593ef9a69c75f649259c33f7
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 18 14:30:30 2014 +0100

    Add support for SegmentTemplate and SegmentList mpds.
    
    Misc Notes:
    - Removed content type filters because some of third parties
      don't set content type.

commit 87461821fe0c4d502c91a449b9578e6c13ca31ad
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 17 11:28:05 2014 +0100

    Define DashSegmentIndex wrapper.
    
    This paves the way for SegmentTemplate and SegmentList based
    mpds, which will implement DashSegmentIndex directly rather than
    parsing an index from the media stream.
    
    - Define DashSegmentIndex.
    - Make use of DashSegmentIndex in chunk sources.
    - Define an implementation of DashSegmentIndex that wraps a SegmentIndex.
    - Add method that will allow Representations to return a DashSegmentIndex
      directly in the future.
    - Add support for non-contiguous index and initialization data in media streams.
      For the Webm case this isn't enabled yet due to extractor limitations.
    - Removed ability to fetch multiple chunks. This functionality does not extend
      properly to SegmentList and SegmentTemplate variants of DASH.

commit d7d14037b811187a8e1ed6b885932ceb68422609
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 15 18:32:37 2014 +0100

    Add utility classes for SegmentTemplate/SegmentList refactor.
    
    A step towards supporting SegmentTemplate style MPDs.

commit 058333565d3f0e25e3a4d96789dd76c3c58a1c31
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 15 13:55:59 2014 +0100

    Use bits/sec instead of bytes/sec for format bandwidth.
    
    Why: This was a bad initial choice. Manifests typically define bandwidth in
    bits/sec. If you divide by 8 then you're throwing away information due to
    rounding. Unfortunately it turns out that SegmentTemplate based manifests
    require you to be able to recall the bitrate exactly (because it's substituted
    in during segment URL construction).
    
    Medium term: We should consider converting all our bandwidth estimation
    over to bits/sec as well.
    
    Note1: Also changed Period id to be a string, to match the mpd spec.
    Note2: Made small optimization in FormatEvaluator to not consider discarding
    the first chunk (durationBeforeThisSegmentUs will always be negative, and even
    in the error case where it's not, removing the first thunk should be an error).

commit 4366afc273d058928b947d3e6795484eb6d7bc19
Author: Oliver Woodman <olly@google.com>
Date:   Tue Jul 15 12:47:08 2014 +0100

    Support self-contained media chunks.
    
    - Support parsing of moov atoms contained within each chunk.
    - Also do a small cleanup to WebM parser.

commit 16fe6a809e97b4b348cb542a095faf49e7cee0fc
Author: Oliver Woodman <olly@google.com>
Date:   Thu Jul 10 12:01:12 2014 +0100

    More flexible mimeType handling in mpd parser.
    
    - Allow the content type of an adaptation set to be inferred
    from the mimeTypes of the contained representations.
    - Ensure the contained mimeTypes are consistent with one
    another, and with the adaptation set.
    
    Ref: Issue #2

commit 686ac2a6f5200572a97c66a6e5e325a4e46a31af
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 9 23:20:23 2014 +0100

    Refactor WebM extractor.

commit 9e16dec2f84be1192c0b1562cdc55d5314d1e8d3
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 9 23:15:58 2014 +0100

    Add support for relative baseUrls in DASH manifests.
    
    Ref: Issue #2

commit 1b957268a6b52e952ece23eb3515678344c8c4d9
Author: Oliver Woodman <olly@google.com>
Date:   Wed Jul 9 15:34:42 2014 +0100

    Add utility methods for inexact ceil/floor binary searches.
    
    This change also fixes issue #5

commit f1213a7656070b23e0684cf6166c2731b4150dae
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 7 17:06:01 2014 +0100

    Fix NaN comparison error.

commit 43b7efa9866f0db1bb08b1e8ff695114e8a1c303
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 7 15:55:01 2014 +0100

    Widen support for fMP4 streams.
    
    - Add support for parsing avc3 boxes.
    - Make workaround for signed sample offsets in trun files always enabled.
    - Generalize remaining workaround into a flag, to make it easy to add additional workarounds going forward without changing the API.
    - Fix DataSourceStream bug where read wouldn't return -1 having fully read segment whose spec length was unbounded.

commit b398c594fa15d56217c5482f0ff9740c757274ec
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jul 7 14:41:45 2014 +0100

    Fix minSdkVersion for demo app

commit e4ae7e08db296d5b65b04d6951009fb16be103d2
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 01:10:52 2014 +0100

    Small javadoc tweak.

commit 47c0bbd6b57bc26b92dbb5ec0fad514db46f7392
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 01:06:20 2014 +0100

    Propagate erors to ChunkSource implementations.
    
    This can help custom ChunkSource implementations to act on
    this information. For example an adaptive implementation may
    choose to blacklist a problematic format if loads of that
    format keep failing.

commit 4fd4c8951865e246b128c987174f7c8ed2297a6d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 01:04:10 2014 +0100

    Refactored ExoPlayer to use String-based format ids.

commit 563b434de26a717b54a7d1b117bbd72763d11f1f
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 00:52:19 2014 +0100

    Keep audio time in sync with arbitrary decodeOnly samples.
    
    AudioTrack time will go out of sync if the decodeOnly flag
    is set of arbitrary samples (as opposed to just those following
    a seek). It's a pretty obscure case and it would be weird for
    anyone to do it, but we should be robust against it anyway.

commit 50b276fe31985b3e6cd631363c8d23cc5616eb81
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 00:47:44 2014 +0100

    Fixed issue in which MediaChunk.seekToStart might not actually seek to the start of the segment.

commit 8cad3873933239a589af8e6dcb5e526f2b012e4d
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 00:45:09 2014 +0100

    Fix ChunkSource disable definition.

commit ea796f916cc1b1045990f63171e96e21a6c29330
Author: Oliver Woodman <olly@google.com>
Date:   Fri Jul 4 00:29:18 2014 +0100

    Enhance Cache/SimpleCache.
    
    1. Fix SimpleCache startReadWrite asymmetry. Allow more concurrency.
    
    - startReadWrite does not have the concept of a read lock. Once
      a cached span is returned, the caller can do whatever it likes
      for as long as it wants to. This allows a read to be performed
      in parallel with a write that starts after it.
    - If there's an ongoing write, startReadWrite will block even if
      the return operation will be a read. So there's a weird asymmetry
      where reads can happen in parallel with writes, but only if the
      reads were started first.
    - This CL removes the asymmetry, by allowing a read to start even
      if the write lock is held.
    - Note that the reader needs to be prepared for the thing it's
      reading to disappear, but this was already the case, and will
      always be the case since the reader will need to handle disk
      read failures anyway.
    
    2. Add isCached method.

commit 273fad845e5d8e3b3d21d2f4c14adc197fe1d844
Author: Oliver Woodman <olly@olly-macbookpro.roam.corp.google.com>
Date:   Tue Jun 24 14:05:59 2014 -0700

    Fix verify error running on JellyBean #2.

commit 1482dde4a98d776a586b0914903177ade1606d94
Author: Oliver Woodman <olly@olly-macbookpro.roam.corp.google.com>
Date:   Tue Jun 24 13:49:19 2014 -0700

    Fix verify error running on JellyBean. Add link to Javadoc

commit 27ab5c83a604407e8649aa4cca1cda0e101b9aab
Author: Oliver Woodman <olly@google.com>
Date:   Mon Jun 16 12:55:31 2014 +0100

    Initial drop. 1.0.10.
